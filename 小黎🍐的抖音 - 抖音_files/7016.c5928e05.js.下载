"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["7016"],{616831:function(e,i,o){o.d(i,{O:function(){return n}}),o(612222);var t=o(611542),l=o(797210);function n(e){let{player:i,isActive:o,slideOptimize:n}=e,[r,d]=(0,t.useState)(!n&&void 0);return(0,t.useEffect)(()=>{if(i&&o){let e=e=>{"boolean"==typeof(null==e?void 0:e.isOn)&&d(e.isOn)};return i.on(l.B.ImmersiveSwitchChange,e),()=>{i.off(l.B.ImmersiveSwitchChange,e)}}!o&&i&&d(!1)},[i,o]),{inImmersive:r}}},84666:function(e,i,o){let t;o.d(i,{Z:function(){return iv}});var l=o("611542"),n=o("609837"),r=o("13351"),d=o("801002"),u=o("445659"),a=o("478838"),v=o("451979");let s=!1,_=async()=>{var e;if(!(0,r.DT)())return 0;if((null===(e=(0,d.fV)())||void 0===e?void 0:e.os)!=="Windows")return(0,n.$n)();{let e=await u.dw("getHardwareDecodeState");return(null==e?void 0:e.code)===a.jK.Success&&(null==e?void 0:e.data)===1?1:0}};var c=o("590921"),f=o("874155");o("347885");var m=o("837305"),p=o("135524"),g=o("819769"),y=o("356789"),h=o("167618"),w=o("616831");let I=e=>{var i,o,t,l,n,r,d,u,a,v,s,_,c,f,m,g,y,h,w,I,b,L,T,S,P,E,C,R,D,k,A,F;return{author_id:null==e?void 0:null===(i=e.authorInfo)||void 0===i?void 0:i.uid,group_id:null==e?void 0:e.awemeId,log_pb:null==e?void 0:e.logPb,compilation_id:null==e?void 0:null===(o=e.mixInfo)||void 0===o?void 0:o.mixId,playlet_id:null==e?void 0:null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId,impressionData:null==e?void 0:e.impressionData,awemeId:null==e?void 0:e.awemeId,vduration:null==e?void 0:null===(l=e.video)||void 0===l?void 0:l.duration,qualityType:(null==e?void 0:null===(d=e.video)||void 0===d?void 0:null===(r=d.bitRateList)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.qualityType)||(null==e?void 0:null===(u=e.video)||void 0===u?void 0:u.qualityType),bitRate:(null==e?void 0:null===(s=e.video)||void 0===s?void 0:null===(v=s.bitRateList)||void 0===v?void 0:null===(a=v[0])||void 0===a?void 0:a.bitRate)||(null==e?void 0:null===(_=e.video)||void 0===_?void 0:_.bitRate),gearName:(null==e?void 0:null===(m=e.video)||void 0===m?void 0:null===(f=m.bitRateList)||void 0===f?void 0:null===(c=f[0])||void 0===c?void 0:c.gearName)||"",bitrate_set:null==e?void 0:null===(y=e.video)||void 0===y?void 0:null===(g=y.bitRateList)||void 0===g?void 0:g.map(e=>null==e?void 0:e.gearName),bitrate_set_dash:null==e?void 0:null===(I=e.video)||void 0===I?void 0:null===(w=I.bitRateList)||void 0===w?void 0:null===(h=w.filter(e=>"dash"===e.format))||void 0===h?void 0:h.map(e=>null==e?void 0:e.gearName),bitrate_has_dash:(null==e?void 0:null===(T=e.video)||void 0===T?void 0:null===(L=T.bitRateList)||void 0===L?void 0:null===(b=L.filter(e=>"dash"===e.format))||void 0===b?void 0:b.length)>0?1:0,quality_bitrate:null==e?void 0:null===(P=e.video)||void 0===P?void 0:null===(S=P.bitRateList)||void 0===S?void 0:S.map(e=>`${null==e?void 0:e.qualityType}:${null==e?void 0:e.bitRate}`),aweme_type:(null==e?void 0:e.isSlides)?p.e.Slides:null==e?void 0:e.awemeType,pic_cnt:null!==(F=null==e?void 0:null===(E=e.images)||void 0===E?void 0:E.length)&&void 0!==F?F:0,trending_topic:null==e?void 0:null===(C=e.hotList)||void 0===C?void 0:C.header,first_tag_name:null==e?void 0:null===(R=e.hotList)||void 0===R?void 0:R.sentence,top:null==e?void 0:null===(D=e.hotList)||void 0===D?void 0:D.rank,awemeRequestTime:null==e?void 0:e.requestTime,is_landscape:(null==e?void 0:null===(k=e.video)||void 0===k?void 0:k.width)>(null==e?void 0:null===(A=e.video)||void 0===A?void 0:A.height)?1:0}},b={videoPlay:["is_click_cover"],playTime:["is_click_cover"],videoPlayFinish:["is_click_cover"]};var L=o("623176"),T=o("124797"),S=o("584510"),P=o("498608"),E=o("459201");function C(e){let{networkSpeed:i}=(null==e?void 0:e.curDefinition)||{};return null!=t?t:i?Math.floor(i/1e3):0}var R=o("532910"),D=o("245086"),k=o("898263"),A=o("802865"),F=o("153385"),M=o("775583"),N=o("895184"),V=o("322903"),O=o("5519"),x=o("730589"),U=o("941656"),q=o("518127");let B=e=>{var i,o;let{player:t,qualityType:l}=e;return(0,v.I)({player:t})?-2:null!==(o=null==t?void 0:null===(i=t.curDefinition)||void 0===i?void 0:i.qualityType)&&void 0!==o?o:l};var Z=o("916665"),G=o("979150"),W=()=>{var e,i,o;return{gpu_vendor:null===(e=(0,G.$)())||void 0===e?void 0:e.vendor,gpu_score:null===(i=(0,G.$)())||void 0===i?void 0:i.score,gpu_info:null===(o=(0,G.$)())||void 0===o?void 0:o.info}},K=o("750258"),z=o("207865");o("510766"),o("312602"),o("612222"),o("482392");let J=(e,i)=>{if("string"!=typeof e||!Array.isArray(i))return{pcdnSrcIndex:-1,isPcdnSource:!1};let o=i.findIndex(e=>!!(e.src&&e.ispcdn));if(o>-1){let t=i[o].src,l=new URL(e.startsWith("https:")?e:`https:${e}`),n=new URL(t.startsWith("https:")?t:`https:${t}`),r=l.host===n.host;return{isPcdnSource:r,pcdnSrcIndex:r?o:-1}}return{pcdnSrcIndex:o,isPcdnSource:!1}};var Q=o("69274"),Y=o("359913"),H=o("693873"),j=o("433075"),$=o("547957"),X=o("375456");let ee=e=>{let{getLogInfo:i,clickFrom:o}=e,{author_id:t,group_id:l,log_pb:n,extraParams:r,isMini:d,trending_topic:u,first_tag_name:a,top:v}=i();return(0,f._)((0,c._)({urlParamList:["previous_page"],author_id:t,group_id:l,log_pb:n,enter_from:(0,D.mo)(),click_from:o,tab_name:R.getTabName()||(0,k.Rs)("tab_name")||"",trending_topic:u,first_tag_name:a,top:v},r),{is_small_window:(0,V.QD)()?"1":"0"})};var ei=o("797210");let eo=e=>{let{getLogInfo:i,isAutoPlay:o,customParams:t}=e,{author_id:l,group_id:n,log_pb:r,extraParams:d}=i();return(0,f._)((0,c._)({urlParamList:["previous_page"],author_id:l,group_id:n,log_pb:r,enter_from:(0,D.yW)(),status:o?"on":"off"},d,t),{is_small_window:(0,V.QD)()?"1":"0"})};o("526789");var et=o("744611"),el=o("715500");let en={click:"click_button",dblclick:"double_click"},er=e=>{let{getLogInfo:i,clickFrom:o}=e,{author_id:t,group_id:l,log_pb:n,extraParams:r}=i();return(0,c._)({urlParamList:["previous_page"],author_id:t,group_id:l,log_pb:n,enter_from:(0,D.yW)(),click_from:o,is_small_window:(0,V.QD)()?"1":"0"},r)};o("842903");var ed=o("675145"),eu=o("546186"),ea=o("619198");let ev={playbacksettingplugin:"hover_speed_cell",immersiveswitchsettingplugin:"hover_pure_mode",volume:"hover_volume",playclaritysettingplugin:"hover_clarity_cell",innerautoplayplugin:"hover_auto_play_mode",watchlaterplugin:"hover_watch_later_add"};var es=o("73834");let e_=(e,i)=>!e||1===i&&e.currentTime>=e.duration?0:i,ec=e=>{if(!e)return 0;try{var i;let o=(e.cumulateTime||0)/1e3,t=(null==e?void 0:null===(i=e.curDefinition)||void 0===i?void 0:i.realBitrate)||0;return(0,es.e)(o*t)}catch(e){return 0}};var ef=o("457293");let em=e=>{let i;switch(e.vtype||""){case"MP4_MSE":i=1;break;case"MP4":i=2;break;case"MP4_1":case"MP4_2":i=3;break;default:i=0}return i};var ep=o("4563");let eg=e=>{let i={};if("string"==typeof e)try{i=JSON.parse(e)}catch(e){i={}}return i},ey=e=>{let i={};try{var o,t,l,n,d;if(!(0,r.DT)()||!(null==e?void 0:e.video)||(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.nodeType)!==1)return{};let u=null==e?void 0:null===(l=e.video)||void 0===l?void 0:null===(t=l.querySelectorAll)||void 0===t?void 0:t.call(l,"source");for(let e=0;e<(null==u?void 0:u.length);e++){let o=u[e];if(null==o?void 0:null===(n=o.execute)||void 0===n?void 0:n.call(o,"isActive","")){let e=null==o?void 0:null===(d=o.execute)||void 0===d?void 0:d.call(o,"getMediaInfo","");i=eg(e);break}}}catch(e){i={}}return i},eh=e=>{var i;let o=null===(i=ey(e))||void 0===i?void 0:i.video_platform_decoder;return void 0===o?-1:o};o("930798");var ew=o("528557");let eI=m.LocalStorageKeys.FrameInfoList,eb=e=>{var i,o,t,l,n,r;let d=null!==(r=(0,ew.$o)(eI))&&void 0!==r?r:[],u=d.filter(e=>0===e.isH265),a=d.filter(e=>1===e.isH265);if(u.length>=5&&(null==e?void 0:null===(i=e.curDefinition)||void 0===i?void 0:i.isH265)===0||a.length>=5&&(null==e?void 0:null===(o=e.curDefinition)||void 0===o?void 0:o.isH265)===1)return;let v={isH265:null==e?void 0:null===(t=e.curDefinition)||void 0===t?void 0:t.isH265,total:null==e?void 0:null===(l=e.videoFrameInfo)||void 0===l?void 0:l.total,rate:null==e?void 0:null===(n=e.videoFrameInfo)||void 0===n?void 0:n.droppedRate};d.push(v),(0,ew.qQ)(eI,d)};var eL=o("856363"),eT=o("805766");let eS=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}},eP=e=>{var i,o;return(null==e?void 0:null===(i=e.video)||void 0===i?void 0:i.seeking)?"seeking":(null==e?void 0:null===(o=e.video)||void 0===o?void 0:o.ended)?"end":"playing"},eE=(e,i)=>{var o,t,l,n;let{group_id:r,vduration:d,bitRate:u,qualityType:a,extraParams:v,bitrate_set:s,quality_bitrate:_,action_type:f,aweme_type:m,video_play_mode:p,is_landscape:g,bitrate_set_client:y}=i,{bitrate:h}=(null==e?void 0:e.curDefinition)||{};return(0,c._)({group_id:r,vduration:d,bitrate_set:s,quality_bitrate:_,video_play_mode:p,is_landscape:g,aweme_type:m,action_type:"click"===f?"click":"up"===f?"down":"up",video_quality:B({player:e,qualityType:a}),video_bitrate:h||u,audio_bitrate:(null===(t=e.curDefinition)||void 0===t?void 0:null===(o=t.audioDefinition)||void 0===o?void 0:o.bitrate)||0,real_bitrate:(null===(l=e.curDefinition)||void 0===l?void 0:l.realBitrate)||0,feature_id:null===(n=e.curDefinition)||void 0===n?void 0:n.featureId,bitrate_set_client:y},v)},eC=e=>{let i=g.Le.getConfig(g.gI.PagingType),o=g.Le.getConfig(g.gI.FastSlowSlide);return{paging_type:e?null==i?void 0:i.current:null==i?void 0:i.pre,slide_speed:o}},eR=(e,i)=>{var o,t,l,n,r,d,u,a,s,_,c,f,m,p,y,h,w,I;let{codecFormat:b,isH265:L,videoFormat:T}=(0,q.Z)({awemeInfo:i,player:e}),{currentLowDecodeCount:S=0,decoderMode:P=0,lowdecodeVV:E=0,vv:R=0,fps:D=0,currentState:k=0}=(null===(t=e.video)||void 0===t?void 0:null===(o=t.getStats)||void 0===o?void 0:o.call(t))||{},A=null===(l=e.videoFrameInfo)||void 0===l?void 0:l.dropped,F=null===(n=e.videoFrameInfo)||void 0===n?void 0:n.droppedRate;try{if(null==e?void 0:null===(y=e.plugins)||void 0===y?void 0:null===(p=y.srplugin)||void 0===p?void 0:null===(m=p.getStat())||void 0===m?void 0:m.usingSR){let{totalFrames:i,droppedRate:o}=(null==e?void 0:null===(w=e.plugins)||void 0===w?void 0:null===(h=w.srplugin)||void 0===h?void 0:h.getStat())||{};F=o,A=Math.floor(i*o)}}catch(e){}return{duration:e.cumulateTime?e.cumulateTime:0,player_version:e.version,codec_format:b,video_format:T,video_fps:null==e?void 0:null===(r=e.curDefinition)||void 0===r?void 0:r.fps,is_over_rect:(null==e?void 0:null===(d=e.config)||void 0===d?void 0:d.isOverRect)?1:0,internet_speed:C(e),drop_frame:null===(u=e.videoFrameInfo)||void 0===u?void 0:u.dropped,drop_frame_sr:A,total_play_frame:null===(a=e.videoFrameInfo)||void 0===a?void 0:a.total,drop_frame_rate_sr:F,drop_frame_rate:null===(s=e.videoFrameInfo)||void 0===s?void 0:s.droppedRate,drop_frame_duration:null===(_=e.videoFrameInfo)||void 0===_?void 0:_.droppedDuration,end_status:eP(e),is_bytevc1:L,current_low_decode_count:S,decoder_mode:P,h265_failure_rate:10===R?E/R:-1,decode_fps:null!==(I=null===(c=e.video)||void 0===c?void 0:c.decodeFps)&&void 0!==I?I:0,is_supported_265:(0,v.VV)()?1:0,is_265_degrade_client:(0,v.ad)({player:e}),is_265_degrade_web:(0,v.OS)({player:e}),frame_rate:D,current_state:k,is_ad:(0,M.Jt)(i)?1:0,is_compilation:(null==i?void 0:null===(f=i.mixInfo)||void 0===f?void 0:f.mixId)?1:0,is_full_screen:(0,N.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,is_visible:"visible"===document.visibilityState?1:0}};var eD=o("945363"),ek=o("897082"),eA=o("160551"),eF=o("715208"),eM=o("845789");o("677546"),o("227470");var eN=o("67108"),eV=o.n(eN),eO=o("690352"),ex=o("106834"),eU=o("648140"),eq=o("887955"),eB=o("403465"),eZ=o("713017"),eG=o("687701"),eW=o("79811"),eK=o("703774"),ez=o("564123"),eJ=o("309854"),eQ=o("556728");let eY=(e,i,o)=>{try{var t,l,n,r;if(!o||!e)return;let{list:d="",store:u}=null!==(l=g.Le.getConfig(g.gI.WatchLater))&&void 0!==l?l:{};if(!(o.watchLaterInfo||d.includes(o.awemeId)))return;let a=Math.floor((null!==(n=null==e?void 0:e.currentTime)&&void 0!==n?n:0)*1e3),v=null!==(r=null==o?void 0:null===(t=o.playProgress)||void 0===t?void 0:t.watch_times)&&void 0!==r?r:0,s=i||(null==e?void 0:e.ended),_=v||s?Math.max(v,1):0;if((0,eQ.ih)({actionType:2,itemToPlayinfo:{[o.awemeId]:{play_duration:Math.floor((null==e?void 0:e.currentTime)*1e3),loop_status:_}}}),!u||"object"!=typeof u)return;u[o.awemeId]={progress:a,loop:_},y.emit(y.EVENT.WatchLaterProgressChange)}catch(e){eJ.oe.event.info({name:eJ.Mo.PlayTimeBack,report:{code:null==e?void 0:e.code,message:null==e?void 0:e.message}})}},eH=(e,i)=>{let o=(0,H.I)();if(o.playtime.used=!0,o.playtime.data){let e=o.playtime.data;return o.playtime.data=null,e}return e?e:i.paused?0:Date.now()};var ej=o("22502"),e$=o("261135"),eX=o.n(e$),e0=o("374078"),e1=o("397795");o("969642");let e5={1:{width:1920,height:1080},2:{width:1280,height:720},3:{width:1024,height:576},4:{width:1024,height:576}},e2=e=>{var i,o,t,l,n,r,d;if(null===(i=g.Le.getConfig(g.gI.AbtestData))||void 0===i?void 0:i.longtask)return -1;let u={definition:0},a=null==e?void 0:e.video,v=null==a?void 0:a.getBoundingClientRect(),s=(null==a?void 0:a.videoWidth)/(null==a?void 0:a.videoHeight),_=null==e?void 0:null===(l=e.config)||void 0===l?void 0:null===(t=l.definition)||void 0===t?void 0:null===(o=t.list)||void 0===o?void 0:o.sort((e,i)=>(null==i?void 0:i.definition)-(null==e?void 0:e.definition));if(_&&s>1)for(let e=0;e<_.length;e++){let i=null!==(r=_[e].definition)&&void 0!==r?r:1,o=e5[i];if(!((null==v?void 0:v.width)>(null==o?void 0:o.width))||!((null==v?void 0:v.height)>(null==o?void 0:o.height))){u.definition=i;break}}if(_&&s<1)for(let e=0;e<_.length;e++){let i=null!==(d=_[e].definition)&&void 0!==d?d:1,o=e5[i];if(!((null==v?void 0:v.width)>(null==o?void 0:o.height))||!((null==v?void 0:v.height)>(null==o?void 0:o.width))){u.definition=i;break}}return(null==e?void 0:null===(n=e.curDefinition)||void 0===n?void 0:n.definition)<u.definition?1:0};o("101060");let e6=(e,i,o)=>{try{var t,l;let n=(null==e?void 0:null===(l=e.plugins)||void 0===l?void 0:null===(t=l.mp4encryptplayer)||void 0===t?void 0:t.states)||[],r=n.find(e=>(null==e?void 0:e.state)===i),d=n.find(e=>(null==e?void 0:e.state)===o),u=(null==d?void 0:d.t2)-(null==r?void 0:r.t2);return Number.isFinite(u)?u:0}catch(e){return 0}},e3=e=>{let{player:i,isChangeVideoSrc:o=!1,slideStartTime:t=!1,data:l,loadedDataTime:n}=e,r={};try{var d,u,a,v,s,_,f,m,p;o?r.is_slide_loadeddata=-1:t&&(r.is_slide_loadeddata=t-n>0?1:0,r.slide_to_loadeddata=n-t);let e=null==i?void 0:null===(_=i.plugins)||void 0===_?void 0:null===(s=_.mp4encryptplayer)||void 0===s?void 0:null===(v=s.states)||void 0===v?void 0:null===(a=v.find)||void 0===a?void 0:null===(u=a.call(v,e=>"PRELOAD_ERROR"===e.state))||void 0===u?void 0:null===(d=u.data)||void 0===d?void 0:d.t,g=null==i?void 0:null===(p=i.plugins)||void 0===p?void 0:null===(m=p.mp4encryptplayer)||void 0===m?void 0:null===(f=m.states)||void 0===f?void 0:f.map(e=>(e.data=void 0,e));return i.stages=(0,c._)({playerinit_to_loadstart:null==l?void 0:l.startCostTime,playerinit_to_loadeddata:null==l?void 0:l.loadedCostTime,playerstart_to_mp4metaready:e6(i,"PLAYER_START_INIT","MP4_META_READY"),mp4init_to_mp4metaready:e6(i,"MP4_INIT","MP4_META_READY"),playerinitfinally_to_loadstart:e6(i,"PLAY_INIT_FINALLY","LOAD_START"),mp4metaready_to_loadstart:e6(i,"MP4_META_READY","LOAD_START"),loadstart_to_mseopen:e6(i,"LOAD_START","MSE_OPEN"),mseinitsegok_to_appenddataok:e6(i,"MSE_INITSEG_OK","APPEND_DATA_OK"),mseinitseg_to_mseinitsegok:e6(i,"MSE_INITSEG","MSE_INITSEG_OK"),appenddataok_to_loadeddata:e6(i,"APPEND_DATA_OK","LOADED_DATA"),mseopen_to_loadeddata:e6(i,"MSE_OPEN","LOADED_DATA"),mse_all_phrase:JSON.stringify(g),preload_error:e},r),i.stages||{}}catch(e){return{}}},e4=e=>{try{var i;if(!window)return;(null===(i=window.videoPlayQuality)||void 0===i?void 0:i.length)?window.videoPlayQuality.push(e):window.videoPlayQuality=[e]}catch(e){}},e7=()=>{let e=g.Le.getConfig(g.gI.ModalStartOpenTime);return e?(g.Le.setConfig(g.gI.ModalStartOpenTime,0),Date.now()-e):-1},e8=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).length>0?{ufq_src:e.src,ufq_enh:e.enh,ufq_trans:e.trans,ufq_playback_ori:e.playback.ori,ufq_playback_srv1:e.playback.srv1}:{}},e9=(e,i)=>{let o=g.Le.getConfig(g.gI.BitrateResult);if(o&&o[e]&&i){var t;let l=null!==(t=o[e].find(e=>e.selectRate===i))&&void 0!==t?t:{};return{bitrateselector_type:l.type,bitrateselector_mode:l.mode,bitrateselector_speed:l.speed,bitrateselector_ori_rate_cnt:l.oriRateCnt,bitrateselector_filter_rate_cnt:l.filterRateCnt,bitrateselector_is_ori_max_rate:l.isOriMaxRate,bitrateselector_is_filter_max_rate_adapt:l.isFilterMaxRateAdapt,bitrateselector_adapt_tar_rate:l.adaptTarRate,bitrateselector_select_rate:l.selectRate,bitrateselector_bitrate_set:l.bitrateSetSelector,bitrateselector_quality:l.qualityBitrateSelector}}return{}};var ie=o("944845"),ii=o("584713"),io=e=>{let{player:i,awemeInfo:o,isActive:t,getLogInfo:n}=e;(0,l.useEffect)(()=>{var e,l,r;if(!i||!o||!t||(null===(e=g.Le.getConfig(g.gI.AbtestData))||void 0===e?void 0:e.longtask))return;let{group_id:d,vduration:u,extraParams:a,bitrate_set:v,bitrate_set_client:s,quality_bitrate:_,action_type:p,aweme_type:y,video_play_mode:h,is_landscape:w}=n(),{codecFormat:I,isH265:b,videoFormat:L}=(0,q.Z)({awemeInfo:o,player:i}),{battery:T={},memory:S={}}=(0,eB.J)();A.Z.sendLog("videoInit",(0,f._)((0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,Z.Z)(i)),{group_id:d,bitrate_set:v,bitrate_set_client:s,vduration:u,player_version:i.version,video_format:L,codec_format:I,is_mute:(null==i?void 0:i.muted)?"1":"0",player_volume:null==i?void 0:i.volume,local_mute:(0,ew.$o)(m.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,ew.$o)(m.LocalStorageKeys.PLAYER_VOLUME),is_video_support:Number((0,ej.k)().isSupport),quality_bitrate:_,action_type:p,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(l=o.mixInfo)||void 0===l?void 0:l.mixId)?1:0,aweme_type:y,is_bytevc1:b,video_play_mode:h,is_landscape:w,play_order:(0,z.G)()}),a),{buffer_duration:(0,ef.U)(i,null==o?void 0:null===(r=o.video)||void 0===r?void 0:r.duration),battery_charging:T.charging,battery_level:T.level,memory_js_heap_size_limit:S.jsHeapSizeLimit,memory_free_js_heap_size:S.freeJSHeapSize,memory_free_level:S.freeLevel,memory_used_js_heap_size:S.usedJSHeapSize}))},[i,o,t])},it=o("659361");let il=0,ir=e=>{var i,o,t,l,n,r,d,u,a;if(!Array.isArray(null==e?void 0:null===(n=e.plugins)||void 0===n?void 0:null===(l=n.mp4encryptplayer)||void 0===l?void 0:null===(t=l.mp4)||void 0===t?void 0:null===(o=t.meta)||void 0===o?void 0:null===(i=o.moov)||void 0===i?void 0:i.trak))return{mediaTime:0};let v=e.plugins.mp4encryptplayer.mp4.meta.moov.trak.find(e=>{var i,o;return(null===(o=e.mdia)||void 0===o?void 0:null===(i=o.hdlr)||void 0===i?void 0:i.handlerType)==="vide"});if(!v)return{mediaTime:0};let s=null===(d=v.edts)||void 0===d?void 0:null===(r=d.elst)||void 0===r?void 0:r.entries,_=null===(a=v.mdia)||void 0===a?void 0:null===(u=a.mdhd)||void 0===u?void 0:u.timescale;if(Array.isArray(s)&&s.length>0&&_>0){let e=s[0].media_time;if(e>0)return{mediaTime:e/_}}return{mediaTime:0}},id=["MP4_MSE","DASH","MP4_MSE_SOFT"],iu=e=>{let{isNext:i,player:o,awemeInfo:t,getLogInfo:n,isActive:r}=e;(0,l.useEffect)(()=>{if(i&&o&&t){let e=(0,D.yW)(),i=()=>{var i,l,r,d,u,a;if(id.includes(o.vtype.toUpperCase()))return;let{awemeId:v}=t,s=(null===(i=o.curDefinition)||void 0===i?void 0:i.bitrate)||0,_=(0,ef.U)(o,null==t?void 0:null===(l=t.video)||void 0===l?void 0:l.duration),c=(0,es.e)(_*s),f=em(o),{qualityType:m}=n(),p={user_unique_id:null===(r=(0,g.Es)())||void 0===r?void 0:r.user_unique_id,enter_from:e,group_id:v,preload_size:c,preload_time:_,video_bitrate:s,audio_bitrate:(null===(u=o.curDefinition)||void 0===u?void 0:null===(d=u.audioDefinition)||void 0===d?void 0:d.bitrate)||0,real_bitrate:(null===(a=o.curDefinition)||void 0===a?void 0:a.realBitrate)||0,video_quality:B({player:o,qualityType:m}),data_player_type:f,vtype:o.vtype,duration:o.duration,type:0};A.Z.sendLog("prfLastPreloadDataSize",p,!1)};return o.on(ei.B.BeforeDestroy,i),window.addEventListener("beforeunload",i),()=>{o.off(ei.B.BeforeDestroy,i),window.removeEventListener("beforeunload",i)}}},[o,t,i])};var ia=o("401310");let iv=e=>{let{awemeInfo:i,isActive:o,isNext:d,isPrev:u,logParams:a,userInfo:G,isClientMiniWin:eg,isFirst:ey,index:eI}=e||{},eP=(0,ia.n)(),{getH265DegradeReportFlag:eN,getSupportHwClientFlag:eQ}=function(e){let{awemeInfo:i,isActive:o}=e,t=(0,l.useRef)(!1),r=(0,l.useRef)((0,n.$n)());t.current=(0,l.useMemo)(()=>!s&&!(0,v.Cu)()&&(s=!0,!0),[i]),(0,l.useEffect)(()=>{(async()=>{o&&(r.current=await _())})()},[i,o]);let d=(0,l.useCallback)(()=>r.current,[]);return{getH265DegradeReportFlag:(0,l.useCallback)(()=>t.current?1:0,[]),getSupportHwClientFlag:d}}({awemeInfo:i,isActive:o}),{getActionType:e$,getIsChangingVideoSrc:e5}=function(e){let{awemeInfo:i}=e,{isNext:o,isPrev:t,isActive:n}=e,r=(0,l.useRef)(null),d=(0,l.useRef)("click"),u=(0,l.useRef)(!1),a=(0,l.useRef)();o?d.current="down":t&&(d.current="up"),r.current&&(null==i?void 0:i.awemeId)&&(null==i?void 0:i.awemeId)!==r.current&&(n&&a.current?(u.current=!0,d.current="click"):u.current=!1),a.current=n,r.current=null==i?void 0:i.awemeId;let v=(0,l.useCallback)(()=>d.current,[]);return{getActionType:v,getIsChangingVideoSrc:(0,l.useCallback)(()=>u.current,[])}}({awemeInfo:i,isNext:d,isPrev:u,isActive:o}),{getLogInfo:e6}=function(e){let{awemeInfo:i,player:o,isActive:t}=e,{isFirst:n,isClientMiniWin:r,specialParams:d,logParams:u}=e,{getActionType:a}=e,{inImmersive:v}=(0,w.O)({player:o,isActive:t});(0,l.useEffect)(()=>{if(!o||!t)return;let e=e=>{let i=(null==e?void 0:e.from)||(null==e?void 0:e.clickFrom),o="auto";["click_button","scroll"].includes(i)?o="manual":"auto"===i&&(o="auto_play_open"),g.Le.setConfig(g.gI.VideoPlayMethod,o)},i=y.listen(y.EVENT.reportPlayNext,e),l=y.listen(y.EVENT.reportPlayPrev,e);return()=>{l(),i()}},[o,i,t]);let s=(0,l.useRef)(null);return s.current=(0,l.useMemo)(()=>{var e,t,l,s,_,p,y,w,b,L,T,S;let P=(0,f._)((0,c._)({item_duration_ms:(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)||0},u),{log_pb:null==i?void 0:i.logPb});Object.keys(d).forEach(e=>{d[e].forEach(e=>{delete P[e]})});let E={is_click_cover:n?1:0,action_type:a(),is_pure:v?"1":"0",extraParams:P,isMini:r,video_play_mode:(null===(t=h.Q.getItem({sKey:m.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===t?void 0:t.type)===1?"landscape":"all",is_insert_wallpaper:(null===(l=g.Le.getConfig(g.gI.WallPaperIds))||void 0===l?void 0:l.includes(null==i?void 0:i.awemeId))?1:0,latest_group_id:null===(s=g.Le.getConfig(g.gI.FeedLatestViewedAweme))||void 0===s?void 0:s.awemeId,if_first_big_card:u.if_first_big_card||0};return(0,f._)((0,c._)({},I(i),E),{isFromNextAutoPlay:(null==o?void 0:null===(y=o.plugins)||void 0===y?void 0:null===(p=y.autoplaysettingplugin)||void 0===p?void 0:null===(_=p.config)||void 0===_?void 0:_.nextAutoPlay)||(null==o?void 0:null===(L=o.plugins)||void 0===L?void 0:null===(b=L.searchautoplaysettingplugin)||void 0===b?void 0:null===(w=b.config)||void 0===w?void 0:w.nextAutoPlay),bitrate_set_client:null==o?void 0:null===(T=o.definitionList)||void 0===T?void 0:T.map(e=>null==e?void 0:e.gearName),quality_bitrate_client:null==o?void 0:null===(S=o.definitionList)||void 0===S?void 0:S.map(e=>`${e.qualityType}:${e.bitrate}`)})},[i,u,n,r,v,o,a]),{getLogInfo:(0,l.useCallback)(()=>s.current,[])}}({awemeInfo:i,player:eP,specialParams:b,logParams:a,isFirst:ey,isClientMiniWin:eg,isActive:o,getActionType:e$}),{getSpecialParams:id}=function(e){let{getLogInfo:i}=e,o=i(),t=(0,l.useRef)(null);return t.current=(0,l.useMemo)(()=>{let e={};return Object.keys(b).forEach(i=>{let t={};b[i].forEach(e=>{t[e]=o[e]}),e[i]=t}),e},[o]),{getSpecialParams:(0,l.useCallback)(()=>t.current,[])}}({getLogInfo:e6});return!function(e){let{player:i}=e;(0,l.useEffect)(()=>{if(!i)return;let e=()=>{i.emit("focus")};return!i.paused&&e(),i.on("autoplay_started",e),()=>{i.off("autoplay_started",e)}},[i]),(0,l.useEffect)(()=>{if(!i)return;let e=()=>{y.emit(y.EVENT.videoPlay)},o=()=>{y.emit(y.EVENT.videoPlayPrevent)};return!i.paused&&(e(),o()),i.on(L.AUTOPLAY_PREVENTED,o),i.on(L.AUTOPLAY_STARTED,e),()=>{i.off(L.AUTOPLAY_PREVENTED,o),i.off(L.AUTOPLAY_STARTED,e)}},[i])}({player:eP}),!function(e){let{player:i,awemeInfo:o,userInfo:t,isActive:n}=e,r=(0,l.useRef)(!1),d=(0,l.useRef)({});(0,l.useEffect)(()=>{if(o&&n)return()=>{let{awemeId:e,progress:i}=d.current;g.Le.setConfig(g.gI.PreAwemeSeenStatus,{id:e,seen:i>=95?1:0})}},[n,o]),(0,l.useEffect)(()=>{r.current=!1},[o.awemeId]),(0,l.useEffect)(()=>{if(!i||!o)return;let e=()=>{var e,i,l;if(!r.current){if(r.current=!0,(null==t?void 0:t.isLogin)&&(null==o?void 0:o.awemeId)){let{id:e,seen:i}=g.Le.getConfig(g.gI.PreAwemeSeenStatus)||{};(0,S.w6)({awemeId:null==o?void 0:o.awemeId,authorId:null==o?void 0:null===(l=o.authorInfo)||void 0===l?void 0:l.uid,preItemId:e,preItemSeen:i})}(0,E.N)(o),(null===(i=g.Le.getConfig(g.gI.UnLookVideos))||void 0===i?void 0:null===(e=i[null==o?void 0:o.awemeId])||void 0===e?void 0:e.status)===T.Pl.UnLook&&((0,P.uR)({awemeIds:o.awemeId}),(0,E.O)({awemeInfo:o}))}},l=e=>{let t=0;if((null==o?void 0:o.awemeType)===p.e.Note){var l;let e=null==i?void 0:null===(l=i.getPlugin)||void 0===l?void 0:l.call(i,"pictureProgress");t=100*((null==e?void 0:e.percent)||0)}else t=(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration)*100;let n=null==o?void 0:o.awemeId,{awemeId:r,progress:u}=d.current;if(n!==r||!(t<u))d.current={awemeId:n,progress:t}};i.on("timeupdate",l);let n=g.Le.getConfig(g.gI.AbtestData);return(null==n?void 0:n.deferNetwork)?(i.once("timeupdate",e),()=>{i.off("timeupdate",l),i.off("timeupdate",e)}):(i.on("autoplay_started",e),()=>{i.off("timeupdate",l),i.off("autoplay_started",e)})},[i,o,t,n])}({player:eP,awemeInfo:i,userInfo:G,isActive:o}),!function(e){let{player:i}=e;(0,l.useEffect)(()=>{if(!i)return;let e=e=>{let{speed:i}=e;t=i,g.Le.setConfig(g.gI.NetworkSpeed,i)};return i.on("download_speed_change",e),()=>{i.off("download_speed_change",e)}},[i])}({player:eP}),!function(e){let{awemeInfo:i,player:o,isActive:t,isNext:d,index:u}=e,{getIsChangingVideoSrc:a,getLogInfo:s,getH265DegradeReportFlag:_,getSpecialParams:p,getReportNetworkSpeed:w,getSupportHwClientFlag:I}=e;!function(e){let{player:i,awemeInfo:o}=e,{getLogInfo:t}=e;(0,l.useEffect)(()=>{if(!i)return;let e=!1,o=()=>{e=!0},l=()=>{e=!1},n=1,r=setInterval(()=>{if(!e)return;let{author_id:i,group_id:o,log_pb:l,compilation_id:r,extraParams:d,trending_topic:u,first_tag_name:a,top:v}=t(),s=0;try{var _,f,m;let e=null===(m=window)||void 0===m?void 0:null===(f=m.__LIVE_PLAYER__)||void 0===f?void 0:null===(_=f.getPlayer)||void 0===_?void 0:_.call(f);s=(null==e?void 0:e.paused)===!1&&(null==e?void 0:e.muted)===!1?1:0}catch(e){}A.Z.sendLog("videoPlayCheckPoint",(0,c._)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:l,enter_from:(0,D.mo)(),compilation_id:r,order:n++,tab_name:R.getTabName()||(0,k.Rs)("tab_name")||"",trending_topic:u,first_tag_name:a,top:v,is_live_playing:s},d))},6e4);return!i.paused&&o(),i.on("autoplay_started",o),i.on("play",o),i.on("pause",l),()=>{r&&clearInterval(r),i.off("autoplay_started",o),i.off("play",o),i.off("pause",l)}},[i,o,t])}({awemeInfo:i,player:o,getLogInfo:s}),!function(e){let{awemeInfo:i,player:o,isActive:t}=e,{getLogInfo:r,getH265DegradeReportFlag:d,getSupportHwClientFlag:u}=e,a=(0,l.useRef)(null),s=(0,l.useRef)(null),_=(0,Y.l)(),m=()=>{var e,o;let t=g.Le.getConfig(g.gI.LynxInfo);return(!(0,F.r)()||(null==t?void 0:t.swiperIndex)===void 0||!((null==t?void 0:null===(e=t.awemeList)||void 0===e?void 0:e.length)>0)||(null===(o=t.awemeList[null==t?void 0:t.swiperIndex])||void 0===o?void 0:o.aweme_id)!==i.awemeId)&&(g.Le.setConfig(g.gI.hasReportVideoRequest,!0),!0)};(0,l.useEffect)(()=>{var e,l;let p;(a.current&&(null===(e=a.current)||void 0===e?void 0:e.awemeId)!==(null==i?void 0:i.awemeId)||!t||!i)&&(a.current=null,s.current=null);let y=o,h=()=>{a.current&&!a.current.isReport&&(a.current.isReport=!0,m()&&!function(e){var i,o,t,l,r,d,u,a,s,_,m,p,y,h,w,I;let{group_id:b,compilation_id:L="",is_csr:T=1,extraParams:S={},host:P,vtype:E,player:C,awemeInfo:R,h265DeGrade:D,logInfo:k,supportHw:F,fetchExpired:G}=e,{aweme_type:Q,video_play_mode:Y,is_landscape:H,action_type:j}=k,{isH265:$,videoFormat:X}=(0,q.Z)({awemeInfo:R,player:C}),{isPcdnSource:ee}=J(P,null==C?void 0:null===(i=C.config)||void 0===i?void 0:i.url),ei=(null==R?void 0:null===(l=R.video)||void 0===l?void 0:null===(t=l.bitRateList)||void 0===t?void 0:null===(o=t[0])||void 0===o?void 0:o.qualityType)||(null==R?void 0:null===(r=R.video)||void 0===r?void 0:r.qualityType);(0,z.v)();let eo=(0,z.G)(),et=null==C?void 0:null===(a=C.config)||void 0===a?void 0:null===(u=a.url)||void 0===u?void 0:null===(d=u[0])||void 0===d?void 0:d.src,el=(0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"],group_id:b,compilation_id:L,is_csr:T,host:P,vtype:E,aweme_type:Q,action_type:j,is_ad:(0,M.Jt)(R)?1:0,is_compilation:(null==R?void 0:null===(s=R.mixInfo)||void 0===s?void 0:s.mixId)?1:0,is_full_screen:(0,N.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,video_format:X,video_play_mode:Y,is_landscape:H,is_bytevc1:$,play_order:eo,is_supported_265:(0,v.VV)()?1:0,is_265_degrade:D,is_support_hw:F,v_like_cnt:null==R?void 0:null===(_=R.stats)||void 0===_?void 0:_.diggCount,v_share_cnt:null==R?void 0:null===(m=R.stats)||void 0===m?void 0:m.shareCount,v_comment_cnt:null==R?void 0:null===(p=R.stats)||void 0===p?void 0:p.commentCount,v_download_cnt:null==R?void 0:null===(y=R.stats)||void 0===y?void 0:y.downloadCount,v_forward_cnt:null==R?void 0:null===(h=R.stats)||void 0===h?void 0:h.forwardCount,vduration:null==R?void 0:null===(w=R.video)||void 0===w?void 0:w.duration,is_have_pcdn:Number(ee),is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,player_version:null==C?void 0:C.version,feature_id:null==C?void 0:null===(I=C.curDefinition)||void 0===I?void 0:I.featureId,video_quality:B({player:C,qualityType:ei}),if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0"},(0,Z.Z)(C),W(),S),{fetch_expired:G,active_expired:et?(0,O.q)(et):-1}),(0,K.m)({player:C}),(0,K.B)({player:C}));(0,x.Vw)(U.H.video_request,(0,f._)((0,c._)({},el),{aweme_info:R})),A.Z.sendLog("videoRequest",el)}(a.current.data))},w=()=>{y&&(y.loadstart=1,y.firstfame=0),t&&h()},I=()=>{if(s.current&&!s.current.isReport){var e,i;!function(e){var i,o;let{group_id:t,compilation_id:l="",vduration:r,duration:d,is_csr:u=1,is_success:a,videoQuality:s="",extraParams:_={},host:f,vtype:m,player:p,awemeInfo:g,logInfo:y,h265DeGrade:h,supportHw:w}=e,{aweme_type:I,video_play_mode:b,is_landscape:L,action_type:T}=y,{isH265:S,videoFormat:P}=(0,q.Z)({awemeInfo:g,player:p}),E=(0,z.G)();A.Z.sendLog("videoRequestResponse",(0,c._)({urlParamList:["previous_page","tab_name"],group_id:t,compilation_id:l,vduration:r,video_quality:s,video_format:P,is_success:a,duration:d,is_csr:u,host:f,vtype:m,action_type:T,is_ad:(0,M.Jt)(g)?1:0,is_compilation:(null==g?void 0:null===(i=g.mixInfo)||void 0===i?void 0:i.mixId)?1:0,aweme_type:I,video_play_mode:b,is_landscape:L,is_bytevc1:S,play_order:E,is_supported_265:(0,v.VV)()?1:0,is_265_degrade:h,is_support_hw:w,is_hw:(null==p?void 0:null===(o=p.config)||void 0===o?void 0:o.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,player_version:null==p?void 0:p.version},(0,Z.Z)(p),W(),_))}(s.current.data),(null===(i=s.current)||void 0===i?void 0:null===(e=i.data)||void 0===e?void 0:e.is_success)&&(s.current.isReport=!0)}},b=()=>{y&&(y.loadeddata=1),t&&I()},T=e=>{var o,t;let l=r(),{awemeId:n,vduration:v,compilation_id:s,qualityType:_,extraParams:c}=l,f=(null===(o=a.current)||void 0===o?void 0:o.duration)?new Date().getTime()-a.current.duration:0;return{awemeId:i.awemeId,isReport:!1,data:{group_id:n,extraParams:c,duration:f,vduration:v,compilation_id:s,videoQuality:(null==y?void 0:null===(t=y.curDefinition)||void 0===t?void 0:t.qualityType)||_,is_success:e,logInfo:l,player:y,awemeInfo:i,h265DeGrade:d(),supportHw:u(),vtype:null==y?void 0:y.vtype}}},S=e=>{let o=r(),{awemeId:t,extraParams:l}=o;return{awemeId:i.awemeId,duration:new Date().getTime(),data:{group_id:t,extraParams:l,logInfo:o,player:y,awemeInfo:i,h265DeGrade:d(),supportHw:u(),host:null==e?void 0:e.host,fetchExpired:null==i?void 0:i.fetchExpired,vtype:null==y?void 0:y.vtype},isReport:!1}},P=e=>{var i,o;if("loadstart"===e.eventType){let o=g.Le.getConfig(g.gI.SearchVideoPlayMethod);o&&g.Le.setConfig(g.gI.VideoPlayMethod,o),a.current?!(null===(i=s.current)||void 0===i?void 0:i.isReport)&&(s.current=T(0),a.current.duration=new Date().getTime(),b()):(a.current=S(e),w())}else"loadeddata"===e.eventType&&(!(null===(o=s.current)||void 0===o?void 0:o.isReport)&&(s.current=T(1)),b())};i&&(w(),b(),y&&y.on(L.XGLOG,P));let E=e=>{if(i){var o,t;(y=e).dyLogStat&&y.dyLogStat.loadstart&&((null===(o=y.dyLogStat.loadstart.awemeInfo)||void 0===o?void 0:o.awemeId)===i.awemeId&&P(y.dyLogStat.loadstart.data),y.dyLogStat.loadstart=null);let l=(0,H.I)();l.loadstart.used=!0,l.loadstart.data&&(P(l.loadstart.data),l.loadstart.data=null),y.dyLogStat&&y.dyLogStat.loadeddata&&((null===(t=y.dyLogStat.loadeddata.awemeInfo)||void 0===t?void 0:t.awemeId)===i.awemeId&&P(y.dyLogStat.loadeddata.data),y.dyLogStat.loadeddata=null),l.loadeddata.used=!0,l.loadeddata.data&&(P(l.loadeddata.data),l.loadstart.data=null),y.on(L.XGLOG,P),p=()=>{y.off(L.XGLOG,P)}}};return null==_||null===(l=_.on)||void 0===l||l.call(_,Q.V.PlayerCreated,E),()=>{var e;null==p||p(),null==y||y.off(L.XGLOG,P),null==_||null===(e=_.off)||void 0===e||e.call(_,Q.V.PlayerCreated,E)}},[i,t])}({awemeInfo:i,player:o,isActive:t,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:I}),!function(e){let{player:i,getLogInfo:o}=e,t=(0,l.useRef)(-1);(0,l.useEffect)(()=>{if(!i)return;let e=null,l=i=>{"change_volume"===i.action&&(-1===t.current&&(t.current=i.volume),e&&clearTimeout(e),e=setTimeout(()=>{var e,l;if(!(null===(e=i.props)||void 0===e?void 0:e.volume))return;let{to:n}=null===(l=i.props)||void 0===l?void 0:l.volume,r=t.current;t.current=-1;let d=r>n,{extraParams:u}=o();A.Z.sendLog("prfVolumeChange",(0,f._)((0,c._)({down:d?1:0,enter_from:(0,D.vM)(),group_id:null==u?void 0:u.from_group_id},u,null==i?void 0:i.logData),{is_mute:0===n?"1":"0",pre_player_volume:r,cur_player_volume:n,play_order:(0,z.G)(),is_small_window:(0,V.QD)()?"1":"0",listen_device:(0,D.nj)()}))},500))};return i.on("user_action",l),()=>{i.off("user_action",l)}},[i])}({player:o,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t,getH265DegradeReportFlag:r,getLogInfo:d,getSupportHwClientFlag:u}=e,a=(0,l.useRef)(0),v=(0,l.useRef)(0),s=(0,l.useRef)(0);(0,l.useEffect)(()=>{var e;if(!i||!t)return;let l=!1,_="",m="",p=-1,y=0,h=(null===(e=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,w=e=>{_=null==e?void 0:e.host,m=null==e?void 0:e.vtype,i.removedBuffer=0},I=()=>{y=1},b=e=>{"firstFrame"===e.eventType&&(p=Date.now())},T=()=>{a.current++},S=e=>{let{eventType:i,pluginName:o,action:t,currentTime:l,prePlayTime:n}=e||{},r=()=>{v.current++,s.current=n-l};if("progress"===o)switch(i){case"click":r();break;case"drag":"dragend"===t&&r()}else t===ei.B.DyUserSeek&&r()},P=()=>{var e,t,g,w,I,b,L,T,S,P,E,C,R,k,F,M,N,O,x,U,q,B,G,J,Q,Y,H,j,$;if(l)return;l=!0;let X=(null==o?void 0:null===(g=o.video)||void 0===g?void 0:null===(t=g.playApi)||void 0===t?void 0:null===(e=t.startsWith)||void 0===e?void 0:e.call(t,"blob"))?1:0,{preloadTime:ee,preloadSize:ei,startBuffer:eo,audioDuration:et,minDuration:el}=(0,ep.P)(i),en=null==o?void 0:null===(I=o.video)||void 0===I?void 0:null===(w=I.bitRateList)||void 0===w?void 0:w.find(e=>{var o;return e.qualityType===(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.qualityType)}),er=(0,f._)((0,c._)({preload_time:(0,es.N)(ee),preload_time_audio:et,preload_time_min:el,preload_size:ei||0,preload_type:(0,eL.me)(i)?2:1,hit_preload:(0,eL.qJ)(i),is_mute:(null==i?void 0:i.muted)?"1":"0",player_volume:null==i?void 0:i.volume,video_mute:(null==i?void 0:null===(b=i.video)||void 0===b?void 0:b.muted)?"1":"0",video_volume:null==i?void 0:null===(L=i.video)||void 0===L?void 0:L.volume,equalize_state:null!==(B=null==i?void 0:i.equalizeVolumeState)&&void 0!==B?B:0,lufs:null!==(G=null==i?void 0:i.lufs)&&void 0!==G?G:eT.G7,use_new_mammon_worklet_processor:null!==(J=null==i?void 0:i.useMammonWorkletProcessorV3)&&void 0!==J&&J,use_new_mammon_worklet_processor_with_wasm:null!==(Q=null==i?void 0:i.useMammonWorkletProcessorV3Wasm)&&void 0!==Q&&Q,hit_new_mammon_worklet_processor:null!==(Y=null==i?void 0:i.hitMammonWorkletProcessorV3)&&void 0!==Y&&Y,volume_balance_longtest_consume_time:null!==(H=null==i?void 0:null===(T=i.effectNodeConsumeTime)||void 0===T?void 0:T.longest)&&void 0!==H?H:-2,volume_balance_shortest_consume_time:null!==(j=null==i?void 0:null===(S=i.effectNodeConsumeTime)||void 0===S?void 0:S.shortest)&&void 0!==j?j:-2,is_in_modal:h},(()=>{try{var e,t,l,n;let{cdn:r,pcdn:d}=(null==i?void 0:i.bandwidth)||(null==i?void 0:i.bandWidth)||{},{size:u}=r||{},{size:_,trace_id:c,uri:f,fid:m}=d||{},p=s.current,g=v.current,y=e_(i,a.current),h=(null==i?void 0:null===(e=i.curDefinition)||void 0===e?void 0:e.realBitrate)||(null==i?void 0:null===(t=i.curDefinition)||void 0===t?void 0:t.bitrate)||0,w=(0,ef.U)(i,null==o?void 0:null===(l=o.video)||void 0===l?void 0:l.duration),I=(0,es.e)(w*h),b=em(i);if(X){let e=i.duration?(y>0?i.duration:i.currentTime)/i.duration:0;I*=e}let{pcdn_tracker_request_cnt:L,pcdn_tracker_failed_cnt:T,pcdn_download_request_cnt:S,pcdn_download_failed_cnt:P}=(null==i?void 0:i.pcdnReq)||(null==i?void 0:null===(n=i.config)||void 0===n?void 0:n.pcdnReq)||{};return{fid:m,trace_id:c,uri:f,pcdn_size_video:_||0,cdn_size_video:u||0,play_size:ec(i),loop_cnt:y,seek_cnt:g,seek_time:(0,es.N)(p),play_leave_position:(0,es.N)(i.currentTime),play_duration_clean:(0,es.N)(y>0?i.duration:i.currentTime),cache_size:Math.max(I,ec(i)),cache_duration:(0,es.N)(w),data_player_type:b,pcdn_tracker_request_cnt:L,pcdn_tracker_failed_cnt:T,pcdn_download_request_cnt:S,pcdn_download_failed_cnt:P}}catch(e){return{}}})(),(0,K.m)({player:i}),(0,K.B)({player:i}),(null==i?void 0:i.superResolution)||{},(null==en?void 0:en.mvmaf)||{},eS(null==en?void 0:en.ufq)),{urlParamList:["previous_page","tab_name"],is_success:y||(null==i?void 0:null===(P=i.video)||void 0===P?void 0:P.readyState)>=2?1:0,host:_,vtype:m,play_order:(0,z.G)(),is_265_degrade:r(),from_start_duration:-1===p?-1:Date.now()-p,is_support_hw:u(),is_hw:(null==i?void 0:null===(E=i.config)||void 0===E?void 0:E.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:eh(i),is_gear_down:null!==($=null==i?void 0:null===(C=i.curDefinition)||void 0===C?void 0:C.orgDefinition)&&void 0!==$?$:0,definition:null==i?void 0:null===(R=i.curDefinition)||void 0===R?void 0:R.definition,start_buffer:eo,if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",buffer:(null==i?void 0:null===(k=i.bufferedPoint)||void 0===k?void 0:k.end)-(null==i?void 0:null===(F=i.bufferedPoint)||void 0===F?void 0:F.start)||0,has_down_definition:i.definitionList.find(e=>{var o;return(null==e?void 0:e.definition)===(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.definition)+1})?1:0});eb(i);let ed=(null==i?void 0:null===(M=i.getSwitchDefinationInfos)||void 0===M?void 0:M.call(i))||{};A.Z.sendLog("videoPlayEnd",(0,f._)((0,c._)((0,f._)((0,c._)({},eC(!1),er,(0,Z.Z)(i),W(),eR(i,o),eE(i,d()),(null==i?void 0:i.stages)||{},(null==i?void 0:null===(N=i.stat)||void 0===N?void 0:N.stage)||{},(null==i?void 0:i.startTimelines)||{},(null==i?void 0:i.pcdnVVStat)||{},(null==i?void 0:null===(U=i.plugins)||void 0===U?void 0:null===(x=U.srplugin)||void 0===x?void 0:null===(O=x.getStat)||void 0===O?void 0:O.call(x))||{},(null==i?void 0:i.novv)||{}),{firstframed:i.firstfame?1:0,is_cache_video:X,listen_device:(0,D.nj)(),abr_upper_count:i.upperCount||0,abr_lower_count:i.lowerCount||0,abr_total_count:i.abrCount||0,abr_change_count:i.abrChangeCount||0,abr_change_upper_count:i.upperAbrChangeCount||0,abr_change_lower_count:i.lowerAbrChangeCount||0,block_play_type:i.blockPlayType,pause_type:i.pauseType,end_config_autoplay:i.config.autoplay,end_autoplay:i.autoplay}),ed),{clarity_now:null==i?void 0:null===(q=i.getClarity)||void 0===q?void 0:q.call(i,!1)}),!1),i.removedBuffer=0,i.preplayStat=0,i.prepauseStat=0,i.superResolution={},i.upperCount=0,i.lowerCount=0,i.abrCount=0,i.abrChangeCount=0,i.upperAbrChangeCount=0,i.lowerAbrChangeCount=0,i.bandWidth=null,i.blockPlayType="",i.pauseType=""},E=e=>{i.removedBuffer+=e.removeDur};return i.on("removeBuffer",E),i.on(L.XGLOG,b),i.on(L.PLAY,w),i.once(L.LOADED_DATA,I),i.on(L.USER_ACTION,S),i.on(L.ENDED,T),i.on("prepause",P),window.addEventListener("beforeunload",P),i.once(ei.B.BeforeDestroy,P),()=>{P(),i.off(ei.B.BeforeDestroy,P),i.off(L.XGLOG,b),i.off(L.PLAY,w),i.off(L.LOADED_DATA,I),i.off(L.USER_ACTION,S),i.off(L.ENDED,T),i.off("removeBuffer",E),window.removeEventListener("beforeunload",P)}},[i,o,t]),(0,l.useEffect)(()=>{a.current=0,v.current=0,s.current=0},[o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:I}),!function(e){let{player:i,awemeInfo:o,isActive:t,index:r}=e,{getLogInfo:d,getSpecialParams:u}=e;(0,l.useEffect)(()=>{if(!i||!t||(null==o?void 0:o.awemeType)===68)return;let e=u(),l=()=>{var t,l,u,a,v,s,_,p,y,w,I;let{author_id:b,group_id:L,log_pb:T,compilation_id:S,playlet_id:P,extraParams:E,aweme_type:C,isMini:F,trending_topic:O,first_tag_name:x,top:U,is_click_cover:B,is_pure:Z,is_insert_wallpaper:G,if_first_big_card:W}=d(),{isH265:K}=(0,q.Z)({awemeInfo:o,player:i}),z=!1,J=(0,eD.G)(m.SessionStorageKeys.CacheRecommendActiveAwemeID);J&&J===L&&(z=!0),A.Z.sendLog("videoPlayFinish",(0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({is_click_cover:B,urlParamList:["trending_topic","previous_page"],enter_from:(0,D.mo)(),enter_from_merge:(0,ek.z)(""),enter_method:(0,k.Rs)("enter_method")||"",author_id:b,group_id:L,log_pb:T,compilation_id:S,playlet_id:P,is_insert_wallpaper:G,tab_name:R.getTabName()||(0,k.Rs)("tab_name")||"",is_full_screen:(0,N.r)()?"1":"0",is_full_webscreen:X.s.getIsPageFullscreen()?"1":"0",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:(null===(t=g.Le.getConfig(g.gI.IsCollapseAuthorCard))||void 0===t?void 0:t.isCollapseAuthorCard)?0:1,from_follow_list:(null===(l=g.Le.getConfig(g.gI.FromFollowList))||void 0===l?void 0:l.tag)?"1":"0",is_mute:(null==i?void 0:i.muted)?"1":"0"},(0,eA.t)()),{mute_type:null===(u=g.Le.getConfig(g.gI.ForceMuted))||void 0===u?void 0:u.currentMuteType,is_force:(null===(a=g.Le.getConfig(g.gI.ForceMuted))||void 0===a?void 0:a.currentMuteType)==="browser"?"1":"0",aweme_type:C,trending_topic:O,first_tag_name:x,top:U,is_pure:Z,from_push:h.Q.getItem({sKey:m.CookieKeys.FromClientPush})?1:0}),E,e.videoPlayFinish||{}),{is_bytevc1:K,video_time:(0,eF.n)(null==o?void 0:null===(v=o.video)||void 0===v?void 0:v.duration),is_from_ad:(0,M.Jt)(o)?1:0,auto_play_mode:null===(s=g.Le.getConfig(g.gI.InnerAutoPlay))||void 0===s?void 0:s.mode,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,video_play_method:null!==(y=g.Le.getConfig(g.gI.VideoPlayMethod))&&void 0!==y?y:"auto",is_small_window:(0,V.QD)()?"1":"0",is_hw_client:eh(i),from_click_group_id:null!==(w=null==o?void 0:o.insertId)&&void 0!==w?w:"",url_source:null!==(I=null==o?void 0:null===(_=o.continationInfo)||void 0===_?void 0:_.urlSource)&&void 0!==I?I:["recommend","personal_homepage"].includes((0,D.vM)())?h.Q.getItem({sKey:m.CookieKeys.UrlSourceForBrowserPlugin}):"",is_cache_video:z,is_first_video:!r,column_type:(null==E?void 0:E.column_type)||(null==E?void 0:null===(p=E.search_params)||void 0===p?void 0:p.column_type),if_first_big_card:W}),(0,eM.Wc)()));let Q=g.Le.getConfig(g.gI.SearchVideoPlayMethod);Q&&g.Le.setConfig(g.gI.VideoPlayMethod,Q)},a=(0,H.I)();return a.playfinish.used=!0,a.playfinish.data?(l(),a.playfinish.data=null):i.once(L.ENDED,l),()=>{i.off(L.ENDED,l)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getSpecialParams:p,index:u}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{A.Z.sendLog("clickPreviousVideo",ee({getLogInfo:n,clickFrom:e})),"click_button"===e&&(0,$.V)()},l=e=>{A.Z.sendLog("clickNextVideo",ee({getLogInfo:n,clickFrom:e})),"click_button"===e&&(0,$.V)()},r=()=>{var e;if(!t||!o||o&&(null==o?void 0:o.cell_room))return!1;let l=X.s.getPlayerScene(i.playerId),n=X.s.getPlayersByScene(T.lT.Modal)||[],r=null===(e=g.Le.getConfig(g.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal,d=(0,j.OB)();return(l===T.lT.Modal||!(n.length>0))&&(!r||i.playerId===d)&&!0},d=y.listen(y.EVENT.reportPlayNext,e=>{let{clickFrom:i}=e;if(!!r())l(i)}),u=y.listen(y.EVENT.reportPlayPrev,i=>{let{clickFrom:o}=i;if(!!r())e(o)});return()=>{d(),u()}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{if((null==e?void 0:e.isInnerReset)===!0)return;let i=null==e?void 0:e.isOn;A.Z.sendLog("clickAutoPlay",eo({getLogInfo:n,isAutoPlay:i,customParams:"object"==typeof(null==e?void 0:e.logParams)?null==e?void 0:e.logParams:{}}))};return i.on(ei.B.AutoPlaySwitchChange,e),()=>{i.off(ei.B.AutoPlaySwitchChange,e)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{if((0,M.Jt)(o)){let i=(0,M.Rx)(o);(0,et.E)("full_screen",{tag:(0,el.f)(),value:i.creative_id,log_extra:i.log_extra,player_form:e})}},l=i=>{A.Z.sendLog("enterFullScreen",er({getLogInfo:n,clickFrom:i})),e("browser_full")},r=i=>{A.Z.sendLog("exitFullScreen",(0,f._)((0,c._)({},er({getLogInfo:n,clickFrom:i})),{stack_trace:"click_button"!==i?Error().stack:""})),e("normal")},d=(e,i)=>{e?r(i):l(i)},u=e=>{if("switch_fullscreen"===e.action){let i=en[e.eventType]||"keyboard";d(e.fullscreen||"system"===e.eventType,i)}},a=e=>{d(!e.fullscreen,"hot_key")};return i.on(L.USER_ACTION,u),i.on(ei.B.SwitchFullScreen,a),()=>{i.off(L.USER_ACTION,u),i.off(ei.B.SwitchFullScreen,a)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n,getSpecialParams:r}=e,d=(0,l.useRef)(0),u=(0,l.useRef)(!0);u.current=(0,ex.U)(),(0,l.useEffect)(()=>{if(i&&t){var e,l,a,v,s;let t=0,_=0,p=eH(d.current,i),w=0,I=0,b=0,S=!1,P=!1,E=!1,{vtype:C}=i,F="init",O="init",x=(null===(e=g.Le.getConfig(g.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)||X.s.getPlayerScene(null==i?void 0:i.playerId)===T.lT.Modal,U=null!==(s=null===(l=window)||void 0===l?void 0:l.ROUTE_PARAMS)&&void 0!==s?s:(0,eO.parse)(null===(v=window)||void 0===v?void 0:null===(a=v.location)||void 0===a?void 0:a.search),B=R.getTabName()||(null==U?void 0:U.tab_name)||(0,k.Rs)("tab_name")||"",Z={startTime:0,acc:0},G=e=>{if(p=Date.now(),P=!1,x&&!(null==i?void 0:i.paused)&&(S=!1),!!(null==i?void 0:i.video))_=i.currentTime,C=i.vtype,F="string"==typeof e?e:"play"},J=()=>{x&&(S=!1),I=1},Q=(e,l)=>{var d,u,a,v,s,L,T,S,P,E,R,x,U,G,J,Q,Y,H,j,$,ee,ei,eo,et,el,en,er,ed,ea,ev;let{author_id:e_,group_id:ec,playlet_id:ef,log_pb:em,isFromNextAutoPlay:ep,vduration:eg,extraParams:ey,pic_cnt:eh,aweme_type:ew,isMini:eI,trending_topic:eb,first_tag_name:eL,top:eT,is_click_cover:eS,is_pure:eP,is_insert_wallpaper:eE,is_landscape:eC,bitRate:eR,latest_group_id:eD,if_first_big_card:eN}=n(),eV=r(),eO=Date.now()-p,ex=i.cumulateTime-w;if(g.Le.getConfig(g.gI.IsSearchOuterAsync)){g.Le.setConfig(g.gI.IsSearchOuterAsync,!1);return}if(!p||!i||!ec||Date.now()-b<100||eO<100)return;let eK=0;((0,k.Rs)("modeFrom")===eU.MODE_FROM||(0,k.Rs)("modeFrom")===eU.MODE_FROM_SEARCH)&&(eK=1);let ez=(0,k.Rs)("if_from_widget"),eJ=t>0?p-t:0;t=0;let{isH265:eQ}=(0,q.Z)({awemeInfo:o,player:i}),eH=(null==i?void 0:null===(d=i.curDefinition)||void 0===d?void 0:d.bitrate)||eR||0,ej=(null===(u=i.curDefinition)||void 0===u?void 0:u.realBitrate)||0,e$=(0,es.e)(eO/1e3*ej),eX=(null==i?void 0:null===(s=i.plugins)||void 0===s?void 0:null===(v=s.autoplaysettingplugin)||void 0===v?void 0:null===(a=v.config)||void 0===a?void 0:a.nextAutoPlay)||(null==i?void 0:null===(S=i.plugins)||void 0===S?void 0:null===(T=S.searchautoplaysettingplugin)||void 0===T?void 0:null===(L=T.config)||void 0===L?void 0:L.nextAutoPlay),e0=String(void 0===eX?null!=ep?ep:0:eX),{memory:e1={},battery:e5}=(0,eB.J)()||{};Z.startTime&&(Z.acc+=Date.now()-Z.startTime,Z.startTime=0);let e2=(null===(P=window.EXPOSE_DATA)||void 0===P?void 0:P.landingPage)==="discover",e6=e2&&(null===(E=window.EXPOSE_DATA)||void 0===E?void 0:E.landingMode)!==2,e3=null!==(er=null!==(en=(0,k.Rs)("enter_method"))&&void 0!==en?en:e2?"default_landing":void 0)&&void 0!==er?er:"other";A.Z.sendLog("playTime",(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({is_click_cover:eS,is_insert_wallpaper:eE,is_visible:String(e?1:0),duration:eO,duration_moving:ex,duration_waiting:Z.acc,report_reason:l,duration_error:eJ,play_time:p,from_percent:1e3*_/eg,to_percent:(null==i?void 0:i.currentTime)*1e3/eg,percentage:(null==i?void 0:i.currentTime)*1e3/eg,is_auto_play:e0,urlParamList:["trending_topic","previous_page"],enter_method:(0,k.Rs)("enter_method")||"",tab_name:B,author_id:e_,enter_from:(0,D.mo)(),enter_from_merge:(0,ek.z)(""),group_id:ec,playlet_id:ef,log_pb:em,video_detail_enter_from:(0,ek.z)("web_link"),speed:String(null==i?void 0:i.playbackRate),is_loop:String(I),is_full_screen:(0,N.r)()?"1":"0",is_full_webscreen:X.s.getIsPageFullscreen()?"1":"0",is_author_card_expand:(null===(R=g.Le.getConfig(g.gI.IsCollapseAuthorCard))||void 0===R?void 0:R.isCollapseAuthorCard)?0:1,from_follow_list:(null===(x=g.Le.getConfig(g.gI.FromFollowList))||void 0===x?void 0:x.tag)?"1":"0",from_push:h.Q.getItem({sKey:m.CookieKeys.FromClientPush})?1:0,is_mute:(null==i?void 0:i.muted)?"1":"0"},(0,eA.t)()),{mute_type:null===(U=g.Le.getConfig(g.gI.ForceMuted))||void 0===U?void 0:U.currentMuteType,from_academy:eK,pic_cnt:eh,aweme_type:ew,trending_topic:eb,first_tag_name:eL,top:eT,is_pure:eP,is_from_ad:(0,M.Jt)(o)?1:0,is_bytevc1:eQ,browser_height:(0,eZ.P6)(),browser_width:(0,eZ.wi)(),browser_ratio:(0,eZ.P6)()/(0,eZ.wi)(),is_landscape:eC,stage:`${F}-${O}`}),W(),ey,eV.playTime||{}),{is_force:(null===(G=g.Le.getConfig(g.gI.ForceMuted))||void 0===G?void 0:G.currentMuteType)==="browser"?"1":"0",video_time:(0,eF.n)(null==o?void 0:null===(J=o.video)||void 0===J?void 0:J.duration),auto_play_mode:null===(Q=g.Le.getConfig(g.gI.InnerAutoPlay))||void 0===Q?void 0:Q.mode,seo_vids:eG.t("seo_vids")||"",video_play_method:null!==(ed=g.Le.getConfig(g.gI.VideoPlayMethod))&&void 0!==ed?ed:"auto",if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",is_top:(0,V.k)()?"1":"0",url_source:null!==(ea=null==o?void 0:null===(Y=o.continationInfo)||void 0===Y?void 0:Y.urlSource)&&void 0!==ea?ea:["recommend","personal_homepage"].includes((0,D.vM)())?h.Q.getItem({sKey:m.CookieKeys.UrlSourceForBrowserPlugin}):"",play_order:(0,z.G)(),play_size:e$,video_bitrate:eH,audio_bitrate:(null===(j=i.curDefinition)||void 0===j?void 0:null===(H=j.audioDefinition)||void 0===H?void 0:H.bitrate)||0,real_bitrate:ej,latest_group_id:eD,vduration:eg,vtype:C}),(null==i?void 0:null===(ei=i.plugins)||void 0===ei?void 0:null===(ee=ei.srplugin)||void 0===ee?void 0:null===($=ee.getStat)||void 0===$?void 0:$.call(ee))||{}),{video_quality:null==i?void 0:null===(eo=i.curDefinition)||void 0===eo?void 0:eo.qualityType,gear_name:null==i?void 0:null===(et=i.curDefinition)||void 0===et?void 0:et.gearName,if_continued_play:g.Le.getConfig(g.gI.PlayRecord)?(0,eu.v)(o.awemeId)?1:0:"",rate:g.Le.getConfig(g.gI.PlayRecord)?(null==i?void 0:i.currentTime)/(null==i?void 0:i.duration):""}),(0,K.m)({player:i}),(0,K.B)({player:i}),(0,eq.K)(o)),{if_from_widget:ez?1:0,from_click_group_id:null!==(ev=null==o?void 0:o.insertId)&&void 0!==ev?ev:"",column_type:(null==ey?void 0:ey.column_type)||(null==ey?void 0:null===(el=ey.search_params)||void 0===el?void 0:el.column_type),memory_js_heap_size_limit:e1.jsHeapSizeLimit,memory_used_js_heap_size:e1.usedJSHeapSize,memory_total_js_heap_size:e1.totalJSHeapSize,memory_free_js_heap_size:e1.freeJSHeapSize,memory_free_level:e1.freeLevel,memory_use_level:e1.usedLevel,battery_charging:null==e5?void 0:e5.charging,battery_level:null==e5?void 0:e5.level,if_first_big_card:eN,sidebar_status:(0,eW.GE)()}),(0,eM.Wc)()),{is_recommend:"default_landing"===e3?Number(e6):void 0}),!1),p=Date.now(),b=Date.now(),w=i.cumulateTime,C=i.vtype,F="reported",eY(i,I,o),Z.acc=0,"discover"===(0,D.mo)()&&y.emit(y.EVENT.selectDuration,{duration:eO})},Y=eV()(()=>{if(!E&&(null==i?!void 0:!i.paused))O="seeking",Q("visible"===document.visibilityState,"seeking")},500,{leading:!0,trailing:!1}),H=eV()(()=>{G("seeked"),E=!1},500,{leading:!1,trailing:!0}),j=e=>{O=e,Q("visible"===document.visibilityState,e),G(e)},$=()=>{if(x&&(S=!0),!u.current&&!(0,eK.Nr)(location.pathname)){P=!0;return}j("pause"),P=!0},ee=()=>{x&&!S&&j("destroy")},ei=e=>{i.video&&!(null==i?void 0:i.paused)&&(O="changetab",Q(e,"page_visibility_change"),G("changetab"))},eo=()=>{if(!P&&!i.isSeeking)j("degrade")},et=()=>{if(!i.paused)j("changeurl"),E=!0},el=()=>{t=Date.now()},en=()=>{if(!i.isSeeking&&!i.paused)Z.startTime=Date.now()},er=()=>{Z.startTime&&(Z.acc+=Date.now()-Z.startTime,Z.startTime=0)};return i.on("error",el),i.on("seeked",H),i.on("play",G),i.on("replay",J),i.on("seeking",Y),i.on("pause",$),i.on("degrade",eo),i.on("urlchange",et),(0,ez.vP)(ei),i.once("destroy",ee),i.on(L.WAITING,en),i.on(L.PLAYING,er),i.on(L.TIME_UPDATE,er),()=>{i.off("error",el),i.off("seeked",H),i.off("seeking",Y),i.off("play",G),i.off("replay",J),i.off("pause",$),i.off("destroy",ee),i.off("degrade",eo),i.off("urlchange",et),i.off(L.WAITING,en),i.off(L.PLAYING,er),i.off(L.TIME_UPDATE,er),!P&&j("unmount"),(0,ez.xC)(ei),d.current=0}}},[o,i,t]),(0,l.useEffect)(()=>{if(i){let e=()=>{i.errored=0,!d.current&&(d.current=Date.now())};return i.on(L.PLAY,e),()=>{i.off(L.PLAY,e)}}},[i])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{let{author_id:i,group_id:o,log_pb:t,extraParams:l}=n();A.Z.sendLog("clickVideoSpeed",(0,c._)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:t,enter_from:(0,D.yW)(),speed:Number(e).toFixed(2),is_small_window:(0,V.QD)()?"1":"0"},l))};return i.on(ei.B.PlayRatioChange,e),()=>{i.off(ei.B.PlayRatioChange,e)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{if((null==e?void 0:e.action)==="switch_play_pause"){var i;let o="pauseVideo";o=e.paused?"startVideo":"pauseVideo";let t=null!==(i=e.pluginName)&&void 0!==i?i:"click",{extraParams:l,isMini:r}=n();A.Z.sendLog(o,(0,f._)((0,c._)({enter_from:(0,D.yW)(),click_method:t},l),{is_small_window:(0,V.QD)()?"1":"0"}))}};return i.on(L.USER_ACTION,e),()=>{i.off(L.USER_ACTION,e)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{if((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume"){let o=!1,{extraParams:t}=n();(null==e?void 0:e.action)==="change_muted"?(A.Z.sendLog("clickVolume",(0,c._)({enter_from:(0,D.yW)(),status:e.muted?"1":"0"},t)),(null==e?void 0:e.muted)&&(o=!0)):e.volume>0&&(o=!0),o&&(null==i||i.emit("openVolume"))}};return i.on(L.USER_ACTION,e),()=>{i.off(L.USER_ACTION,e)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e;(0,l.useRef)({isDrag:!1}),(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{var t,l,n,r;return{position:(null==i?void 0:i.currentTime)||0,enter_from:(0,D.mo)(),enter_from_merge:(0,D.vM)(),tab_name:R.getTabName()||(0,k.Rs)("tab_name")||"",rate:e.percent,action:e.currentTime>e.prePlayTime?"forward":"rewind",is_small_window:(0,V.QD)()?"1":"0",is_chapter_bar:(null==o?void 0:null===(t=o.chapterInfo)||void 0===t?void 0:t.status)?1:0,chapter_index:(0,ed.P)({awemeInfo:o,currentTime:e.currentTime}),group_id:null==o?void 0:o.awemeId,author_id:null==o?void 0:null===(l=o.authorInfo)||void 0===l?void 0:l.uid,vduration:null==o?void 0:null===(n=o.video)||void 0===n?void 0:n.duration,if_continued_play:g.Le.getConfig(g.gI.PlayRecord)?(0,eu.v)(o.awemeId)?1:0:"",before_rate:1e3*e.prePlayTime/(null==o?void 0:null===(r=o.video)||void 0===r?void 0:r.duration),before_position:e.prePlayTime}},l=i=>{(null==i?void 0:i.action)==="click"&&A.Z.sendLog("progressClick",(0,f._)((0,c._)({},e(i)),{click_method:"click"}))};i.on(L.USER_ACTION,l);let n=i.getPlugin("progress"),r=i=>{A.Z.sendLog("progressClick",(0,f._)((0,c._)({},e(i)),{click_method:"drag"}))};return n.addCallBack("dragend",r),()=>{i.off(L.USER_ACTION,l),n.removeCallBack("dragend",r)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(!i||!t)return;let e=e=>{let{getEnterFromDynamic:i,extraParams:t}=n();if(e.isInnerReset)return;let l=(null==i?void 0:i())||(0,D.mo)(),r=(0,f._)((0,c._)({enter_from:l},t,e.logParams||{}),{group_id:null==o?void 0:o.awemeId,is_full_screen:(0,N.r)()?"1":"0",is_full_webscreen:X.s.getIsPageFullscreen()?"1":"0"});e.isOn&&A.Z.sendLog("openPureMode",r),e.isOn||A.Z.sendLog("closePureMode",r)};return i.on(ei.B.ImmersiveSwitchChange,e),()=>{i.off(ei.B.ImmersiveSwitchChange,e)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n,getH265DegradeReportFlag:r,getSupportHwClientFlag:d}=e,u=(0,l.useRef)([]),a=(0,l.useRef)(0),s=(0,l.useRef)(""),_=(0,l.useRef)([]),p=(0,Y.l)();(0,l.useEffect)(()=>{var e;let l;(s.current!==(null==o?void 0:o.awemeId)||!t||!o)&&(s.current=null==o?void 0:o.awemeId,u.current=[],a.current=0);let y=i,h=()=>{let e=u.current.length;if(e){let i=u.current[e-1];A.Z.sendLog("videoPlayFailed",i),eJ.oe.event.info({name:eJ.Mo.VideoPlayFailed,report:i})}u.current=[],_.current.forEach(e=>{A.Z.sendLog("linkPlayFailed",e)}),_.current=[]},w=()=>{t&&h()},I=e=>{var i,l,s,_,p,h,I,b,L,T;let{group_id:S,vduration:P,extraParams:E,action_type:C,aweme_type:R,awemeRequestTime:D,qualityType:k,log_pb:F,bitrate_set_client:x}=n(),{isH265:U,codecFormat:G,videoFormat:J}=(0,q.Z)({awemeInfo:o,player:y}),Q=(0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,Z.Z)(y),W()),{group_id:S,errorCode:(null==e?void 0:null===(i=e.mediaError)||void 0===i?void 0:i.code)||(null==e?void 0:e.errorCode)||"",errorDesc:(null==e?void 0:null===(l=e.mediaError)||void 0===l?void 0:l.message)||(null==e?void 0:e.errorMessage)||"",vduration:P,video_quality:B({player:y,qualityType:k}),player_version:y.version,current_position:1e3*y.currentTime,is_video_support:Number((0,ej.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==y?void 0:y.vtype),action_type:C,bitrate_set_client:x,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(s=o.mixInfo)||void 0===s?void 0:s.mixId)?1:0,is_full_screen:(0,N.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,is_active:1,is_cdn_expired:1===(0,O.q)(y.currentSrc)?1:0,is_bytevc1:U,aweme_type:R,log_pb:F,codec_format:G,video_format:J,play_order:(0,z.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:r(),has_report:a.current++,is_265_degrade_client:(0,v.ad)({player:y}),is_support_hw:d(),is_hw:(null==y?void 0:null===(_=y.config)||void 0===_?void 0:_.mediaType)==="video"?1:0,if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",feature_id:null==y?void 0:null===(p=y.curDefinition)||void 0===p?void 0:p.featureId,clarity_now:null==y?void 0:null===(h=y.getClarity)||void 0===h?void 0:h.call(y,!1)}),(0,K.m)({player:y}),(0,K.B)({player:y}),E);if((null==e?void 0:null===(I=e.mediaError)||void 0===I?void 0:I.code)===6&&(Q.aweme_info=null==y?void 0:null===(L=y.config)||void 0===L?void 0:L.url),t){if(null==y?void 0:y.errored)return;y.errored=1,A.Z.sendLog("videoPlayFailed",Q),eJ.oe.event.info({name:eJ.Mo.VideoPlayFailed,report:Q})}else u.current.push(Q),w();if((0,eZ.G6)()&&(null==e?void 0:null===(b=e.mediaError)||void 0===b?void 0:b.code)===3&&1===U){let e=null!==(T=(0,eD.G)(m.SessionStorageKeys.DecodeError))&&void 0!==T?T:0;(0,eD.t_)(m.SessionStorageKeys.DecodeError,e+1)}},b=e=>{var i,l,r,d,u,a,v,s,c,f,m;let{group_id:p,aweme_type:h}=n(),{isH265:I,codecFormat:b,videoFormat:L}=(0,q.Z)({awemeInfo:o,player:y}),T=J(e.src,y.config.url).isPcdnSource,S={group_id:p,aweme_type:h,host:null==e?void 0:e.host,enter_from:(0,D.yW)(),is_pcdn:Number(T),user_unique_id:null===(i=(0,g.Es)())||void 0===i?void 0:i.user_unique_id,src:null==e?void 0:e.src,errorDesc:null!==(c=null==e?void 0:null===(l=e.mediaError)||void 0===l?void 0:l.message)&&void 0!==c?c:null==e?void 0:e.message,errorCode:null!==(f=null==e?void 0:null===(r=e.mediaError)||void 0===r?void 0:r.code)&&void 0!==f?f:null==e?void 0:e.errorCode,vtype:null!==(m=null==e?void 0:e.vtype)&&void 0!==m?m:null==y?void 0:y.vtype,range:null==e?void 0:e.range,content_length:null==e?void 0:null===(d=e.headers)||void 0===d?void 0:d["content-length"],content_range:null==e?void 0:null===(u=e.headers)||void 0===u?void 0:u["content-range"],content_type:null==e?void 0:null===(a=e.headers)||void 0===a?void 0:a["content-type"],server_ip:null==e?void 0:null===(v=e.headers)||void 0===v?void 0:v.server_ip,x_response_cinfo:null==e?void 0:null===(s=e.headers)||void 0===s?void 0:s["x-response-cinfo"],is_bytevc1:I,codec_format:b,video_format:L,current_position:null==y?void 0:y.currentTime};t?A.Z.sendLog("linkPlayFailed",S):(_.current.push(S),w())};o&&(w(),y&&(y.on(L.ERROR,I),y.on(L.SOURCE_ERROR,b)));let T=e=>{(y=e).on(L.ERROR,I),y.on(L.SOURCE_ERROR,b),l=()=>{y.off(L.ERROR,I),y.off(L.SOURCE_ERROR,b)}};return null==p||null===(e=p.on)||void 0===e||e.call(p,Q.V.PlayerCreated,T),()=>{var e;null==l||l(),null==y||y.off(L.ERROR,I),null==y||y.off(L.SOURCE_ERROR,b),null==p||null===(e=p.off)||void 0===e||e.call(p,Q.V.PlayerCreated,T)}},[o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:I}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:r,getReportNetworkSpeed:d,getH265DegradeReportFlag:u,getIsChangingVideoSrc:a,getSupportHwClientFlag:s}=e;(0,l.useEffect)(()=>{var e;if(!i||!o||!t)return;let l=0,_=0,m=0,p=!0,y={},h=(null===(e=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===e?void 0:e.isInModal)||!1,w=e=>{var w,I,b,L,T,S,P,E,C,R,D,k,F,O,x,U;let{group_id:G,vduration:J,bitRate:Q,qualityType:Y,extraParams:H,action_type:j,aweme_type:$,video_play_mode:X,is_landscape:ee,bitrate_set_client:ei}=r(),{codecFormat:eo,isH265:et,videoFormat:el}=(0,q.Z)({awemeInfo:o,player:i}),{bitrate:en}=(null==i?void 0:i.curDefinition)||{},er=(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"],group_id:G,duration:e.costTime,duration_origin:e.fixedCostTime,interval:e.interval,diff_start:e.diffStart,diff_end:e.diffEnd,vduration:J,player_version:i.version,video_quality:B({player:i,qualityType:Y})},(0,K.m)({player:i}),(0,K.B)({player:i})),{video_format:el,video_fps:null==i?void 0:null===(w=i.curDefinition)||void 0===w?void 0:w.fps,video_bitrate:en||Q,audio_bitrate:(null===(b=i.curDefinition)||void 0===b?void 0:null===(I=b.audioDefinition)||void 0===I?void 0:I.bitrate)||0,real_bitrate:(null===(L=i.curDefinition)||void 0===L?void 0:L.realBitrate)||0,feature_id:null===(T=i.curDefinition)||void 0===T?void 0:T.featureId,codec_format:eo,internet_speed:d(i),current_position:1e3*i.currentTime,percentage_position:1e3*i.currentTime/J*100,video_play_speed:i.playbackRate,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(S=o.mixInfo)||void 0===S?void 0:S.mixId)?1:0,is_full_screen:(0,N.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,buffer_time:(0,ef._)(i),bitrate_set_client:ei,is_visible:Number(!document.hidden),is_visible_when_block_start:Number(p),block_type:null==e?void 0:e.type,end_type:null==e?void 0:e.endType,host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==i?void 0:i.vtype),action_type:j,aweme_type:$,drop_frame:null===(P=i.videoFrameInfo)||void 0===P?void 0:P.dropped,total_play_frame:null===(E=i.videoFrameInfo)||void 0===E?void 0:E.total,drop_frame_rate:null===(C=i.videoFrameInfo)||void 0===C?void 0:C.droppedRate,drop_frame_duration:null===(R=i.videoFrameInfo)||void 0===R?void 0:R.droppedDuration,is_bytevc1:et,video_play_mode:X,is_landscape:ee,play_order:(0,z.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:u(),is_support_hw:s(),is_hw:(null==i?void 0:null===(D=i.config)||void 0===D?void 0:D.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:eh(i),if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0"}),(0,Z.Z)(i),W(),H),{preload_type:(0,eL.me)(i)?2:1,hit_preload:(0,eL.qJ)(i)}),(null==i?void 0:null===(O=i.plugins)||void 0===O?void 0:null===(F=O.srplugin)||void 0===F?void 0:null===(k=F.getStat)||void 0===k?void 0:k.call(F))||{}),{battery_charging_when_block_start:null==y?void 0:y.charging,battery_level_when_block_start:null==y?void 0:y.level}),(null==i?void 0:i.novv)||{}),{firstframed:i.firstfame?1:0,is_in_modal:h,clarity_now:null==i?void 0:null===(x=i.getClarity)||void 0===x?void 0:x.call(i,!1),is_switch:null==i?void 0:null===(U=i.getIsInSwitching)||void 0===U?void 0:U.call(i)});if("waitingEnd"===e.eventType&&1===e.type){if(!1===t)er.duration=0,er.duration_origin=0;else{let{slideStartTime:i}=g.Le.getConfig(g.gI.SlideStartTime)||{},o=a()||!i?null==e?void 0:e.costTime:Date.now()-i>(null==e?void 0:e.costTime)?null==e?void 0:e.costTime:Date.now()-i,t=a()||!i||Date.now()-i>(null==e?void 0:e.fixedCostTime)?null==e?void 0:e.fixedCostTime:Date.now()-i;er.duration=o,er.duration_origin=t}A.Z.sendLog("videoBlock",er),eJ.oe.event.warn({name:eJ.Mo.VideoPlayBlock,report:eX()(er,["player_version","video_quality","block_type","end_type","host","vtype","duration"])})}if("waitingStart"===e.eventType){l=Date.now(),_+=1,i.config.blockCount=_,p="visible"===document.visibilityState;let{battery:e}=(0,eB.J)()||{};y=e}if("waitingEnd"===e.eventType){if(m+=1,0===l||(null==e?void 0:e.type)===1)return;A.Z.sendLog("videoBlock",er),eJ.oe.event.warn({name:eJ.Mo.VideoPlayBlock,report:eX()(er,["player_version","video_quality","block_type","end_type","host","vtype","duration"])}),l=0}},I=()=>{var e,o,t,l,n,d,u;if(null===(e=g.Le.getConfig(g.gI.AbtestData))||void 0===e?void 0:e.longtask)return;let{extraParams:a}=null!==(u=r())&&void 0!==u?u:{};A.Z.sendLog("videoBlockCount",(0,c._)({block_count:_,differ_count:_-m,player_version:i.version,drop_frame:null===(o=i.videoFrameInfo)||void 0===o?void 0:o.dropped,total_play_frame:null===(t=i.videoFrameInfo)||void 0===t?void 0:t.total,drop_frame_rate:null===(l=i.videoFrameInfo)||void 0===l?void 0:l.droppedRate,drop_frame_duration:null===(n=i.videoFrameInfo)||void 0===n?void 0:n.droppedDuration,is_bytevc1:null==i?void 0:null===(d=i.curDefinition)||void 0===d?void 0:d.isH265,play_order:(0,z.G)(),is_in_modal:h},(0,Z.Z)(i),a))};return i.on(L.XGLOG,w),window.addEventListener("beforeunload",I),()=>{I(),i.off(L.XGLOG,w),window.removeEventListener("beforeunload",I)}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getReportNetworkSpeed:w,getH265DegradeReportFlag:_,getIsChangingVideoSrc:a,getSupportHwClientFlag:I}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:r,getReportNetworkSpeed:d,getH265DegradeReportFlag:u,getIsChangingVideoSrc:a,getSupportHwClientFlag:s}=e,_=(0,Y.l)(),p=(0,l.useRef)(!1),h=(0,l.useRef)(""),w=()=>{var e,i,t;let l=g.Le.getConfig(g.gI.LynxInfo);return(!!g.Le.getConfig(g.gI.hasReportVideoRequest)||(null==l?void 0:l.swiperIndex)===void 0||!((null==l?void 0:null===(e=l.awemeList)||void 0===e?void 0:e.length)>0)||!((null===(i=l.progressBarInfo)||void 0===i?void 0:i.timeCurrent)>0)||(null===(t=l.awemeList[null==l?void 0:l.swiperIndex])||void 0===t?void 0:t.aweme_id)!==o.awemeId)&&!0};(0,l.useEffect)(()=>{if(!t&&(p.current=!1),t){var e,o,l,n,r,d;h.current="";let t=null==i?void 0:null===(l=i.plugins)||void 0===l?void 0:null===(o=l.mp4encryptplayer)||void 0===o?void 0:null===(e=o.states)||void 0===e?void 0:e.length;t>0&&(h.current=(null==i?void 0:null===(d=i.plugins)||void 0===d?void 0:null===(r=d.mp4encryptplayer)||void 0===r?void 0:null===(n=r.states[t-1])||void 0===n?void 0:n.state)||"")}},[t]),(0,l.useEffect)(()=>{p.current=!1;let e=i,t=i=>{if("firstFrame"===i.eventType&&!p.current){var t,l,_,I,b,L,T,S,P,E,C,R,k,F,O,x,U,G,J,Q,Y,H,j,$,X,ee,ei,eo,et,el,en,er,ed,eu,ea,ev,e_,ec,ef,em,eg,ey,eI,eb,eS,eP,eE,eR;p.current=!0;let{group_id:eD,vduration:ek,bitRate:eA,qualityType:eF,extraParams:eM,bitrate_set:eN,bitrate_set_client:eV,bitrate_set_dash:eO,bitrate_has_dash:ex,quality_bitrate:eU,action_type:eq,aweme_type:eB,video_play_mode:eZ,is_landscape:eG}=r(),{codecFormat:eW,isH265:eK,videoFormat:ez}=(0,q.Z)({awemeInfo:o,player:e});e.firstfame=1;let{preloadTime:eJ,preloadSize:eQ,startBuffer:eY,audioDuration:eH,minDuration:e$}=(0,ep.P)(e),{bitrate:eX,realBitrate:e5}=(null==e?void 0:e.curDefinition)||{},{slideStartTime:e6}=g.Le.getConfig(g.gI.SlideStartTime)||{},ie=null==o?void 0:null===(l=o.video)||void 0===l?void 0:null===(t=l.bitRateList)||void 0===t?void 0:t.find(i=>{var o;return i.qualityType===(null==e?void 0:null===(o=e.curDefinition)||void 0===o?void 0:o.qualityType)}),{currentLowDecodeCount:ii=0,decoderMode:io=0,lowdecodeVV:it=0,vv:il=0}=(null===(I=e.video)||void 0===I?void 0:null===(_=I.getStats)||void 0===_?void 0:_.call(I))||{},ir=a(),id=Date.now(),iu=ir||!e6?null==i?void 0:i.costTime:id-e6,ia=g.Le.getConfig(g.gI.StartPlayTime),iv=!ir&&e6&&ia?ia-e6:-1,is=null==e?void 0:e.video,i_={},ic=-1;!(null===(b=g.Le.getConfig(g.gI.AbtestData))||void 0===b?void 0:b.longtask)&&(ic=Number(!!(null==is?void 0:is.parentNode)),i_=null==is?void 0:is.getBoundingClientRect());let im=0,ip=g.Le.getConfig(g.gI.GeneralSearchVideoSlideIntoVisionTime);"general_search"===(0,D.yW)()&&0!==ip&&(im=Date.now()-ip);let ig=g.Le.getConfig(g.gI.MenuClick)||0,iy=0;ig&&(g.Le.setConfig(g.gI.MenuClick,0),iy=id-ig);try{let o=(null==i?void 0:i.vtype)||(null==e?void 0:e.vtype),t=g.Le.getConfig(g.gI.recentVtypes)||[];t.push(o),g.Le.setConfig(g.gI.recentVtypes,t.slice(0,5))}catch(e){}let ih=(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({},eC(!0)),{urlParamList:["previous_page","tab_name"]}),(0,Z.Z)(e),W(),e9(eD,(null==e?void 0:e.vtype)==="DASH"?e5:eX)),{group_id:eD,bitrate_set:eN,bitrate_set_client:eV,bitrate_set_dash:eO,bitrate_has_dash:ex,menu_total_duration:iy,player_first_frame:null==i?void 0:i.costTime,buffer:null==i?void 0:i.buffer,duration:iu,vduration:ek,video_width:null==is?void 0:is.videoWidth,video_height:null==is?void 0:is.videoHeight,video_ratio:(null==is?void 0:is.videoWidth)/(null==is?void 0:is.videoHeight),video_rect_width:null==i_?void 0:i_.width,video_rect_height:null==i_?void 0:i_.height,is_over_gear:e2(e),is_over_rect:(null==e?void 0:null===(L=e.config)||void 0===L?void 0:L.isOverRect)?1:0,device_ratio:null!==(ef=window.devicePixelRatio)&&void 0!==ef?ef:-1,has_pkt_offset:(null==e?void 0:null===(P=e.curDefinition)||void 0===P?void 0:null===(S=P.pktOffsetMap)||void 0===S?void 0:null===(T=S.find)||void 0===T?void 0:T.call(S,e=>(null==e?void 0:e.time)===5))?1:0,has_first_segment_range:(null==e?void 0:null===(E=e.curDefinition)||void 0===E?void 0:E.first_segment_range)?1:0,feature_id:null==e?void 0:null===(C=e.curDefinition)||void 0===C?void 0:C.featureId,player_version:e.version,video_quality:B({player:e,qualityType:eF}),video_size:null==e?void 0:null===(R=e.curDefinition)||void 0===R?void 0:R.size,video_fps:null==e?void 0:null===(k=e.curDefinition)||void 0===k?void 0:k.fps,definition:null===(F=e.curDefinition)||void 0===F?void 0:F.definition,video_format:ez,video_bitrate:eX||eA,audio_bitrate:(null===(x=e.curDefinition)||void 0===x?void 0:null===(O=x.audioDefinition)||void 0===O?void 0:O.bitrate)||0,real_bitrate:(null===(U=e.curDefinition)||void 0===U?void 0:U.realBitrate)||0,codec_format:eW,internet_speed:d(e),if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",preload_time:(0,es.N)(eJ),preload_time_audio:eH,preload_time_min:e$,preload_size:eQ||0,preload_type:(0,eL.me)(e)?2:1,hit_preload:(0,eL.qJ)(e),start_buffer:eY,is_mute:(null==e?void 0:e.muted)?"1":"0",player_volume:null==e?void 0:e.volume,video_mute:(null==e?void 0:null===(G=e.video)||void 0===G?void 0:G.muted)?"1":"0",video_volume:null==e?void 0:null===(J=e.video)||void 0===J?void 0:J.volume,local_mute:(0,ew.$o)(m.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:(0,ew.$o)(m.LocalStorageKeys.PLAYER_VOLUME),equalize_state:null!==(em=null==e?void 0:e.equalizeVolumeState)&&void 0!==em?em:0,lufs:null!==(eg=null==e?void 0:e.lufs)&&void 0!==eg?eg:eT.G7,use_new_mammon_worklet_processor:null!==(ey=null==e?void 0:e.useMammonWorkletProcessorV3)&&void 0!==ey&&ey,use_new_mammon_worklet_processor_with_wasm:null!==(eI=null==e?void 0:e.useMammonWorkletProcessorV3Wasm)&&void 0!==eI&&eI,hit_new_mammon_worklet_processor:null!==(eb=null==e?void 0:e.hitMammonWorkletProcessorV3)&&void 0!==eb&&eb,volume_balance_longtest_consume_time:null!==(eS=null==e?void 0:null===(Q=e.effectNodeConsumeTime)||void 0===Q?void 0:Q.longest)&&void 0!==eS?eS:-2,volume_balance_shortest_consume_time:null!==(eP=null==e?void 0:null===(Y=e.effectNodeConsumeTime)||void 0===Y?void 0:Y.shortest)&&void 0!==eP?eP:-2,is_in_modal:(null===(H=g.Le.getConfig(g.gI.IsInModalVideo))||void 0===H?void 0:H.isInModal)||!1,host:null==i?void 0:i.host,vtype:(null==i?void 0:i.vtype)||(null==e?void 0:e.vtype),is_video_support:Number((0,ej.k)().isSupport),quality_bitrate:eU,action_type:eq,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(j=o.mixInfo)||void 0===j?void 0:j.mixId)?1:0,enable_danmaku:(null==o?void 0:null===($=o.danmakuControl)||void 0===$?void 0:$.enableDanmaku)?1:0,web_rid:null==o?void 0:null===(ei=o.authorInfo)||void 0===ei?void 0:null===(ee=ei.roomData)||void 0===ee?void 0:null===(X=ee.owner)||void 0===X?void 0:X.web_rid,is_full_screen:(0,N.r)(),is_show_comment:g.Le.getConfig(g.gI.IsCommetTab)?1:0,aweme_type:eB,is_bytevc1:eK,is_hevc_error_down:null!==(eE=null==e?void 0:e.isHevcErrorDown)&&void 0!==eE?eE:0,video_play_mode:eZ,is_landscape:eG,current_low_decode_count:ii,decoder_mode:io,h265_failure_rate:10===il?it/il:-1,play_order:(0,z.G)(),first_video_after_cold_start:(0,e1.R)(null===(eo=g.Le.getConfig(g.gI.AbtestData))||void 0===eo?void 0:eo.coldStartThresholdTime)&&1===(0,z.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:u(),is_265_degrade_client:(0,v.ad)({player:e}),is_265_degrade_web:(0,v.OS)({player:e}),is_support_hw:s(),is_hw:(null==e?void 0:null===(et=e.config)||void 0===et?void 0:et.mediaType)==="video"?1:0,is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hw_client:eh(e),is_support_hdr:e0.Z.isHdrSupported(),active_stage:h.current,slide_start_to_play:iv,play_to_first_frame:ia?id-ia:-1,click_to_modal_first_frame:e7(),gear_name:null==e?void 0:null===(el=e.curDefinition)||void 0===el?void 0:el.gearName,media_type:null==e?void 0:null===(en=e.config)||void 0===en?void 0:en.mediaType,is_video_in_dom:ic,is_multiple:(null==e?void 0:e.isMultiple)?1:0,buffered_before_active:Math.floor(null==e?void 0:e.bufferedBeforeActive),loadstart_before_active:null==e?void 0:e.loadstartBeforeActive,loadeddata_before_active:null==e?void 0:e.loadeddataBeforeActive,load_range_type:null==e?void 0:null===(eu=e.plugins)||void 0===eu?void 0:null===(ed=eu.mp4encryptplayer)||void 0===ed?void 0:null===(er=ed.config)||void 0===er?void 0:er.loadRangeType,load_range_type_preloader:null===(e_=window)||void 0===e_?void 0:null===(ev=e_.playerPreloader)||void 0===ev?void 0:null===(ea=ev._config)||void 0===ea?void 0:ea.loadRangeType}),e3({isChangeVideoSrc:ir,player:e,data:i,slideStartTime:e6}),(0,K.m)({player:e}),(0,K.B)({player:e}),eM),{general_search_duration:im}),(null==e?void 0:e.novv)||{},(null==e?void 0:null===(ec=e.stat)||void 0===ec?void 0:ec.stage)||{},(null==e?void 0:e.startTimelines)||{},(null==ie?void 0:ie.mvmaf)||{},e8(null==ie?void 0:ie.ufq)),{preplay_stat:(null==e?void 0:e.preplayStat)?1:0,prepause_stat:(null==e?void 0:e.prepauseStat)?1:0,end_type:null==i?void 0:i.endType});w()&&(A.Z.sendLog("videoPlayQuality",(0,f._)((0,c._)({},ih),{listen_device:(0,D.nj)(),start_play_clarity_type:null==e?void 0:null===(eR=e.getClarity)||void 0===eR?void 0:eR.call(e,!0)})),e.firstFrameTmp=new Date().getTime()),e4(ih),y.emit(y.EVENT.firstFrame)}};if(!e){let i;let l=l=>{if(o){if((e=l).dyLogStat&&e.dyLogStat.firstFrame){var n;(null===(n=e.dyLogStat.firstFrame.awemeInfo)||void 0===n?void 0:n.awemeId)===o.awemeId&&(e.dyLogStat.firstFrame.data&&e.isReusePlayer&&(e.dyLogStat.firstFrame.data.costTime=0),t(e.dyLogStat.firstFrame.data)),e.dyLogStat.firstFrame=null}let r=(0,H.I)();r.firstFrame.used=!0,r.firstFrame.data&&(t(r.firstFrame.data),r.firstFrame.data=null),e.on(L.XGLOG,t),i=()=>{e.off(L.XGLOG,t)}}};return _.on(Q.V.PlayerCreated,l),()=>{null==i||i(),_.off(Q.V.PlayerCreated,l)}}return e.on(L.XGLOG,t),()=>{e.off(L.XGLOG,t)}},[o])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getReportNetworkSpeed:w,getH265DegradeReportFlag:_,getIsChangingVideoSrc:a,getSupportHwClientFlag:I}),!function(e){let{player:i,awemeInfo:o,isActive:t,index:n}=e,d=(0,l.useRef)(!1);(0,l.useEffect)(()=>{let e;if(!i||!o||!t)return;let l=()=>{y.emit(y.EVENT.pageFirstFrameLoadStart)},u=()=>{if(g.Le.setConfig(g.gI.isVideoPlayed,!0),y.emit(y.EVENT.pageFirstFrameLoaded),d.current=!0,(0,F.B)())return;let i=e||Date.now();try{if(g.Le.getConfig(g.gI.MarkFirstEnter)){var t,l,u,a,v,s,_,c,f,m,p,h,w,I,b,L;g.Le.setConfig(g.gI.MarkFirstEnter,null);let e=(null==o?void 0:null===(u=o.video)||void 0===u?void 0:null===(l=u.playApi)||void 0===l?void 0:null===(t=l.startsWith)||void 0===t?void 0:t.call(l,"blob"))?1:0;(0,r.DT)()?(0,ea.s)(o,n):(null===(v=performance)||void 0===v?void 0:null===(a=v.timing)||void 0===a?void 0:a.fetchStart)&&A.Z.sendLog("prfFirstFeedShow",{feed_total_duration:i-(null===(_=performance)||void 0===_?void 0:null===(s=_.timing)||void 0===s?void 0:s.fetchStart),is_landscape:(null==o?void 0:null===(c=o.video)||void 0===c?void 0:c.width)>(null==o?void 0:null===(f=o.video)||void 0===f?void 0:f.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,D.yW)(),vduration:null==o?void 0:null===(m=o.video)||void 0===m?void 0:m.duration,if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",real_index:n,is_cache_video:e,aweme_type:null==o?void 0:o.awemeType});try{A.Z.sendLog("prfFirstFeedFirstFrameShow",{feed_total_duration:i-(null===(h=performance)||void 0===h?void 0:null===(p=h.timing)||void 0===p?void 0:p.fetchStart),is_landscape:(null==o?void 0:null===(w=o.video)||void 0===w?void 0:w.width)>(null==o?void 0:null===(I=o.video)||void 0===I?void 0:I.height)?1:0,group_id:null==o?void 0:o.awemeId,landing_page:(0,D.yW)(),real_index:n,is_cache_video:e,aweme_type:null==o?void 0:o.awemeType}),((null===(b=g.Le.getConfig(g.gI.AbtestData))||void 0===b?void 0:b.prefetchFirst)||(null===(L=g.Le.getConfig(g.gI.AbtestData))||void 0===L?void 0:L.prefetchFirstServer))&&y.emit(y.EVENT.firstLoadMore)}catch(e){}}"recommend"===(0,D.yW)()&&g.Le.getConfig(g.gI.FirstEnterRecommend)&&(g.Le.setConfig(g.gI.FirstEnterRecommend,!1),y.emit(y.EVENT.firstEnterVideoPlay))}catch(e){}},a=()=>{if(g.Le.setConfig(g.gI.isVideoPlayed,!0),!(0,F.B)()&&!!d.current)u()},v=(0,H.I)();return v.prfFirstFeedShow&&!v.prfFirstFeedShow.used&&v.prfFirstFeedShow.data&&(e=v.prfFirstFeedShow.data,u(),v.prfFirstFeedShow.used=!0),v.prfFirstFrameStart&&!v.prfFirstFrameStart.used&&v.prfFirstFrameStart.data&&(l(),v.prfFirstFrameStart.used=!0),i.on(L.PLAY,a),i.on(L.LOADED_DATA,u),i.on(L.LOAD_START,l),()=>{i.off(L.PLAY,a),i.off(L.LOADED_DATA,u),i.off(L.LOAD_START,l)}},[i,o,t,n])}({player:o,awemeInfo:i,isActive:t,index:u}),!function(e){let{player:i,awemeInfo:o,isActive:t,index:r}=e,{getLogInfo:d,getSpecialParams:u}=e,a=(0,Y.l)(),v=(0,l.useRef)(""),s=(0,l.useRef)(null),_=(0,l.useRef)(!1);(0,l.useEffect)(()=>{!t&&(v.current="")},[t]),(0,l.useEffect)(()=>{o.awemeId!==v.current&&(v.current="");let e=i,t=()=>{var i,t,l,a,p,y,w,I,b,L,T,S,P,E,C,F,O,x,U,B,Z,G,K,z,J,Q,Y,H;if(v.current)return;v.current=o.awemeId;let{author_id:j,group_id:$,log_pb:ee,compilation_id:ei,playlet_id:eo,impressionData:et,extraParams:el,aweme_type:en,pic_cnt:er,trending_topic:ed,first_tag_name:ea,top:ev,is_pure:es,is_click_cover:e_,is_landscape:ec,is_insert_wallpaper:ef,isMini:em,latest_group_id:ep,if_first_big_card:eg}=d(),{isH265:ey}=(0,q.Z)({awemeInfo:o,player:e}),eh=g.Le.getConfig(g.gI.VideoFeedList),ew=(null==eh?void 0:eh.autoPlayCount)||1,eI=(0,k.Rs)("if_from_widget"),eb=0;((0,k.Rs)("modeFrom")===eU.MODE_FROM||(0,k.Rs)("modeFrom")===eU.MODE_FROM_SEARCH)&&(eb=1);let eL=!1,eT=(0,eD.G)(m.SessionStorageKeys.CacheRecommendActiveAwemeID);eT&&eT===$&&(eL=!0);let eS=(null===(i=window.EXPOSE_DATA)||void 0===i?void 0:i.landingPage)==="discover",eP=eS&&(null===(t=window.EXPOSE_DATA)||void 0===t?void 0:t.landingMode)!==2,eE=null!==(z=null!==(K=(0,k.Rs)("enter_method"))&&void 0!==K?K:eS?"default_landing":void 0)&&void 0!==z?z:"other";A.Z.sendLog("videoPlay",(0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({pc_source:null==o?void 0:null===(l=o.chanFeedVideo)||void 0===l?void 0:l.source,is_click_cover:e_,is_insert_wallpaper:ef,is_landscape:ec,urlParamList:["trending_topic","previous_page","keywords_index","keywords_content"],enter_method:(0,k.Rs)("enter_method")||"",author_id:j,enter_from:(0,D.mo)(),enter_from_merge:(0,ek.z)(""),group_id:$,log_pb:ee,compilation_id:ei,playlet_id:eo,is_auto_play:String((null==e?void 0:null===(y=e.plugins)||void 0===y?void 0:null===(p=y.autoplaysettingplugin)||void 0===p?void 0:null===(a=p.config)||void 0===a?void 0:a.nextAutoPlay)||(null==e?void 0:null===(b=e.plugins)||void 0===b?void 0:null===(I=b.searchautoplaysettingplugin)||void 0===I?void 0:null===(w=I.config)||void 0===w?void 0:w.nextAutoPlay)?1:0),sidebar_status:(0,eW.GE)(),is_visible:String("visible"===document.visibilityState?1:0),impression_data:et,speed:`${null==e?void 0:e.playbackRate}`,auto_cnt:ew,video_detail_enter_from:(0,ek.z)("web_link"),is_full_screen:(0,N.r)()?"1":"0",is_full_webscreen:X.s.getIsPageFullscreen()?"1":"0",tab_name:R.getTabName()||(0,k.Rs)("tab_name")||"",from_follow_list:(null===(L=g.Le.getConfig(g.gI.FromFollowList))||void 0===L?void 0:L.tag)?"1":"0",is_mute:(null==e?void 0:e.muted)?"1":"0",mute_type:null===(T=g.Le.getConfig(g.gI.ForceMuted))||void 0===T?void 0:T.currentMuteType,is_pure:es},(0,eA.t)()),{from_academy:eb,aweme_type:en,pic_cnt:er,trending_topic:ed,first_tag_name:ea,top:ev,browser_height:(0,eZ.P6)(),browser_width:(0,eZ.wi)(),browser_ratio:(0,eZ.P6)()/(0,eZ.wi)(),is_from_ad:(0,M.Jt)(o)?1:0,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(S=o.mixInfo)||void 0===S?void 0:S.mixId)?1:0,is_bytevc1:ey,video_time:(0,eF.n)(null==o?void 0:null===(P=o.video)||void 0===P?void 0:P.duration),is_force:(null===(E=g.Le.getConfig(g.gI.ForceMuted))||void 0===E?void 0:E.currentMuteType)==="browser"?"1":"0",from_push:h.Q.getItem({sKey:m.CookieKeys.FromClientPush})?1:0,auto_play_mode:null===(C=g.Le.getConfig(g.gI.InnerAutoPlay))||void 0===C?void 0:C.mode,seo_vids:eG.t("seo_vids")||"",webdriver:navigator&&navigator.webdriver?1:0,vtype:null==e?void 0:e.vtype,is_long_not_use_refresh_vid:!!(null==e?void 0:null===(F=e.config)||void 0===F?void 0:F.notUseRefreshVid),is_supported_hevc1_hw:(0,n._u)()?1:0,is_supported_264_hw:(0,n.b4)()?1:0,is_hevc_error_down:null!==(J=null==e?void 0:e.isHevcErrorDown)&&void 0!==J?J:0}),W(),el,(null===(O=u())||void 0===O?void 0:O.videoPlay)||{}),{video_play_method:null!==(Q=g.Le.getConfig(g.gI.VideoPlayMethod))&&void 0!==Q?Q:"auto",if_invisible:(0,V.Vr)()?"1":"0",is_small_window:(0,V.QD)()?"1":"0",is_top:(0,V.k)()?"1":"0"}),ef&&g.Le.getConfig(g.gI.WallPaperPosition)>0?{vv_sync:1}:{}),{url_source:null!==(Y=null==o?void 0:null===(x=o.continationInfo)||void 0===x?void 0:x.urlSource)&&void 0!==Y?Y:["recommend","personal_homepage"].includes((0,D.vM)())?h.Q.getItem({sKey:m.CookieKeys.UrlSourceForBrowserPlugin}):"",latest_group_id:ep,expand_video_card_type:(null===(U=g.Le.getConfig(g.gI.PlayerCardInfo))||void 0===U?void 0:U.isActive)?null===(B=g.Le.getConfig(g.gI.PlayerCardInfo))||void 0===B?void 0:B.expandCardType:"",if_continued_play:g.Le.getConfig(g.gI.PlayRecord)?(0,eu.v)(o.awemeId)?1:0:"",rate:g.Le.getConfig(g.gI.PlayRecord)?(null==e?void 0:e.currentTime)/(null==e?void 0:e.duration):""}),(0,eq.K)(o)),{if_from_widget:eI?1:0,from_click_group_id:null!==(H=null==o?void 0:o.insertId)&&void 0!==H?H:"",column_type:(null==el?void 0:el.column_type)||(null==el?void 0:null===(Z=el.search_params)||void 0===Z?void 0:Z.column_type),is_cache_video:eL,is_first_video:!r,if_first_big_card:eg,player_start_time:(null==e?void 0:null===(G=e.config)||void 0===G?void 0:G.startTime)||0,is_recommend:"default_landing"===eE?Number(eP):void 0}),(0,eM.Wc)(eM.rh.PLAY_START)));try{!_.current&&(0,ii.yr)()}catch(e){}s.current={aweme_type:en,item_id:$,source:0,play_delta:1},g.Le.getConfig(g.gI.TeaBlocked)},l=()=>{v.current="",t()},p=e=>{v.current=e};if(!e){let i;let n=n=>{if(o){e=n;let o=(0,H.I)();o.autoplayStarted.used=!0,o.autoplayStarted.data&&(t(),o.autoplayStarted.data=null),e.on("enter_inner_feed",l),e.on("exit_inner_feed",p),e.on(L.AUTOPLAY_STARTED,t),i=()=>{e.off("enter_inner_feed",l),e.off("exit_inner_feed",p),e.off(L.AUTOPLAY_STARTED,t)}}};return a.on(Q.V.PlayerCreated,n),()=>{a.off(Q.V.PlayerCreated,n),null==i||i()}}return e.on("enter_inner_feed",l),e.on("exit_inner_feed",p),e.on(L.AUTOPLAY_STARTED,t),()=>{e.off("enter_inner_feed",l),e.off("exit_inner_feed",p),e.off(L.AUTOPLAY_STARTED,t)}},[o.awemeId,t]),(0,l.useEffect)(()=>{let e=()=>{var e;(null===(e=g.Le.getConfig(g.gI.AbtestData))||void 0===e?void 0:e.reportCounter)&&(0,ie.x0)(s.current)};return t&&i?(i.once(L.TIME_UPDATE,e),()=>{i.off(L.TIME_UPDATE,e)}):()=>null},[t,i])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getSpecialParams:p,index:u}),io({player:o,awemeInfo:i,isActive:t,getLogInfo:s}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e;(0,l.useEffect)(()=>{if(i){let e=e=>{var i,t;let{vid:l,force_set_min:n}=e||{};A.Z.sendLog("prfTaskDataSize",(0,f._)((0,c._)({},e||{}),{user_unique_id:null===(i=(0,g.Es)())||void 0===i?void 0:i.user_unique_id,group_id:l,force_set_min:n?1:0,vduration:null==o?void 0:null===(t=o.video)||void 0===t?void 0:t.duration,enter_from:(0,D.yW)()}))};return i.on("prf_data_size",e),()=>{i.off("prf_data_size",e)}}},[i,o])}({player:o,awemeInfo:i,isActive:t}),iu({isNext:d,player:o,awemeInfo:i,getLogInfo:s,isActive:t}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n}=e;(0,l.useEffect)(()=>{if(i&&t)try{let e=e=>{try{var t,l,r,d;let{group_id:u,playlet_id:a,log_pb:v,extraParams:s,aweme_type:_,top:m,is_pure:p,bitRate:g,latest_group_id:y}=n(),{isH265:h}=(0,q.Z)({awemeInfo:o,player:i}),w=(null===(t=i.curDefinition)||void 0===t?void 0:t.bitrate)||g||0;A.Z.sendLog("fpsStuck",(0,f._)((0,c._)((0,f._)((0,c._)((0,f._)((0,c._)({},e),{enter_from:(0,D.mo)(),group_id:u,playlet_id:a,log_pb:v,speed:String(null==i?void 0:i.playbackRate)}),(0,eA.t)()),{aweme_type:_,top:m,is_pure:p,is_bytevc1:h}),W(),s),{play_order:(0,z.G)(),video_bitrate:w,audio_bitrate:(null===(r=i.curDefinition)||void 0===r?void 0:null===(l=r.audioDefinition)||void 0===l?void 0:l.bitrate)||0,real_bitrate:(null===(d=i.curDefinition)||void 0===d?void 0:d.realBitrate)||0,latest_group_id:y,current_position:i.currentTime,vtype:i.vtype}),!1)}catch(e){eJ.oe.event.error({name:eJ.Mo.FpsStuckReportError,report:{type:1}})}};return i.on(L.FPS_STUCK,e),()=>{i.off(L.FPS_STUCK,e)}}catch(e){eJ.oe.event.error({name:eJ.Mo.FpsStuckReportError,report:{type:0}})}},[i,o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n,getH265DegradeReportFlag:r,getSupportHwClientFlag:d}=e,u=(0,l.useRef)([]),a=(0,l.useRef)(0),s=(0,l.useRef)(""),_=(0,Y.l)();(0,l.useEffect)(()=>{let e;(s.current!==(null==o?void 0:o.awemeId)||!t||!o)&&(s.current=null==o?void 0:o.awemeId,u.current=[],a.current=0);let l=i,m=()=>{t&&(u.current.forEach(e=>{A.Z.sendLog("videoDegrade",e)}),u.current=[])},p=e=>{var i,t;let{group_id:s,vduration:_,extraParams:p,action_type:g,aweme_type:y,awemeRequestTime:h,qualityType:w,log_pb:I,bitrate_set_client:b}=n(),{isH265:L,codecFormat:T,videoFormat:S}=(0,q.Z)({awemeInfo:o,player:l}),P=(0,c._)((0,f._)((0,c._)({urlParamList:["previous_page","tab_name"]},(0,Z.Z)(l),W()),{group_id:s,errorCode:null==e?void 0:e.errc,errorDesc:null==e?void 0:e.err_msg,vduration:_,video_quality:B({player:l,qualityType:w}),player_version:l.version,current_position:1e3*l.currentTime,is_video_support:Number((0,ej.k)().isSupport),host:null==e?void 0:e.host,vtype:(null==e?void 0:e.vtype)||(null==l?void 0:l.vtype),action_type:g,bitrate_set_client:b,is_ad:(0,M.Jt)(o)?1:0,is_compilation:(null==o?void 0:null===(i=o.mixInfo)||void 0===i?void 0:i.mixId)?1:0,is_active:1,is_cdn_expired:1===(0,O.q)(l.currentSrc)?1:0,is_bytevc1:L,aweme_type:y,log_pb:I,codec_format:T,video_format:S,play_order:(0,z.G)(),is_supported_265:(0,v.VV)()?1:0,is_265_degrade:r(),has_report:a.current++,is_265_degrade_client:(0,v.ad)({player:l}),is_support_hw:d(),is_hw:(null==l?void 0:null===(t=l.config)||void 0===t?void 0:t.mediaType)==="video"?1:0,hit_preload:(0,eL.qJ)(l)}),(0,K.m)({player:l}),(0,K.B)({player:l}),p);u.current.push(P),m()};o&&(m(),l&&l.on("degrade",p));let g=i=>{(l=i).on("degrade",p),e=()=>{l.on("degrade",p)}};if(!l){var y;null==_||null===(y=_.on)||void 0===y||y.call(_,Q.V.PlayerCreated,g)}return()=>{var i;null==e||e(),null==l||l.off("degrade",p),null==_||null===(i=_.off)||void 0===i||i.call(_,Q.V.PlayerCreated,g)}},[o,t])}({player:o,awemeInfo:i,isActive:t,getLogInfo:s,getH265DegradeReportFlag:_,getSupportHwClientFlag:I}),!function(e){let{player:i,isActive:o}=e;(0,l.useEffect)(()=>{if(i&&o){var e;let o=e=>{var o,t,l,n,r,d,u,a,v,s,_,f,p,y;let h=null==e?void 0:e.code;A.Z.sendLog("srDegrade",(0,c._)({enter_from:(0,D.yW)(),group_id:null==i?void 0:null===(o=i.config)||void 0===o?void 0:o.vid,vtype:null==i?void 0:i.vtype,quality_type:null==i?void 0:null===(t=i.curDefinition)||void 0===t?void 0:t.qualityType,gear_name:null==i?void 0:null===(l=i.curDefinition)||void 0===l?void 0:l.gearName,definition:null==i?void 0:null===(n=i.curDefinition)||void 0===n?void 0:n.definition,is_bytevc1:null==i?void 0:null===(r=i.curDefinition)||void 0===r?void 0:r.isH265,current_time:null==i?void 0:i.currentTime},(null==i?void 0:null===(a=i.plugins)||void 0===a?void 0:null===(u=a.srplugin)||void 0===u?void 0:null===(d=u.getStat)||void 0===d?void 0:d.call(u))||{},e||{},(0,K.m)({player:i}))),g.Le.setConfig(g.gI.SrDegradeCode,null!=h?h:-1),(null==i?void 0:null===(f=i.plugins)||void 0===f?void 0:null===(_=f.srplugin)||void 0===_?void 0:null===(s=_.getStat)||void 0===s?void 0:null===(v=s.call(_))||void 0===v?void 0:v.renderDelta)>(null==e?void 0:e.defaultRenderDelta)&&il++;let w=null===(y=g.Le.getConfig(g.gI.AbtestData))||void 0===y?void 0:null===(p=y.SR)||void 0===p?void 0:p.renderDeltaAccumulate;il>w&&(0,ew.qQ)(m.LocalStorageKeys.srDegradePermanently,1),[2,3,-300,-600].includes(h)&&(window.srDegradeFinally=!0,g.Le.setConfig(g.gI.SrDegrade,1)),[-300,-600].includes(h)&&(0,ew.qQ)(m.LocalStorageKeys.srDegradePermanently,1)};return null==i||null===(e=i.on)||void 0===e||e.call(i,it.D.SR_DEGRADE,o),()=>{var e;null==i||null===(e=i.off)||void 0===e||e.call(i,it.D.SR_DEGRADE,o)}}},[i,o])}({player:o,isActive:t}),!function(e){let{player:i,awemeInfo:o,isActive:t}=e,{getLogInfo:n,getSpecialParams:r}=e;(0,l.useEffect)(()=>{if(!i||!t||(null==o?void 0:o.awemeType)===68)return;let e=r(),l=t=>{try{var l;let{author_id:r,group_id:d,log_pb:u,compilation_id:a,playlet_id:v,extraParams:s,aweme_type:_,trending_topic:m,first_tag_name:p,top:g,is_click_cover:y,is_pure:h,is_insert_wallpaper:w}=n(),{isH265:I}=(0,q.Z)({awemeInfo:o,player:i}),{mediaTime:b}=ir(i);A.Z.sendLog("videoEditListOffsetTime",(0,f._)((0,c._)({duration:1e3*b,is_ended:null==t?void 0:t.ended,is_click_cover:y,urlParamList:["enter_method","trending_topic","previous_page"],enter_from:(0,D.mo)(),author_id:r,group_id:d,log_pb:u,compilation_id:a,playlet_id:v,is_insert_wallpaper:w,is_visible:String("visible"===document.visibilityState?1:0),is_mute:(null==i?void 0:i.muted)?"1":"0",aweme_type:_,trending_topic:m,first_tag_name:p,top:g,is_pure:h},s,e.videoPlayFinish||{}),{is_bytevc1:I,video_time:(0,eF.n)(null==o?void 0:null===(l=o.video)||void 0===l?void 0:l.duration)}))}catch(e){}};return i.on(L.ENDED,l),()=>{!i.ended&&l(),i.off(L.ENDED,l)}},[i,o,t])}({player:o,isActive:t,awemeInfo:i,getLogInfo:s,getSpecialParams:p}),!function(e){let{player:i}=e;(0,l.useEffect)(()=>{if(!i)return()=>{};let e=e=>{let i=ev[null==e?void 0:e.pluginName];if((null==e?void 0:e.pluginName)==="fullscreen"&&(i=(0,N.r)()?"hover_exit_full_screen":"hover_enter_full_webscreen"),!!i)A.Z.sendLog(i,{enter_from:(0,D.mo)()})};i.on("icon_mouseleave",e);let o=i.getPlugin("progress"),t=()=>{A.Z.sendLog("hover_progress",{enter_from:(0,D.mo)()})};return null==o||o.addCallBack("mouseleave",t),()=>{i.off("icon_mouseleave",e),null==o||o.removeCallBack("mouseleave",t)}},[i])}({player:o})}({player:eP,isActive:o,awemeInfo:i,getIsChangingVideoSrc:e5,getLogInfo:e6,getH265DegradeReportFlag:eN,getSpecialParams:id,getReportNetworkSpeed:C,getSupportHwClientFlag:eQ,isNext:d,index:eI}),null}},457293:function(e,i,o){o.d(i,{U:function(){return t},_:function(){return l}});let t=(e,i)=>{var o,t,l,n;let r=(null==e?void 0:null===(o=e.buffered)||void 0===o?void 0:o.length)||0,d=null!==(t=e.removedBuffer)&&void 0!==t?t:0;if(!e||!e.buffered||r<=0)return Math.min(d,i);try{let o=0,{buffered:t}=e||{};for(let e=0;e<(null==t?void 0:t.length);e++)o+=(null==t?void 0:null===(l=t.end)||void 0===l?void 0:l.call(t,e))-(null==t?void 0:null===(n=t.start)||void 0===n?void 0:n.call(t,e));return Math.min(o+d,i)}catch(e){return Math.min(d,i)}},l=e=>{let i=null==e?void 0:e.getBufferedRange();return i&&i[1]?Math.round((i[1]-e.currentTime)*1e3):0}},4563:function(e,i,o){o.d(i,{P:function(){return n}});var t=o(73834),l=o(856363);let n=e=>{let i={preloadTime:0,preloadSize:0,startBuffer:0,audioDuration:0,minDuration:0};if(!e)return i;try{var o,n,r,d;let{preLoadData:u,plugins:a}=e||{},{buffer:v=0,startBuffer:s=0}=null==e?void 0:null===(n=e.plugins)||void 0===n?void 0:null===(o=n.xglogger)||void 0===o?void 0:o.levelInfo;if(i.startBuffer=s,(0,l.me)(e)){let{duration:e,byteLength:o,audioDuration:t=0}=u||(null==a?void 0:null===(r=a.mp4encryptplayer)||void 0===r?void 0:r.preLoadData)||{};return i.preloadSize=o,i.preloadTime=e,i.audioDuration=1e3*t,i.minDuration=Math.min(1e3*e,1e3*t)||0,i}if(v>0){let o=v/1e3,l=(null==e?void 0:null===(d=e.curDefinition)||void 0===d?void 0:d.realBitrate)||0,n=(0,t.e)(o*l);i.preloadSize=n,i.preloadTime=o}return i}catch(e){return{preloadSize:0,preloadTime:0,startBuffer:0,audioDuration:0,minDuration:0}}}},546186:function(e,i,o){o.d(i,{t:function(){return v},v:function(){return a}}),o(612222);var t=o(611542),l=o(135524),n=o(819769);let r=(e,i)=>(null==i?void 0:i.awemeType)!==l.e.Note&&(null==e?void 0:e.duration)>60&&(null==e?void 0:e.currentTime)>30&&(null==e?void 0:e.duration)-(null==e?void 0:e.currentTime)>=10,d=e=>{let{awemeId:i,time:o,maxLength:t,scene:l}=e,r={awemeId:i,time:o,recordTime:Date.now(),scene:l},d=(n.Le.getConfig(n.gI.PlayRecord)||[]).filter(e=>e.scene===l&&e.awemeId!==i);if(d.length>=t){let e=[...d.slice(1),r];n.Le.setConfig(n.gI.PlayRecord,e)}else{let e=[...d,r];n.Le.setConfig(n.gI.PlayRecord,e)}},u=e=>{let i=(n.Le.getConfig(n.gI.PlayRecord)||[]).filter(i=>i.awemeId!==e);n.Le.setConfig(n.gI.PlayRecord,i)},a=e=>{if("undefined"==typeof location)return 0;let i=(n.Le.getConfig(n.gI.PlayRecord)||[]).filter(i=>i.awemeId===e&&i.scene===location.pathname&&i.recordTime+864e5>Date.now());return i.length>0?i[0].time:0},v=e=>{let{awemeInfo:i,player:o,isActive:l,from:v}=e,s=(0,t.useRef)(l),_=(0,t.useRef)(i.awemeId),c=(0,t.useRef)(i),f=(0,t.useRef)(o),m=(0,t.useRef)(l),p=(0,t.useRef)("");return c.current=i,f.current=o,m.current=l,(0,t.useEffect)(()=>{p.current=location.pathname},[]),(0,t.useEffect)(()=>{n.Le.getConfig(n.gI.PlayRecord)||n.Le.setConfig(n.gI.PlayRecord,[])},[]),(0,t.useEffect)(()=>{var e,t,n;let r=a(i.awemeId);(null==o?void 0:null===(e=o.config)||void 0===e?void 0:e.startTime)&&(null==o?void 0:null===(t=o.plugins)||void 0===t?void 0:t.xgVodLogger)&&(o.plugins.xgVodLogger.start_time=r),o&&l&&r&&!o.config.startTime&&(o.seek(r),o.config.startTime=r,(null===(n=o.plugins)||void 0===n?void 0:n.xgVodLogger)&&(o.plugins.xgVodLogger.start_time=r))},[i,o,l]),(0,t.useEffect)(()=>{let e=l!==s.current&&!l,t=l===s.current&&l&&i.awemeId!==_.current;(e||t)&&(r(o,i)?(d({awemeId:_.current,time:null==o?void 0:o.currentTime,maxLength:15,scene:p.current}),o.isPlaying=!1):a(null==i?void 0:i.awemeId)&&(null==o?void 0:o.currentTime)!==0&&u(_.current)),_.current=i.awemeId,s.current=l},[l,i,o]),(0,t.useEffect)(()=>{let e=()=>{let e=c.current,t=f.current,l=m.current||"searchPlayer"===v&&s.current;if(!!e&&!!t&&!!l)r(t,e)?(d({awemeId:e.awemeId,time:null==t?void 0:t.currentTime,maxLength:15,scene:p.current}),t.isPlaying=!1):a(null==i?void 0:i.awemeId)&&(null==o?void 0:o.currentTime)!==0&&u(_.current)};return null==o||o.on("destroy",e),()=>{null==o||o.off("destroy",e)}},[o,v]),null}},690002:function(e,i,o){o.d(i,{g:function(){return w}});var t=o(590921);o(632852),o(347885);var l=o(259202),n=o(611542),r=o(623176),d=o(106834),u=o(837305),a=o(528557),v=o(167618),s=o(356789),_=o(401310),c=o(935708),f=o(528386),m=o(773627),p=o(135621),g=o(797210);let y=e=>{let{isActive:i,abtestData:o}=e,t=(0,_.n)(),l=(0,d.U)();return(0,n.useEffect)(()=>{if(t&&i){let e=e=>{if((null==e?void 0:e.isInternalOp)!==!0)0===(0,a.$o)(u.LocalStorageKeys.PLAYER_IS_MUTE)&&t.muted&&(0,a.qQ)(u.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,a.qQ)(u.LocalStorageKeys.PLAYER_VOLUME,t.volume),(0,a.qQ)(u.LocalStorageKeys.PLAYER_IS_MUTE,t.muted?1:0),(0,p.c)({isMute:t.muted,volume:t.volume})};new Promise((e,i)=>{let{volume:l,autoplayMuted:n}=(0,p.J)(o);try{var r;null===(0,a.$o)(u.LocalStorageKeys.PLAYER_VOLUME)&&(0,a.qQ)(u.LocalStorageKeys.PLAYER_VOLUME,l),null===(0,a.$o)(u.LocalStorageKeys.PLAYER_IS_MUTE)&&(0,a.qQ)(u.LocalStorageKeys.PLAYER_IS_MUTE,0),t.video.volume=l,!(t.__isInlinePlayer&&!t.paused)&&(t.video.muted=n),null===(r=t.getPlugin("volume"))||void 0===r||r.onVolumeChange(),!v.Q.getItem({sKey:u.CookieKeys.VolumeInfo})&&v.Q.setItem(u.CookieKeys.VolumeInfo,{isUserMute:!1,isMute:t.video.muted,volume:t.video.volume}),e(0)}catch(e){t.volume=l,!(t.__isInlinePlayer&&!t.paused)&&(t.video.muted=n),i(e)}}).then(()=>{null==t||t.on(r.VOLUME_CHANGE,e)}).catch(e=>{});let i=s.listen(s.EVENT.syncInteraction,()=>{if(null==t?void 0:t.video){let{volume:e,autoplayMuted:i}=(0,p.J)(o);t.video.volume=e,t.video.muted=i}});return()=>{null==t||t.off(r.VOLUME_CHANGE,e),i()}}},[t,i,o,l]),(0,n.useEffect)(()=>{if(i&&t){let e=e=>{((null==e?void 0:e.action)==="change_muted"||(null==e?void 0:e.action)==="change_volume")&&setTimeout(()=>{(0,p.c)({isUserMute:!0===t.muted||0===t.volume,isMute:t.muted,volume:t.volume})})};return t.on(r.USER_ACTION,e),()=>{t.off(r.USER_ACTION,e)}}},[t,o,i]),(0,n.useEffect)(()=>{if(i&&t){let e=e=>{("volumeDown"===e.action||"volumeUp"===e.action)&&setTimeout(()=>{(0,p.c)({isUserMute:0===t.volume,isMute:t.muted,volume:t.volume})})};return t.on(g.B.CustomShortCut,e),()=>{t.off(g.B.CustomShortCut,e)}}},[t,o,i]),null},h=e=>{let{isActive:i,abtestData:o,awemeInfo:t,scene:l="",toast:r}=e,d=(0,_.n)();return(0,n.useEffect)(()=>{if(d&&i){let e=setTimeout(()=>{var e,i,o;d.muted=!0,d.volume=0,d.musicMute=!0,null===(o=d.plugins)||void 0===o||null===(i=o.volume)||void 0===i||null===(e=i.disable)||void 0===e||e.call(i)});return()=>{var i,o,t;clearTimeout(e),d.musicMute=!1,null===(t=d.plugins)||void 0===t||null===(o=t.volume)||void 0===o||null===(i=o.enable)||void 0===i||i.call(o)}}},[d,i]),(0,n.useEffect)(()=>{if(d&&i&&["modal","detail"].includes(l)){if(r){r("");return}f.F.info("")}},[d,i,l]),null},w=e=>{var i,o;let n=(0,c.N)(),{awemeInfo:r}=e;return(null==r?void 0:null===(o=r.status)||void 0===o?void 0:null===(i=o.videoMute)||void 0===i?void 0:i.isMute)?(0,l.jsx)(h,(0,t._)({},e)):(0,l.jsx)(m.k,{componentName:"VolumePlugin",Slardar:n,children:(0,l.jsx)(y,(0,t._)({},e))})}},459201:function(e,i,o){o.d(i,{N:function(){return r},O:function(){return d}});var t=o(124797),l=o(356789),n=o(819769);let r=e=>{l.emit(l.EVENT.syncInteractionStatus,{action:"lookVideo",awemeId:e.awemeId,fromUserId:e.authorInfo.secUid,extraAwemeInfo:{isFromSort:e.isFromSort}})},d=e=>{var i;let{awemeInfo:o}=e,l=n.Le.getConfig(n.gI.UnLookVideos);if(!!l)(null===(i=l[null==o?void 0:o.awemeId])||void 0===i?void 0:i.status)===t.Pl.UnLook&&(l[null==o?void 0:o.awemeId].status=t.Pl.Looked,r(o))}},887955:function(e,i,o){o.d(i,{K:function(){return t}});let t=e=>{let i={};if(null==e?void 0:e.chargeInfo){var o,t,l,n,r;switch(i.is_charge=e.chargeInfo.is_charge_content?1:0,i.purchase_status=e.chargeInfo.has_paid?1:0,i.is_trailer=Number(((null===(o=e.chargeInfo.preview_config)||void 0===o?void 0:o.end_time)||0)>((null===(t=e.chargeInfo.preview_config)||void 0===t?void 0:t.start_time)||0)),i.spu_type="long_video",null===(r=e.lvideoBrief)||void 0===r?void 0:null===(n=r.albumInfo)||void 0===n?void 0:null===(l=n.typeList)||void 0===l?void 0:l[0]){case 1:i.lv_type="movie";break;case 2:i.lv_type="tv";break;case 3:i.lv_type="comic";break;case 4:i.lv_type="variety";break;case 5:i.lv_type="documentary";break;case 13:i.lv_type="children"}}return i}},160551:function(e,i,o){o.d(i,{t:function(){return n}});var t=o(945363),l=o(837305);let n=function(){let e=(0,t.G)(l.SessionStorageKeys.manualSwitch);return{clarity:(null==e?void 0:e.gearClarity)||"0",is_auto:(null==e?void 0:e.done)?0:1,clarity_real:null==e?void 0:e.clarityReal}}},226160:function(e,i,o){o.d(i,{B:function(){return r}});var t=o(7979);o(632852);var l=o(13351),n=o(445659);let r=new class e{setPerfetchUsed(){this._prefetchFromClientUsed=!0}setIsUseNodeFetch(){this._isUseNodeFetch=!0}getIsUseNodeFetch(){return this._isUseNodeFetch}get prefetchFromClientUsed(){return this._prefetchFromClientUsed}async getFeed(){if(!(0,l.DT)())return null;let e=await n.dw("getRecommendFeed");return this._nodePrefetchRes=e,e}clearNodePrefetchRes(){this._nodePrefetchRes=null}get nodePrefetchRes(){return this._nodePrefetchRes}constructor(){(0,t._)(this,"_prefetchFromClientUsed",!1),(0,t._)(this,"_nodePrefetchRes",null),(0,t._)(this,"_isUseNodeFetch",!1)}}},675145:function(e,i,o){o.d(i,{P:function(){return t}});let t=e=>{var i,o,t;let{awemeInfo:l,currentTime:n}=e,r=0;return(null==l?void 0:null===(i=l.chapterInfo)||void 0===i?void 0:i.list)&&(r=(null==l?void 0:null===(t=l.chapterInfo)||void 0===t?void 0:null===(o=t.list.filter(e=>1e3*n>e.timestamp))||void 0===o?void 0:o.length)||0),r}},322903:function(e,i,o){o.d(i,{QD:function(){return l},Vr:function(){return n},k:function(){return r}});var t=o(819769);let l=()=>t.Le.getConfig(t.gI.IsMiniWin),n=()=>t.Le.getConfig(t.gI.IsMiniWinHideMode),r=()=>t.Le.getConfig(t.gI.IsClientTopMode)},715208:function(e,i,o){o.d(i,{n:function(){return t}});let t=e=>{let i=0;return i=e<=6e4?1:e<=18e4?2:e<=3e5?3:0}},73834:function(e,i,o){function t(e){try{if(!e||"number"!=typeof e)return 0;return Math.round(e/8)}catch(e){return 0}}function l(e){return e&&"number"==typeof e?1e3*e:0}o.d(i,{N:function(){return l},e:function(){return t}})},403465:function(e,i,o){let t;o.d(i,{J:function(){return l}});function l(){let e={};if(t){let{charging:i,chargingTime:o,dischargingTime:l,level:n}=t;e.battery={charging:i,chargingTime:o,dischargingTime:l,level:n}}if(void 0!==performance.memory){let{jsHeapSizeLimit:i,usedJSHeapSize:o,totalJSHeapSize:t}=performance.memory,l=i-o;e.memory={jsHeapSizeLimit:i,freeJSHeapSize:l,freeLevel:l/i,usedJSHeapSize:o,usedLevel:o/i,totalJSHeapSize:t}}return e}"function"==typeof navigator.getBattery&&(async()=>{t=await navigator.getBattery()})()},619198:function(e,i,o){o.d(i,{s:function(){return I}});var t=o(590921),l=o(874155),n=o(250751);o(482392),o(505722),o(459167),o(227470),o(101060);var r=o(748457),d=o.n(r),u=o(445659),a=o(477509),v=o(245086),s=o(351492),_=o(945363),c=o(837305),f=o(322903),m=o(845789),p=o(13351),g=o(45107),y=o(226160);let h=async(e,i,o)=>{try{var l,n,r,d,a,_;let c=w(),f=(null==e?void 0:null===(r=e.video)||void 0===r?void 0:null===(n=r.playApi)||void 0===n?void 0:null===(l=n.startsWith)||void 0===l?void 0:l.call(n,"blob"))?1:0;u.dw("printFirstFeedShow",(0,t._)({is_landscape:(null==e?void 0:null===(d=e.video)||void 0===d?void 0:d.width)>(null==e?void 0:null===(a=e.video)||void 0===a?void 0:a.height)?1:0,is_client_offline:(0,m.PB)()?1:0,group_id:null==e?void 0:e.awemeId,landing_page:(0,v.yW)(),tab_feed_prefetch_duration:(0,s.L8)("tabFeedPrefetch","tabFeedPrefetchStart","tabFeedPrefetchEnd"),vduration:null==e?void 0:null===(_=e.video)||void 0===_?void 0:_.duration,is_cache_video:f,real_index:i,aweme_type:null==e?void 0:e.awemeType},o||{},c))}catch(e){}},w=()=>{try{var e,i,o,l,n,r,u,a,_,c,f,m,p,g;let y=null===(e=(0,s.Cr)("navigation"))||void 0===e?void 0:e[0],h=(0,s.fX)(),w={headDuration:["head_start","head_end"],bodyDuration:["body_start","body_end"],scriptAssetRetryDuration:["script_asset_retry_start","script_asset_retry_end"],scriptSlardarDuration:["script_slardar_start","script_slardar_end"],scriptGlueDuration:["script_glue_start","script_glue_end"],scriptSecsdkDuration:["script_secsdk_start","script_secsdk_end"],scriptXssDuration:["script_xss_start","script_xss_end"],scriptUaDuration:["script_ua_start","script_ua_end"],scriptLogSdkDuration:["script_log_sdk_start","script_log_sdk_end"],scriptRecommendPrefetchDuration:["script_recommend_prefetch_start","script_recommend_prefetch_end"]},I={};Object.keys(w).forEach(e=>{I[d()(e)]=(0,s.L8)(e,w[e][0],w[e][1])});let b={};return Object.values(w).forEach(e=>{var i,o;b[e[0]]=null==h?void 0:null===(i=h[e[0]])||void 0===i?void 0:i.startTime,b[e[1]]=null==h?void 0:null===(o=h[e[1]])||void 0===o?void 0:o.startTime}),(0,t._)({web_tce_cluster:null===(i=window)||void 0===i?void 0:i.tce_cluster,enter_from:(0,v.yW)(),worker_start:null==y?void 0:y.workerStart,fetch_start:null==y?void 0:y.fetchStart,domain_lookup_start:null==y?void 0:y.domainLookupStart,domain_lookup_end:null==y?void 0:y.domainLookupEnd,request_start:null==y?void 0:y.requestStart,response_start:null==y?void 0:y.responseStart,response_end:null==y?void 0:y.responseEnd,head_start:null==h?void 0:null===(o=h.head_start)||void 0===o?void 0:o.startTime,head_end:null==h?void 0:null===(l=h.head_end)||void 0===l?void 0:l.startTime,body_start:null==h?void 0:null===(n=h.body_start)||void 0===n?void 0:n.startTime,body_end:null==h?void 0:null===(r=h.body_end)||void 0===r?void 0:r.startTime,html_domcontentloaded:null==h?void 0:null===(u=h.html_domcontentloaded)||void 0===u?void 0:u.startTime,app_enter:null==h?void 0:null===(a=h.app_enter)||void 0===a?void 0:a.startTime,app_render:null==h?void 0:null===(_=h.app_render)||void 0===_?void 0:_.startTime,ttfb:(null==y?void 0:y.responseStart)-(null==y?void 0:y.fetchStart),fcp:Math.ceil((null===(p=performance)||void 0===p?void 0:null===(m=p.getEntriesByName)||void 0===m?void 0:null===(f=m.call(p,"first-contentful-paint"))||void 0===f?void 0:null===(c=f[0])||void 0===c?void 0:c.startTime)||0),lcp:Math.ceil(null===(g=window)||void 0===g?void 0:g.markLCP)},b,I)}catch(e){}return{}},I=async(e,i)=>{try{var o,r,d,I,b,L,T,S,P,E,C,R,D,k,A,F;let M=Date.now(),N=w(),V=(0,_.G)(c.SessionStorageKeys.MarkFirstVideoPlay)||(0,m.xg)();(0,_.t_)(c.SessionStorageKeys.MarkFirstVideoPlay,1);let O=(null==e?void 0:null===(d=e.video)||void 0===d?void 0:null===(r=d.playApi)||void 0===r?void 0:null===(o=r.startsWith)||void 0===o?void 0:o.call(r,"blob"))?1:0,x=(e,i)=>i&&e&&"number"==typeof i&&"number"==typeof e?i-e:-1,U=await u.dw("getPerformanceInfo");if((null==U?void 0:null===(I=U.data)||void 0===I?void 0:I.oriProcessCeateTime)||(null==U?void 0:null===(b=U.data)||void 0===b?void 0:b.processCeateTime)){let o=U.data,{preloadMain:r,preloadRender:d,destroyRender:u,isExeFirstStart:_,isDiffVersion:c,launcherProcessCreationTime:m,oriProcessCeateTime:w,processCeateTime:I,firstCodeExceTime:b,appReadyTime:q,mainWindowShowTimeFormNative:B,mainWindowShowTime:Z,readyToShowTime:G,winMainStartTime:W}=o,K=(0,n._)(o,["preloadMain","preloadRender","destroyRender","isExeFirstStart","isDiffVersion","launcherProcessCreationTime","oriProcessCeateTime","processCeateTime","firstCodeExceTime","appReadyTime","mainWindowShowTimeFormNative","mainWindowShowTime","readyToShowTime","winMainStartTime"]),z=x(r?I:null===(T=performance)||void 0===T?void 0:null===(L=T.timing)||void 0===L?void 0:L.fetchStart,M),J={},Q=Math.max(x(m,w),0);Object.keys(K).forEach(e=>{var i;(null==e?void 0:null===(i=e.endsWith)||void 0===i?void 0:i.call(e,"from_create"))&&(J[e.replace("from_create","from_launcher")]=Q+K[e])});let Y=(0,l._)((0,t._)({},J,K,N),{windowName:null===(P=window)||void 0===P?void 0:null===(S=P.TTE_ENV)||void 0===S?void 0:S.windowName,isFromRefresh:V?1:0,url:null===(E=location)||void 0===E?void 0:E.href,referrer:document.referrer,feed_total_duration:V?z:x(r?I:w,M),is_landscape:(null==e?void 0:null===(C=e.video)||void 0===C?void 0:C.width)>(null==e?void 0:null===(R=e.video)||void 0===R?void 0:R.height)?1:0,group_id:null==e?void 0:e.awemeId,landing_page:(0,v.yW)(),vduration:null==e?void 0:null===(D=e.video)||void 0===D?void 0:D.duration,if_invisible:(0,f.Vr)()?"1":"0",is_small_window:(0,f.QD)()?"1":"0",real_index:i,is_cache_video:O,aweme_type:null==e?void 0:e.awemeType,tab_feed_prefetch_duration:(0,s.L8)("tabFeedPrefetch","tabFeedPrefetchStart","tabFeedPrefetchEnd"),preloadMain:r,preloadRender:d,destroyRender:u,isExeFirstStart:_?1:0,isDiffVersion:c,is_from_node_data:y.B.getIsUseNodeFetch()?1:0,win_main_from_launcher:x(m,W),win_main_from_create:x(w,W),process_create_from_launcher:x(m,w),app_start_from_create:x(w,b),app_start_from_launcher:x(m,b),app_ready_from_create:x(w,q),app_ready_from_launcher:x(m,q),main_window_show_from_native:B,main_window_show_from_create_2:x(r?I:w,Z),main_window_show_from_launcher_2:x(r?I:m,Z),main_window_show_from_create:r?x(I,Z):B||x(w,Z),main_window_show_from_launcher:r?x(I,Z):B||x(m,Z),ready_to_show_from_create:x(I,G),ready_to_show_from_launcher:x(r?I:w,G),ready_to_show_from_web:x(r?I:null===(A=performance)||void 0===A?void 0:null===(k=A.timing)||void 0===k?void 0:k.fetchStart,G),first_feed_from_create:V?z:x(r?I:w,M),first_feed_from_launcher:V?z:x(r?I:m,M),first_feed_from_web:z,fcp_duration:x(I,G),main_window_duration:r?x(I,Z):B||x(w,Z)}),H=null!==(F=(0,p.FJ)().awemePcClient)&&void 0!==F?F:"";H&&(0,g.y)(H,"==","4.4.203")?(a.i.sendLog("prfFirstFeedShow",Y),a.i.sendLog("pcColdStartPrfRecord",Y)):h(e,i,Y)}else h(e,i),a.i.sendLog("getPerformanceInfoError",{type:"noData",info:U?JSON.stringify(U):""})}catch(o){h(e,i),a.i.sendLog("getPerformanceInfoError",{type:"error",info:(null==o?void 0:o.message)||"",stack:(null==o?void 0:o.stack)||""})}}},547957:function(e,i,o){o.d(i,{V:function(){return n}});var t=o(528557),l=o(837305);function n(){(0,t.qQ)(l.LocalStorageKeys.LatestSlideSideButtonUsed,Date.now())}},98319:function(e,i,o){o.d(i,{v:function(){return t}});let t=(0,o(611542).createContext)(null)},797770:function(e,i,o){o.d(i,{A4:function(){return L},DS:function(){return I},Id:function(){return h},Rh:function(){return c},XL:function(){return y},bV:function(){return T},fd:function(){return m}});var t=o(590921),l=o(874155);o(101060),o(632852);var n=o(158077),r=o(723486),d=o(877910),u=o(877435),a=o(378135);let{COMMON_SEARCH_PARAMS:v}=n||{};function s(e){let{aweme_list:i=[],status_code:o,log_pb:t,position:l,is_force_insert:n=!1}=e;return{statusCode:o,position:l,isForceInsert:n,hasMore:!0,awemeList:(0,d.TN)({awemeList:i||[],logPb:t&&JSON.stringify(t)}),logPb:t&&JSON.stringify(t)}}function _(e){let{status_code:i,log_pb:o,ch_info:t}=e;return{statusCode:i,info:(0,d.P$)(t),logPb:o&&JSON.stringify(o)}}async function c(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:o,queryType:n=0}=e,r=await (0,u.U2)("/aweme/v1/web/challenge/detail/",(0,l._)((0,t._)({},v),{ch_id:o,query_type:n}),{},void 0,i,{});return(0,d.RL)(r,_)}function f(e){let{aweme_list:i=[],status_code:o,log_pb:t,has_more:l,cursor:n}=e;return{statusCode:o,awemeList:(0,d.TN)({awemeList:i||[],logPb:t&&JSON.stringify(t)}),logPb:t&&JSON.stringify(t),hasMore:l,cursor:n}}async function m(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{chId:o,hashtagName:n,queryType:r=0,sortType:s=a.H.Comprehensive,count:_,cursor:c,isCommerce:m=!1}=e,p=await (0,u.U2)(m?"/aweme/v1/web/commerce/challenge/aweme/":"/aweme/v1/web/challenge/aweme/",(0,l._)((0,t._)({},v),{ch_id:o,hashtag_name:n,query_type:r,sort_type:m?0:s,offset:c,cursor:c,count:_}),{},void 0,i,{});return(0,d.RL)(p,f)}function p(e){let{music_info:i,status_code:o,log_pb:t}=e;return{statusCode:o,musicInfo:(0,d.o0)(i),logPb:t&&JSON.stringify(t)}}function g(e){let{music_info:i,status_code:o,log_pb:t,msg:l,res_list:n,extra:r}=e,d="";try{d=JSON.stringify(t)}catch(e){}return{musicInfo:i,statusCode:o,logPb:d,msg:l,resList:n,extra:r}}async function y(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:o,scene:n=1}=e,r=await (0,u.U2)("/aweme/v1/web/music/detail/",(0,l._)((0,t._)({},v),{music_id:o,scene:n}),{},void 0,i,{});return(0,d.RL)(r,p)}async function h(e){let{musicId:i,action:o}=e,l=await (0,u.v_)("/aweme/v1/web/music/collect/",(0,t._)({},v),{music_id:i,type:o,action:o},void 0,null);return(0,d.RL)(l,g)}function w(e){let{aweme_list:i=[],status_code:o,log_pb:t,has_more:l,cursor:n}=e;return{statusCode:o,awemeList:(0,d.TN)({awemeList:i||[],logPb:t&&JSON.stringify(t)}),logPb:t&&JSON.stringify(t),hasMore:l,cursor:n}}async function I(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{musicId:o,count:n=10,cursor:r}=e,a=await (0,u.U2)("/aweme/v1/web/music/aweme/",(0,l._)((0,t._)({},v),{count:n,cursor:r,music_id:o}),{},void 0,i,{});return(0,d.RL)(a,w)}function b(e){let{extra:i,cursor:o,status_code:t,has_more:l,challenge_list:n=[],qs:r,is_match:u,keyword_disabled:a}=e;return{statusCode:t,hasMore:l,challengeList:(null==n?void 0:n.map(e=>(0,d.P$)(null==e?void 0:e.challenge_info)))||[],qs:r,isMatch:u,cursor:o,keywordDisabled:a,extra:{now:null==i?void 0:i.now,logid:null==i?void 0:i.logid}}}async function L(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{keyword:o,count:n=10,cursor:r}=e,a=await (0,u.U2)("/aweme/v1/web/challenge/search/",(0,l._)((0,t._)({},v),{count:n,cursor:r,keyword:o}),{},void 0,i,{});return(0,d.RL)(a,b)}async function T(){let{scene:e=r.t.PcOftenWatch,ids:i=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],0===i.filter(e=>e).length)return;let o=await (0,u.v_)("/aweme/v1/web/write/impression/",(0,t._)({},v),{scene:e,ids:i.join(" ")});return(0,d.RL)(o,s)}}}]);