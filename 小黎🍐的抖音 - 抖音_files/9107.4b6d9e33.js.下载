"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["9107"],{273647:function(e,i,t){let l,n,o;t.d(i,{t:function(){return q}});var r=t("590921"),a=t("874155"),d=t("250751");t("612222"),t("685680"),t("930798");var u=t("259202"),s=t("611542"),c=t("825211"),v=t.n(c),f=t("933019");t("724356");var h=t("188053"),p=t.n(h),m=t("448454");t("347885");var g={horizontal:0,0:"horizontal",vertical:1,1:"vertical",unknow:2,2:"unknow"};let y=e=>"string"==typeof e?e:`${e}px`,_=(e,i,t,l)=>{e.style.transform=`translate3d(${[i,t,l].map(e=>y(e)).join(",")})`};function w(){let e=this.el.offsetWidth||this.elWidth,i=this.el.offsetHeight||this.elHeight;this.elWidth=e,this.elHeight=i,this.touchData.containerWidth=e+(this.direction===g.horizontal?this.spaceBetween:0),this.touchData.containerHeight=i+(this.direction===g.vertical?this.spaceBetween:0),this.el.childNodes.forEach(t=>{Array.from(t.classList).includes("dySwiperSlide")&&(t.style[this.direction===g.vertical?"height":"width"]=`${this.direction===g.vertical?i:e}px`,t.style[this.direction===g.vertical?"marginBottom":"marginRight"]=`${this.spaceBetween}px`)});let t=this.activeIndex,l=this.loop?t+1:t,n=-(this.touchData.containerWidth*l),o=-(this.touchData.containerHeight*l);this.touchData.x=this.direction===g.horizontal?n:0,this.touchData.y=this.direction===g.vertical?o:0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null),_(this.el,this.touchData.x,this.touchData.y,0)}var I=t("552432"),E=t.n(I),x=t("600743");if("object"==typeof performance&&"function"==typeof performance.now)l=()=>performance.now();else{let e=Date,i=e.now();l=()=>e.now()-i}let b=["INPUT","SELECT","OPTION","TEXTAREA","BUTTON","VIDEO","LABEL"];function C(e){var i,t;if(!this.isDisabled())this.eventEmitter.emit("touchStart"),this.touchData.isTouchDown=!0,this.touchData.touchStartX="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,this.touchData.touchStartY="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,this.touchData.startX=this.touchData.x,this.touchData.startY=this.touchData.y,this.touchData.lastDetectTime=l(),!(b.includes(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.nodeName)||(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.isContentEditable))&&e.preventDefault()}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y";return this.touchData[this.direction===g.horizontal?e:i]}t("555266");let T=[],S=(e,i)=>(T.push([e,i]),T.splice(0,T.findIndex(i=>e-i[0]<=300)),T.reduce((e,i)=>e+i[1],0)/T.length),D=(e,i)=>Math.min(e,Math.abs(i))===e?(i>=0?1:-1)*e:i;function k(){return(null===this||void 0===this?void 0:this.data)&&(null===this||void 0===this?void 0:this.activeIndex)&&!this.data[this.activeIndex-1]?-this.touchData.containerHeight*this.activeIndex:0}function N(){return-(this.data.length-1)*this.touchData[this.direction===g.horizontal?"containerWidth":"containerHeight"]}function R(e,i){var t,l;this.touchData.x=this.direction===g.horizontal?this.touchData.startX+D(this.touchData.containerWidth,e):0,this.touchData.y=this.direction===g.vertical?this.touchData.startY+D(this.touchData.containerHeight,i):0;let n=k.call(this);P.call(this)>n?this.touchData[this.direction===g.horizontal?"x":"y"]=n-1+(-n+P.call(this,"startX","startY")+(this.direction===g.horizontal?e:i))**(null!==(t=this.resistanceRatio)&&void 0!==t?t:.7):P.call(this)<N.call(this)&&(this.touchData[this.direction===g.horizontal?"x":"y"]=N.call(this)+1-(N.call(this)-P.call(this,"startX","startY")-(this.direction===g.horizontal?e:i))**(null!==(l=this.resistanceRatio)&&void 0!==l?l:.7))}function A(e){if(!this.isDisabled()){if(this.touchData.isTouchDown){e.cancelable&&e.preventDefault();let i="touchmove"===e.type&&e.targetTouches&&(e.targetTouches[0]||e.changedTouches[0]),t="touchmove"===e.type?i.pageX:e.pageX,n="touchmove"===e.type?i.pageY:e.pageY,o=(t-this.touchData.touchStartX)*this.touchRatio,r=(n-this.touchData.touchStartY)*this.touchRatio;if(Math.max(Math.abs(o),Math.abs(r))>=30&&this.touchData.userIntendDirection===g.unknow&&(this.touchData.userIntendDirection=Math.max(Math.abs(o),Math.abs(r))===Math.abs(o)?g.horizontal:g.vertical),this.touchData.userIntendDirection===this.direction){let e=l(),i=this.direction===g.horizontal?this.touchData.x:this.touchData.y;R.call(this,o,r),this.touchData.gestureSwipeSpeed=S(e,Math.floor((this.touchData[this.direction===g.horizontal?"x":"y"]-i)/((e-this.touchData.lastDetectTime)/1e3))),this.touchData.lastDetectTime=e,_(this.el,this.touchData.x,this.touchData.y,"0"),this.eventEmitter.emit("touchMove"),this.touchData.isTouchMove=!0,this.transitionCallback&&(this.transitionCallback(),this.transitionCallback=null)}}}}let L=(e,i)=>{e.style.transitionDuration="string"!=typeof i?`${i}ms`:i};function j(e,i,t,l,n){this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=g.unknow,0<=e&&this.data.length;let o=this.loop?e+1:e,r=-(this.touchData.containerWidth*o),a=-(this.touchData.containerHeight*o);if(this.direction===g.horizontal?this.touchData.x===r:this.touchData.y===a)return!l&&(this.activeIndex=e,this.updateCallback(e,{from:t})),!1;let d=null!=i?i:this.speed;if(L(this.el,d),this.touchData.x=this.direction===g.horizontal?r:0,this.touchData.y=this.direction===g.vertical?a:0,_(this.el,this.touchData.x,this.touchData.y,0),!l&&(this.activeIndex=e,this.updateCallback(e,{from:t})),0!==d)return this.touchData.animating=!0,this.eventEmitter.emit("transitionStart"),this.transitionCallback=()=>{this.touchData.animating=!1,this.eventEmitter.emit("transitionEnd"),L(this.el,0),null==n||n(),this.el.removeEventListener("transitionend",this.transitionCallback),this.el.removeEventListener("webkitTransitionEnd",this.transitionCallback)},this.el.addEventListener("transitionend",this.transitionCallback),this.el.addEventListener("webkitTransitionEnd",this.transitionCallback),!0;this.touchData.animating=!1}function M(){j.call(this,this.activeIndex,250)}function B(){return Math.abs(P.call(this)-P.call(this,"startX","startY"))>=P.call(this,"containerWidth","containerHeight")/2}function U(e){return e-this.touchData.lastDetectTime>=100}function V(e){let i=B.call(this),t=Math.abs(this.touchData.gestureSwipeSpeed)>=50,l=U.call(this,e),n=0===this.activeIndex&&P.call(this)>0||this.activeIndex===this.data.length-1&&P.call(this)<N.call(this),o=P.call(this)-P.call(this,"startX","startY")<0==this.touchData.gestureSwipeSpeed<0||0===this.touchData.gestureSwipeSpeed;return(i||t&&!l)&&!n&&o}function O(){let e=P.call(this)-P.call(this,"startX","startY")<0?1:-1,i=this.activeIndex+e;return this.data[i]?i:this.activeIndex}function F(e){if(!this.isDisabled()){if(this.touchData.isTouchDown&&this.touchData.userIntendDirection===this.direction){this.eventEmitter.emit("touchEnd");let e=l();V.call(this,e)?j.call(this,O.call(this),250,"drag"):M.call(this)}this.touchData.isTouchDown=!1,this.touchData.isTouchMove=!1,this.touchData.userIntendDirection=g.unknow}}var $=t("801002");function Y(){return!n&&(n=function(){let e=(0,$.O)();return{pointerEvents:!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0,observer:"MutationObserver"in window||"WebkitMutationObserver"in window,smoothScroll:document.documentElement&&"scrollBehavior"in document.documentElement.style,touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||e),passiveListener:function(){let e=!1;try{let i=Object.defineProperty({},"passive",{get(){e=!0}});window.addEventListener("testPassiveListener",null,i)}catch(e){}return e}(),gestures:"ongesturestart"in window}}()),n}t("999921"),t("227470");let z={start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},W={start:"pointerdown",move:"pointermove",end:"pointerup"};function Z(e){this.touchData.animating&&(e.stopPropagation(),e.stopImmediatePropagation())}let H=(e,i)=>{let t=Y(),l=(!o&&(o=function(){let e=Y(),{platform:i}=window.navigator,t=window.navigator.userAgent,l={ios:!1,android:!1},n=window.screen.width,o=window.screen.height,r=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),d=t.match(/(iPod)(.*OS\s([\d_]+))?/),u=!a&&t.match(/(iPhone\sOS|iOS)\s([\d_]+)/),s="MacIntel"===i;return!a&&s&&e.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${n}x${o}`)>=0&&(!(a=t.match(/(Version)\/([\d.]+)/))&&(a=[0,1,"13_0_0"]),s=!1),r&&"Win32"!==i&&(l.os="android",l.android=!0),(a||u||d)&&(l.os="ios",l.ios=!0),l}()),o),n=[C,A,F,E()(w,50,{leading:!0,trailing:!0})].map(e=>e.bind(i)),r=Z.bind(i);if(!t.touch&&t.pointerEvents){e.addEventListener(W.start,n[0],!1),document.addEventListener(W.move,n[1],!1),document.addEventListener(W.end,n[2],!1),e.addEventListener("click",r,!0);let i=x.Z.bind(e,n[3]);return()=>{e.removeEventListener(W.start,n[0],!1),document.removeEventListener(W.move,n[1],!1),document.removeEventListener(W.end,n[2],!1),e.removeEventListener("click",r,!0),i&&i()}}{let i="touchstart"===z.start&&!!t.passiveListener&&{passive:!0,capture:!1};t.touch&&(e.addEventListener(z.start,n[0],i),e.addEventListener(z.move,n[1],!!t.passiveListener&&{passive:!1,capture:!1}),e.addEventListener(z.end,n[2],i),e.addEventListener(z.cancel,n[2],i)),(!l.ios&&!l.android||!t.touch&&l.ios)&&(e.addEventListener("mousedown",n[0],!1),document.addEventListener("mousemove",n[1],!1),document.addEventListener("mouseup",n[2],!1));let o=x.Z.bind(e,n[3]);return e.addEventListener("click",r,!0),()=>{t.touch&&(e.removeEventListener(z.start,n[0],i),e.removeEventListener(z.move,n[1],!1),e.removeEventListener(z.end,n[2],i),e.removeEventListener(z.cancel,n[2],i)),(!l.ios&&!l.android||!t.touch&&l.ios)&&(e.removeEventListener("mousedown",n[0],!1),document.removeEventListener("mousemove",n[1],!1),document.removeEventListener("mouseup",n[2],!1)),o&&o(),e.removeEventListener("click",r,!0)}}},G=e=>{let{spaceBetween:i,speed:t,resistanceRatio:l,direction:n,touchRatio:o,onActiveIndexChange:r,onSwiper:a,initIndex:d,data:u,loop:c,isDisabled:v}=e,f=(0,s.useMemo)(()=>new(p()),[]),h=(0,s.useRef)(null),y=(0,s.useRef)({}),_=(0,s.useRef)(-1),[I,E]=(0,s.useState)(d),x=(0,m.Z)((e,i)=>{let{from:t=""}=i;I!==e&&(null==r||r(e),E(e),f.emit("slideChange",{from:t}),f.emit("activeIndexChange",{index:e}))});return y.current=Object.assign(y.current,{data:u,activeIndex:I,speed:t,resistanceRatio:l,spaceBetween:i,slides:u,loop:c,direction:n,touchRatio:o}),(0,s.useEffect)(()=>{var e;let t=n===g.horizontal,l=n===g.vertical,o={isTouchDown:!1,isTouchMove:!1,animating:!1,x:0,y:0,startX:0,startY:0,touchStartX:0,touchStartY:0,gestureSwipeSpeed:0,userIntendDirection:g.unknow,containerWidth:h.current.offsetWidth+(t?i:0),containerHeight:h.current.offsetHeight+(l?i:0)};y.current=Object.assign(y.current,{el:h.current,updateCallback:x,eventEmitter:f,touchData:o,on:f.on.bind(f),once:f.once.bind(f),emit:f.emit.bind(f),off:f.off.bind(f),slideTo:j.bind(y.current),slideToSync:e=>{_.current=e,x(e,{from:""})},update:()=>null,isDisabled:v,slideNext:()=>{var e;if(v())return;let i=y.current;if(i.touchData.animating&&document&&!document.hidden)return;let t=i.activeIndex+1;t<(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.length)?i.slideTo(t):i.loop&&i.slideTo(t,i.speed,void 0,!0,()=>{i.slideTo(0,0)})},slidePrev:()=>{var e;if(v())return;let i=y.current;if(i.touchData.animating&&document&&!document.hidden)return;let t=i.activeIndex-1;if(t>=0&&(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e[t])){i.slideTo(t);return}-1===t&&i.loop&&i.slideTo(t,i.speed,void 0,!0,()=>{i.slideTo(i.data.length-1,0)})}});let r=v()?()=>{}:H(h.current,y.current);return null==a||a(y.current),null===(e=y.current)||void 0===e||e.slideTo(I,0),()=>{r()}},[]),(0,s.useEffect)(()=>{-1!==_.current&&y.current.slideTo(_.current,0)},[u]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{w.call(y.current)});return()=>{clearTimeout(e)}},[i,u]),{activeIndex:I,swiperContainerRef:h,dySwiperStatusRef:y}},X=e=>{let{dySwiperStatusRef:i,data:t}=e;(0,s.useEffect)(()=>{var e;(null===(e=i.current)||void 0===e?void 0:e.activeIndex)>(null==t?void 0:t.length)-1&&(null==t?void 0:t.length)>0&&j.call(i.current,(null==t?void 0:t.length)-1,0)},[t])};t("632852");var K=t("569900");let q=(0,s.forwardRef)((e,i)=>{let{direction:t,children:l,className:n,data:o,spaceBetween:c=0,style:h,speed:p,isDisabled:m,resistanceRatio:y,onSwiper:_,slideKey:w,onActiveIndexChange:I,touchRatio:E=1,initIndex:x=0,loop:b=!1,isVideoSupportMP4:C=!0}=e,P=(0,d._)(e,["direction","children","className","data","spaceBetween","style","speed","isDisabled","resistanceRatio","onSwiper","slideKey","onActiveIndexChange","touchRatio","initIndex","loop","isVideoSupportMP4"]),[T,S]=function(e){let i=[],t={"wrapper-start":[],"wrapper-end":[],"wrapper-right":[]};return s.Children.toArray(e).forEach(e=>{if(e.type&&e.type.displayName===K.o.displayName)i.push(e);else if(e.props&&e.props.slot&&t[e.props.slot])t[e.props.slot].push(e);else if(e.props&&e.props.children){let l=function e(i){let t=[];return s.Children.toArray(i).forEach(i=>{i.type&&i.type.displayName===K.o.displayName?t.push(i):i.props&&i.props.children&&e(i.props.children).forEach(e=>t.push(e))}),t}(e.props.children);l.length>0?l.forEach(e=>i.push(e)):t["wrapper-end"].push(e)}else t["wrapper-end"].push(e)}),[i,t]}(l),D=T[0],{activeIndex:k,dySwiperStatusRef:N,swiperContainerRef:R}=G({data:o,initIndex:x,spaceBetween:c,speed:p,resistanceRatio:y,touchRatio:E,direction:t,onActiveIndexChange:I,onSwiper:_,loop:b,isDisabled:()=>(null==m?void 0:m())||!C}),A=(0,s.useMemo)(()=>{if(!D)return null;let e=o.map((e,i)=>s.cloneElement(D,{activeIndex:k,currentIndex:i,slideData:e,key:null==w?void 0:w(e,i)}));if(b&&o.length>1){let i=o[0],t=o[o.length-1],l=o.length,n=s.cloneElement(D,{activeIndex:k,currentIndex:-1,slideData:t,key:null==w?void 0:w(t,-1)}),r=s.cloneElement(D,{activeIndex:k,currentIndex:l,slideData:i,key:null==w?void 0:w(t,l)});e.unshift(n),e.push(r)}return e},[D,b,o,k]);return(0,s.useImperativeHandle)(i,()=>N.current,[]),X({dySwiperStatusRef:N,data:o}),(0,u.jsxs)("div",(0,a._)((0,r._)({className:v()(f.default.container,n),style:h},P),{children:[(0,u.jsxs)("div",{ref:R,className:v()(f.default.wrapper,{[f.default.vertical]:t===g.vertical}),children:[S["wrapper-start"],A,S["wrapper-end"]]}),S["wrapper-right"]]}))})},569900:function(e,i,t){t.d(i,{o:function(){return c}});var l=t(590921),n=t(874155),o=t(250751);t(612222);var r=t(259202),a=t(611542),d=t(825211),u=t.n(d),s=t(291358);let c=(0,a.memo)(e=>{let{activeIndex:i,currentIndex:t,children:a,slideData:d,style:c,className:v}=e,f=(0,o._)(e,["activeIndex","currentIndex","children","slideData","style","className"]);return(0,r.jsx)("div",(0,n._)((0,l._)({style:c,className:u()(s.default.container,"dySwiperSlide",v)},f),{children:"function"==typeof a?a({activeIndex:i,currentIndex:t,slideData:d}):a}))});c.displayName="SwiperSlide"},902011:function(e,i,t){t.d(i,{YT:function(){return n},jk:function(){return l}});let l={disable:!1,used:!1,player:null,firstFrame:{used:!1,data:null,perfTime:0},autoplayStarted:{used:!1,data:null,perfTime:0},loadstart:{used:!1,data:null,perfTime:0},loadeddata:{used:!1,data:null,perfTime:0},playtime:{used:!1,data:null,perfTime:0},playfinish:{used:!1,data:null},prfFirstFeedShow:{used:!1,data:null},prfFirstFrameStart:{used:!1,data:null}},n="inlinePlayerContainer"},619639:function(e,i,t){t.d(i,{Q:function(){return o},c:function(){return a}}),t(101060);var l=t(261135),n=t.n(l);let o=e=>`inline_video_${e}`,r=["awemeId","awemeType","video","authorInfo","isPrivate"],a=e=>{let i=JSON.stringify(n()(e,r));return{id:o(e.awemeId),simplifiedAwemeInfo:i}}},825630:function(e,i,t){t.d(i,{f:function(){return L}});var l=t("590921");t("612222"),t("724356");var n=t("259202"),o=t("188053"),r=t.n(o),a=t("611542"),d=t("980376"),u=t("623176"),s=t("825211"),c=t.n(s),v=t("135524"),f=t("13351"),h=t("351492"),p=t("801002"),m=t("262089"),g=t("83118"),y=t("65600"),_=t("736881"),w=t("69274"),I=t("797210");t("479330");var E=t("693873"),x=t("742619"),b=t("7979");t("238658");var C=t("776477"),P=t("619639");function T(e){window.INIT_INLINE_PLAYER&&"function"==typeof window.INIT_INLINE_PLAYER&&window.INIT_INLINE_PLAYER(e)}var S=t("902011");class D extends a.Component{shouldComponentUpdate(){return!1}render(){let{awemeInfo:e,nonce:i}=this.props,{id:t,simplifiedAwemeInfo:l}=(0,P.c)(e),o=()=>{{let e=document.getElementById(t);if(e)return e.innerHTML}return`<div id="${S.YT}"></div>`};return!this.cacheNode&&(this.cacheNode=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{suppressHydrationWarning:!0,id:t,className:C.default.inlineVideo,"data-aweme-info":l,dangerouslySetInnerHTML:{get __html(){return o()}}}),(0,n.jsx)("script",{nonce:i,dangerouslySetInnerHTML:{__html:`(${T.toString()})('${t}')`}})]})),this.cacheNode}constructor(...e){super(...e),(0,b._)(this,"cacheNode",void 0)}}var k=t("910190");let N=(0,a.memo)(e=>{let{awemeInfo:i}=e,t=(0,k.Yr)();return(0,a.useEffect)(()=>()=>{},[]),(0,n.jsx)(D,{nonce:t,awemeInfo:i})}),R=new class e{getReusePlayer(e,i){let{reuseId:t,autoCreate:n}=e;if(!t)return null;let o=this.reusePlayers[t];return o?(delete this.playerReuseable[t],o):n?(o=new d.Z((0,l._)({el:document.createElement("div"),width:"100%",height:"100%",closeFocusVideoFocus:!0},i)),this.reusePlayers[t]=o,o.isReusePlayer=!0,o):null}setPlayerReuseAble(e){this.reusePlayers[e]&&(this.playerReuseable[e]=!0)}checkPlayerReuseAble(e){return this.playerReuseable[e]||!1}recyclePlayer(e){!this.checkPlayerReuseAble(e)&&delete this.reusePlayers[e]}constructor(){(0,b._)(this,"reusePlayers",{}),(0,b._)(this,"playerReuseable",{})}},A=()=>{let e=(0,m.getSelectorsByUserAgent)((0,f.ij)()),i=e.isMobile,t=e.isIOS&&e.isTablet;return i||t};(0,_.L)();let L=(0,a.forwardRef)(function(e,i){let{isPrev:t,isActive:o,isNext:s,className:f,style:m,isMobileSite:_,children:b,xgplayerConfig:C,isInitPlayer:P,onReady:T,onClick:S,slardarInstance:D,id:k,playerDOMRef:L,awemeInfo:j,isRenderInSSR:M,reuseConfig:B={},setContainerPlayer:U,abtestData:V}=e,[O,F]=(0,a.useState)(null),$=L||(0,a.useRef)(null),Y=(0,a.useRef)();!Y.current&&(Y.current=new(r())),(0,a.useEffect)(()=>{if(P){var e,i;let t;let n=A()&&!_,o=$.current;(null===(e=(0,h.bE)("new_player"))||void 0===e?void 0:e.length)<1&&(0,h.B1)({tag:"new_player"});let r=null==C?void 0:C.awemeInfo;(null==r?void 0:r.awemeType)===v.e.Note&&Object.assign(C,{startTime:Math.max(C.startTime||0,(null==r?void 0:null===(i=r.imageAlbumMusicInfo)||void 0===i?void 0:i.beginTime)/1e3||0)}),(0,p.O)()&&Object.assign(C,{domEventType:"compatible"}),Y.current.emit(w.V.PlayerBeforeCreate,t);let a=(0,E.I)();a.used=!0;let s=a.player,c=R.getReusePlayer(B,C);c?((t=c).isPlaying=!1,function(e,i){i.firstChild?i.insertBefore(e.root,i.firstChild):i.appendChild(e.root)}(t,o)):M&&(0,x.W)(r)?(t=s,a.player=null):(0,x.b)(r)?(t=a.player,o.insertBefore(t.root,o.firstChild),a.player=null):(a.player&&(a.player.destroy(),a.player=null),t=new d.Z((0,l._)({el:o,width:"100%",height:"100%",closeFocusVideoFocus:!0},C))),n&&t&&(t.removeClass("xgplayer-mobile"),t.addClass("xgplayer-pc")),Y.current.emit(w.V.PlayerCreated,t),t.dyLogStat=t.dyLogStat||{},F(t),(null==V?void 0:V.slideOptimize)&&(null==U||U(t));let f=()=>{null==T||T(t)};null==t||t.on(u.READY,f);let{reuseId:m}=B;return()=>{var e;null==t||t.off(u.READY,f),null==t||t.emit(I.B.BeforeDestroy),F(null),(null==V?void 0:V.slideOptimize)&&(null==U||U(null)),R.recyclePlayer(m),!R.checkPlayerReuseAble(m)&&(null==t||t.destroy(),t.dyLogStat=null),M&&(null==s?void 0:null===(e=s.root)||void 0===e?void 0:e.parentElement)&&s.root.parentElement.removeChild(s.root)}}},[P]),(0,a.useImperativeHandle)(i,()=>({getPlayer:()=>O,player:O,getPlayerRoot:()=>$.current,root:$.current}),[O]);let z=(0,a.useMemo)(()=>({player:O,slardarInstance:D,contextEvent:Y.current}),[O]);return(0,n.jsxs)("div",{onClick:S,className:c()(g.default.xgplayerContainer,"basePlayerContainer",f),style:m,id:k,ref:$,children:[(0,n.jsx)(y.E.Provider,{value:z,children:b}),M&&j?(0,n.jsx)(N,{awemeInfo:j}):null]})})},69274:function(e,i,t){t.d(i,{V:function(){return l}});var l={PlayerCreated:"PlayerCreated",PlayerBeforeCreate:"PlayerBeforeCreate"}},797210:function(e,i,t){t.d(i,{B:function(){return l}});var l={Ended:"ended",MiniWinChange:"miniWinChange",PlayRatioChange:"playRatioChange",UpdateCommentCount:"updateCommentCount",Blur:"blur",VolumeUp:"upVolume",VolumeDown:"downVolume",NextAutoplayChange:"nextAutoplayChange",BeforePlaySwitchPrev:"playSwitchPrevBefore",AfterPlaySwitchNext:"playSwitchNextBefore",KeyPlaySwitchPrev:"keyPlaySwitchPrev",KeyPlaySwitchNext:"keyPlaySwitchNext",Waiting:"waiting",ManualChangeMiniState:"manual_change_min_state",Star:"onStar",ShowComment:"showComment",Collect:"onCollect",ShowShareCode:"showShareCode",Dislike:"onDislike",Avatar:"onAvatar",Follow:"onFollow",FakeScreen:"onFakeScreen",SwitchFullScreen:"switch_fullscreen",FakeScreenChange:"fakeScreenChange",PlayRatioPanelShow:"playRatioPanelShow",LightBottomControls:"lightBottomControls",ResolutionChange:"resolutionChange",PlayResolutionClick:"playResolutionClick",PlayResolutionEnter:"playResolutionEnter",VolumeChange:"volumechange",UpdateImmersiveSwitch:"updateImmersiveSwitch",ImmersiveSwitchChange:"immersiveSwitchChange",UpdateAutoPlaySwitch:"updateAutoPlay",AutoPlaySwitchChange:"autoPlaySwitchChange",CustomShortCut:"customShortCut",ChangePlayRate:"changePlayRate",TimeUpdate:"timeupdate",ShowAdDetail:"showAdDetail",AdLike:"adverLike",AdDislike:"adverDislike",AdReport:"adverReport",AdThrow:"adverThrow",AdIntroduce:"adverIntroduce",Play:"play",Replay:"replay",Error:"error",ChangeDanmaku:"changeDanmaku",UpdateRadio:"UpdateRadio",UpdateClarity:"UpdateClarity",UpdateAutoPlay:"UpdateAutoPlay",BeforeDestroy:"beforeDestroy",DyUserSeek:"dyUserSeek",UpdateDebugInfo:"updateDebugInfo",RegisterMissingSrPlugin:"registerMissingSrPlugin"}},966078:function(e,i,t){t.d(i,{D:function(){return o}});var l=t(611542),n=t(351582);let o=e=>{let{awemeInfo:i,isActive:t}=e;(0,l.useEffect)(()=>{let e=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-error`),l=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-time`),o=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-play`),r=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-enter`),a=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-start`),d=document.querySelectorAll(`.video_${i.awemeId} .xgplayer-loading`);t&&((0,n.GP)(i)?(Array.from(e).forEach(e=>e.style.visibility="hidden"),Array.from(l).forEach(e=>e.style.visibility="hidden"),Array.from(o).forEach(e=>e.style.visibility="hidden"),Array.from(r).forEach(e=>e.style.visibility="hidden"),Array.from(a).forEach(e=>e.style.visibility="hidden"),Array.from(d).forEach(e=>e.style.visibility="hidden")):(Array.from(e).forEach(e=>e.style.visibility="unset"),Array.from(l).forEach(e=>e.style.visibility="unset"),Array.from(o).forEach(e=>e.style.visibility="unset"),Array.from(r).forEach(e=>e.style.visibility="unset"),Array.from(a).forEach(e=>e.style.visibility="unset"),Array.from(d).forEach(e=>e.style.visibility="unset")))},[i,t])}},359913:function(e,i,t){t.d(i,{l:function(){return o}});var l=t(611542),n=t(65600);let o=()=>{let{contextEvent:e}=(0,l.useContext)(n.E);return e}},486799:function(e,i,t){t.d(i,{E:function(){return en}});var l=t("611542"),n=t("819769");let o=e=>{let{player:i,isActive:t}=e;(0,l.useEffect)(()=>{if(i&&t){let e=()=>{n.Le.setConfig(n.gI.VideoHasPrevent,!0)};return i.on("autoplay_was_prevented",e),()=>{i.off("autoplay_was_prevented",e)}}},[i,t])};var r=t("590921"),a=t("874155");t("347885"),t("632852");var d=t("922514"),u=t("448454"),s=t("837305"),c=t("5519"),v=t("22502"),f=t("167618"),h=t("944845"),p=t("477509"),m=t("975181"),g=t("528386"),y=t("518127"),_=t("916665");let w=e=>{var i;let{player:t,isActive:l,awemeInfo:n,abtestData:o,startTime:a}=e;t.isPlaying=!1,null===(i=t.resetState)||void 0===i||i.call(t);let d=(0,m.QF)({awemeInfo:n,abtestData:o});return!!d.url.find(e=>!!e.src)&&(t.setConfig((0,r._)({autoplay:l},d)),l?(t.config.startTime=a,t.play()):t.start(),!0)},I=()=>{p.i.sendLog("videoRetryError",{type:"retry_success"})},E=()=>{p.i.sendLog("videoRetryError",{type:"retry_error"})},x=e=>{e.off("error",E),e.off("loadeddata",I)},b=e=>{x(e),e.once("error",E),e.once("loadeddata",I)},C=e=>{let{player:i,isActive:t,awemeInfo:o,deleteCurrentSwiper:m,abtestData:I}=e,E=(0,l.useRef)(t);E.current=t;let C=(0,l.useRef)(null==o?void 0:o.awemeId);C.current=null==o?void 0:o.awemeId;let P=(0,l.useRef)(!1),T=(0,l.useRef)(!1),S=(0,l.useRef)(!1),D=(0,l.useRef)(0),k=(0,u.Z)(async(e,t,l)=>{if((t||Date.now()-D.current>6e4)&&(T.current=!1,S.current=!1),T.current&&S.current)return p.i.sendLog("videoRetryError",{type:"real_blank_screen",aweme_id:e}),!1;if(D.current=Date.now(),i.removeClass(d.Z.ERROR),i.addClass(d.Z.LOADING),b(i),T.current||6===l)T.current=!0;else{var o;if(T.current=!0,i.dash)return i.retry(),!0;let t=i.currentSrc&&1===(0,c.q)(i.currentSrc),l=i.currentTime,n=i.config.url instanceof Array?null===(o=i.config.url)||void 0===o?void 0:o.find(e=>{var i;return null==e?void 0:null===(i=e.src)||void 0===i?void 0:i.includes("www.douyin.com")}):null;return!n&&p.i.sendLog("videoRetryError",{type:"retry_base_url_miss",aweme_id:e}),t&&n?(i.src=n.src,i.load(),i.currentTime=l):i.retry(),!0}p.i.sendLog("videoRetryError",{type:"retry_native",aweme_id:e});try{S.current=!0;let t=i.currentTime,l=await (0,h.m_)({awemeId:e});if(!P.current&&C.current===e){let o=null;if(0===l.statusCode&&l.detail){if(o=l.detail,!w({player:i,awemeInfo:l.detail,isActive:E.current,abtestData:I,startTime:t}))return i.addClass(d.Z.ERROR),i.removeClass(d.Z.LOADING),!1;p.i.sendLog("videoRetryError",{type:"retry_api_aweme_ok",aweme_id:e})}else{if(!l.isUnknownAweme)return i.addClass(d.Z.ERROR),i.removeClass(d.Z.LOADING),p.i.sendLog("videoRetryError",{type:"retry_api_statuscode_error",aweme_id:e}),!1;null==m||m(),E.current&&g.F.info("该视频已被删除"),p.i.sendLog("videoRetryError",{type:"retry_api_aweme_404",aweme_id:e})}n.Le.setConfig(n.gI.RefetchAwemeInfo,{[e]:o})}}catch(t){return i.addClass(d.Z.ERROR),i.removeClass(d.Z.LOADING),p.i.sendLog("videoRetryError",{type:"retry_api_catch",aweme_id:e}),!1}return!0});(0,l.useEffect)(()=>(P.current=!1,()=>{P.current=!0}),[]);let N=e=>{var t,l,n,d,u,h;let{isH265:m}=(0,y.Z)({awemeInfo:o,player:i}),g=(0,a._)((0,r._)({urlParamList:["previous_page","tab_name"]},(0,_.Z)(i)),{group_id:o.groupId,aweme_type:o.awemeType,player_type:"xgplayer",player_version:i.version,errorCode:(null==e?void 0:null===(t=e.mediaError)||void 0===t?void 0:t.code)||(null==e?void 0:e.errorCode)||"",errorDesc:(null==e?void 0:null===(l=e.mediaError)||void 0===l?void 0:l.message)||(null==e?void 0:e.errorMessage)||"",is_cdn_expired:1===(0,c.q)(i.currentSrc)?1:0,vduration:null==o?void 0:null===(n=o.video)||void 0===n?void 0:n.duration,is_video_support:Number((0,v.k)().isSupport),is_bytevc1:m,log_pb:null==o?void 0:o.logPb,video_play_mode:(null===(d=f.Q.getItem({sKey:s.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===d?void 0:d.type)===1?"landscape":"all",is_landscape:(null==o?void 0:null===(u=o.video)||void 0===u?void 0:u.width)>(null==o?void 0:null===(h=o.video)||void 0===h?void 0:h.height)?1:0});p.i.sendLog("videoPlayError",g)};(0,l.useEffect)(()=>{var e;i&&(null==o?void 0:null===(e=o.video)||void 0===e?void 0:e.playApi)&&(i.usePluginHooks("error","errorHandler",(e,i)=>Promise.resolve().then(async()=>{let e=await k(o.awemeId,!1,null==i?void 0:i.errorCode);return!e&&N(i),!e})),i.usePluginHooks("error","errorRetry",()=>(k(o.awemeId,!0),p.i.sendLog("videoRetryError",{type:"user_click",aweme_id:null==o?void 0:o.awemeId}),!1)))},[i,o,I]),(0,l.useEffect)(()=>{t&&i&&i.isError&&o&&k(o.awemeId,!0)},[I,t,i,o,k]),(0,l.useEffect)(()=>()=>i&&i.off&&x(i),[i])};t("724356"),t("677546"),t("227470");var P=t("623176"),T=t("690352"),S=t("124797"),D=t("732515"),k=t("356789"),N=t("153385"),R=t("13351"),A=t("375456"),L=t("587427"),j=t("750258");let M=e=>{let{player:i,isActive:t,awemeInfo:o,config:r,abtestData:a,currentIndex:d}=e,u=(0,l.useRef)(!1),s=(0,l.useRef)(!1),c=()=>{i.pause()};(0,l.useEffect)(()=>{let e=k.listen(k.EVENT.changeMinWindows,e=>{let{isMiniWin:i}=e;s.current=!0});return()=>e()},[]),(0,l.useEffect)(()=>{let e=n.Le.getConfig(n.gI.GlobalSwiper);if(e&&d&&i&&(null==a?void 0:a.onActiveChangePlay)){let t=e=>{var t,l,a,u;let{index:v}=e;if(!n.Le.getConfig(n.gI.IsMiniWin)&&!s.current)if(d===v)i.off(P.TIME_UPDATE,c),(0,L.d)({player:i,config:r,awemeInfo:o,prePlay:1}),k.emit(k.EVENT.livePause),i.emit("preplay",null==i?void 0:null===(t=i.config)||void 0===t?void 0:t.vid);else{i.prepauseStat=1,i.superResolution=(0,j.B)({player:i}),i.bandWidth=null==i?void 0:i.bandwidth,(0,L.c)({player:i});try{null===(u=window.TTCommon)||void 0===u||null===(a=u.executeWithElement)||void 0===a||a.call(u,i.video,"updateSrState",0)}catch(e){}i.emit("prepause",null==i?void 0:null===(l=i.config)||void 0===l?void 0:l.vid)}};return e.on("activeIndexChange",t),()=>{e.off("activeIndexChange",t)}}},[o,i,d,null==a?void 0:a.onActiveChangePlay]),(0,l.useEffect)(()=>{if(i){var e,l,a;if(t&&(i.config.notUseRefreshVid||(0,N.B)())){i.blockPlayType=`lazyChildren_notUseRefreshVid_${null==i?void 0:null===(e=i.config)||void 0===e?void 0:e.notUseRefreshVid}_isLazyChildren${N.B}`;return}if(t&&(0,N.r)()){i.blockPlayType="isFromLynx";return}if(i.__isInlinePlayer&&t&&!i.isBlockedInlinePlayerRestart&&(i.isPlaying=!1,i.isBlockedInlinePlayerRestart=!0),t){if(null==i?void 0:i.preplay){i.blockPlayType="preplay",i.preplay=0;let e=Object.assign({},null===(l=n.Le.getConfig(n.gI.AbtestData))||void 0===l?void 0:l.dashConfig,null===(a=n.Le.getConfig(n.gI.AbtestData))||void 0===a?void 0:a.dashConfigServer);((null==e?void 0:e.fixPreplay)||(0,R.DT)())&&i.play()}else(0,L.d)({player:i,config:r,awemeInfo:o})}else if(!t)return i.__isInlinePlayer&&(u.current=!0),(0,L.c)({player:i}),i.on(P.TIME_UPDATE,c),()=>{i.off(P.TIME_UPDATE,c)}}},[i,t]),(0,l.useEffect)(()=>{i&&t&&window.dispatchEvent(new Event("playNext",{bubbles:!0}))},[i,t]),(0,l.useEffect)(()=>{let e=null;if(i&&t){var l;e=window.player,window.player=i;let t=A.s.getPlayersByScene(S.lT.Modal).length>0&&A.s.getPlayerScene(i.playerId)!==S.lT.Modal;(null===(l=(0,T.parse)(location.search))||void 0===l?void 0:l.webRid)&&(i.pause(),i.config.autoplay=!1,i.pauseType="hasModalLive"),!t&&(null==i||i.setUserActive(!0));let n=k.listen(k.EVENT.videoPause,()=>{i.pause(),i.pauseType="gobalEmit",i.config.autoplay=!1});return()=>{e&&(window.player=e),n()}}},[i,t]),(0,l.useEffect)(()=>{let e=()=>{i&&t&&A.s.getPlayersByScene(S.lT.Modal).length>0&&A.s.getPlayerScene(i.playerId)!==S.lT.Modal&&(i.pause(),i.pauseType="hasOtherModalPlayer",i.config.autoplay=!1,i.autoplay=!1)};if(i&&t)return i.once("play",e),()=>{i.off("play",e)}},[i,t]),(0,D.w)(()=>{if(i&&t){i.pause(),i.pauseType="useRouteDeActiveEffect";let e=()=>{i.pause(),i.pauseType="useRouteDeActiveEffectListen"};return i.on(P.PLAY,e),i.on(P.TIME_UPDATE,e),()=>{i.off(P.PLAY,e),i.off(P.TIME_UPDATE,e)}}},[t,i])};t("586529");let B=e=>{let{player:i,isActive:t}=e;(0,l.useEffect)(()=>{if(i&&i.root.getElementsByClassName("xgplayer-start")[0]&&(i.root.getElementsByClassName("xgplayer-start")[0].className=`${i.root.getElementsByClassName("xgplayer-start")[0].className} douyinHide`,t)){let e=setTimeout(()=>{i.root.getElementsByClassName("xgplayer-start")[0]&&(i.root.getElementsByClassName("xgplayer-start")[0].className=i.root.getElementsByClassName("xgplayer-start")[0].className.split(" ").filter(e=>"douyinHide"!==e).join(" "))},1e3),t=()=>{clearTimeout(e),i.root.getElementsByClassName("xgplayer-start")[0]&&(i.root.getElementsByClassName("xgplayer-start")[0].className=i.root.getElementsByClassName("xgplayer-start")[0].className.split(" ").filter(e=>"douyinHide"!==e).join(" "))};return i.once(P.AUTOPLAY_STARTED,t),()=>{i.off(P.AUTOPLAY_STARTED,t),i.root.getElementsByClassName("xgplayer-start")[0]&&(i.root.getElementsByClassName("xgplayer-start")[0].className=`${i.root.getElementsByClassName("xgplayer-start")[0].className} douyinHide`)}}},[i,t])};var U=t("51877"),V=t.n(U),O=t("943810"),F=t.n(O),$=t("44104"),Y=t.n($),z=t("135524"),W=t("575217"),Z=t("745681"),H=t("824041"),G=t("847958");let X=(e,i)=>{let t=[z.e.Normal,z.e.XgVideo].includes(null==e?void 0:e.awemeType),l=i.currentTime>=3&&i.duration-i.currentTime>=30;return t&&l},K=e=>{var i,t;let{player:o,isActive:r,awemeInfo:a,scene:d,userInfo:u}=e,s=(0,G.U7)(),c=(0,G.dY)("multi_device_resume",null==u?void 0:u.isLogin),v=s&&(null==c?void 0:c.enable)===1&&(null==c?void 0:c.pc_auto_record)===1;(0,l.useEffect)(()=>{var e,i;if(o&&(null==u?void 0:null===(e=u.info)||void 0===e?void 0:e.uid)&&(null==a?void 0:null===(i=a.continationInfo)||void 0===i?void 0:i.continationVideoAlreadyConsume)===!1){let{fwsExample:e}=n.Le.getConfig(n.gI.fwsExample)||{},i=e=>{var i,t,l,o,r;let d={app_id:W.APP_ID,message_type:new(Y())(Z.Cs.ReplyConsume||"0"),user_id:new(Y())(u.info.uid||"0"),device_id:new(Y())((null===(i=(0,n.Es)())||void 0===i?void 0:i.user_unique_id)||"0"),to_device_type:new(Y())(Z.Yi.Phone||"0"),to_device_id:new(Y())((null==a?void 0:null===(t=a.continationInfo)||void 0===t?void 0:t.fromDeviceId)||"0"),continuation_info:{ItemId:new(Y())(null==a?void 0:a.awemeId),RecordType:new(Y())(null==a?void 0:null===(l=a.continationInfo)||void 0===l?void 0:l.recordType),EpisodeId:new(Y())((null==a?void 0:null===(r=a.lvideoBrief)||void 0===r?void 0:null===(o=r.episodeInfo)||void 0===o?void 0:o.episodeId)||"0")}},s=F().stringify(d);e.send(s,{service:Z.oU.Multicast,method:10}),V()(a,"continationInfo.continationVideoAlreadyConsume",!0)};if(e){let t=()=>{i(e)};if(!o.isPlaying)return o.once(P.CANPLAY,t),()=>{o.off(P.CANPLAY,t)};t()}else{let e=null,t=k.listen(k.EVENT.fwsExampleInit,t=>{o.isPlaying?i(t):(e=()=>{i(t)},o.once(P.CANPLAY,e))});return()=>{t(),o.off(P.CANPLAY,e)}}}},[o,a]),(0,l.useEffect)(()=>{var e;if(o&&r&&(null==u?void 0:null===(e=u.info)||void 0===e?void 0:e.uid))return k.listen(k.EVENT.sendPullMessage,e=>{if(o.isUserActive&&X(a,o)){var i,t,l,r,d,s,c;let{toDeviceId:v,toDeviceType:f}=e||{},{fwsExample:h}=n.Le.getConfig(n.gI.fwsExample)||{},p={app_id:new(Y())("6383"),message_type:2,user_id:new(Y())((null==u?void 0:null===(i=u.info)||void 0===i?void 0:i.uid)||"0"),device_id:new(Y())((null===(t=(0,n.Es)())||void 0===t?void 0:t.user_unique_id)||"0"),to_device_type:new(Y())(f),to_device_id:new(Y())(v),continuation_info:{UserId:new(Y())((null==u?void 0:null===(l=u.info)||void 0===l?void 0:l.uid)||"0"),ItemId:new(Y())((null==a?void 0:a.awemeId)||"0"),ItemType:new(Y())((null==a?void 0:a.awemeType)||"0"),PlayTime:Math.floor(o.currentTime),Cover:(null==a?void 0:null===(r=a.video)||void 0===r?void 0:r.cover)||"",FromDeviceId:new(Y())((null===(d=(0,n.Es)())||void 0===d?void 0:d.user_unique_id)||"0"),FromDeviceType:Number(Z.Yi.PC),RecordType:Number(Z.ns.auto),EpisodeId:new(Y())((null==a?void 0:null===(c=a.lvideoBrief)||void 0===c?void 0:null===(s=c.episodeInfo)||void 0===s?void 0:s.episodeId)||"0")}},m=F().stringify(p);h.send(m,{service:Z.oU.Multicast,method:10})}})},[o,r,null==u?void 0:null===(i=u.info)||void 0===i?void 0:i.uid]),(0,l.useEffect)(()=>{var e;if(o&&r&&[Z.b.Default,Z.b.Open].includes(null==u?void 0:null===(e=u.info)||void 0===e?void 0:e.continuationState)&&v){let e=()=>{"hidden"===document.visibilityState&&o.isUserActive&&X(a,o)&&(0,H.wU)({item_id:null==a?void 0:a.awemeId,item_type:null==a?void 0:a.awemeType,play_progress:Math.floor(o.currentTime),to_client:Number(Z.Yi.Phone),record_type:Number(Z.ns.auto)})},i=()=>{o.isUserActive&&X(a,o)&&(0,H.wU)({item_id:null==a?void 0:a.awemeId,item_type:null==a?void 0:a.awemeType,play_progress:Math.floor(o.currentTime),to_client:Number(Z.Yi.Phone),record_type:Number(Z.ns.auto)})};return window.addEventListener("beforeunload",i),document.addEventListener("visibilitychange",e),()=>{window.removeEventListener("beforeunload",i),document.removeEventListener("visibilitychange",e)}}},[o,r,null==u?void 0:null===(t=u.info)||void 0===t?void 0:t.uid,v])};var q=t("433075"),J=t("979265");let Q=e=>{let{player:i,isNext:t,awemeInfo:n,abtestData:o}=e,r=(0,J.Y)({awemeInfo:n,abtestData:o});(0,l.useEffect)(()=>{i&&t&&((0,q.tw)(null==i?void 0:i.playerId,!0),window.nextPlayer=i,i.isMultiple=1,r())},[i,t])};var ee=t("359913"),ei=t("69274");let et=e=>{let{player:i,awemeInfo:t,abtestData:n}=e,o=(0,ee.l)();(0,l.useEffect)(()=>{var e;let i=()=>{let e=null==t?void 0:t.isAds;if(window.TTCommon){var i,l;null===(i=(l=window.TTCommon).execute)||void 0===i||i.call(l,"applyConfig",e?'{"gpu_use_single_video_decoder_texture":1}':'{"gpu_use_single_video_decoder_texture":0}')}};return null==o||null===(e=o.on)||void 0===e||e.call(o,ei.V.PlayerBeforeCreate,i),()=>{var e;null==o||null===(e=o.off)||void 0===e||e.call(o,ei.V.PlayerBeforeCreate,i)}},[t,n])};var el=t("401310");t("414751");let en=e=>{let i=(0,el.n)(),{isActive:t,awemeInfo:l,deleteCurrentSwiper:n,config:r,abtestData:a,scene:d,userInfo:u,isNext:s,currentIndex:c}=e;return o({player:i,isActive:t,awemeInfo:l}),C({player:i,isActive:t,awemeInfo:l,deleteCurrentSwiper:n,abtestData:a}),M({player:i,isActive:t,awemeInfo:l,config:r,abtestData:a,currentIndex:c}),B({player:i,isActive:t}),K({player:i,isActive:t,awemeInfo:l,scene:d,userInfo:u}),Q({player:i,isNext:s,awemeInfo:l,abtestData:a}),et({player:i,awemeInfo:l,abtestData:a}),null}},916665:function(e,i,t){var l=t(245086),n=t(13351);i.Z=e=>{try{var i,t,o,r,a,d,u,s;return{enter_from:(0,l.mo)(),internet_speed_dl:null===(t=navigator)||void 0===t?void 0:null===(i=t.connection)||void 0===i?void 0:i.downlink,cpu_core:null===(o=navigator)||void 0===o?void 0:o.hardwareConcurrency,memory_size:(0,n.Bl)(),UA_info:null===(r=navigator)||void 0===r?void 0:r.userAgent,webdriver:navigator&&navigator.webdriver?1:0,is_long_not_use_refresh_vid:!!(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.notUseRefreshVid),preplay_stat:(null==e?void 0:e.preplayStat)?1:0,prepause_stat:(null==e?void 0:e.prepauseStat)?1:0,player_start_time:(null==e?void 0:null===(d=e.config)||void 0===d?void 0:d.startTime)||0,video_codec:null==e?void 0:null===(u=e.mediaCodec)||void 0===u?void 0:u.videoCodec,audio_codec:null==e?void 0:null===(s=e.mediaCodec)||void 0===s?void 0:s.audioCodec,is_player_v2:0,player_id:null==e?void 0:e.playerId}}catch(e){return{}}}},750258:function(e,i,t){t.d(i,{B:function(){return u},m:function(){return d}});var l=t(590921),n=t(837305),o=t(13351),r=t(528557),a=t(819769);let d=e=>{var i,t;let{player:l}=e,n=null==l?void 0:null===(t=l.definitionList)||void 0===t?void 0:null===(i=t.find)||void 0===i?void 0:i.call(t,e=>{var i;return(null==e?void 0:e.definition)===(null==l?void 0:null===(i=l.curDefinition)||void 0===i?void 0:i.orgDefinition)});if(l.orgDefinition=n,!n)return{};let{bitrate:o,definition:r,gearName:a,qualityType:d,size:u}=n;return{video_bitrate_origin:o,gear_name_origin:a,video_quality_origin:d,video_size_origin:u,definition_origin:r}},u=e=>{let{player:i}=e;try{var t,d,u,s,c,v,f,h,p,m,g,y,_,w;if(!(0,o.DT)())return(0,l._)({is_super_resolution:(null===(c=i.plugins)||void 0===c?void 0:null===(s=c.srplugin)||void 0===s?void 0:null===(u=s.getStat)||void 0===u?void 0:null===(d=u.call(s))||void 0===d?void 0:d.usingSR)?1:0,is_sr:(null===(p=i.plugins)||void 0===p?void 0:null===(h=p.srplugin)||void 0===h?void 0:null===(f=h.getStat)||void 0===f?void 0:null===(v=f.call(h))||void 0===v?void 0:v.usingSR)?1:0,is_sr_dowgrade_permanently:null!==(_=(0,r.$o)(n.LocalStorageKeys.srDegradePermanently))&&void 0!==_?_:0,is_sr_dowgrade_once:null!==(w=a.Le.getConfig(a.gI.SrDegrade))&&void 0!==w?w:0},(null==i?void 0:null===(y=i.plugins)||void 0===y?void 0:null===(g=y.srplugin)||void 0===g?void 0:null===(m=g.getStat)||void 0===m?void 0:m.call(g))||{});if(i.video&&(null===(t=window.TTCommon)||void 0===t?void 0:t.executeWithElement)){let e=JSON.parse(window.TTCommon.executeWithElement(i.video,"getSrCurrentInfo",""))||{};return(0,l._)({is_super_resolution:((null==e?void 0:e.sr_enable)!==3||(null==e?void 0:e.sr_local_error)!==0)&&((null==e?void 0:e.sr_local_error)||!((null==e?void 0:e.proc_avg)>0))?0:1,is_sr_called:(null==i?void 0:i.sr)?1:0},e)}}catch(e){}return{is_super_resolution:0}}},518127:function(e,i,t){t.d(i,{Z:function(){return n}});var l=t(44249);function n(e){var i;let{awemeInfo:t,player:n}=e,o=(0,l.U)({awemeInfo:t,player:n});return{isH265:o,codecFormat:2===o?"bytevc2":1===o?"bytevc":"h264",videoFormat:null!==(i=null==n?void 0:n.playerType)&&void 0!==i?i:"mp4"}}},82757:function(e,i,t){t.d(i,{V:function(){return y}}),t("612222"),t("347885");var l=t("259202"),n=t("611542"),o=t("825211"),r=t.n(o),a=t("356789"),d=t("407766"),u=t("590921"),s=t("874155");let c=(0,n.forwardRef)((e,i)=>(0,l.jsx)("svg",(0,s._)((0,u._)({width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,l.jsx)("path",{d:"M14 1.167a6.125 6.125 0 0 0-6.125 6.125V10.5a3.208 3.208 0 0 0-3.208 3.208v8.75a3.208 3.208 0 0 0 3.208 3.209h12.25a3.208 3.208 0 0 0 3.208-3.209v-8.75a3.208 3.208 0 0 0-3.208-3.208V7.292A6.125 6.125 0 0 0 14 1.167zm4.375 9.333h-8.75V7.292a4.375 4.375 0 1 1 8.75 0V10.5z",fill:"#fff"})}))),v=(0,n.forwardRef)((e,i)=>(0,l.jsx)("svg",(0,s._)((0,u._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.54 10a5.464 5.464 0 0 1 10.883-.702l-1.394-1.232a.75.75 0 1 0-.994 1.124l2.825 2.498a.75.75 0 0 0 1.128-.157l2.036-3.174a.75.75 0 1 0-1.262-.81l-.879 1.37A6.965 6.965 0 0 0 2.04 10a6.964 6.964 0 0 0 10.943 5.715.75.75 0 1 0-.858-1.23A5.464 5.464 0 0 1 3.54 10z",fill:"#fff",opacity:".6"})})));var f=t("699233"),h=t("401310"),p=t("351582"),m=t("889456"),g=t("946816");let y=e=>{var i;let{className:t,abTestData:o,awemeInfo:u,isShowReplay:s=!0,isActive:y,isClientMiniWin:_=!1}=e,w=(0,p.GP)(u),[I,E]=(0,n.useState)(w||!1),x=(0,h.n)();(0,n.useEffect)(()=>{let e=a.listen(a.EVENT.ShowPreviewPaidMask,e=>{let{isShow:i,awemeId:t,playerId:l}=e;y&&t===(null==u?void 0:u.awemeId)&&(l===(null==x?void 0:x.playerId)||!l)&&E(i)});return()=>{null==e||e()}},[y,u,x]),(0,n.useEffect)(()=>{w?E(!0):E(!1)},[u]);let{isPreivewFinish:b}=(0,m.O)({awemeInfo:u,isActive:y});return((0,n.useEffect)(()=>{_&&(b?["primary","subscribe"].includes((0,g.$m)(u))&&E(!0):!w&&E(!1))},[b,_]),!I||(null==u?void 0:null===(i=u.chargeInfo)||void 0===i?void 0:i.has_paid))?null:(0,l.jsxs)("div",{className:r()(d.default.conatienr,t,{[d.default.filter]:w}),children:[(0,l.jsx)(f.Z,{src:c,width:28,height:28,viewBox:"0 0 28 28"}),(0,l.jsx)("span",{className:d.default.title,children:"购买后可看"}),!w&&s&&(0,l.jsxs)("div",{className:d.default.subTitle,onClick:()=>{var e,i,t,l,n,o;(null==u?void 0:null===(i=u.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.start_time)>0?null==x||null===(n=x.seek)||void 0===n||n.call(x,(null==u?void 0:null===(l=u.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.start_time)/1e3):null==x||null===(o=x.replay)||void 0===o||o.call(x),E(!1)},children:[(0,l.jsx)(f.Z,{src:v,width:20,height:20,viewBox:"0 0 20 20"}),"重播"]})]})}},889456:function(e,i,t){t.d(i,{O:function(){return c}}),t(612222);var l=t(448454),n=t(623176),o=t(611542),r=t(552432),a=t.n(r),d=t(797210),u=t(401310),s=t(351582);let c=e=>{var i,t,r,c;let{awemeInfo:v,isActive:f}=e,[h,p]=(0,o.useState)((null==v?void 0:null===(t=v.chargeInfo)||void 0===t?void 0:null===(i=t.preview_config)||void 0===i?void 0:i.is_preview)?null==v?void 0:null===(c=v.chargeInfo)||void 0===c?void 0:null===(r=c.preview_config)||void 0===r?void 0:r.end_time:0),[m,g]=(0,o.useState)(!1),y=(0,u.n)(),_=(0,l.Z)(e=>{var i,t,l,n;let{currentTime:o}=e||{},r=null==v?void 0:null===(t=v.chargeInfo)||void 0===t?void 0:null===(i=t.preview_config)||void 0===i?void 0:i.end_time,a=(null==v?void 0:null===(n=v.chargeInfo)||void 0===n?void 0:null===(l=n.preview_config)||void 0===l?void 0:l.start_time)||0,d=Math.ceil(1e3*o);r>=d&&a<=d?(p(r-d),g(!1)):g(!0)}),w=(0,l.Z)(e=>{var i,t,l,n;let{currentTime:o}=e,r=null==v?void 0:null===(t=v.chargeInfo)||void 0===t?void 0:null===(i=t.preview_config)||void 0===i?void 0:i.end_time,a=(null==v?void 0:null===(n=v.chargeInfo)||void 0===n?void 0:null===(l=n.preview_config)||void 0===l?void 0:l.start_time)||0,d=Math.ceil(1e3*o);r>=d&&a<=d?(p(r-d),g(!1)):g(!0)}),I=(0,l.Z)(()=>{var e,i,t,l;g(!1),p((null==v?void 0:null===(i=v.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)?null==v?void 0:null===(l=v.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.end_time:0)}),E=a()(_,200),x=(0,l.Z)(()=>{var e,i,t,l,o;(null==v?void 0:null===(i=v.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)&&f&&(null==y||null===(t=y.on)||void 0===t||t.call(y,d.B.TimeUpdate,E),null==y||null===(l=y.on)||void 0===l||l.call(y,n.SEEKING,w),null==y||null===(o=y.on)||void 0===o||o.call(y,d.B.Replay,I))}),b=(0,l.Z)(()=>{var e,i,t;null==y||null===(e=y.off)||void 0===e||e.call(y,d.B.TimeUpdate,E),null==y||null===(i=y.off)||void 0===i||i.call(y,n.SEEKING,w),null==y||null===(t=y.off)||void 0===t||t.call(y,d.B.Replay,I)});return(0,o.useEffect)(()=>(x(),()=>{b()}),[null==v?void 0:v.awemeId,f,y]),(0,o.useEffect)(()=>{let e=()=>{if((0,s.zJ)(v)){var e;null==y||null===(e=y.replay)||void 0===e||e.call(y)}};if(y)return y.on("ended",e),()=>{y.off("ended",e)}},[v,y]),{previewTime:h,isPreivewFinish:m}}},813777:function(e,i,t){t.d(i,{A:function(){return q}});var l=t("590921");t("612222"),t("347885");var n=t("259202"),o=t("611542"),r=t("825211"),a=t.n(r),d=t("623176"),u=t("582099"),s=t("477509"),c=t("804929"),v=t("356789"),f=t("898263"),h=t("245086"),p=t("532603"),m=t("781114"),g=t("318086"),y=t("460819"),_=t("874155");let w=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,_._)((0,l._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{d:"M4.22 1.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 1 1-1.06-1.06L7.94 6 4.22 2.28a.75.75 0 0 1 0-1.06z",fill:"#FD9"})})));var I=t("889456"),E=t("432097"),x=t("274668");let b=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,_._)((0,l._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.284 11.223a.75.75 0 1 0-1.06 1.06l3.719 3.72-3.72 3.72a.75.75 0 0 0 1.061 1.06l3.72-3.72 3.718 3.72a.75.75 0 0 0 1.061-1.06l-3.719-3.72 3.72-3.72a.75.75 0 1 0-1.061-1.06l-3.72 3.72-3.719-3.72z",fill:"#fff",fillOpacity:".34"})})));var C=t("699233"),P=t("946816");let T=e=>{var i,t,r,a,d,u,c,v,m;let{awemeInfo:g,onBuy:y,onClose:w,logParams:I}=e,T=g.entertainmentProductInfo,S=(0,o.useMemo)(()=>{var e,i,t,l,n,o,r;return{enter_from:(0,f.Rs)("enter_from"),module:decodeURIComponent((0,f.Rs)("module")||""),enter_from_merge:(0,h.yW)(),previous_page:(0,f.Rs)("previous_page"),group_id:null==g?void 0:g.awemeId,author_id:null==g?void 0:null===(e=g.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==g?void 0:null===(i=g.seriesInfo)||void 0===i?void 0:i.seriesId)||(null==g?void 0:null===(t=g.mixInfo)||void 0===t?void 0:t.mixId)||"",ce_content_type:(0,p.a)(g),ce_item_id:String((null==g?void 0:null===(l=g.seriesInfo)||void 0===l?void 0:l.currentEpisode)||(null==g?void 0:null===(n=g.mixInfo)||void 0===n?void 0:n.currentEpisode)),is_trailer:(null==g?void 0:null===(r=g.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.is_preview)?1:0,button_type:""}},[g]);(0,o.useEffect)(()=>{s.i.sendLog("pcBuyCompleteContentShow",(0,_._)((0,l._)({},S),{from_group_id:null==I?void 0:I.from_group_id}))},[]);let D=(0,P.$m)(g);return(0,n.jsxs)("div",{className:x.default.container,onClick:y,children:[(0,n.jsx)(C.Z,{src:b,width:32,height:32,viewBox:"0 0 32 32",className:x.default.close,onClick:e=>{e.stopPropagation(),null==w||w()}}),(0,n.jsxs)("div",{className:x.default.mainLine,children:[(0,n.jsx)("img",{src:null==T?void 0:null===(t=T.cover_url)||void 0===t?void 0:null===(i=t.url_list)||void 0===i?void 0:i[0],className:x.default.cover}),"primary"===D&&(0,n.jsx)("div",{className:x.default.tag,children:"付费"}),"subscribe"===D&&(0,n.jsx)("div",{className:x.default.tag,children:"专属会员"}),(0,n.jsxs)("div",{className:x.default.infoBox,children:[(0,n.jsxs)("div",{className:x.default.title,children:[(0,n.jsx)("img",{src:null==T?void 0:null===(a=T.icon)||void 0===a?void 0:null===(r=a.url_list)||void 0===r?void 0:r[0],className:x.default.icon}),(0,n.jsx)("span",{className:x.default.titleText,children:T.title})]}),(0,n.jsx)("div",{className:x.default.subTitle,children:T.sub_title}),!!(null==T?void 0:null===(d=T.price_info)||void 0===d?void 0:d.current_price)&&(0,n.jsxs)("div",{className:x.default.price,children:[(0,n.jsx)("span",{className:x.default.priceNum,children:null==T?void 0:null===(u=T.price_info)||void 0===u?void 0:u.current_price}),null==T?void 0:null===(c=T.price_info)||void 0===c?void 0:c.currency_name,null==T?void 0:null===(v=T.price_info)||void 0===v?void 0:v.start_hint]})]})]}),(0,n.jsx)(E.zx,{className:x.default.buyButton,theme:"solid",children:(0,n.jsx)("span",{children:null==T?void 0:null===(m=T.button_info)||void 0===m?void 0:m.text_without_price})})]})};t("586529"),t("227470"),t("101060");var S=t("690352"),D=t("657680"),k=t("222397"),N=t("35294"),R=t("309854"),A=t("300393");let L=(0,o.forwardRef)((e,i)=>(0,n.jsx)("svg",(0,_._)((0,l._)({width:28,height:28,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:(0,n.jsx)("path",{d:"M19.59 9.59a.833.833 0 1 0-1.18-1.18L14 12.822l-4.41-4.41a.833.833 0 0 0-1.18 1.178L12.822 14l-4.41 4.41a.833.833 0 1 0 1.178 1.18L14 15.177l4.41 4.411a.833.833 0 1 0 1.18-1.178L15.177 14l4.411-4.41z",fill:"#161823"})}))),j=(0,o.forwardRef)((e,i)=>(0,n.jsxs)("svg",(0,_._)((0,l._)({width:50,height:50,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,n.jsxs)("g",{filter:"url(#ic_tick-circle_svg__filter0_d_747_17320)",shapeRendering:"crispEdges",children:[(0,n.jsx)("path",{d:"M25.001 44.992c11 0 20-9 20-20s-9-20-20-20-20 9-20 20 9 20 20 20z",fill:"#fff"}),(0,n.jsx)("path",{d:"M25.001 45.492c11.276 0 20.5-9.224 20.5-20.5s-9.224-20.5-20.5-20.5-20.5 9.224-20.5 20.5 9.224 20.5 20.5 20.5z",stroke:"#000",strokeOpacity:".1",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,n.jsx)("path",{d:"M30.303 30.303a7.5 7.5 0 1 1 0-10.607c.691.691 2.197 2.387 2.197 2.387",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("path",{d:"M32.5 18.333v3.75h-3.75",stroke:"#333",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"}),(0,n.jsx)("defs",{children:(0,n.jsxs)("filter",{id:"ic_tick-circle_svg__filter0_d_747_17320",x:".001",y:"-.008",width:50,height:50,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,n.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,n.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,n.jsx)("feOffset",{}),(0,n.jsx)("feGaussianBlur",{stdDeviation:2}),(0,n.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,n.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,n.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_747_17320"}),(0,n.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_747_17320",result:"shape"})]})})]})));var M=t("181242");let B=e=>{let{awemeInfo:i,onClose:t,onPaySuccess:r,onPayTimeout:d,logParams:u}=e,[c,v]=(0,o.useState)(""),m=(0,o.useRef)(),g=(0,o.useRef)(0),y=(0,o.useRef)(!1),[w,I]=(0,o.useState)(void 0),[E,x]=(0,o.useState)(!1),b=(0,o.useCallback)(async()=>{var e,t,n,o,r;if(I(void 0),v(""),"subscribe"===(0,P.$m)(i)){D.toDataURL(`sslocal://aweme/detail/${i.awemeId}?refer=click_group_top_function&chat_type=group&enter_from=douyin_pc`).then(e=>{v(e),I(!1)}).catch(e=>{I(!0)});return}let[a,d="{}"]=null==i?void 0:null===(n=i.entertainmentProductInfo)||void 0===n?void 0:null===(t=n.buy_schema)||void 0===t?void 0:null===(e=t.split)||void 0===e?void 0:e.call(t,"?"),u=S.parse(d),s=await (0,N.kH)({jsonParams:JSON.stringify((0,_._)((0,l._)({},u),{origin_appid:"6383",schema_type:"1",use_new_api:"1",mix_short_name:encodeURIComponent((null==d?void 0:d.mix_short_name)||"")})||{})});(null==s?void 0:s.statusCode)===0?(v(null==s?void 0:null===(o=s.data)||void 0===o?void 0:o.url),I(!1)):(R.oe.event.error({name:R.Mo.PaidVideoQRCodeError,report:{enterFrom:(0,h.mo)(),enterFromMerge:(0,h.yW)(),itemId:null==i?void 0:i.awemeId,buySchema:null==i?void 0:null===(r=i.entertainmentProductInfo)||void 0===r?void 0:r.buy_schema,logId:null==s?void 0:s.logId}}),I(!0))},[i]);(0,o.useEffect)(()=>{b()},[i]);let T=(0,o.useMemo)(()=>{var e,t,l,n,o,r,a;return{enter_from:(0,f.Rs)("enter_from"),module:decodeURIComponent((0,f.Rs)("module")||""),enter_from_merge:(0,h.yW)(),previous_page:(0,f.Rs)("previous_page"),group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==i?void 0:null===(t=i.seriesInfo)||void 0===t?void 0:t.seriesId)||(null==i?void 0:null===(l=i.mixInfo)||void 0===l?void 0:l.mixId)||"",ce_content_type:(0,p.a)(i),ce_item_id:String((null==i?void 0:null===(n=i.seriesInfo)||void 0===n?void 0:n.currentEpisode)||(null==i?void 0:null===(o=i.mixInfo)||void 0===o?void 0:o.currentEpisode)),is_trailer:(null==i?void 0:null===(a=i.chargeInfo)||void 0===a?void 0:null===(r=a.preview_config)||void 0===r?void 0:r.is_preview)?1:0,from_group_id:null==u?void 0:u.from_group_id}},[u,i]);(0,o.useEffect)(()=>{s.i.sendLog("pcPaymentPopupShow",(0,l._)({button_type:"scan"},T))},[]),(0,o.useEffect)(()=>{E&&s.i.sendLog("pcPaymentPopupShow",(0,_._)((0,l._)({},T),{button_type:"refresh"}))},[E]);let B=(0,o.useCallback)(async()=>{var e,t;if(y.current)return;y.current=!0;let l=await (0,k.FF)({itemList:[{itemId:null===(e=i.entertainmentProductInfo)||void 0===e?void 0:e.product_id_str,itemSku:null===(t=i.entertainmentProductInfo)||void 0===t?void 0:t.sku_id_str,itemIdType:1}],bizSceneType:2});0===l.statusCode&&l.userRightDetailList.find(e=>{var t,l;return e.itemId===(null===(t=i.entertainmentProductInfo)||void 0===t?void 0:t.product_id_str)&&e.itemSku===(null===(l=i.entertainmentProductInfo)||void 0===l?void 0:l.sku_id_str)})&&(null==r||r()),y.current=!1},[i,r,d]);return(0,o.useEffect)(()=>(!E&&(m.current=setInterval(()=>{g.current+=1,B(),g.current>=600&&(null==d||d(),x(!0),clearInterval(m.current),m.current=null)},1e3)),()=>{clearInterval(m.current),m.current=null}),[d,E]),(0,n.jsxs)("div",{className:A.default.container,children:[(0,n.jsxs)("div",{className:A.default.title,children:[(0,n.jsx)("span",{children:"抖音App扫码购买"}),(0,n.jsx)(C.Z,{src:L,width:28,height:28,viewBox:"0 0 28 28",onClick:e=>{e.stopPropagation(),g.current=0,null==t||t()}})]}),(0,n.jsxs)("div",{className:A.default.box,children:[void 0===w&&!c&&(0,n.jsx)(M.gb,{}),w&&(0,n.jsxs)("div",{className:a()(A.default.timeoutMask,A.default.smallBtnGrayContainer),onClick:async()=>{await b()},children:[(0,n.jsx)("div",{className:A.default.mask}),(0,n.jsxs)("div",{className:A.default.timeoutBox,children:[(0,n.jsx)(C.Z,{src:j,width:50,height:50,viewBox:"0 0 50 50"}),(0,n.jsx)("div",{className:A.default.mainTitle,children:"抖音码获取失败"}),(0,n.jsx)("div",{children:"点击刷新"})]})]}),c&&(0,n.jsx)("img",{src:c,style:"subscribe"===(0,P.$m)(i)?{borderRadius:16}:{},onError:()=>{I(!0)},onLoad:()=>{I(!1)}}),E&&(0,n.jsxs)("div",{className:a()(A.default.timeoutMask,A.default.smallBtnGrayContainer),onClick:async()=>{s.i.sendLog("pcPaymentPopupClick",(0,_._)((0,l._)({},T),{button_type:"refresh"})),x(!1),g.current=0,await b()},children:[(0,n.jsx)("div",{className:A.default.mask}),(0,n.jsxs)("div",{className:A.default.timeoutBox,children:[(0,n.jsx)(C.Z,{src:j,width:50,height:50,viewBox:"0 0 50 50"}),(0,n.jsx)("div",{className:A.default.mainTitle,children:"二维码已过期"}),(0,n.jsx)("div",{children:"点击刷新"})]})]})]})]})};var U=t("962517");let V=(0,o.forwardRef)((e,i)=>(0,n.jsxs)("svg",(0,_._)((0,l._)({width:40,height:40,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i},e),{children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 40c11.046 0 20-8.954 20-20S31.046 0 20 0 0 8.954 0 20s8.954 20 20 20z",fill:"#13C15A"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.344 14.509c.801.801.801 2.1 0 2.901l-8.65 8.651-1.097 1.096a2.735 2.735 0 0 1-3.868 0l-5.707-5.706a2.051 2.051 0 0 1 0-2.902l.13-.129a2.052 2.052 0 0 1 2.9 0l4.61 4.61 8.652-8.65a2.051 2.051 0 0 1 2.9 0l.13.129z",fill:"#fff"})]}))),O=e=>{let{awemeInfo:i,logParams:t}=e,[l,r]=(0,o.useState)(3),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{var e,l,n,o,r,a,d;s.i.sendLog("pcPaymentStatus",{module:decodeURIComponent((0,f.Rs)("module")||""),enter_from_merge:(0,h.yW)(),previous_page:(0,f.Rs)("previous_page"),group_id:null==i?void 0:i.awemeId,author_id:null==i?void 0:null===(e=i.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==i?void 0:null===(l=i.seriesInfo)||void 0===l?void 0:l.seriesId)||(null==i?void 0:null===(n=i.mixInfo)||void 0===n?void 0:n.mixId)||"",ce_content_type:(0,p.a)(i),ce_item_id:String((null==i?void 0:null===(o=i.seriesInfo)||void 0===o?void 0:o.currentEpisode)||(null==i?void 0:null===(r=i.mixInfo)||void 0===r?void 0:r.currentEpisode)),is_trailer:(null==i?void 0:null===(d=i.chargeInfo)||void 0===d?void 0:null===(a=d.preview_config)||void 0===a?void 0:a.is_preview)?1:0,from_group_id:null==t?void 0:t.from_group_id})},[]),(0,o.useEffect)(()=>(clearInterval(a.current),r(3),a.current=setInterval(()=>{r(e=>(e<=1&&(clearInterval(a.current),window.location.reload()),e-.2))},200),()=>{clearInterval(a.current)}),[i]),(0,n.jsxs)("div",{className:U.default.container,children:[(0,n.jsx)("div",{className:U.default.title}),(0,n.jsx)(C.Z,{src:V,width:40,height:40,viewBox:"0 0 40 40"}),(0,n.jsx)("div",{className:U.default.buyResult,children:"购买成功"}),(0,n.jsxs)("div",{className:U.default.money,children:["剩余",Math.floor(l),"秒后，自动刷新页面"]}),(0,n.jsx)("div",{className:U.default.subTitle,children:(0,n.jsx)("span",{className:U.default.subTitme,children:"已购内容订单可在【抖音APP-我的-我的订单】中查看"})})]})};var F=t("448454"),$=t("886330"),Y=t("579309"),z=t("797210"),W=t("401310");let Z=e=>{let{awemeInfo:i,isActive:t}=e,l=(0,o.useRef)(3e3),n=(0,W.n)();(0,o.useEffect)(()=>{(async()=>{let e=await $.U2({key:Y.TccKey.SeriesConfig,defaultValue:Y.TCC_DEFAULT_VALUE_MAP.get(Y.TccKey.SeriesConfig)});l.currentTime=(null==e?void 0:e.paidRightTime)||3e3})()},[]);let r=(0,F.Z)(e=>{var t,n,o;let{currentTime:r}=e||{},a=Math.round(1e3*r),u=(null==i?void 0:null===(t=i.video)||void 0===t?void 0:t.duration)<36e4;(u||!u&&a>l.currentTime)&&((0,N.SK)({itemId:i.awemeId,skuId:null===(n=i.entertainmentProductInfo)||void 0===n?void 0:n.sku_id_str,spuId:null===(o=i.entertainmentProductInfo)||void 0===o?void 0:o.product_id_str,bizType:4}),d())}),a=(0,F.Z)(()=>{var e,t;let l=null==i?void 0:i.chargeInfo,o=null==i?void 0:null===(e=i.chargeInfo)||void 0===e?void 0:e.preview_config;(null==l?void 0:l.has_paid)&&(null==l?void 0:l.is_charge_content)&&!(null==o?void 0:o.is_preview)&&(null==n||null===(t=n.on)||void 0===t||t.call(n,z.B.TimeUpdate,r))}),d=(0,F.Z)(()=>{var e;null==n||null===(e=n.off)||void 0===e||e.call(n,z.B.TimeUpdate,r)});(0,o.useEffect)(()=>{if(t)return a(),()=>{d()}},[null==i?void 0:i.awemeId,t,n])};var H=t("554898"),G=t("701007"),X=t("351582");t("330951"),t("930798");let K=e=>{let{awemeInfo:i}=e;(0,o.useEffect)(()=>{var e,t,l,n,o,r,a,d,u,s,c,v,f,p,m,g,y,_,w,I,E,x,b,C,T,S,D,k,N;if(!i)return;let A=(null==i?void 0:null===(l=i.video)||void 0===l?void 0:null===(t=l.bitRateList)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.format)==="mp4"&&!(null==i?void 0:null===(r=i.video)||void 0===r?void 0:null===(o=r.bitRateList)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:n.playerAccessKey);(null==i?void 0:null===(a=i.chargeInfo)||void 0===a?void 0:a.is_charge_content)&&(null==i?void 0:null===(d=i.chargeInfo)||void 0===d?void 0:d.has_paid)&&!A&&R.oe.event.error({name:R.Mo.PaidVideoNoPlayerAccessKey,report:{enterFromMerge:(0,h.yW)(),enterFrom:(0,h.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(_=i.seriesInfo)||void 0===_?void 0:_.seriesId)||(null==i?void 0:null===(w=i.mixInfo)||void 0===w?void 0:w.mixId)||""}}),(null==i?void 0:null===(u=i.chargeInfo)||void 0===u?void 0:u.is_charge_content)&&(null==i?void 0:null===(s=i.chargeInfo)||void 0===s?void 0:s.has_paid)&&(null==i?void 0:null===(v=i.chargeInfo)||void 0===v?void 0:null===(c=v.preview_config)||void 0===c?void 0:c.is_preview)&&"limited"!==(0,P.$m)(i)&&R.oe.event.error({name:R.Mo.PaidVideoPreview,report:{enterFromMerge:(0,h.yW)(),enterFrom:(0,h.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(I=i.seriesInfo)||void 0===I?void 0:I.seriesId)||(null==i?void 0:null===(E=i.mixInfo)||void 0===E?void 0:E.mixId)||""}}),(null==i?void 0:null===(f=i.chargeInfo)||void 0===f?void 0:f.is_charge_content)&&!(null==i?void 0:null===(p=i.chargeInfo)||void 0===p?void 0:p.has_paid)&&!(null==i?void 0:null===(g=i.chargeInfo)||void 0===g?void 0:null===(m=g.preview_config)||void 0===m?void 0:m.is_preview)&&"limited"!==(0,P.$m)(i)&&!(0,X.GP)(i)&&R.oe.event.error({name:R.Mo.PaidVideoNoPayCanView,report:{enterFromMerge:(0,h.yW)(),enterFrom:(0,h.mo)(),itemId:null==i?void 0:i.awemeId,logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(x=i.seriesInfo)||void 0===x?void 0:x.seriesId)||(null==i?void 0:null===(b=i.mixInfo)||void 0===b?void 0:b.mixId)||""}});let L=i.entertainmentProductInfo;if(L&&(null==i?void 0:null===(y=i.chargeInfo)||void 0===y?void 0:y.is_charge_content)){let e=[],t=[];!(null==L?void 0:null===(T=L.cover_url)||void 0===T?void 0:null===(C=T.url_list)||void 0===C?void 0:C[0])&&t.push("cover"),!(null==L?void 0:L.title)&&t.push("title"),!(null==L?void 0:L.sub_title)&&t.push("sub_title"),!(null==L?void 0:null===(S=L.button_info)||void 0===S?void 0:S.text_without_price)&&t.push("text_without_price"),!(null==L?void 0:L.buy_schema)&&t.push("buy_schema"),!(null==i?void 0:null===(D=i.chargeInfo)||void 0===D?void 0:D.preview_config)&&e.push("preview_config"),e.length>0&&R.oe.event.error({name:R.Mo.PaidVideoNoCardInfo,report:{enterFromMerge:(0,h.yW)(),enterFrom:(0,h.mo)(),itemId:null==i?void 0:i.awemeId,lessInfo:e,type:"tag",logId:null==i?void 0:i.logPb,contentId:(null==i?void 0:null===(k=i.seriesInfo)||void 0===k?void 0:k.seriesId)||(null==i?void 0:null===(N=i.mixInfo)||void 0===N?void 0:N.mixId)||""}}),t.length>0&&R.oe.event.error({name:R.Mo.PaidVideoNoCardInfo,report:{enterFromMerge:(0,h.yW)(),enterFrom:(0,h.mo)(),itemId:null==i?void 0:i.awemeId,lessInfo:t,type:"card",logId:null==i?void 0:i.logPb}})}},[i])},q=e=>{var i,t,r,_,E;let{className:x,awemeInfo:b,isActive:S,isDetail:D=!1,needSpace:k=!1,abTestData:N,userInfo:R,isShowBuy:A=!0,isMini:L=!1,isShowLimited:j=!1,logParams:M}=e,U=(0,X.GP)(b),[V,F]=(0,o.useState)(!1),[$,Y]=(0,o.useState)(!1),[z,q]=(0,o.useState)(!(D&&U)),{previewTime:J,isPreivewFinish:Q}=(0,I.O)({awemeInfo:b,isActive:S});Z({awemeInfo:b,isActive:S});let ee=(0,W.n)(),ei=(null==R?void 0:null===(i=R.info)||void 0===i?void 0:i.uid)===(null==b?void 0:null===(t=b.authorInfo)||void 0===t?void 0:t.uid),et=(0,P.$m)(b),el=(0,c.$y)(J);K({awemeInfo:b}),(0,o.useEffect)(()=>{Q?(["primary","subscribe"].includes(et)&&v.emit(v.EVENT.ShowPreviewPaidMask,{isShow:!0,awemeId:null==b?void 0:b.awemeId,playerId:null==ee?void 0:ee.playerId}),D&&"limited"!==et&&q(!1)):!U&&v.emit(v.EVENT.ShowPreviewPaidMask,{isShow:!1,awemeId:null==b?void 0:b.awemeId,playerId:null==ee?void 0:ee.playerId})},[Q,D]);let en=(0,o.useMemo)(()=>{var e,i,t,l,n,o,r;return{enter_from:(0,f.Rs)("enter_from"),module:decodeURIComponent((0,f.Rs)("module")||""),enter_from_merge:(0,h.yW)(),previous_page:(0,f.Rs)("previous_page"),group_id:null==b?void 0:b.awemeId,from_group_id:null==M?void 0:M.from_group_id,author_id:null==b?void 0:null===(e=b.authorInfo)||void 0===e?void 0:e.uid,ce_content_id:(null==b?void 0:null===(i=b.seriesInfo)||void 0===i?void 0:i.seriesId)||(null==b?void 0:null===(t=b.mixInfo)||void 0===t?void 0:t.mixId)||"",ce_content_type:(0,p.a)(b),ce_item_id:String((null==b?void 0:null===(l=b.seriesInfo)||void 0===l?void 0:l.currentEpisode)||(null==b?void 0:null===(n=b.mixInfo)||void 0===n?void 0:n.currentEpisode)),is_trailer:(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.is_preview)?1:0,button_type:""}},[b,M]),eo=(0,o.useCallback)(()=>{if(s.i.sendLog("pcBuyCompleteContentClick",(0,l._)({},en)),D){if(null==R?void 0:R.isLogin)F(!0);else{var e,i;(0,H.default)({success:async()=>{var e,i;null===(i=window)||void 0===i||null===(e=i.location)||void 0===e||e.reload()},enterMethod:"paid_video",headerText:"登录后即可购买",next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`})}}},[D,R,en]),er=(0,o.useCallback)(()=>{D&&F(!1)},[D]),ea=(0,o.useCallback)(()=>{Y(!0),F(!1)},[]),ed=(0,o.useCallback)(()=>{q(!0)},[]);(0,o.useEffect)(()=>{var e,i,t,l,n,o,r,a;let u=null==b?void 0:null===(i=b.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview,s=null==b?void 0:null===(l=b.chargeInfo)||void 0===l?void 0:null===(t=l.preview_config)||void 0===t?void 0:t.end_time,c=null==b?void 0:null===(o=b.chargeInfo)||void 0===o?void 0:null===(n=o.preview_config)||void 0===n?void 0:n.start_time;if(u&&!(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:r.has_paid)&&"limited"!==et&&ee){let e=()=>{var e,i,t,l,n,o,r,a,d,u,v;c>0&&(null==ee||null===(t=ee.plugins)||void 0===t||null===(i=t.progresspreview)||void 0===i||null===(e=i.createDot)||void 0===e||e.call(i,{id:`${null==b?void 0:b.awemeId}${c}`,time:c/1e3,stylePreferred:!0,style:{height:"4px",width:"4px",backgroundColor:"#fd9",top:"-1px",minWidth:"4px"}}),(null==b?void 0:null===(n=b.chargeInfo)||void 0===n?void 0:null===(l=n.preview_config)||void 0===l?void 0:l.start_time)>0&&(null==ee||null===(a=ee.seek)||void 0===a||a.call(ee,(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:null===(o=r.preview_config)||void 0===o?void 0:o.start_time)/1e3))),s>0&&(null==ee||null===(v=ee.plugins)||void 0===v||null===(u=v.progresspreview)||void 0===u||null===(d=u.createDot)||void 0===d||d.call(u,{id:`${null==b?void 0:b.awemeId}${s}`,time:s/1e3,stylePreferred:!0,style:{height:"4px",width:"4px",backgroundColor:"#fd9",top:"-1px",minWidth:"4px"}}))};return null==ee||null===(a=ee.once)||void 0===a||a.call(ee,d.DURATION_CHANGE,e),()=>{if(ee){var i,t,l,n;null==ee||null===(l=ee.plugins)||void 0===l||null===(t=l.progresspreview)||void 0===t||null===(i=t.deleteAllDots)||void 0===i||i.call(t),null==ee||null===(n=ee.off)||void 0===n||n.call(ee,d.DURATION_CHANGE,e)}}}},[b,ee]),(0,u.Z)(()=>{F(!1),Y(!1),q(!(D&&U)),!U&&v.emit(v.EVENT.ShowPreviewPaidMask,{isShow:!1,awemeId:null==b?void 0:b.awemeId,playerId:null==ee?void 0:ee.playerId})},[b]);let eu=!(null==b?void 0:null===(r=b.chargeInfo)||void 0===r?void 0:r.is_charge_content)||L||ei;return((0,o.useEffect)(()=>{z&&!eu&&S&&s.i.sendLog("pcPaidLogoShow",(0,l._)({},en))},[z,S]),(0,o.useEffect)(()=>{var e,i;Q&&(null==b?void 0:null===(i=b.chargeInfo)||void 0===i?void 0:null===(e=i.preview_config)||void 0===e?void 0:e.is_preview)&&s.i.sendLog("pcTrailEndShow",(0,l._)({},en))},[Q]),eu)?null:(null==b?void 0:null===(_=b.chargeInfo)||void 0===_?void 0:_.has_paid)?(0,n.jsx)("div",{className:a()(y.default.outerContainer,x,{[y.default.noVideoInfoSpace]:k}),children:(0,n.jsx)("div",{className:a()(y.default.container),children:(0,n.jsx)("div",{className:y.default.innerContainer,children:(0,n.jsx)("span",{className:a()(y.default.payed),children:(null==b?void 0:null===(E=b.chargeInfo)||void 0===E?void 0:E.has_right_text)||"已付费"})})})}):(0,n.jsxs)("div",{className:a()(y.default.outerContainer,x,{[y.default.noVideoInfoSpace]:k}),children:[!$&&!V&&z&&(0,n.jsx)("div",{className:a()(y.default.container),onClick:()=>{if(s.i.sendLog("pcPaidLogoClick",(0,l._)({},en)),!!A)if(D){if(null==R?void 0:R.isLogin)q(!1);else{var e,i;(0,H.default)({success:async()=>{var e,i;null===(i=window)||void 0===i||null===(e=i.location)||void 0===e||e.reload()},enterMethod:"paid_video",headerText:"登录后即可购买",next:`https://${null===(i=window)||void 0===i?void 0:null===(e=i.location)||void 0===e?void 0:e.host}`})}}else{v.emit(v.EVENT.videoPause);let e=(0,m.JF)(null==b?void 0:b.awemeId,D?"":`current_video_time=${Math.ceil(null==ee?void 0:ee.currentTime)}`);window.open(e,(0,g.f)()?"_self":"_blank","noopener")}},children:(0,n.jsxs)("div",{className:y.default.innerContainer,children:["primary"===et&&(0,n.jsx)("span",{className:a()(y.default.pay,{[y.default.allBorder]:U&&!A}),children:"付费"}),"subscribe"===et&&(0,n.jsx)("span",{className:a()(y.default.pay,{[y.default.allBorder]:U&&!A}),children:"专属会员"}),"limited"===et&&j&&(0,n.jsx)("span",{className:a()(y.default.pay,y.default.limited,y.default.allBorder),children:"限免"}),!U&&["primary","subscribe"].includes(et)&&(0,n.jsx)("span",{className:y.default.countdown,children:Q?"试看结束":`试看${el}`}),A&&["primary","subscribe"].includes(et)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:y.default.divider}),(0,n.jsx)(G.a,{href:(0,m.JF)(null==b?void 0:b.awemeId),target:"_blank",className:y.default.buy,onClick:e=>{e.preventDefault()},children:"购买"}),(0,n.jsx)(C.Z,{src:w,viewBox:"0 0 12 12",width:12,height:12,className:y.default.arrow})]})]})}),!$&&!V&&!z&&(0,n.jsx)(T,{awemeInfo:b,onBuy:eo,onClose:ed,logParams:M}),!$&&V&&(0,n.jsx)(B,{awemeInfo:b,onClose:er,onPaySuccess:ea,logParams:M}),$&&(0,n.jsx)(O,{awemeInfo:b,logParams:M})]})}},504717:function(e,i,t){t.d(i,{v:function(){return f}}),t(950349);var l=t(259202),n=t(611542),o=t(825211),r=t.n(o),a=t(623176),d=t(766913),u=t(356789),s=t(713017),c=t(258418),v=t(401310);let f=e=>{let{info:i,activeIndex:t,currentIndex:o,albumMusic:f,isInPreview:h,inSearch:p}=e,m=(0,n.useRef)(),g=(0,v.n)(),y=(0,n.useRef)(!1),_=(0,n.useMemo)(()=>{let e=i.video.bitRateList.find(e=>0===e.isH265);return e&&e.playAddr?e.playAddr.map(e=>({src:(0,d.preProcessUrl)(e.src).url})).concat({src:e.playApi}):[]},[i.video]);return((0,n.useEffect)(()=>{if(g){if(t===o){if(!g.paused){var e;null===(e=m.current)||void 0===e||e.play()}}else m.current&&(m.current.paused||m.current.pause(),m.current.currentTime=0)}},[g,t,o]),(0,n.useEffect)(()=>{if(g&&t===o){let e=()=>{var e;if(!(g.currentTime<=.5)||!y.current)f.beginTime,null===(e=m.current)||void 0===e||e.play()};return g.on("play",e),()=>{g.off("play",e)}}},[g,t,o]),(0,n.useEffect)(()=>{if(g){let e=()=>{var e;if(!(g.currentTime<=.5)&&!(g.duration-g.currentTime<=.5)&&(!(f.beginTime>1e3)||!(g.currentTime-f.beginTime/1e3<=.5)&&!(f.endTime/1e3-g.currentTime<=.5)))null===(e=m.current)||void 0===e||e.pause()};return g.on("pause",e),()=>{g.off("pause",e)}}},[g]),(0,n.useEffect)(()=>{if(g){let e=()=>{y.current=!0};return g.on("ended",e),()=>{g.off("ended",e)}}},[g]),(0,n.useEffect)(()=>{if(g&&t===o){let e=u.listen(u.EVENT.notevideo,e=>{let{type:i,index:l,playerId:n}=e;m.current&&"replay"===i&&n===g.playerId&&l===t&&m.current.play()});return()=>e()}},[g,t,o]),(0,n.useEffect)(()=>{if(g&&t===o&&m.current){.01===g.volume?m.current.volume=parseFloat(g.config.volume_raw)||0:m.current.volume=g.volume,m.current.muted=g.muted;let e=e=>{if(!0!==e.isInternalOp).01===g.volume?m.current.volume=parseFloat(g.config.volume_raw)||0:m.current.volume=g.volume,m.current.muted=g.muted};return null==g||g.on(a.VOLUME_CHANGE,e),()=>{null==g||g.off(a.VOLUME_CHANGE,e)}}},[g,t,o]),o-t>1||o-t<-1)?null:(0,l.jsx)("div",{className:r()(c.default.container,{[c.default.inSearch]:p,[c.default.isInPreview]:h}),children:(0,l.jsx)("video",{className:c.default.video,muted:!0,playsInline:!0,"x5-playsinline":!0,"webkit-playsinline":!0,autoPlay:!1,onPlay:()=>{u.emit(u.EVENT.notevideo,{type:"start",playerId:null==g?void 0:g.playerId,index:o})},onEnded:()=>{u.emit(u.EVENT.notevideo,{type:"end",playerId:null==g?void 0:g.playerId,index:o})},onTimeUpdate:()=>{var e,i;u.emit(u.EVENT.notevideo,{type:"timeupdate",playerId:null==g?void 0:g.playerId,data:(null===(e=m.current)||void 0===e?void 0:e.currentTime)*1e3,index:o}),(0,s.G6)()&&(null==g?void 0:g.paused)&&(null===(i=m.current)||void 0===i||i.pause())},ref:m,children:_.map((e,i)=>(0,l.jsx)("source",{src:e.src},i))})})}},559459:function(e,i,t){t.d(i,{X:function(){return g}});var l=t(590921),n=t(611542),o=t(344814),r=t.n(o),a=t(51877),d=t.n(a),u=t(799506),s=t(401310),c=t(696871),v=t(82311);let{ArrowLeft:f,ArrowRight:h,A:p,D:m}=u.bf,g=e=>{let i=(0,s.n)(),{preClick:t,nextClick:o,disableShortCut:a=!1,active:u=!0}=e;return(0,n.useEffect)(()=>{if(!!u){if(i){if(a)return(0,c.K)(i);let e={left:{keyCode:f.keyCode,action:t,disable:!1,noBodyTarget:!1},right:{keyCode:h.keyCode,action:o,disable:!1,noBodyTarget:!1},leftA:{keyCode:p.keyCode,action:t,disable:!1,noBodyTarget:!1},rightD:{keyCode:m.keyCode,action:o,disable:!1,noBodyTarget:!1}},n={left:r()(i,"plugins.keyboard.keyCodeMap.left"),right:r()(i,"plugins.keyboard.keyCodeMap.right"),leftA:r()(i,"plugins.keyboard.keyCodeMap.leftA"),rightD:r()(i,"plugins.keyboard.keyCodeMap.rightD")};return d()(i,"plugins.keyboard.keyCodeMap",(0,l._)({},r()(i,"plugins.keyboard.keyCodeMap")||{},e)),()=>{i.plugins.keyboard&&((0,v.v)({currentCodeMap:i.plugins.keyboard.keyCodeMap,additionalCodeMap:e}),d()(i,"plugins.keyboard.keyCodeMap",(0,l._)({},r()(i,"plugins.keyboard.keyCodeMap")||{},n)))}}}},[i,t,o,a,u]),null}},696871:function(e,i,t){t.d(i,{K:function(){return l}});function l(e){var i,t;if(null==e?void 0:null===(t=e.plugins)||void 0===t?void 0:null===(i=t.keyboard)||void 0===i?void 0:i.keyCodeMap){let i=e.plugins.keyboard.keyCodeMap||{},t={};return Object.keys(i).forEach(e=>{i[e]&&(t[e]=i[e].disable,i[e].disable=!0)}),()=>{var i,l;let n=(null==e?void 0:null===(l=e.plugins)||void 0===l?void 0:null===(i=l.keyboard)||void 0===i?void 0:i.keyCodeMap)||{};n&&Object.keys(n).forEach(e=>{n[e]&&(n[e].disable=t[e])})}}}},736881:function(e,i,t){t.d(i,{L:function(){return f}});var l,n,o,r=t(980376),a=t(837305),d=t(13351),u=t(609837),s=t(528557),c=t(477509);let v=!1;if(!v){v=!0;let e=0;try{e=(null===(l=window)||void 0===l?void 0:l.MediaSource)&&(null===(o=window)||void 0===o?void 0:null===(n=o.MediaSource)||void 0===n?void 0:n.isTypeSupported)?1:0}catch(e){}if((0,d.DT)())c.i.sendLog("hardParseSupported",{is_supported_hevc1:(0,u._u)()?1:0,is_supported_264:(0,u.b4)()?1:0,is_enable_mse:e});else try{r.Z.probeConfigSupported({type:"file",video:{contentType:'video/mp4;codecs="hev1.1.6.L120.90"',width:1920,height:1080,bitrate:2e6,framerate:30}}).then(i=>{let t=(null==i?void 0:i.powerEfficient)?1:0;(0,s.qQ)(a.LocalStorageKeys.PowerEfficient,t),c.i.sendLog("hardParseSupported",{is_supported_hevc1:r.Z.isHevcSupported()?1:0,powerEfficient:t,smooth:(null==i?void 0:i.smooth)?1:0,supported:(null==i?void 0:i.supported)?1:0,is_enable_mse:e})})}catch(e){}}let f=()=>!1},693873:function(e,i,t){t.d(i,{I:function(){return a}});var l=t(543488),n=t.n(l),o=t(902011);let r=n()(o.jk),a=()=>(!window.__INLINE_PLAYER_DATA__&&(window.__INLINE_PLAYER_DATA__=o.jk),window.__INLINE_PLAYER_DATA__.disable)?r:window.__INLINE_PLAYER_DATA__},742619:function(e,i,t){t.d(i,{W:function(){return a},b:function(){return d}});var l=t(693873),n=t(619639);let o=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},r=e=>{e.destroy(),o(e.root),window.__INLINE_PLAYER_DATA__.disable=!0},a=e=>{let i=(0,l.I)().player;if(!e||!i)return!1;let t=(0,n.Q)(e.awemeId),a=document.getElementById(t);return i.config.vid===e.awemeId&&!!a&&a.children[0]===i.root||(r(i),o(a),!1)},d=e=>{let i=(0,l.I)();return!!e&&!!i.player&&i.player.config.vid===e.awemeId}},587427:function(e,i,t){t.d(i,{c:function(){return m},d:function(){return g}}),t(347885),t(677546),t(227470);var l=t(51877),n=t.n(l),o=t(690352),r=t(593270),a=t(375867),d=t(837305),u=t(124797),s=t(945363),c=t(819769),v=t(433075),f=t(375456);let h=e=>{let{player:i,state:t}=e;n()(i,"config.autoplay",t),n()(i,"autoplay",t),n()(i,"preloadActive",t),(0,v.wS)(i.playerId,t)},p=e=>{var i,t,l,n,o,d;let{player:u,gearType:s,config:c,awemeInfo:v}=e;u.config.userSelectDefinition=s,u.config.definition=null==c?void 0:c.definition,u.config.DASHPlugin=null==c?void 0:c.DASHPlugin;try{(null==c?void 0:null===(l=c.plugins)||void 0===l?void 0:l.includes(r.default))?(u.unRegisterPlugin(a.default.pluginName,!0),!(null==u?void 0:null===(o=u.plugins)||void 0===o?void 0:o.dashplugin)&&u.registerPlugin(r.default)):(null==c?void 0:null===(n=c.plugins)||void 0===n?void 0:n.includes(a.default))?(u.unRegisterPlugin(r.default.pluginName,!0),!(null==u?void 0:null===(d=u.plugins)||void 0===d?void 0:d.mp4encryptplayer)&&u.registerPlugin(a.default)):(u.unRegisterPlugin(r.default.pluginName,!0),u.unRegisterPlugin(a.default.pluginName,!0))}catch(e){}null===(t=u.getPlugin)||void 0===t||null===(i=t.call(u,"PlayClaritySettingPlugin"))||void 0===i||i.updateConfig({awemeInfo:v})},m=e=>{let{player:i}=e;h({player:i,state:!1}),i.pause(),i.pauseType="notActive"},g=e=>{var i,t,l;let{player:n,config:r,awemeInfo:a,prePlay:v}=e;h({player:n,state:!0});let m=null===(i=(0,s.G)(d.SessionStorageKeys.manualSwitch))||void 0===i?void 0:i.gearType,g=e=>{var i,t,l;let r=f.s.getPlayerScene(n.playerId)===u.lT.Modal||(null==n?void 0:null===(i=n.config)||void 0===i?void 0:i.isModal),a=f.s.getPlayersByScene(u.lT.Modal).length>0,d=!!(null===(t=(0,o.parse)(location.search))||void 0===t?void 0:t.webRid);if(!r&&a||d){n.blockPlayType=`modal_isModalRes_${r}_hasModal_${a}_hasModalLive_${d}`;return}c.Le.setConfig(c.gI.StartPlayTime,Date.now()),null==n||null===(l=n[e])||void 0===l||l.call(n,null),n.blockPlayType=`noMethod_${e}`,v&&(n.preplay=1,n.preplayStat=1)};n.isPlaying||n.currentTime>0?(n.config.userSelectDefinition!==m&&p({player:n,gearType:m,config:r,awemeInfo:a}),null===(t=n.resetState)||void 0===t||t.call(n),n.isPlaying=!1,g("start")):n.config.userSelectDefinition!==m?(p({player:n,gearType:m,config:r,awemeInfo:a}),null===(l=n.resetState)||void 0===l||l.call(n),n.isPlaying=!1,g("start")):(g("play"),n.emit("immediatePlay"))}},82311:function(e,i,t){t.d(i,{v:function(){return l}});let l=e=>{let{currentCodeMap:i,additionalCodeMap:t}=e;Object.keys(t).map(e=>{delete i[e]})}},979265:function(e,i,t){t.d(i,{Y:function(){return a}});var l=t(590921),n=t(611542),o=t(992283),r=t(381181);let a=e=>{let{awemeInfo:i,abtestData:t}=e;return(0,n.useCallback)(()=>{var e,n,a;let{control:d,nextBufferMin:u,nextStartPos:s,nextStartBuffer:c,scale:v,scaleAd:f}=null!==(a=null==t?void 0:t.nextBufferConfig)&&void 0!==a?a:{},h={control:d,nextBufferMin:u,nextStartPos:s,nextStartBuffer:c,scale:(null==i?void 0:i.isAds)&&f?f:v};null===(n=o.ZP.instManager)||void 0===n||null===(e=n.updateStrategyConfig)||void 0===e||e.call(n,r.l,(0,l._)({},h||{}))},[i,t])}},532603:function(e,i,t){t.d(i,{a:function(){return l}});let l=e=>{var i,t,l;return(null==e?void 0:null===(i=e.chargeInfo)||void 0===i?void 0:i.is_charge_content)?(null==e?void 0:null===(t=e.seriesInfo)||void 0===t?void 0:t.seriesId)?"playlet":(null==e?void 0:null===(l=e.mixInfo)||void 0===l?void 0:l.mixId)?"compilation":"video":""}},600743:function(e,i,t){let l;t(930798);var n=t(72497);let o=[],r=0;function a(e,i){return window.getComputedStyle?window.getComputedStyle(e,null)[i]:e.currentStyle[i]}i.Z={bind:function(e,i){if(!(0,n.S)(e))return null;let t=e;if("undefined"!=typeof ResizeObserver){let e=new ResizeObserver(i);return e.observe(t),()=>{e.unobserve(t),e.disconnect(),t=null,e=null}}let d=r;r++;let u={id:d,el:e,callback:i,style:{width:a(e,"width"),height:a(e,"height")}};return o.push(u),!l&&function(){l&&clearInterval(l),l=setInterval(function(){for(let e=0;e<o.length;e++){let i=o[e].el,t={width:a(i,"width"),height:a(i,"height")};!function(e,i){let t=!0;for(let l in e)e[l]!==i[l]&&(t=!1);return t}(t,o[e].style)&&(o[e].style={width:t.width,height:t.height},o[e].callback&&o[e].callback())}},200)}(),()=>{for(let e=0;e<o.length;e++)if(o[e].id===d){o.splice(e,1);break}}}}},22502:function(e,i,t){let l;function n(){if(l)return l;let e=document.createElement("video"),i={isSupport:!1,mime:""};return"function"==typeof e.canPlayType?(["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"].map(t=>{"probably"===e.canPlayType(`video/mp4; codecs="${t}"`)&&(i.isSupport=!0,i.mime+=`||${t}`)}),l=i,i):(e=null,l=i,i)}function o(){return n()}t.d(i,{V:function(){return o},k:function(){return n}})}}]);