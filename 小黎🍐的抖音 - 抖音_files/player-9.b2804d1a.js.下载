/*! For license information please see player-9.b2804d1a.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).xss={})}(this,function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function n(e,t,n){if(n||2==arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var r=/[^a-zA-Z0-9\\_:.-]/gim,i=/</g,a=/>/g,o=/&#([a-zA-Z0-9]*);?/gim,s=/&quot;/g,l=/&colon;?/gim,u=/&newline;?/gim,c=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,d=/u\s*r\s*l\s*\(.*/gi,g=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,h=/"/g,f=function(e){return e.replace(i,"&lt;").replace(a,"&gt;")},p={indexOf:function(e,t){var n,r;for(n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return -1},forEach:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},some:function(e,t,n){var r,i;for(r=0,i=e.length;r<i;r++)if(t.call(n,e[r],r,e))return!0;return!1},trim:function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},includes:function(e,t){if("string"==typeof e)return -1!==e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},spaceIndex:function(e){var t=/\s|\n|\t/.exec(e);return t?t.index:-1},uniq:function(e){for(var t={},n=[],r=0;r<e.length;r++)t[e[r]]||(n.push(e[r]),t[e[r]]=!0);return n},from:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},keys:function(e){var t=[];for(var n in e)t.push(n);return t}};function v(e){return null==e}function m(e){var t;return'"'===(t=e)[0]&&'"'===t[t.length-1]||"'"===t[0]&&"'"===t[t.length-1]?e.substr(1,e.length-2):e}function y(e){var t,n,r,i,a,o,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?t+=String.fromCharCode(r>>6|192)+String.fromCharCode(63&r|128):t+=String.fromCharCode(r>>12|224)+String.fromCharCode(r>>6&63|128)+String.fromCharCode(63&r|128)}return t}(e);c<e.length;)i=(t=e.charCodeAt(c++))>>2,a=(3&t)<<4|(n=e.charCodeAt(c++))>>4,o=(15&n)<<2|(r=e.charCodeAt(c++))>>6,s=63&r,isNaN(n)?o=s=64:isNaN(r)&&(s=64),u=u+l.charAt(i)+l.charAt(a)+l.charAt(o)+l.charAt(s);return u}function I(e){var t,n,r,i,a,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");u<e.length;)t=s.indexOf(e.charAt(u++))<<2|(i=s.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(a=s.indexOf(e.charAt(u++)))>>2,r=(3&a)<<6|(o=s.indexOf(e.charAt(u++))),l+=String.fromCharCode(t),64!==a&&(l+=String.fromCharCode(n)),64!==o&&(l+=String.fromCharCode(r));return function(e){for(var t="",n=0,r=0,i=0,a=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(t+=String.fromCharCode((31&r)<<6|63&(a=e.charCodeAt(n+1))),n+=2):(a=e.charCodeAt(n+1),t+=String.fromCharCode((15&r)<<12|(63&a)<<6|63&(i=e.charCodeAt(n+2))),n+=3);return t}(l)}function _(e,t,n){var r="",i=0,a=!1,o=!1,s=0,l=e.length,u="",c="";e:for(s=0;s<l;s++){var d=e.charAt(s);if(!1===a){if("<"===d){a=s;continue}}else if(!1===o){if("<"===d){r+=n(e.slice(i,s)),a=s,i=s;continue}if(">"===d||s===l-1){r+=n(e.slice(i,a)),u=function(e){var t,n=p.spaceIndex(e);return t=-1===n?e.slice(1,-1):e.slice(1,n+1),"/"===(t=p.trim(t).toLowerCase()).slice(0,1)&&(t=t.slice(1)),"/"===t.slice(-1)&&(t=t.slice(0,-1)),t}(c=e.slice(a,s+1)),r+=t(a,r.length,u,c,"</"===c.slice(0,2)),i=s+1,a=!1;continue}if('"'===d||"'"===d)for(var g=1,h=e.charAt(s-g);""===h.trim()||"="===h;){if("="===h){o=d;continue e}h=e.charAt(s-++g)}}else if(d===o){o=!1;continue}}return i<l&&(r+=n(e.substr(i))),r}function b(e,t){var n=0,i=0,a=[],o=!1,s=e.length;function l(e,n){if(!((e=(e=p.trim(e)).replace(r,"").toLowerCase()).length<1)){var i=t(e,n||"");i&&a.push(i)}}for(var u=0;u<s;u++){var c=e.charAt(u),d=void 0;if(!1!==o||"="!==c){if(!1===o||u!==i){if(/\s|\n|\t/.test(c)){if(e=e.replace(/\s|\n|\t/g," "),!1===o){if(-1===(d=function(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"="===n?t:-1}return -1}(e,u))){l(p.trim(e.slice(n,u))),o=!1,n=u+1;continue}u=d-1;continue}if(-1===(d=function(e,t){for(;t>0;t--){var n=e[t];if(" "!==n)return"="===n?t:-1}return -1}(e,u-1))){l(o,m(p.trim(e.slice(n,u)))),o=!1,n=u+1;continue}}}else{if(-1===(d=e.indexOf(c,u+1)))break;l(o,p.trim(e.slice(i+1,d))),o=!1,n=(u=d)+1}}else o=e.slice(n,u),n=u+1,i='"'===e.charAt(n)||"'"===e.charAt(n)?n:function(e,t){for(;t<e.length;t++){var n=e[t];if(" "!==n)return"'"===n||'"'===n?t:-1}return -1}(e,u+1)}return n<e.length&&(!1===o?l(e.slice(n)):l(o,m(p.trim(e.slice(n))))),p.trim(a.join(" "))}function C(e,t,n){if(n=function(e){return e=function(e){for(var t="",n=0,r=e.length;n<r;n++)t+=32>e.charCodeAt(n)?" ":e.charAt(n);return p.trim(t)}(e=(e=(e=e.replace(s,'"')).replace(o,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})).replace(l,":").replace(u," "))}(n),"href"===t||"src"===t){if("#"===(n=p.trim(n)))return"#";if("http://"!==n.substr(0,7)&&"https://"!==n.substr(0,8)&&"mailto:"!==n.substr(0,7)&&"tel:"!==n.substr(0,4)&&"data:image/"!==n.substr(0,11)&&"ftp://"!==n.substr(0,6)&&"./"!==n.substr(0,2)&&"../"!==n.substr(0,3)&&"#"!==n[0]&&"/"!==n[0])return""}else if("background"===t){if(c.lastIndex=0,c.test(n))return""}else if("style"===t&&(g.lastIndex=0,g.test(n)||(d.lastIndex=0,d.test(n)&&(c.lastIndex=0,c.test(n)))))return"";return n=function(e){return e=f(e=e.replace(h,"&quot;"))}(n)}var A=function(e){return"string"==typeof e?e.replace(/'/g,'"').replace('=""',"").replace(/\s+/g,"").toLowerCase():""},R=function(){function e(e){var t=function(e){var t={};for(var n in e)t[n]=e[n];return t}(e||{});t.stripIgnoreTag&&(t.onIgnoreTag,t.onIgnoreTag=function(){return""}),t.whiteList={},t.onTag=function(){},t.onTagAttr=function(){},t.onIgnoreTag=function(){},t.onIgnoreTagAttr=function(){},t.safeAttrValue=C,t.escapeHtml=f,this.options=Object.assign(t,e)}return e.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t,n,r,i,a,o,s=this.options,l=s.whiteList,u=s.onTag,c=s.onIgnoreTag,d=s.onTagAttr,g=s.onIgnoreTagAttr,h=s.safeAttrValue,f=s.escapeHtml;s.stripBlankChar&&(e=(t=(t=e.split("")).filter(function(e){var t=e.charCodeAt(0);return!(127===t||t<=31&&10!==t&&13!==t)})).join("")),s.allowCommentTag||(e=function(e){for(var t="",n=0;n<e.length;){var r=e.indexOf("\x3c!--",n);if(-1===r){t+=e.slice(n);break}t+=e.slice(n,r);var i=e.indexOf("--\x3e",r);if(-1===i)break;n=i+3}return t}(e));var v=!1;s.stripIgnoreTagBody&&(n=s.stripIgnoreTagBody,"function"!=typeof(r=c)&&(r=function(){}),i=!Array.isArray(n),a=[],o=!1,c=(v={onIgnoreTag:function(e,t,s){var l;if(l=e,i||-1!==p.indexOf(n,l)){if(s.isClosing){var u="[/removed]",c=s.position+u.length;return a.push([!1!==o?o:s.position,c]),o=!1,u}return o||(o=s.position),"[removed]"}return r(e,t,s)},remove:function(e){var t="",n=0;return p.forEach(a,function(r){t+=e.slice(n,r[0]),n=r[1]}),t+=e.slice(n)}}).onIgnoreTag);var m=_(e,function(e,t,n,r,i){var a={sourcePosition:e,position:t,isClosing:i,isWhite:Object.prototype.hasOwnProperty.call(l,n)},o=u(n,r,a);if(null!=o)return o;if(a.isWhite){if(a.isClosing)return"</".concat(n,">");var s=function(e){var t=p.spaceIndex(e);if(-1===t)return{html:"",closing:"/"===e[e.length-2]};var n="/"===(e=p.trim(e.slice(t+1,-1)))[e.length-1];return n&&(e=p.trim(e.slice(0,-1))),{html:e,closing:n}}(r),v=l[n],m=b(s.html,function(e,t){var r=-1!==p.indexOf(v,e),i=d(n,e,t,r);return null==i?r?(t=h(n,e,t,null))?"".concat(e,'="').concat(t,'"'):e:null==(i=g(n,e,t,r))?void 0:i:i});return r="<".concat(n),m&&(r+=" ".concat(m)),s.closing&&(r+=" /"),r+=">"}return null==(o=c(n,r,a))?f(r):o},f);return v&&(m=v.remove(m)),m},e}(),T=Function("\nvar _checkXSS = function (it) {\n  return it && it.Math == Math && it;\n};\nreturn _checkXSS(typeof globalThis === 'object' && globalThis) ||\n_checkXSS(typeof window === 'object' && window) ||\n_checkXSS(typeof self === 'object' && self) ||\n_checkXSS(typeof global === 'object' && global) ||\nFunction('return this')();\n")(),x=new(function(){function e(){var e=this;this.batchData=[],this.uniqKeys=new Set,this.timeout=2e3,this.lock=!1,this.getSlardarBid=function(){var t,n,r="douyin_web";if(!p.includes(r,"bid"))return r;if(e.config&&e.config.bid)return e.config.bid;if(T&&T._xssBid)return T._xssBid;if(T&&T.slardar&&"function"==typeof T.slardar.config){var i=(T.slardar.config()||{}).bid;if(i)return i}if(T&&T.Slardar&&"function"==typeof T.Slardar.config){var a=(T.Slardar.config()||{}).bid;if(a)return a}return(null===(n=null===(t=null==T?void 0:T.Slardar)||void 0===t?void 0:t._baseParams)||void 0===n?void 0:n.bid)||"argus"},this.getConfigRegion=function(){var t;return p.includes("cn","region")?e.config&&e.config.region?e.config.region:((null===(t=null==T?void 0:T.gfdatav1)||void 0===t?void 0:t.region)||"cn").toLowerCase():"cn"},this.gerReportUrl=function(){var t={cn:I("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boe:I("aHR0cHM6Ly9tb24uemlqaWVhcGkuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),ttp:I("aHR0cHM6Ly9tb24udXMudGlrdG9rdi5jb20vbW9uaXRvcl9icm93c2VyL2NvbGxlY3QvYmF0Y2gvc2VjdXJpdHkvP2JpZD0="),va:I("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),maliva:I("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),sg:I("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9"),boei18n:I("aHR0cHM6Ly9tb24tdmEuYnl0ZW92ZXJzZWEuY29tL21vbml0b3JfYnJvd3Nlci9jb2xsZWN0L2JhdGNoL3NlY3VyaXR5Lz9iaWQ9")}[e.getConfigRegion()];if(t)return t+e.getSlardarBid()}}return e.prototype.setConfig=function(e){this.config=e},e.prototype.upload=function(){var e=this,t=this.gerReportUrl();!this.lock&&t&&0!==this.batchData.length&&(this.lock=!0,setTimeout(function(){var n=e.batchData.slice(0,100);e.batchData=e.batchData.slice(100),T.fetch(t,{method:"post",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).catch(function(e){}),e.lock=!1,e.upload()},this.timeout))},e.prototype.generateKey=function(e){return e.collectKey?[e.collectMode,e.collectKey].join("___"):""},e.prototype.push=function(e){this.batchData.push(e),this.upload()},e.prototype.report=function(e){var t=this.generateKey(e);if(T.fetch&&e.collectKey){var n="object"==typeof window?window.location.href:"SSR";e.documentUrl=n;var r={age:Math.floor(Date.now()),type:"xss",url:n,body:e,"user-agent":""};"enforce"===e.disposition&&"SSR"!==n||(r.url=t),"SSR"===n&&(r.url="SSR___".concat(r.url),r.body.ssr=!0),this.push(r)}},e}()),k=function(e){for(var t=0,n=function(n){Array.isArray(e[n])?0===e[n].length?delete e[n]:(e[n]=p.from(p.uniq(e[n])),t+=e[n].length):0===p.keys(e[n]).length?delete e[n]:p.keys(e[n]).forEach(function(r){e[n][r]=p.from(p.uniq(e[n][r])),t+=e[n][r].length})},r=0,i=p.keys(e);r<i.length;r++)n(i[r]);return{count:t,ret:e}};function S(e,t){return x.setConfig(t),new R(t).process(e)}function w(e){var t,n=(t=/\s|\n|\t/.exec(e))?t.index:-1;if(-1===n)return{html:"",closing:"/"===e[e.length-2]};var r="/"===(e=e.slice(n+1,-1).trim())[e.length-1];return r&&(e=e.slice(0,-1).trim()),{html:e,closing:r}}var E=function(e){return -1===(e=(e=(e=(e=e.replace(/&colon;/gi,":")).replace(/&tab;/gi,"")).replace(/&newline;/gi,"")).replace(/(\t|\n|\r)/g,"")).indexOf("&#")?e.trim().toLowerCase():e.trim().replace(/&#(?:(x)([0-9a-f]+)|([0-9]+));?/gi,function(e,t,n,r){return String.fromCharCode(t?parseInt(n,16):parseInt(r))}).replace(/(\t|\n|\r)/g,"").toLowerCase()};function Z(e,t){if(void 0===e&&(e=""),"string"!=typeof e)return!0;if(e=E(e),p.includes(e,"base64")&&!function(e){if(""===e||""===e.trim())return!0;try{return!p.includes(e,"data:text/html;base64")}catch(e){return!0}}(e))return t&&t("data:text/html;base64"),!1;var n=["expression(","behavior:","view-source:"];if(p.some(n,function(t){return -1!==e.indexOf(t)}))return p.forEach(n,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;var r=["data:application","data:javascript","data:text/html","data:texthtml"];if(p.some(r,function(t){return -1!==e.indexOf(t)}))return p.forEach(r,function(n){-1!==e.indexOf(n)&&t&&t(n)}),!1;if(e.indexOf("javascript:")>0)return t&&t("javascript:"),!1;if(/^javascript:/i.test(e)){var i=e.slice(11).replace(/\s/g,"").trim();return!!p.some(["void","void(0)","void0","false","undefined",";"],function(e){return e===i})||(t&&t("javascript:"),!1)}return!0}var L=function(e,t){var n,r,i="<%= isSaveValidUrl =>";if("string"!=typeof e||(r=Number("<%= urlLimit =>"),void 0!==n&&(r=n),"NaN"!==e.toString()&&-1!==r&&e.length>=r)||Z(e,t))return e;try{if(!0===(i=JSON.parse(i))||"true"===i){var a=new URL(e);return a.origin+a.pathname}}catch(e){}return"#"};function O(e,t,r){if(void 0===e&&(e=""),void 0===t&&(t=[]),"string"!=typeof e)return!0;if(!Z(e=E(e)))return!1;var i,a={url:(i=e.match(/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/)||[])[0],scheme:i[1],slash:i[2],host:i[3],port:i[4],path:i[5],query:i[6],hash:i[7]},o=a.scheme,s=a.host;return r?!!r(e):!(!o||!s)&&(!p.includes(["http","https","file"],o)||("object"==typeof window&&window&&(t=n(n([],t,!0),[location.host],!1)),p.some(t,function(e){return!!(e instanceof RegExp&&e.test(s))||e===s})))}var N={a:["target","title","spellcheck","rel"],canvas:[],abbr:["title"],address:[],area:["shape","coords","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:["dir"],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["alt","title","width","height","decoding"],ins:["datetime"],li:[],mark:[],nav:[],ol:["start"],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],delete:[],form:[],strong:[],mask:["maskunits","x","y","width","height","fill"],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],wbr:[],video:["autoplay","controls","loop","preload","height","width"],svg:["viewBox","version","xmlns","fill","width","height","stroke","stroke-width","style"],path:["d","fill","opacity","stroke","p-id","fill-rule","clip-rule","stroke-width","stroke-linecap","stroke-linejoin","fill-opacity","mask"],rect:["x","y","width","height","fill","stroke","rx"],g:[]},B={collect:null,initCollect:function(){this.collect={whiteList:{},filterProtocol:[]}},removeCollect:function(){var e=k(this.collect),t=e.count,n=e.ret;return this.collect=null,{collectKey:0===t?null:JSON.stringify(n),collectMode:"white"}},onIgnoreTagAttr:function(e,t,r){return e&&p.indexOf(["href","src"],t)>-1?B.domainWhiteList&&Array.isArray(B.domainWhiteList)&&B.domainWhiteList.length>0&&!O(r,n([],B.domainWhiteList,!0))?"":"".concat(t,'="').concat(L(r,function(e){var t;null===(t=B.collect)||void 0===t||t.filterProtocol.push(e)}),'"'):e&&(p.indexOf(["style","class","id"],t)>-1||t.indexOf("data-")>-1)?"".concat(t,'="').concat(r,'"'):(B.collect.whiteList[e]=B.collect.whiteList[e]||[],void B.collect.whiteList[e].push(t))},onIgnoreTag:function(e,t){if("style"===e)return t;_(t,function(e,t,n,r){b(w(r).html.replace("/",""),function(e){B.collect.whiteList[n]=B.collect.whiteList[n]||[],B.collect.whiteList[n].push(e)})},f)},whiteList:N,mergeWhiteList:function(e){for(var t,n={},r=0,i=p.keys(N);r<i.length;r++)n[t=i[r]]=p.from(N[t]);for(var a=0,o=p.keys(e);a<o.length;a++)n[t=o[a]]=t in N?N[t].concat(e[t]):p.from(e[t]);return n},setWhiteList:function(e){for(var t=0,n=p.keys(e);t<n.length;t++){var r=n[t];this.whiteList[r]=r in N?N[r].concat(e[r]):p.from(e[r])}}};try{var P={},G="merge";p.includes(G,"override")&&(B.whiteList=P.whiteList),p.includes(G,"merge")&&B.setWhiteList(P.whiteList)}catch(e){}var U=function(e,t){for(var n={},r=0,i=p.keys(e);r<i.length;r++){var a=i[r];Array.isArray(e[a])?n[a]=p.from(e[a]):n[a]=U({},e[a])}for(var o=0,s=p.keys(t);o<s.length;o++)(a=s[o])in e?Array.isArray(e[a])?n[a]=e[a].concat(t[a]):n[a]=U(e[a],t[a]):Array.isArray(t[a])?n[a]=p.from(t[a]):n[a]=U({},t[a]);return n},D={blackList:{a:["folder"],meta:["content"],iframe:["srcdoc"],input:["pattern"],vmlframe:["xmlns"]},blackTags:["script","xml","embed","isindex","object","base","set","handler","animate","payload","import"],blackAttrs:["charset","ns","namespace","formaction","xlink:href","xmlns:xlink","handler","repeat","repeat-start","repeat-end"],blackAttrRegExps:[/^on/],filterList:{param:["value"],video:["poster"],form:["action"]},filterAttrs:["href","src","background","style","dynsrc","lowsrc","content"]};try{var W={};W.blackAttrRegExps&&(W.blackAttrRegExps=W.blackAttrRegExps.map(function(e){return new RegExp(e.toString().slice(1,e.toString().length-1))}));var V="merge";p.includes(V,"override")&&(D=W),p.includes(V,"merge")&&(D=U(D,W))}catch(e){}var K={mode:"black",whiteList:{},blackConfig:D,collect:null,initCollect:function(){K.collect={blackList:{},blackTags:[],blackAttrs:[],blackAttrRegExps:[],filterAttrs:[],filterList:{},filterProtocol:[]}},removeCollect:function(){var e=k(K.collect),t=e.count,n=e.ret;return K.collect=null,{collectKey:0===t?null:JSON.stringify(n),collectMode:"black"}},onIgnoreTag:function(e,t){var n;if(!p.includes(D.blackTags,e))return _(t,function(e,t,n,r,i){if(-1!==n.indexOf("/"))return f(r);if(i)return"</".concat(n,">");var a=w(r),o=b(a.html,function(e,t){var r,i=0;if(D.blackList[n]&&p.includes(D.blackList[n],e)&&(K.collect.blackList[n]=K.collect.blackList[n]||[],K.collect.blackList[n].push(e),i++),D.blackAttrRegExps.length&&D.blackAttrRegExps.some(function(t){return t.test(e)})&&p.forEach(D.blackAttrRegExps,function(t){t.test(e)&&(K.collect.blackAttrRegExps.push("".concat(t.toString(),"->").concat(e)),i++)}),D.blackAttrs.length&&p.includes(D.blackAttrs,e)&&(D.blackAttrs.push(e),i++),!i){if(D.filterList&&D.filterList[n]&&p.includes(D.filterList[n],e)){var a=L(t,function(e){var t;null===(t=K.collect)||void 0===t||t.filterProtocol.push(e)});return a!==t&&(K.collect.filterList[n]=K.collect.filterList[n]||[],K.collect.filterList[n].push(e)),t?"".concat(e,"='").concat(a,"'"):e}return D.filterAttrs&&p.includes(D.filterAttrs,e)?((a=L(t,function(e){var t;null===(t=K.collect)||void 0===t||t.filterProtocol.push(e)}))!==t&&(null===(r=K.collect)||void 0===r||r.filterAttrs.push(e)),t?"".concat(e,"='").concat(a,"'"):e):t?"".concat(e,"='").concat(t,"'"):e}});return r="<".concat(n),o&&(r+=" ".concat(o)),a.closing&&(r+=" /"),r+=">"},f);null===(n=K.collect)||void 0===n||n.blackTags.push(e)}},j=function(e){var t=e.reportOnly,n=void 0===t||t,r=e.block;return n&&"all"===n?"report":("string"==typeof n&&("true"===n&&(n=!0),"false"===n&&(n=!1)),r?"enforce":n?"report":"enforce")},H=function(e){return function(n,r,i){if(!n||"string"!=typeof n)return n;var a=r;e===S&&(a=B).initCollect();var o=e(n,a);if(A(o)===A(n))return n;if(!i)return o;var s=i.logType,l=j(i),u=a.removeCollect();return x.report(t(t({type:s,disposition:l},u),{sourceText:y(n),filterText:y(o)})),"enforce"===l?o:n}},M=H(function(e,t){return void 0===t&&(t={}),t&&t.whiteList||(t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}),new R(t).process(e)}),Y=H(S),X=function(e,t,n){var r=[],i=L(e,function(e){r.push(e)});if(i===e)return e;r=p.from(p.uniq(r));var a=t||n||{};if(!a)return i;var o=a.logType,s=j(n);return x.report({type:o,disposition:s,collectKey:r.join("___"),collectData:JSON.stringify(r),collectMode:"black",sourceText:y(e),filterText:y(i)}),"enforce"===s?i:e},F=T._xssProject||{},J=T.xssNamespace||{},z="3.0.26",q={FilterXSS:R,version:z,webpackPluginVersion:"<%= webpackPluginVersion =>",reportOnly:"<%= reportOnly =>",filterXSS:M,_filterXSS:Y,filterUrl:X,Config:B,BlackConfig:K,project:F,setProjectName:function(e){F[e]=this,T._xssProjectName=e}};J.douyin_web=q,T.xssNamespace=J,T.Math&&!T.Math.xssNamespace&&(T.Math.xssNamespace=J),F[z]=q,T.globalThis=T,T.getFilterXss=function(){return void 0!==this._xssProjectName?this._xssProject[this._xssProjectName]:q},T.xss=q,T.isSafeUrl=O,T.isSafeDomain=O,T.isSafeProtocol=Z,T._xssProject=F,T._xssProjectName&&(F[T._xssProjectName]=q);var Q=q.setProjectName.bind(q);e.BlackConfig=K,e.Config=B,e.FilterXSS=R,e._filterXSS=Y,e.filterUrl=X,e.filterXSS=M,e.isSafeDomain=O,e.isSafeProtocol=Z,e.isSafeUrl=O,e.project=F,e.setProjectName=Q,e.setXssNamespace=function(e){var t=e.appId,n=e.bid,r=e.region;J[t]=q;B.bid=n,B.region=r,B.enabled=!0},e.xssNamespace=J,Object.defineProperty(e,"__esModule",{value:!0})});"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["945"],{158690:function(e,t,n){n.d(t,{I:function(){return i}}),n(227470),n(459167),n(766282),n(904644),n(585322);var r=[];function i(e){var t={};try{e=e.replace(/^http:|^https:/,"");for(var n=r||[],i=function(r){if(n[r].name.replace(/^http:|^https:/,"")===e)return["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"].map(function(e){t[e]=Math.round(n[r][e])}),t.url=n[r].name,t.duration=Math.round(n[r].duration),t.domainDuration=t.domainLookupEnd-t.domainLookupStart,t.connectDuration=t.connectEnd-t.connectStart,"break"},a=n.length-1;a>=0;a--){var o=i(a);if("break"===o)break}return t}catch(e){return t}}"undefined"!=typeof window&&function(){try{new window.PerformanceObserver(function(e){var t=e.getEntriesByType("resource");r.length>30&&r.splice(0,r.length-30);for(var n=0;n<t.length;n++)r.push(t[n])}).observe({entryTypes:["resource"]})}catch(e){}}()},74043:function(e,t,n){n.d(t,{Z:function(){return r}});let r="0.12.9"},891097:function(e,t,n){n.d(t,{T:function(){return i}}),n(831528),n(410121),n(864614);var r=[{range:[0,90],size:614400},{range:[90,120],size:819200},{range:[120,Number.MAX_VALUE],size:1024e3}];function i(e,t,n){var i=n>51200?Math.min(n,t):t;if(!e)return i||r[0].size;var a=r.find(function(t){return e>=t.range[0]&&e<t.range[1]});return a&&(i=Math.min(a.size,n>0?n:t)),i||r[0].size}},228908:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(167846);n(514312),n(561999),n(831528),n(379493),n(585322),n(410121),n(864614);var i=n(101132),a=n(906399),o=function(e){function t(e,n,i,o,s){var l;return(0,r.PA)(this,t),(l=(0,r.$w)(this,t,[e,n,i,o,s])).logTag="".concat(s,"_").concat(a.TJ.GOP)||"",l.lastDemuxSampleIdxRange.video=-1,l.lastDemuxSampleIdxRange.audio=-1,l.adaptTimeRange=[],l}return(0,r.XW)(t,e),(0,r.qH)(t,[{key:"updateAdaptTimeRange",value:function(e,t){!this.adaptTimeRange&&(this.adaptTimeRange=[]),this.lastTargetDur=t;var n=this.adaptTimeRange;null===e&&(e=n.length>0?n[n.length-1].timeRangeIdx[1]:0);for(var r=0;r<(null==n?void 0:n.length);r++){var a=n[r].timeRangeIdx;if(e>=a[0]&&e<a[1])return this.log(i._.LOG,"has adaptTimeRange,startSrcIdx: ".concat(e,", adaptTimeRangeIdx: ").concat(r,", dur: ").concat(t),JSON.stringify(n[r])),r}var o=n.length>0?n[n.length-1].timeRangeIdx[1]:0;if(o>=this.timeRange.length)return n.length-1;for(;o<e;){var s=this.timeRange[o].startTime,l=this.timeRange[o].endTime,u={startTime:s,endTime:l,timeRangeIdx:[o,o+1],duration:l-s,downloaded:!1,isLoading:!1};this.adaptTimeRange.push(u),this.updateTimeRangeInAdaptTimeRangeIdx(u.timeRangeIdx,this.adaptTimeRange.length-1),this.log(i._.LOG,"gap adaptTimeRange,adaptTimeRangeIdx: ".concat(this.adaptTimeRange.length-1),JSON.stringify(u)),o++}for(var c=0,d=o,g=o;g<this.timeRange.length;g++)if(c<t)c+=this.timeRange[g].endTime-this.timeRange[g].startTime;else{d=g;break}g===this.timeRange.length&&(d=this.timeRange.length);var h=[o,d],f=this.timeRange[h[0]].startTime,p=h[1]===this.timeRange.length?this.timeRange[h[1]-1].endTime:this.timeRange[h[1]].startTime,v={startTime:f,endTime:p,timeRangeIdx:h,duration:p-f,downloaded:!1,isLoading:!1};return this.log(i._.LOG,"update adaptTimeRange,startIdx,",h[0],", dur,",t,JSON.stringify(v)),this.adaptTimeRange.push(v),this.updateTimeRangeInAdaptTimeRangeIdx(h,this.adaptTimeRange.length-1),this.adaptTimeRange.length-1}},{key:"updateTimeRangeInAdaptTimeRangeIdx",value:function(e,t){if(!!(null!=e&&e.length))for(var n=e[0];n<e[1];n++)n<this.timeRange.length&&(this.timeRange[n].adaptTimeRangeIdx=t)}},{key:"getAdaptIdxBySrcIdx",value:function(e,t){var n,r=this.adaptTimeRange.length;if(!t&&e>=(null===(n=this.adaptTimeRange[r-1])||void 0===n?void 0:n.timeRangeIdx[1])){var i=this.lastTargetDur||5;this.updateAdaptTimeRange(e,i)}for(var a=0;a<this.adaptTimeRange.length;a++){var o=this.adaptTimeRange[a].timeRangeIdx;if(o&&e>=o[0]&&e<o[1])return a}return this.adaptTimeRange.length-1}},{key:"getFragmentIdx",value:function(e){if(!(null!==(t=this.videoTrak)&&void 0!==t&&t.length))return(r=null===(i=this.audioTrak)||void 0===i?void 0:i.find(function(t){return t.startTime<=e&&t.endTime>e}))?r.index:0;if(n=this.videoTrak.find(function(t){return t.startTime<=e&&t.endTime>e}),r=null===(a=this.audioTrak)||void 0===a?void 0:a.find(function(t){return t.startTime<=e&&t.endTime>e}),n&&r)return Math.min(n.index,r.index);if(n||r)return n?n.index:r.index;else{var t,n,r,i,a,o=Number.MAX_VALUE;return this.videoTrak.length>0&&(o=this.videoTrak.length-1),this.audioTrak&&this.audioTrak.length>0&&(o=Math.min(this.audioTrak.length-1,o)),o}}},{key:"resetFragmentLoadState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.log(i._.LOG,", resetFragmentLoadState, fragIndex, ",e,",changeBitrate,",t);var n=this.adaptTimeRange.length;t&&(this.adaptTimeRange.splice(e+1,n-e-1),n=this.adaptTimeRange.length);for(var r=0;r<n;r++)if(r<e?(this.adaptTimeRange[r].downloaded=!0,this.adaptTimeRange[r].isLoading=!0):(this.adaptTimeRange[r].downloaded=!1,this.adaptTimeRange[r].isLoading=!1),t){this.adaptTimeRange[r].range=null;var a=this.adaptTimeRange[r].timeRangeIdx;if(a[0]>=this.timeRange.length){this.log(i._.WARN,"fix adaptTimeRange fragIndex ".concat(e)," ,timeRangeIdx[0] >= this.timeRange.length, so end",a[0],this.timeRange.length,",endFragment,",r),this.adaptTimeRange=this.adaptTimeRange.slice(0,r);break}a[1]>=this.timeRange.length&&(this.log(i._.WARN,"fix adaptTimeRange fragIndex",e," ,timeRangeIdx[1],",a[1],">>>>",this.timeRange.length,",endFragment,",r),a[1]=this.timeRange.length,this.adaptTimeRange=this.adaptTimeRange.slice(0,r+1)),this.adaptTimeRange[r].startTime=this.timeRange[a[0]].startTime,this.adaptTimeRange[r].endTime=a[1]>=this.timeRange.length?this.timeRange[this.timeRange.length-1].endTime:this.timeRange[a[1]].startTime,this.adaptTimeRange[r].range=this.getFragRange(r)}}},{key:"calculateRange",value:function(e){var t,n,a,o,s=null,l=null,u=null,c=null,d=e<this.adaptTimeRange.length?this.adaptTimeRange[e].timeRangeIdx:null;if(!d){this.log(i._.WARN,"calculateRange err",e,JSON.stringify(this.adaptTimeRange));return}var g=d[0],h=d[1];this.log(i._.LOG,"getFragRange, timeRangeIdx,",JSON.stringify(d));var f=this.videoTrak;f&&(s=g<f.length?f[g]:f[f.length-1],l=h<f.length?f[h-1]:f[f.length-1]);var p=this.audioTrak;p&&(u=g<p.length?p[g]:p[p.length-1],c=h<p.length?p[h-1]:p[p.length-1]);var v=[Math.min((null===(t=s)||void 0===t?void 0:t.range[0])||1/0,(null===(n=u)||void 0===n?void 0:n.range[0])||1/0),Math.max.apply(Math,(0,r.u)([null===(a=l)||void 0===a?void 0:a.range[1],null===(o=c)||void 0===o?void 0:o.range[1]].filter(function(e){return"number"==typeof e})).concat([0]))];return this.log(i._.LOG,"calculateRange",e,v[0],"-",v[1]),v}},{key:"getTimeRangeByIdx",value:function(e){var t,n,r,i=null,a=this.videoTrak;a&&(i=e<a.length?a[e]:a[a.length-1]);var o=null,s=this.audioTrak;return s&&(o=e<s.length?s[e]:s[s.length-1]),[Math.min((null===(t=i)||void 0===t?void 0:t.range[0])||1/0,(null===(n=o)||void 0===n?void 0:n.range[0])||1/0),Math.max(i?i.range[1]-1:0,o?(null===(r=o)||void 0===r?void 0:r.range[1])-1:0)]}},{key:"getFragRange",value:function(e){if(e<this.adaptTimeRange.length&&null!==(t=this.adaptTimeRange[e])&&void 0!==t&&t.range)return this.log(i._.LOG,"getFragRange exist",e,JSON.stringify(this.adaptTimeRange[e].range)),this.adaptTimeRange[e].range;var t,n=this.calculateRange(e);if(n&&e<this.adaptTimeRange.length){this.adaptTimeRange[e].range=n;var r=this.adaptTimeRange[e].timeRangeIdx[1];if(r<this.timeRange.length){var a=this.getTimeRangeByIdx(r);(null==a?void 0:a.length)>1&&a[0]<a[1]&&n[1]>a[0]&&(this.adaptTimeRange[e].repeatRange=[a[0],n[1]])}}return n}},{key:"getSubRange",value:function(e,t,n){for(var r=this.adaptTimeRange[e].timeRangeIdx,a=r[0],o=r[0];o<r[1];o++)if(t>=this.timeRange[o].startTime&&t<this.timeRange[o].endTime){a=o;break}var s=[this.getSrcFragRange(a)[0],n[1]];return this.log(i._.LOG,">>>>>getSubRange finalRange ",JSON.stringify(s),",oldRange,",JSON.stringify(n)),s}},{key:"getSrcFragRange",value:function(e){var t,n,r,a=null,o=null;this.log(i._.LOG,"getFragRange, timeRangeIdx, srcFragment,",JSON.stringify(e));var s=this.videoTrak;s&&s.length>0&&(a=e<s.length?s[e]:s[s.length-1]);var l=this.audioTrak;l&&l.length>0&&(o=e<l.length?l[e]:l[l.length-1]);var u=[Math.min((null===(t=a)||void 0===t?void 0:t.range[0])||1/0,(null===(n=o)||void 0===n?void 0:n.range[0])||1/0),Math.max(a&&(null===(r=a)||void 0===r?void 0:r.range[1])-1||0,o&&o.range[1]-1||0)];return this.log(i._.LOG,",getSrcFragRange",e,u),u}},{key:"getSamplesRange",value:function(e,t){var n=[],r="video"===t?this.videoTrak:this.audioTrak,i=this.lastDemuxSampleIdxRange[t],a=this.adaptTimeRange[e].timeRangeIdx;if(r&&r.length>0){n.push(i+1);var o=a[1]-1,s=r.length,l=o<s?r[o].frames:r[s-1].frames;n.push(l[l.length-1].index)}return n}},{key:"resetDemuxSampleIdx",value:function(e){if(e){var t=this.videoTrak,n=this.audioTrak;if(t){var r=t.find(function(t){return t.startTime<=e&&t.endTime>e});if(r){var a=r.frames;this.lastDemuxSampleIdxRange.video=a[0].index-1}}if(n){var o=n.find(function(t){return t.startTime<=e&&t.endTime>e});if(o){var s=o.frames;this.lastDemuxSampleIdxRange.audio=s[0].index-1}}}else this.lastDemuxSampleIdxRange={video:-1,audio:-1};this.log(i._.LOG,"resetDemuxSampleIdx",JSON.stringify(this.lastDemuxSampleIdxRange))}}])}(n(24166).Yx)},480514:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n("167846");n("514312"),n("561999"),n("121621"),n("614521"),n("904644"),n("577829"),n("410121"),n("947478"),n("864614"),n("415691"),n("227470"),n("238658"),n("999921"),n("459167"),n("812735"),n("623302"),n("983431"),n("319386"),n("657170"),n("853127"),n("644952"),n("759149"),n("949136"),n("966922"),n("33814"),n("29536"),n("716005"),n("548485"),n("260075"),n("791017"),n("743286"),n("310378"),n("124539"),n("48498"),n("728271"),n("814647"),n("535689"),n("659673"),n("210434");var i=n("906399");n("482392");let a={findBox:function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t.type!==n){if(t&&t.subBox){var a=t.subBox.filter(function(e){return e.type===n});a.length?a.forEach(function(e){return i.push(e)}):t.subBox.forEach(function(t){return e(t,n,i)})}}else i.push(t);return(i=(0,r.u)(i)).length>1?i:i[0]},padStart:o,toHex:function(){for(var e=[],t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){var n=Number(t).toString(16);e.push(o(n,2,0))}),e},fromHex:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=window.parseInt(e.substr(n,2),16);return t},sum:function(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){e+=t}),e},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return t},ArrayBufferToString:function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return t},fromCharCode:s,Base64ToHex:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),n="",r=0;r<t.length;r++)n+="0".concat(t.charCodeAt(r).toString(16)).substr(-2);return n},toBase64:function(e,t){var n=s(e);t=void 0===t||t;var r=window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?r:r.replace(/=*$/,"")},toUTF8:function(e){for(var t=unescape(encodeURIComponent(e)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n.buffer},strToBuf:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e[n]+e[n+1],16));return new Uint8Array(t)},str2hex:function(e){if(""===e)return"";for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t},formatIV:function(e){if(e.length>=16)return e;for(var t=new Uint8Array(16),n=0;n<t.length;n++)t[n]=n<e.length?e[n]:0;return t},parse:function(e){if(!Array.isArray(e)){for(var t=[],n="",r=0;r<e.length;r++)r%2&&(n=e[r-1]+e[r],t.push(parseInt(n,16)),n="");return t}return e.map(function(e){return parseInt(e,16)})},generateUniqueKey:function(e){var t=e.vid,n=e.mediaType,r=e.definition;return(n=n||"video",r=r||-1,t)?"".concat(t,"#").concat(n,"#").concat(r,"#mp4"):null},validateFragment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!(e instanceof ArrayBuffer))return!1;try{var n=!0;if(2===t.length){var r=t[1]-t[0]+1;if(!(n=e.byteLength===r))return}}catch(e){return!1}return!0},typeOf:l,nowTime:function(){try{return parseInt("".concat(performance.now()),10)}catch(e){return new Date().getTime()}},extUrl:function(e,t){try{if(!t||e.startsWith("blob"))return e;var n=e.indexOf("?"),r=n===e.length-1,i="";Object.keys(t).forEach(function(e){var n=t[e];if(null!=n&&""!==n)i+="".concat(i?"&":"").concat(e,"=").concat(t[e])});return e+=(n<0?"?":r?"":"&")+i}catch(t){return e}},deepMerge:function e(t,n){return Object.keys(n).forEach(function(i){var a,o=l(n[i]),s=l(t[i]);"Array"===o?("Array"!==s&&(t[i]=[]),(a=t[i]).push.apply(a,(0,r.u)(n[i]))):"Object"===o?("Object"!==s&&(t[i]={}),e(t[i],n[i])):t[i]=n[i]}),t},getFileSize:function(e,t){try{if(!e||!t)return 0;return parseInt("".concat(t*e/8),10)}catch(e){return 0}},hashVal:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n},ArrayCopy:function(e){var t=[];if(!e||!e.length||0===e.length)return t;for(var n=0;n<e.length;n++){var r=e[n],i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a]);t.push(i)}return t},concatData:function(e,t){var n=[],r=0;e&&n.push(e),t&&n.push(t),n.every(function(e){return e&&(r+=e.byteLength),!0});var i=new Uint8Array(r),a=0;return n.every(function(e){return e&&(i.set(e,a),a+=e.byteLength),!0}),i},getFragRange:function(e,t,n){var r,i,a,o,s=null,l=null;return s=e<t.length-1?t[e]:t[t.length-1],l=e<n.length-1?n[e]:n[n.length-1],[Math.min((null===(r=s)||void 0===r?void 0:r.range[0])||1/0,(null===(i=l)||void 0===i?void 0:i.range[0])||1/0),Math.max(null===(a=s)||void 0===a?void 0:a.range[1],null===(o=l)||void 0===o?void 0:o.range[1])]},getHostFromUrl:function(e){if("String"!==l(e)||!e)return"";var t=e.split("/"),n="";return t.length>3&&t[2]&&(n=t[2]),n},newUint8Array:function(e){for(var t,n=0;n<i.XZ;)try{if(t=new Uint8Array(e),t.byteLength>0)break;n++}catch(e){n<i.XZ&&n++}return t},checkUrlIsExpired:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||"String"!==l(e))return 0;var n=0;try{var r=RegExp("(\\?|&)x-tos-expires=([^&]*)(&|$)"),i=e.match(r);if(null!==i)n=parseInt(i[2],10);else{var a=e.split("/");a.length>5&&8===a[4].length&&(n=parseInt(a[4],16))}if(n>0){var o=parseInt("".concat(t&&"number"==typeof t?new Date().getTime()/1e3+t:new Date().getTime()/1e3),10);return n<o?1:2}return 0}catch(e){return 0}},getBufferSplits:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e5;if(t-e-n<n/2||!t)return[[e,t]];for(var r=[];e<t;){var i=e+n;(i>t||t-i<n/2)&&(i=t),r.push([e,i]),e=i+1}return r},getFirstFrameStartRange:function(e,t){var n,r,i=Number.MAX_VALUE,a=Number.MAX_VALUE;return e&&(i=(null===(n=e[0])||void 0===n||null===(n=n.range)||void 0===n?void 0:n[0])||Number.MAX_VALUE),t&&(a=(null===(r=t[0])||void 0===r||null===(r=r.range)||void 0===r?void 0:r[0])||Number.MAX_VALUE),Math.min(i,a)},getEndFramePos:function(e,t){var n,r,i=0,a=0;return e&&(i=(null===(n=e[e.length-1])||void 0===n||null===(n=n.range)||void 0===n?void 0:n[1])||0),t&&(a=(null===(r=t[t.length-1])||void 0===r||null===(r=r.range)||void 0===r?void 0:r[1])||0),Math.max(i,a)}};function o(e,t,n){for(var r=String(n),i=t>>0,a=Math.ceil(i/r.length),o=[],s=String(e);a--;)o.push(r);return o.join("").substring(0,i-s.length)+s}function s(e){for(var t="",n=0;n<e.length;n+=16e3){var r=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,r)}return t}function l(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}},884504:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{$w:function(){return o},Ac:function(){return A},Kd:function(){return m},PA:function(){return s},XW:function(){return h},ZQ:function(){return _},Zj:function(){return v},_x:function(){return d},l5:function(){return y},qH:function(){return u},sf:function(){return c},u:function(){return b},x:function(){return a}});function i(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,l,"next",e)}function l(e){i(o,r,a,s,l,"throw",e)}s(void 0)})}}function o(e,t,n){return t=g(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function s(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=R(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function y(){y=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(t,n,r,a){var o=Object.create((n&&n.prototype instanceof v?n:v).prototype);return i(o,"_invoke",{value:function(t,n,r){var i=g;return function(a,o){if(i===h)throw Error("Generator is already running");if(i===f){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=function t(n,r){var i=r.method,a=n.iterator[i];if(a===e)return r.delegate=null,"throw"===i&&n.iterator.return&&(r.method="return",r.arg=e,t(n,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+i+"' method")),p;var o=d(a,n.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var s=o.arg;return s?s.done?(r[n.resultName]=s.value,r.next=n.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):s:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,p)}(s,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===g)throw i=f,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=h;var u=d(t,n,r);if("normal"===u.type){if(i=r.done?f:"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=f,r.method="throw",r.arg=u.arg)}}}(t,r,new S(a||[]))}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var g="suspendedStart",h="executing",f="completed",p={};function v(){}function m(){}function I(){}var _={};u(_,o,function(){return this});var b=Object.getPrototypeOf,C=b&&b(b(w([])));C&&C!==n&&r.call(C,o)&&(_=C);var A=I.prototype=v.prototype=Object.create(_);function R(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function T(e,t){var n;i(this,"_invoke",{value:function(i,a){function o(){return new t(function(n,o){!function n(i,a,o,s){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&r.call(c,"__await")?t.resolve(c.__await).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):t.resolve(c).then(function(e){u.value=e,o(u)},function(e){return n("throw",e,o,s)})}s(l.arg)}(i,a,n,o)})}return n=n?n.then(o,o):o()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function w(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw TypeError(typeof t+" is not iterable")}return m.prototype=I,i(A,"constructor",{value:I,configurable:!0}),i(I,"constructor",{value:m,configurable:!0}),m.displayName=u(I,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,u(e,l,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},R(T.prototype),u(T.prototype,s,function(){return this}),t.AsyncIterator=T,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new T(c(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},R(A),u(A,l,"Generator"),u(A,o,function(){return this}),u(A,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=w,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;k(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:w(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||R(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){if(e){if("string"==typeof e)return r(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},248176:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(884504);n(514312),n(441609),n(561999),n(121621),n(904644),n(379493),n(585322),n(577829),n(724356),n(947478),n(864614),n(77848),n(632852),n(616414),n(210434),n(612222);var i=n(975048),a=n(362043),o=n(918334),s=n(280161),l=n(43024),u=n(239714),c=n(140709),d=n(203199),g=n(894538),h=n(569898),f=n(340412),p=n(342189),v=function(e){var t,n,a,g,v,m,y;function I(e,t){var n;return(0,r.PA)(this,I),(n=(0,r.$w)(this,I,[e,t]))._loader=new c.Z({loaderCount:1,loaderType:l.t.XHR},e,"preloader"),n._loader.on(o.kW,function(t){if((null==t?void 0:t.len)>0){var r,i,a=(null==t||null===(r=t.priOptions)||void 0===r?void 0:r.type)||o._R.CDN,s=Math.round(8e3*t.len/t.time/1024),l=null==t?void 0:t.priOptions.extData,u=l.cacheKey,c=null===(i=n._pendingItem)||void 0===i?void 0:i.duration,d={vid:l.vid,loadType:a,size:t.len,speed:s,cacheKey:u,vtype:o.l0.DASH,duration:c,bitrate:l.bitrate,range:t.range,mediaType:l.mediaType,format:o.l0.DASH,segmentDuration:null==l?void 0:l.segmentDuration};e.bwEventEmit(d)}}),n.options=t,n._pendingTask=null,n}return(0,r.XW)(I,e),(0,r.qH)(I,[{key:"_setItem",value:(t=(0,r.x)((0,r.l5)().mark(function e(t,n){var i,a;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.vtype=o.l0.DASH,e.next=3,this.preloadManager.getItem(t,!0);case 3:(i=e.sent)?(a=Object.assign({},i,n),a=d.Z.combinePreloadData(a),this.preloadManager.setItem(t,a,!0)):this.preloadManager.setItem(t,n,!0);case 5:case"end":return e.stop()}},e,this)})),function(e,n){return t.apply(this,arguments)})},{key:"_processItemUrl",value:function(e){this.preloadManager.preProcessUrl&&(e.main_url=this.preloadManager.preProcessUrl(e.main_url).url,e.backup_url_1=this.preloadManager.preProcessUrl(e.backup_url_1).url,e.fallback_url=this.preloadManager.preProcessUrl(e.fallback_url).url)}},{key:"_getDashContext",value:function(e){var t=this,n=e.payload;if("TOP"===e.playInfoType){var r={dashOpts:e.payload};(0,f.NK)(r),n=r.dashOpts.dynamic_video}if(Array.isArray(n)){var i={dashOpts:{Data:e,dynamic_video:e}};(0,f.LY)(i),n=i.dashOpts.dynamic_video}return n.dynamic_video_list&&n.dynamic_video_list.forEach(function(e){e.bitrate=e.real_bitrate||e.bitrate,t._processItemUrl(e)}),n.dynamic_audio_list&&n.dynamic_audio_list.forEach(function(e){e.bitrate=e.real_bitrate||e.bitrate,t._processItemUrl(e)}),{dynamic_video:n}}},{key:"_getStartContext",value:function(){return{mediaInfos:{dynamic_video_list:[],dynamic_audio_list:[]},vtype:"",video:{segments:[]},audio:{segments:[]}}}},{key:"_cacheInitSegments",value:(n=(0,r.x)((0,r.l5)().mark(function e(t,n,i,a){var o,s,l,u,c,d,g;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.mediaList.video||[],s=t.mediaList.audio||[],l=[],s&&s.length>0&&(u=this.makeInitBaseSegemntRequest(t,n.duration,"audio",s.selectedIdx,void 0,n.vid),l.push(u)),o&&o.length>0&&(c=this._calVideoItemIdx(o,a.bandwidth)||0,d=o[c].definition,g=this.makeInitBaseSegemntRequest(t,n.duration,"video",c,d,n.vid),l.push(g)),e.next=7,Promise.all(l);case 7:e.sent.forEach(function(e){"video"===e.data.mediaType&&(e.data.orgDefinition=a.orgDefinition),i[e.key]=e.data});case 9:case"end":return e.stop()}},e,this)})),function(e,t,r,i){return n.apply(this,arguments)})},{key:"start",value:(a=(0,r.x)((0,r.l5)().mark(function e(t,n){var i,a,o,l,c,d,g,v,m,y,I,_,b,C,A,R,T,x,k,S,w,E,Z,L,O,N,B,P,G,U,D,W,V,K,j,H,M,Y,X,F,J,z,q,Q,$,ee,et,en,er,ei,ea=this;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=(i=Promise.withResolvers()).resolve,o=i.promise,l={},this._pendingTask={resolve:a,data:t,map:l},c=new s.XK,d=this._getDashContext(t),g=new u.Z("anytext",d,this),v=this._getStartContext(),m=function(){v.mediaInfos.dynamic_video_list=g.mediaList.video||[],v.mediaInfos.dynamic_audio_list=g.mediaList.audio||[],c.resolve(v)},g.once("ready",m),g.init(),e.next=12,c;case 12:if(this._pendingTask){e.next=16;break}return y=this.isStepWise(),a({remove:!y}),e.abrupt("return",o);case 16:if(I=new s.XK,_=v.mediaInfos,b=this._getIdx(_.dynamic_video_list,n||t.defaultDefinition),C=_.dynamic_video_list[b]||_.dynamic_video_list[0],_.dynamic_video_list[b]&&g.mediaList.audio&&_.dynamic_audio_list.length>0&&(g.mediaList.video.selectedIdx=b,-1===(A=(0,f.Ft)(g.mediaList.video,g.mediaList.audio))&&(A=0),h.ZP.log("audio definition preload",A),g.mediaList.audio.selectedIdx=A),t.dashType=g.dashType,!(null!==(er=this.options)&&void 0!==er&&null!==(er=er.pcdnConfig)&&void 0!==er&&er.openPreloadPCDN&&null!==(ei=this.options)&&void 0!==ei&&null!==(ei=ei.pcdnConfig)&&void 0!==ei&&ei.openDASHPreloadPCDN&&"segment_template"!==g.dashType)){e.next=38;break}if(R=this.options.pcdnConfig,!((T=d.dynamic_video.dynamic_video_list.filter(function(e){return e.definition===C.definition}))&&T.length>0)){e.next=38;break}if(k=(x=T[0]).duration,S=x.uri,this._pcdn?this._pcdn.updateConfig("video",{vid:S,duration:k}):(w={pcdnConfig:R},this._pcdn=new p.Z({config:w,isOpenPCDN:!0,videoDuration:k,uri:S},null)),!_.dynamic_video_list[b]){e.next=32;break}return!C.bitrate&&(C.bitrate=C.bandwidth),e.next=32,this._pcdn.openPCDNForce(C.bitrate||C.bandwidth,(0,r.Zj)({mediaType:"video"},C));case 32:if(!(g.mediaList.audio&&_.dynamic_audio_list.length>0)){e.next=38;break}return!(Z=(E=g.mediaList.audio)[E.selectedIdx]).bitrate&&(Z.bitrate=Z.bandwidth),e.next=38,this._pcdn.openPCDNForce(Z.bitrate||Z.bandwidth,(0,r.Zj)({mediaType:"audio"},Z));case 38:if(this._pendingItem=C,!this._pendingItem.duration&&(this._pendingItem.duration=t.duration),L={bandwidth:C.bitrate||C.bandwidth,time:t.startTime||0,orgDefinition:C.orgDefinition,hasSegmentRange:!1},O=[],N=this.isStepWise(),e.prev=43,U=void 0===t.video||(null===(B=t.video.segments)||void 0===B?void 0:B.length)===0,void 0===t.stepIdx&&(t.stepIdx=0),void 0===t.steps&&(t.steps=[0]),!N&&(t.steps=[0]),!(0===t.stepIdx||U)){e.next=71;break}if("segment_template"!==g.dashType){e.next=54;break}this._calRequests(g,L,I,t,!0),I.resolve(),e.next=69;break;case 54:if(0!==t.stepIdx){e.next=68;break}if(K=!1,(null==(j=g.mediaList)||null===(D=j.video)||void 0===D?void 0:D.length)>0&&(null==j||null===(W=j.audio)||void 0===W?void 0:W.length)>0&&(K=j.video[j.video.selectedIdx].firstMoofMdatRange&&j.audio[j.audio.selectedIdx].firstMoofMdatRange),!(!N&&K&&null!==(V=this.options)&&void 0!==V&&V.useSegmentRange)){e.next=63;break}t.hasSegmentRange=!0,this._requestAcc(g,L,I,t),e.next=66;break;case 63:return e.next=65,this._cacheInitSegments(g,t,l,L);case 65:this._calRequests(g,L,I,t);case 66:e.next=69;break;case 68:I.resolve([]);case 69:e.next=72;break;case 71:I.resolve([]);case 72:return e.next=74,I;case 74:if(O=e.sent,0===(H=N?t.stepIdx:0)&&this._setItem(t,l),this._pendingTask){e.next=80;break}return a({remove:!N}),e.abrupt("return",o);case 80:N&&(X=t.steps.length,X<(F=Math.max(null===(M=t.video)||void 0===M?void 0:M.segments.length,null===(Y=t.audio)||void 0===Y?void 0:Y.segments.length))&&(z=Array(F-X).fill(1),(J=t.steps).push.apply(J,(0,r.u)(z)))),q=[null===(P=t.video)||void 0===P?void 0:P.segments[H],null===(G=t.audio)||void 0===G?void 0:G.segments[H]],Q=(O||[]).concat(q).filter(function(e){return!!e}),$=[],ee=(0,r.sf)(Q),e.prev=85,en=(0,r.l5)().mark(function e(){var n,i,a,o,s;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=(n=et.value).url,a=n.range,o=n.extData,s=ea._getData(i,a,o).then(function(e){"video"===e.mediaType&&(e.orgDefinition=L.orgDefinition),!e.fromCache&&(l[o.cacheKey]=e,h.ZP.log("prelaoder setItem",t,l),ea._setItem(t,l))}),$.push(s);case 4:case"end":return e.stop()}},e)}),ee.s();case 88:if((et=ee.n()).done){e.next=92;break}return e.delegateYield(en(),"t0",90);case 90:e.next=88;break;case 92:e.next=97;break;case 94:e.prev=94,e.t1=e.catch(85),ee.e(e.t1);case 97:return e.prev=97,ee.f(),e.finish(97);case 100:return e.next=102,Promise.all($);case 102:e.next=107;break;case 104:e.prev=104,e.t2=e.catch(43);case 107:return e.prev=107,a({remove:!N}),e.finish(107);case 110:return this._pendingTask=null,e.abrupt("return",o);case 112:case"end":return e.stop()}},e,this,[[43,104,107,110],[85,94,97,100]])})),function(e,t){return a.apply(this,arguments)})},{key:"isStepWise",value:function(){var e=this.options.openStepwiseType;return this.stepwise&&(void 0===e||e.toUpperCase()===o.l0.DASH)}},{key:"_getIdx",value:function(e,t){var n=0;return e.forEach(function(e,r){e.definition===t&&(n=r)}),n}},{key:"_calRequests",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=[],o=t.bandwidth,s=e.mediaList.video||[],l=e.mediaList.audio||[],u=r.vid,c=e.videoCodecType;if(l&&l.length>0){var d=l.selectedIdx;l[d].codec_type=c;var g=this._calUrls(l[d],"audio",u,null,i,r);a=a.concat(g)}if(s&&s.length>0){var h=this._calVideoItemIdx(s,o)||0,f=s[h];f.codec_type=c;var p=this._calUrls(f,"video",u,f.definition,i,r);a=a.concat(p)}a.length,n.resolve(a)}},{key:"_getSplitGopRange",value:function(e,t,n){var i=e.segment,a=i.range;if(!e.isStep){var o=i.range[1],s=i.range[0];return{allRangeItems:[{item:i,range:a,segmentDuration:i.endRaw-i.startRaw,rangeEnd:o,rangeStart:s}],newSteps:t}}var l=[],u=[],c,d=(0,r.sf)(t);try{for(d.s();!(c=d.n()).done;){var g=c.value;if(g>=i.endRaw){u.push(i.endRaw);break}u.push(g)}}catch(e){d.e(e)}finally{d.f()}var f=void 0===this.options.needfixSizeSegment||this.options.needfixSizeSegment;f&&u.length>0&&u[u.length-1]<i.endRaw&&(u.push(i.endRaw),h.ZP.log("repload change steps"));for(var p=a[0],v=0,m=u.length,y=i.range[1],I=0;I<u.length;I++){var _,b=u[I],C=p,A=f?v===u.length-1:b>=i.endRaw,R=Math.floor(b*n/8)+a[0]+1,T=A?null===(_=i.range)||void 0===_?void 0:_[1]:R-1;p=T+1;var x=T>=y;if(a=[C,x?y:T],C>=T)break;l.push({item:i,range:a,segmentDuration:x?i.endRaw:b,rangeEnd:i.range[1],rangeStart:i.range[0]}),v++}return v<m&&u.splice(v,m-v),{allRangeItems:l,newSteps:u}}},{key:"_recalcSteps",value:function(e,t){var n=0,i=!1,a=[],o,s=(0,r.sf)(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=e[n],c=e[e.length-1],d=l.endRaw;if(l.startRaw<=u&&c<d&&!i)for(;n<e.length;)a.push({stepTime:e[n],segment:l,isStep:!0}),n++;else for(;n<e.length;){var g=e[n],h=e[n+1];if(g<l.endRaw&&h<l.endRaw)n++;else{n++,a.push({stepTime:l.endRaw,isStep:!1,segment:l}),i=!0;break}}if(n>=e.length)break}}catch(e){s.e(e)}finally{s.f()}return a}},{key:"_getRange",value:function(e,t){var n=e.mediaSegments,i=t.steps.map(function(e){return e+0}),a=this._recalcSteps(i,n),o=[],s="segment_template"===t.dashType;if((null===(u=t.steps)||void 0===u?void 0:u.length)>0&&(null===(c=t.steps)||void 0===c?void 0:c[0])>0&&!s){if(a[0].isStep){var l=this._getSplitGopRange(a[0],t.steps,e.bandwidth).allRangeItems;o.push.apply(o,(0,r.u)(l))}else{var u,c,d,g=(0,r.sf)(a);try{for(g.s();!(d=g.n()).done;){var h=d.value,f=this._getSplitGopRange(h,t.steps,e.bandwidth).allRangeItems;o.push.apply(o,(0,r.u)(f))}}catch(e){g.e(e)}finally{g.f()}}}else{var p=a[0].segment,v=p.range,m=p.range[0],y=p.range[1];o.push({item:p,range:v,segmentDuration:p.endRaw-p.startRaw,rangeEnd:y,rangeStart:m})}return o}},{key:"_calUrls",value:function(e,t,n,i,a,o){var s=[];if(e){var l=e.avg_bitrate||e.bandwidth||e.bitrate,u=I.vtype;!o[t]&&(o[t]={initSegment:null,segments:[]});var c=o[t];if(a){var g,h,f=[null===(g=e.initSegmentRange)||void 0===g?void 0:g[0],null===(h=e.sidxRange)||void 0===h?void 0:h[1]],p={url:e.initSegment,range:f,extData:{cacheKey:d.Z.generateRequestUniqueKey({vid:n,mediaType:t,codecType:e.codec_type,vtype:u,bitrate:l,fileId:e.fileId,range:f,definition:i}),vid:n,vtype:u,isInitSegment:!0,mediaType:t,useUrlRange:d.Z.validateUrlRange(this.options.url_range_domains,e.initSegment),codecType:e.codec_type,range:f,bitrate:l,segmentDuration:0,checkPreload:!0}};s.push(p),c.initSegment=p}var v=[];if(o.hasSegmentRange){var m=e.firstMoofMdatRange[0],y=e.firstMoofMdatRange[1];v=[{item:{start:0,end:7,url:e.initSegment},range:[m,y],segmentDuration:7,rangeEnd:y,rangeStart:m}]}else v=this._getRange(e,o);var _,b=(0,r.sf)(v);try{for(b.s();!(_=b.n()).done;){var C=_.value,A=C.item,R=C.range,T=C.segmentDuration,x=C.rangeEnd,k=C.rangeStart,S=d.Z.generateRequestUniqueKey({vid:n,mediaType:t,codecType:e.codec_type,vtype:u,start:A.start,end:A.end,definition:i,bitrate:l,fileId:e.fileId,range:R});c.segments.push({url:A.url,range:R,extData:{cacheKey:S,vid:n,vtype:u,isInitSegment:!1,mediaType:t,useUrlRange:d.Z.validateUrlRange(this.options.url_range_domains,A.url),codecType:e.codec_type,range:R,bitrate:l,segmentDuration:T,checkPreload:!0,rangeEnd:x,rangeStart:k,fileId:e.fileId}})}}catch(e){b.e(e)}finally{b.f()}}return s}},{key:"_requestAcc",value:function(e,t,n,r){this._calRequests(e,t,n,r,!0)}},{key:"_calStartEnd",value:function(e,t){for(var n=-1,r=0;r<e.length;r++){var i=e[r],a=t||0;if(i.start>=a&&a<i.end){n=r;break}}return -1===n&&(n=0),n}},{key:"_calVideoItemIdx",value:function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r&&r.bandwidth===t)return n}return null}},{key:"_getData",value:(g=(0,r.x)((0,r.l5)().mark(function e(t,n,i){var a,o,s,l,u,c,d,g,f,p,v;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t,this._pcdn&&(s=i.mediaType,l=i.bitrate,(u=this._pcdn.selectedPCDN(s,!1,l))&&(t=u,i.isPCDN=!0,h.ZP.log("preload _pcdn",u,i.mediaType,i.bitrate))),i.reqOptions=this.getRequestOption(null===(a=this._pendingTask)||void 0===a?void 0:a.data.reqOptions),e.next=6,this._loader.load(i.mediaType,t,n,i,!0);case 6:if(c=e.sent,!(i.isPCDN&&"error"===c.res)){e.next=13;break}return i.isPCDN=!1,e.next=11,this._loader.load(i.mediaType,o,n,i,!0);case 11:c=e.sent;case 13:return g=(d=c).res,f=d.headers,p=d.status,v=d.fromCache,e.abrupt("return",{res:g,headers:f,status:p,fromCache:v,memory:g.byteLength,vtype:I.vtype,mediaType:i.mediaType,duration:i.segmentDuration,orgDefinition:void 0,range:n,rangeEnd:i.rangeEnd,rangeStart:i.rangeStart,fileId:i.fileId});case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",{res:null});case 21:case"end":return e.stop()}},e,this,[[0,17]])})),function(e,t,n){return g.apply(this,arguments)})},{key:"makeInitBaseSegemntRequest",value:function(e,t,n,r,i,a){var o=this,l=new s.XK,u=e.mediaList[n][r],c=[u.initSegmentRange[0],u.sidxRange[1]],g=u.initSegment,h=e.videoCodecType,f=u.avg_bitrate||u.bandwidth||u.bitrate,p=I.vtype,v={checkPreload:!0,mediaType:n,vid:a,definition:i,useUrlRange:!1,timeout:-1,isInitSegment:!0,bitrate:f,codecType:h,fileId:u.fileId,cacheKey:d.Z.generateRequestUniqueKey({vid:a,codecType:h,mediaType:n,definition:i,vtype:p,bitrate:f,fileId:u.fileId,range:c})};return this._getData(g,c,v).then(function(i){var s=i.res;s&&"error"!==s?o.handleInitData(s,c,u.sidxRange).then(function(o){if(o.sidxSegmentRes&&e.getSidx(o.sidxSegmentRes,n,r,t),d.Z.validateFragment(o.initSegmentRes,c)){var s=Object.assign({},i,{vid:a,mediaType:n,isInitSegment:!0,vtype:p});l.resolve({key:v.cacheKey,data:s})}else l.reject({mediaType:n,index:r,initSegmentRange:c,url:g,rejected:!0})}).catch(function(){l.reject({mediaType:n,index:r,initSegmentRange:c,url:g,rejected:!0})}):l.reject({mediaType:n,index:r,initSegmentRange:c,url:g,rejected:!0})}).catch(function(){l.reject({mediaType:n,index:r,initSegmentRange:c,url:g,rejected:!0})}),l}},{key:"handleInitData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new s.XK;if(e instanceof ArrayBuffer){var i=0===t.length?e:e.slice(t[0],t[1]+1),a=null===n?null:e.slice(n[0],n[1]+1);r.resolve({initSegmentRes:i,sidxSegmentRes:a})}return r}},{key:"cancel",value:(v=(0,r.x)((0,r.l5)().mark(function e(){var t,n,i,a;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._loader){e.next=3;break}return e.next=3,this._loader.cancel();case 3:this._pendingTask&&(n=(t=this._pendingTask).data,i=t.map,a=this.isStepWise(),this._pendingTask.resolve({remove:!a}),Object.values(i).length>0&&this._setItem(n,i),this._pendingTask=null);case 4:case"end":return e.stop()}},e,this)})),function(){return v.apply(this,arguments)})},{key:"getPreLoadDataSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=d.Z.generateRequestUniqueKey(e),i=this.preloadManager.getItemSync(e,t),a=this.preloadManager.getLoadInfoAndDelete(n);return(0,r.Zj)((0,r.Zj)({cacheKey:n},i),{},{loadInfo:a})}},{key:"getPreLoadData",value:(m=(0,r.x)((0,r.l5)().mark(function e(t){var n,i,a,o,s=arguments;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],i=d.Z.generateRequestUniqueKey(t),e.next=4,this.preloadManager.getItem(t,n);case 4:return a=e.sent,o=this.preloadManager.getLoadInfoAndDelete(i),e.abrupt("return",(0,r.Zj)((0,r.Zj)({cacheKey:i},a),{},{loadInfo:o}));case 7:case"end":return e.stop()}},e,this)})),function(e){return m.apply(this,arguments)})},{key:"destroy",value:(y=(0,r.x)((0,r.l5)().mark(function e(){var t;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=this._loader)||void 0===t||t.destroy(),this._loader=null,this._pcdn&&(this._pcdn=null);case 3:case"end":return e.stop()}},e,this)})),function(){return y.apply(this,arguments)})},{key:"parseKey",value:function(e){var t,n,a=(0,r.sf)(e);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=i.s.parseKey(o);"audio"===s.mediaType?s.hasAudio=!0:(s.hasVideo=!0,t=Object.assign({},t,s))}}catch(e){a.e(e)}finally{a.f()}return t}},{key:"taskInProgress",get:function(){return!!this._pendingTask.resolve&&!!this._pendingTask.data}}],[{key:"vtype",get:function(){return o.l0.DASH}},{key:"isUniqueCache",value:function(e){return!!e&&(4===Object.keys(e).length||!1)}},{key:"generateUniqueKey",value:function(e){return d.Z.generateRequestUniqueKey(e)}}])}(a.d);v.encryptUtils=g},119846:function(e,t,n){function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r.key),r)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Ac:function(){return o},PA:function(){return r},qH:function(){return a}});function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}},82380:function(e,t,n){n.d(t,{_:function(){return l}});var r=n("989798"),i=(0,r.qH)(function e(t){var n=this;(0,r.PA)(this,e),(0,r._x)(this,"_onPlay",function(){n._calcPausedTime()}),(0,r._x)(this,"_onPause",function(){n._prevPauseTime=Date.now()}),(0,r._x)(this,"_onEnded",function(){!n._info.downloadDuration&&n._info.canPlayTime&&(n._info.downloadDuration=(Date.now()-n._info.canPlayTime)/1e3),n.disable()}),(0,r._x)(this,"_canPlay",function(){n._info.canPlayTime=Date.now();var e=n.video.buffered;e.length&&(n._info.startBufferTime=e.end(e.length-1))}),(0,r._x)(this,"_onProgress",function(){var e=n.video.buffered;n._info.canPlayTime&&e.length&&e.end(e.length-1)+.8>n.video.duration&&(n._info.downloadDuration=(Date.now()-n._info.canPlayTime)/1e3)}),(0,r._x)(this,"_onTick",function(){var e=n.video;if(!!e){n._timer=setTimeout(n._onTick,500);var t=e.currentTime;if(e.paused&&!e.ended&&0!==e.playbackRate&&0!==e.readyState){n._prevCurrentTime=t;return}n._prevCurrentTime===t?!n._prevStallTime&&(n._prevStallTime=Date.now()):n._calcStallTime(),n._prevCurrentTime=t}}),this.video=t,this._timer=null,this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this.resetInfo(),this.enable()},[{key:"isStalling",get:function(){return!!this._prevStallTime}},{key:"enable",value:function(){this.disable();var e=this.video;if(!!e)e.addEventListener("play",this._onPlay),e.addEventListener("pause",this._onPause),e.addEventListener("canplay",this._canPlay),e.addEventListener("progress",this._onProgress),e.addEventListener("ended",this._onEnded),this._timer=setTimeout(this._onTick,500)}},{key:"disable",value:function(){clearTimeout(this._timer),this.resetInfo();var e=this.video;if(!!e)e.removeEventListener("play",this._onPlay),e.removeEventListener("pause",this._onPause),e.removeEventListener("canplay",this._canPlay),e.removeEventListener("progress",this._onProgress),e.removeEventListener("ended",this._onEnded)}},{key:"endPlay",value:function(){if(!!this.video){var e=this.video.buffered;if(e.length)try{this._info.endBufferTime=e.end(e.length-1)}catch(e){}this._info.leaveWithBlock=this.isStalling,this._calcPausedTime(),this._calcStallTime(),!this._info.downloadDuration&&this._info.canPlayTime&&(this._info.downloadDuration=(Date.now()-this._info.canPlayTime)/1e3)}}},{key:"getInfo",value:function(){return this._info}},{key:"resetInfo",value:function(){this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this._info={pausedTime:0,stalledTime:0,downloadDuration:0,startBufferTime:0,endBufferTime:0,canPlayTime:0,leaveWithBlock:!1}}},{key:"destroy",value:function(){this.disable(),this.video=null}},{key:"_calcStallTime",value:function(){this._prevStallTime&&(this._info.stalledTime+=(Date.now()-this._prevStallTime)/1e3,this._prevStallTime=0)}},{key:"_calcPausedTime",value:function(){this._prevPauseTime&&(this._info.pausedTime+=(Date.now()-this._prevPauseTime)/1e3,this._prevPauseTime=0)}}]),a=n("127126"),o=n("194235"),s=new a.$,l=(0,r.qH)(function e(t,n){var a=this;(0,r.PA)(this,e),(0,r._x)(this,"_onEnded",function(){a._updateInfo()}),(0,r._x)(this,"_onPlayNext",function(){a._updateInfo()}),this._rule=s,this._player=t,t&&(this._playingInfo=new i(t.video)),this._bindEvent(),s.setConfig(n),this._selectAlgType=n.selectAlgType},[{key:"select",value:function(e){if(!!e.length){var t,n=e[0].duration||0;1===e.length&&(t=e[0]);var r=0;return!t&&((t=(r=s.getTargetBitrate(n,e))?(0,o.v2)(e,r,this._selectAlgType):e[0])._targetBitrate=r),s.resetCurrent(),s.setCurrent({bitrate:t.bitrate,_xgOrgBitrate:t._xgOrgBitrate,duration:n}),this._playingInfo&&this._playingInfo.enable(),t}}},{key:"_bindEvent",value:function(){if(!this._player)return this._player;this._player.on("ended",this._onEnded),this._player.on("playnext",this._onPlayNext)}},{key:"getTargetBitrate",value:function(e,t){return s.getTargetBitrate(e,t)}},{key:"destroy",value:function(){if(this._endPlay(),!!this._player)this._playingInfo.destroy(),this._player.off("ended",this._onEnded),this._player.off("playnext",this._onPlayNext)}},{key:"_updateInfo",value:function(){this._playingInfo.endPlay();var e=this._playingInfo.getInfo();this._playingInfo.resetInfo(),s.setCurrent({downloadDuration:e.downloadDuration||s.getCurrent().duration,startBufferTime:e.startBufferTime,endBufferTime:e.endBufferTime,pausedTime:e.pausedTime,stalledTime:e.stalledTime,leaveWithBlock:e.leaveWithBlock}),this._prevPlayInfo=s.getCurrent(),s.calcAndReset()}},{key:"_endPlay",value:function(){this._updateInfo(),this._playingInfo.disable()}}])},630050:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e){return"string"!=typeof e&&(e=String(e)),e}},359157:function(e,t,n){n.d(t,{L:function(){return s},w:function(){return o}});var r,i,a=n(84498);n(864614),n(210434),n(585322);var o=function(e){(0,a.XW)(n,e);var t=(0,a.WY)(n);function n(){var e;return(0,a.PA)(this,n),e=t.apply(this,arguments),e._ploys=[],e}return(0,a.qH)(n,[{key:"_findIndexFromPloys",value:function(e){for(var t=-1,n=this._ploys,r=0;r<n.length;r++)if(n[r]===e){t=r;break}return t}},{key:"_checkStrategy",value:function(e){return!(!(null!=e&&e.start)||!e.stop||this._findIndexFromPloys(e)>-1)&&!0}},{key:"registerStrategy",value:function(e){var t=this;if(!!e)!Array.isArray(e)&&(e=[e]),e.forEach(function(e){var n=e.Strategy,r=e.config;if(!!r)try{var i=new n(r,t);t._checkStrategy(i)&&(i.start(),t._ploys.push(i))}catch(e){}})}},{key:"unregisterStrategy",value:function(e){if(e){e.stop();var t=this._findIndexFromPloys(e);t>-1&&this._ploys.splice(t,1)}else this._ploys.forEach(function(e){e.stop()}),this._ploys.splice(0,this._ploys.length)}},{key:"updateStrategyConfig",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!!e&&!!t)this._ploys.forEach(function(r){r instanceof e&&r.updateConfig(t,n)})}},{key:"setActive",value:function(e,t){var r=(0,a.U2)((0,a.IP)(n.prototype),"setActive",this).call(this,e,t);return this.emit("UPDATE_INST_ORDER"),r}},{key:"setNext",value:function(e){var t=(0,a.U2)((0,a.IP)(n.prototype),"setNext",this).call(this,e);return this.emit("UPDATE_INST_ORDER"),t}}],[{key:"getInstance",value:function(){return i||(i=new n),i}}]),n}(n(369851).L||Object.prototype.constructor);var s=((r=s||{}).UPDATE_INST_ORDER="UPDATE_INST_ORDER",r)},336730:function(e,t,n){n.d(t,{q:function(){return s}});var r,i=n(369239),a=n(860513),o=n(918334),s=function(e){function t(e){(0,i.PA)(this,t);var n,a=(n=(0,i.$w)(this,t,[e])).player,s=n.playerConfig;return n.playerId=a.playerId,n.codecType=s.codecType?s.codecType.toLowerCase():o.u7.H264,n.bizType=a.bizType="number"==typeof s.bizType?s.bizType:o.Ye.Normal,s.vtype&&(n.vtype=s.vtype.toUpperCase()),r&&(a.preloader=r),n}return(0,i.XW)(t,e),(0,i.qH)(t,[{key:"softDecode",get:function(){var e;return(null===(e=this.playerConfig)||void 0===e?void 0:e.mediaType)==="xg-video"}}],[{key:"registerPreloader",value:function(e){r=e}}])}(a.ZP)},242909:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(6214),i=n(804893),a=function(){function e(){(0,r.PA)(this,e),this.fps=0,this.isStoped=!0,this.ticks=[],this.isSupport=!0,this.maxFps=0,this.step=this._step.bind(this),this.rafId=null}return(0,r.qH)(e,[{key:"_step",value:function(e){var t=this.ticks;if(t.unshift(e),t.length>10){var n=t.pop();n&&(this.fps=Math.floor(1e4/(e-n)),this.updateFpsInfo())}!this.isStoped&&(this.rafId=window.requestAnimationFrame(this.step))}},{key:"updateFpsInfo",value:function(){this.fps>this.maxFps&&(this.maxFps=this.fps)}},{key:"start",value:function(){if(void 0!==window.requestAnimationFrame)this.isStoped=!1,this.rafId=window.requestAnimationFrame(this.step)}},{key:"stop",value:function(){window.cancelAnimationFrame(this.rafId),this.isStoped=!0}}],[{key:"install",value:function(){i.Z.install()}}]),e}()},626142:function(e,t,n){n.d(t,{Z:function(){return a}});var r=function(){return i&&!function(){var e="_localstorage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(e){return!0}}()}();function i(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}let a={length:r?localStorage.length:0,clear:function(e){try{for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}}catch(e){}},getItem:function(e){try{return localStorage.getItem(e)}catch(e){return null}},key:function(e){try{return localStorage.key(e)}catch(e){return null}},setItem:function(e,t){try{localStorage.setItem(e,t)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},isSupport:r}},484679:function(e,t,n){n.d(t,{Z:function(){return a}}),n(121621),n(864614),n(616414),n(612222),n(510766),n(312602);var r="IWZ1bmN0aW9uKCl7InVzZSBzdHJpY3QiO3ZhciBlPXt9LHQ9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtmdW5jdGlvbiBhKHQscyl7ZVt0XT1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3Bvc3RNZXNzYWdlKHtkYXRhOntmYWtlSWQ6dH19KSxhKHQscyl9KSxzKX1wb3N0TWVzc2FnZSh7ZXZlbnQ6InJlYWR5In0pLGFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihzKXt0cnl7dmFyIHI9cy5kYXRhLG89dm9pZCAwPT09cj97fTpyLGM9by5hY3Rpb24sbj1vLmZha2VJZCxpPW8udGltZTtzd2l0Y2goYyl7Y2FzZSJzZXRJbnRlcnZhbCI6YShuLGkpO2JyZWFrO2Nhc2UiY2xlYXJJbnRlcnZhbCI6Y2FzZSJjbGVhclRpbWVvdXQiOnQuY2FsbChlLG4pJiYoY2xlYXJUaW1lb3V0KGVbbl0pLGRlbGV0ZSBlW25dKTticmVhaztjYXNlInNldFRpbWVvdXQiOmVbbl09c2V0VGltZW91dCgoZnVuY3Rpb24oKXtwb3N0TWVzc2FnZSh7ZGF0YTp7ZmFrZUlkOm59fSksdC5jYWxsKGUsbikmJmRlbGV0ZSBlW25dfSksaSl9fWNhdGNoKGQpe3Bvc3RNZXNzYWdlKHtldmVudDoiZXJyb3IiLGRhdGE6e2Vycm9yOmR9fSl9fSkpfSgpOwo=",i="undefined"!=typeof window&&window.Blob&&new Blob([atob(r)],{type:"text/javascript;charset=utf-8"});function a(){var e;try{if(!(e=i&&(window.URL||window.webkitURL).createObjectURL(i)))throw"";return new Worker(e)}catch(e){return new Worker("data:application/javascript;base64,"+r)}finally{!("undefined"!=typeof window&&navigator.userAgent.indexOf("Trident/")>0)&&e&&(window.URL||window.webkitlRL).revokeObjectURL(e)}}},772614:function(e,t,n){n.d(t,{Z:function(){return r}});var r=(0,n(68950).p)("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyogZXNsaW50LWRpc2FibGUgbm8tZXZhbCAqLwogIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmICovCgogIGZ1bmN0aW9uIHNoaW1JbXBvcnRTY3JpcHRzIChzcmMpIHsKICAgIHJldHVybiBmZXRjaChzcmMpCiAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICByZXR1cm4gcmVzLnRleHQoKQogICAgICB9KQogICAgICAudGhlbihmdW5jdGlvbiAodGV4dCkgewogICAgICAgIGV2YWwodGV4dCk7CiAgICAgICAgc2VsZi5Nb2R1bGUgPSBNb2R1bGU7CiAgICAgICAgc2VsZi5hZGRPblBvc3RSdW4gPSBhZGRPblBvc3RSdW47CiAgICAgIH0pCiAgfQoKICB2YXIgTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RIID0gMTAyNCAqIDEwMjQ7CiAgdmFyIGluaXRUcyA9IDA7CgogIHZhciBEZWNvZGVyID0gZnVuY3Rpb24gKHNlbGYpIHsKICAgIHRoaXMuaW5pdGVkID0gZmFsc2U7CiAgICB0aGlzLnNlbGYgPSBzZWxmOwogICAgdGhpcy5tZXRhID0gc2VsZi5tZXRhOwogICAgdGhpcy5pbmZvbGlzdCA9IFtdOwogICAgc2VsZi5wYXJfYnJvYWR3YXlPbkJyb2Fkd2F5SW5pdGVkID0gdGhpcy5icm9hZHdheU9uQnJvYWR3YXlJbml0ZWQuYmluZCh0aGlzKTsKICAgIHNlbGYucGFyX2Jyb2Fkd2F5T25QaWN0dXJlRGVjb2RlZCA9IHRoaXMuYnJvYWR3YXlPblBpY3R1cmVEZWNvZGVkLmJpbmQodGhpcyk7CiAgfTsKCiAgRGVjb2Rlci5wcm90b3R5cGUudG9VOEFycmF5ID0gZnVuY3Rpb24gKHB0ciwgbGVuZ3RoKSB7CiAgICByZXR1cm4gTW9kdWxlLkhFQVBVOC5zdWJhcnJheShwdHIsIHB0ciArIGxlbmd0aCkKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gKCkgewogICAgTW9kdWxlLl9icm9hZHdheUluaXQoKTsKICAgIHRoaXMuc3RyZWFtQnVmZmVyID0gdGhpcy50b1U4QXJyYXkoCiAgICAgIE1vZHVsZS5fYnJvYWR3YXlDcmVhdGVTdHJlYW0oTUFYX1NUUkVBTV9CVUZGRVJfTEVOR1RILCAwKSwgLy8gMDog5YWz6ZetIGZmbXBlZyBsb2csCiAgICAgIE1BWF9TVFJFQU1fQlVGRkVSX0xFTkdUSAogICAgKTsKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS5icm9hZHdheU9uUGljdHVyZURlY29kZWQgPSBmdW5jdGlvbiAoCiAgICBvZmZzZXQsCiAgICB3aWR0aCwKICAgIGhlaWdodCwKICAgIHlMaW5lc2l6ZSwKICAgIHV2TGluZXNpemUsCiAgICBpbmZvaWQsCiAgICBrZXlGcmFtZQogICkgewogICAgbGV0IGZpcnN0RnJhbWUgPSB0aGlzLmluZm9saXN0WzBdOwogICAgaWYgKGZpcnN0RnJhbWUgJiYgZmlyc3RGcmFtZS5rZXlmcmFtZSAmJiAha2V5RnJhbWUpIHJldHVybgoKICAgIGxldCBpbmZvID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5pbmZvbGlzdC5zaGlmdCgpKTsKICAgIGxldCB5Um93Y291bnQgPSBoZWlnaHQ7CiAgICBsZXQgdXZSb3djb3VudCA9IGhlaWdodCAvIDI7CiAgICBpZiAoCiAgICAgIHRoaXMubWV0YSAmJgogICAgICAodGhpcy5tZXRhLmNocm9tYUZvcm1hdCA9PT0gNDQ0IHx8IHRoaXMubWV0YS5jaHJvbWFGb3JtYXQgPT09IDQyMikKICAgICkgewogICAgICB1dlJvd2NvdW50ID0gaGVpZ2h0OwogICAgfQogICAgdmFyIGRhdGEgPSB0aGlzLnRvVThBcnJheShvZmZzZXQsIHlMaW5lc2l6ZSAqIHlSb3djb3VudCArIDIgKiAodXZMaW5lc2l6ZSAqIHV2Um93Y291bnQpKTsKICAgIHZhciBkYXRldGVtcCA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoKTsKICAgIGRhdGV0ZW1wLnNldChkYXRhKTsKICAgIHZhciBidWZmZXIgPSBkYXRldGVtcC5idWZmZXI7CgogICAgdGhpcy5zZWxmLnBvc3RNZXNzYWdlKAogICAgICB7CiAgICAgICAgbXNnOiAnREVDT0RFRCcsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIHlMaW5lc2l6ZSwKICAgICAgICB1dkxpbmVzaXplLAogICAgICAgIGluZm8sCiAgICAgICAgYnVmZmVyCiAgICAgIH0sCiAgICAgIFtidWZmZXJdCiAgICApOwogIH07CgogIERlY29kZXIucHJvdG90eXBlLmJyb2Fkd2F5T25Ccm9hZHdheUluaXRlZCA9IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuaW5pdGVkID0gdHJ1ZTsKICAgIHZhciBjb3N0ID0gMDsKICAgIGlmIChpbml0VHMpIHsKICAgICAgY29zdCA9IHBlcmZvcm1hbmNlLm5vdygpIC0gaW5pdFRzOwogICAgfQogICAgdGhpcy5zZWxmLnBvc3RNZXNzYWdlKHsgbXNnOiAnREVDT0RFUl9SRUFEWScsIGNvc3QgfSk7CiAgfTsKCiAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlID0gZnVuY3Rpb24gKGRhdGEsIGluZm8pIHsKICAgIGlmIChpbmZvKSB7CiAgICAgIHRoaXMuaW5mb2xpc3QucHVzaChpbmZvKTsKICAgIH0KICAgIGlmIChpbmZvICYmIGluZm8ua2V5ZnJhbWUpIHsKICAgICAgdGhpcy5pbmZvbGlzdCA9IFtpbmZvXTsKICAgIH0KICAgIHRoaXMuc3RyZWFtQnVmZmVyLnNldChkYXRhKTsKICAgIE1vZHVsZS5fYnJvYWR3YXlQbGF5U3RyZWFtKGRhdGEubGVuZ3RoLCAwKTsKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkgewogICAgTW9kdWxlLl9icm9hZHdheUV4aXQoKTsKICB9OwoKICBEZWNvZGVyLnByb3RvdHlwZS51cGRhdGVNZXRhID0gZnVuY3Rpb24gKG1ldGEpIHsKICAgIHRoaXMubWV0YSA9IG1ldGE7CiAgfTsKCiAgdmFyIGRlY29kZXI7CgogIGZ1bmN0aW9uIG9uUG9zdFJ1biAoKSB7CiAgICBkZWNvZGVyID0gbmV3IERlY29kZXIodGhpcyk7CiAgICBkZWNvZGVyLmluaXQoKTsKICB9CgogIHZhciBXQVNNX0NETl9QQVRIX1BSRUZJWCA9ICcnOwoKICBmdW5jdGlvbiBpbml0ICh1cmwpIHsKICAgIFdBU01fQ0ROX1BBVEhfUFJFRklYID0gdXJsLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpLmpvaW4oJy8nKTsKICAgIGluaXRUcyA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgdmFyIGlzRGVncmFkZSA9IC9hc20vLnRlc3QodXJsKTsKICAgIGlmICghZGVjb2RlcikgewogICAgICB2YXIgdGFzazsKICAgICAgaWYgKCFzZWxmLmltcG9ydFNjcmlwdHMpIHsKICAgICAgICB0YXNrID0gc2hpbUltcG9ydFNjcmlwdHModXJsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0YXNrID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgICAgaWYgKCFzZWxmLmNvbnNvbGUpIHsKICAgICAgICAgICAgc2VsZi5jb25zb2xlID0gewogICAgICAgICAgICAgIGxvZzogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgd2FybjogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgaW5mbzogZnVuY3Rpb24gKCkge30sCiAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHt9CiAgICAgICAgICAgIH07CiAgICAgICAgICB9CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBzZWxmLmltcG9ydFNjcmlwdHModXJsKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRhc2sKICAgICAgICAudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoaXNEZWdyYWRlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhdXRvIGluc3RhbmNlIERlY29kZXIhJyk7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICBvblBvc3RSdW4uY2FsbChzZWxmKTsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgICByZWplY3QoZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHNlbGYKICAgICAgICAgICAgLm0oewogICAgICAgICAgICAgIGluc3RhbnRpYXRlV2FzbTogZnVuY3Rpb24gKGluZm8sIHJlY2VpdmVJbnN0YW5jZSkgewogICAgICAgICAgICAgICAgZmV0Y2goYCR7V0FTTV9DRE5fUEFUSF9QUkVGSVh9L2RlY29kZXIud2FzbS5qc2ApCiAgICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMuYXJyYXlCdWZmZXIoKSkKICAgICAgICAgICAgICAgICAgLnRoZW4oYnVmZmVyID0+IHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gV2ViQXNzZW1ibHkuaW5zdGFudGlhdGUoYnVmZmVyLCBpbmZvKQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVJbnN0YW5jZShyZXN1bHQuaW5zdGFuY2UpCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKE1vZCkgewogICAgICAgICAgICAgIHNlbGYuTW9kdWxlID0gTW9kOwogICAgICAgICAgICAgIG9uUG9zdFJ1bi5jYWxsKHNlbGYpOwogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgICAgbXNnOiAnSU5JVF9GQUlMRUQnLAogICAgICAgICAgICBsb2c6IGUubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICB9CiAgfQoKICBzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICB2YXIgZGF0YSA9IGUuZGF0YTsKICAgIGlmICgoZGF0YS5tc2cgIT09ICdpbml0JyAmJiBkYXRhLm1zZyAhPT0gJ3ByZWxvYWQnKSAmJiAhZGVjb2RlcikgcmV0dXJuCiAgICBzd2l0Y2ggKGRhdGEubXNnKSB7CiAgICAgIGNhc2UgJ3ByZWxvYWQnOgogICAgICAgIGluaXQoZGF0YS51cmwpOwogICAgICAgIGJyZWFrCiAgICAgIGNhc2UgJ2luaXQnOgogICAgICAgIHNlbGYubWV0YSA9IGRhdGEubWV0YTsKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICAgIG1zZzogJ0xPRycsCiAgICAgICAgICBsb2c6ICd3b3JrZXIgaW5pdGVkJwogICAgICAgIH0pOwogICAgICAgIGluaXQoZGF0YS51cmwpOwogICAgICAgIGJyZWFrCiAgICAgIGNhc2UgJ3VwZGF0ZW1ldGEnOgogICAgICAgIHNlbGYubWV0YSA9IGRhdGEubWV0YTsKICAgICAgICBkZWNvZGVyLnVwZGF0ZU1ldGEoZGF0YS5tZXRhKTsKICAgICAgICBicmVhawogICAgICBjYXNlICdpbml0RGVjb2Rlcic6CiAgICAgICAgZGVjb2Rlci5kZWNvZGUoZGF0YS5kYXRhKTsKICAgICAgICBicmVhawogICAgICBjYXNlICdkZWNvZGUnOgogICAgICAgIGRlY29kZXIuZGVjb2RlKGRhdGEuZGF0YSwgZGF0YS5pbmZvKTsKICAgICAgICBicmVhawogICAgICBjYXNlICdmaW5pc2hfZmxhZyc6CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBtc2c6ICdCQVRDSF9GSU5JU0hfRkxBRycKICAgICAgICB9KTsKICAgICAgICBicmVhawogICAgICBjYXNlICdkZXN0b3J5JzoKICAgICAgICBkZWNvZGVyLmRlc3Ryb3koKTsKICAgICAgICBicmVhawogICAgfQogIH07Cgp9KCkpOwoK",null,!1)},681786:function(e,t,n){n.d(t,{Z:function(){return s.Z}}),n(530129);var r=n(247425),i=n(269277),a=n(917970),o=n(197201),s=n(359447),l=n(364508);s.Z.init({h264Url:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/decoder/1.1.1/h264/decoder.js",h264AsmUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/decoder/1.1.1/h264/decoder_asm.js",h265Url:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/base/decoder.js",h265SimdUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/high/decoder_1656041798666.js",h265ThreadUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/main/decoder.js",h265AsmUrl:"https://sf1-cdn-tos.huoshanstatic.com/obj/media-fe/codec/high/decoder_asm.js"}),s.Z.setEleName=function(e){(0,l.HX)(e);var t=function(e){(0,i.Z)(l,e);var t,n,s=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,o.Z)(t);return e=n?Reflect.construct(r,arguments,(0,o.Z)(this).constructor):r.apply(this,arguments),(0,a.Z)(this,e)});function l(){return(0,r.Z)(this,l),s.apply(this,arguments)}return l}(s.Z);"undefined"!=typeof customElements&&(customElements.get((0,l.mv)())||customElements.define((0,l.mv)(),t))};try{"undefined"!=typeof customElements&&(customElements.get((0,l.mv)())||customElements.define((0,l.mv)(),s.Z))}catch(e){}},303075:function(e,t,n){n.d(t,{Z:function(){return d}}),n(530129);var r=n(247425),i=n(938156),a=n(269277),o=n(917970),s=n(197201),l=n(159322),u=n.n(l),c=n(720202),d=function(e){(0,a.Z)(u,e);var t,n,l=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=(0,s.Z)(t);return e=n?Reflect.construct(r,arguments,(0,s.Z)(this).constructor):r.apply(this,arguments),(0,o.Z)(this,e)});function u(e,t){var n;return(0,r.Z)(this,u),(n=l.call(this))._config=e,n._parent=t,n._meta=null,n._ready=!1,n._isLive=!0,n._innerDegrade=!1,n._singleTrack=-1,n}return(0,i.Z)(u,[{key:"analyse",get:function(){return this._parent.analyse}},{key:"isLive",get:function(){return this._isLive}},{key:"innerDegrade",get:function(){return this._innerDegrade}},{key:"noAudio",get:function(){return 1===this._singleTrack||2===this._singleTrack}},{key:"noVideo",get:function(){return 3===this._singleTrack}},{key:"duration",get:function(){return this._timeRange.duration},set:function(e){this._timeRange&&(this._timeRange.duration=e)}},{key:"_bindEvents",value:function(){var e=this;this._parent.on(c.ZP.TIMELINE.APPEND_CHUNKS,this._appendChunk.bind(this)),this._parent.on(c.ZP.TIMELINE.RESET_BASE_DTS,this._resetDts.bind(this)),this._parent.on(c.ZP.TIMELINE.START_RENDER,this._startRender.bind(this)),this._parent.on(c.ZP.TIMELINE.DO_PLAY,this._doPlay.bind(this)),this._parent.on(c.ZP.TIMELINE.DO_PAUSE,this._doPause.bind(this)),this._parent.on(c.ZP.TIMELINE.DO_SEEK,this._doSeek.bind(this)),this._parent.on(c.ZP.TIMELINE.DESTROY,this._destroy.bind(this)),this._parent.on(c.ZP.TIMELINE.CHASE_FRAME,this._doChaseFrame.bind(this)),this._parent.on(c.ZP.TIMELINE.SINGLE_TRACK,function(t){e._singleTrack=t}),this._parent.on(c.ZP.TIMELINE.SET_PLAY_MODE,function(t){e._isLive="LIVE"===t}),this._parent.on(c.ZP.TIMELINE.INNER_DEGRADE,function(){e._innerDegrade=!0}),this._parent.on(c.ZP.TIMELINE.SET_VIDEO_DURATION,function(t){e.duration=t})}}]),u}(u())},599723:function(e,t,n){n.d(t,{j:function(){return r}});var r="undefined"!=typeof window},215150:function(e,t,n){function r(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.used=!1,n.resolve=function(){return n.used=!0,e.apply(void 0,arguments)},n.reject=function(){return n.used=!0,t.apply(void 0,arguments)},n}n.d(t,{Q:function(){return r}}),n(864614),n(632852)},398762:function(e,t,n){n.d(t,{Fc:function(){return s},WE:function(){return o},wb:function(){return a}});var r,i=n(809345),a={MANIFEST:"manifest",NETWORK:"network",NETWORK_TIMEOUT:"network_timeout",NETWORK_FORBIDDEN:"network_forbidden",NETWORK_NOTFOUND:"network_notfound",NETWROK_RANGE_NOT_SATISFIABLE:"network_range_not_satisfiable",DEMUX:"demux",REMUX:"remux",MEDIA:"media",DRM:"drm",OTHER:"other",RUNTIME:"runtime",SUB_TYPES:{FLV:"FLV",HLS:"HLS",MP4:"MP4",FMP4:"FMP4",MSE_ADD_SB:"MSE_ADD_SB",MSE_APPEND_BUFFER:"MSE_APPEND_BUFFER",MSE_OTHER:"MSE_OTHER",MSE_FULL:"MSE_FULL",OPTION:"OPTION",DASH:"DASH",LICENSE:"LICENSE",CUSTOM_LICENSE:"CUSTOM_LICENSE",MSE_HIJACK:"MSE_HIJACK",EME_HIJACK:"EME_HIJACK",SIDX:"SIDX",NO_CANPLAY_ERROR:"NO_CANPLAY_ERROR",BUFFERBREAK_ERROR:"BUFFERBREAK_ERROR",WAITING_TIMEOUT_ERROR:"WAITING_TIMEOUT_ERROR",MEDIA_ERR_ABORTED:"MEDIA_ERR_ABORTED",MEDIA_ERR_NETWORK:"MEDIA_ERR_NETWORK",MEDIA_ERR_DECODE:"MEDIA_ERR_DECODE",MEDIA_ERR_SRC_NOT_SUPPORTED:"MEDIA_ERR_SRC_NOT_SUPPORTED",MEDIA_ERR_CODEC_NOT_SUPPORTED:"MEDIA_ERR_CODEC_NOT_SUPPORTED",MEDIA_ERR_URL_EMPTY:"MEDIA_ERR_URL_EMPTY"}},o=(r={},(0,i._x)(r,a.MANIFEST,{HLS:1100,DASH:1200}),(0,i._x)(r,a.NETWORK,2100),(0,i._x)(r,a.NETWORK_TIMEOUT,2101),(0,i._x)(r,a.NETWORK_FORBIDDEN,2103),(0,i._x)(r,a.NETWORK_NOTFOUND,2104),(0,i._x)(r,a.NETWROK_RANGE_NOT_SATISFIABLE,2116),(0,i._x)(r,a.DEMUX,{FLV:3100,HLS:3200,MP4:3300,FMP4:3400,SIDX:3410}),(0,i._x)(r,a.REMUX,{FMP4:4100,MP4:4200}),(0,i._x)(r,a.MEDIA,{MEDIA_ERR_ABORTED:5101,MEDIA_ERR_NETWORK:5102,MEDIA_ERR_DECODE:5103,MEDIA_ERR_SRC_NOT_SUPPORTED:5104,MEDIA_ERR_CODEC_NOT_SUPPORTED:5105,MEDIA_ERR_URL_EMPTY:5106,MSE_ADD_SB:5200,MSE_APPEND_BUFFER:5201,MSE_OTHER:5202,MSE_FULL:5203,MSE_HIJACK:5204,EME_HIJACK:5301}),(0,i._x)(r,a.DRM,{LICENSE:7100,CUSTOM_LICENSE:7200}),(0,i._x)(r,a.OTHER,8e3),(0,i._x)(r,a.RUNTIME,{NO_CANPLAY_ERROR:9001,BUFFERBREAK_ERROR:9002,WAITING_TIMEOUT_ERROR:9003}),r),s=function(e){(0,i.XW)(n,e);var t=(0,i.WY)(n);function n(e,r,s,l,u){var c;return(0,i.PA)(this,n),(c=t.call(this,u||(null==s?void 0:s.message))).errorType=e===a.NETWORK_TIMEOUT?a.NETWORK:e,c.originError=s,c.ext=l,c.errorCode=o[e][r]||o[e],c.errorMessage=c.message,!c.errorCode&&(c.errorType=a.OTHER,c.errorCode=o[c.errorType]),c}return(0,i.qH)(n,null,[{key:"create",value:function(e,t,r,i,o){return e instanceof n?e:(e instanceof Error&&(r=e,e=""),!e&&(e=a.OTHER),new n(e,t,r,i,o))}},{key:"network",value:function(e){var t;return new n(null!=e&&e.isTimeout?a.NETWORK_TIMEOUT:a.NETWORK,null,e instanceof Error?e:null,{url:null==e?void 0:e.url,response:null==e?void 0:e.response,httpCode:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status})}}]),n}((0,i.wm)(Error))},901855:function(e,t,n){function r(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.used=!1,n.resolve=function(){return n.used=!0,e.apply(void 0,arguments)},n.reject=function(){return n.used=!0,t.apply(void 0,arguments)},n}function i(){try{return parseInt(performance.now(),10)}catch(e){return new Date().getTime()}}n.d(t,{Q:function(){return r},j:function(){return i}})},46101:function(e,t,n){n.d(t,{Y:function(){return u}});var r=n(15810),i=1,a=2,o=3,s=4,l=["Boolean","Number","String","Undefined","Null","Date","Object"],u=function(){function e(t,n){(0,r.PA)(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),this.logCacheLevel=(null==n?void 0:n.logCacheLevel)||3,this.logMaxSize=(null==n?void 0:n.logMaxSize)||204800,this.logSize=0,this.logTextArray=[]}return(0,r.qH)(e,[{key:"debug",value:function(){for(var t,n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];this.logCache.apply(this,[i].concat(r)),!e.disabled&&(t=console).debug.apply(t,[this._prefix,c()].concat(r))}},{key:"log",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[a].concat(r)),!e.disabled&&(t=console).log.apply(t,[this._prefix,c()].concat(r))}},{key:"warn",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[o].concat(r)),!e.disabled&&(t=console).warn.apply(t,[this._prefix,c()].concat(r))}},{key:"error",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];this.logCache.apply(this,[s].concat(r)),!e.disabled&&(t=console).error.apply(t,[this._prefix,c()].concat(r))}},{key:"logCache",value:function(e){if(!(e<this.logCacheLevel)){var t="";try{for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var o=i.map(function(e){return function e(t,n,i){!i&&(i=1),!n&&(n=2);var a={};if(!t||"object"!==(0,r.Ac)(t))return t;var o=Object.prototype.toString.call(t).slice(8,-1);if(!l.includes(o))return o;if(!(i>n)){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i===n?a[s]=function(e){if("object"!==(0,r.Ac)(e))return e;var t=Object.prototype.toString.call(e).slice(8,-1);switch(t){case"Array":case"Uint8Array":case"ArrayBuffer":return t+"["+e.length+"]";case"Object":return"{}";default:return t}}(t[s]):"object"===(0,r.Ac)(t[s])?a[s]=e(t[s],n,i+1):a[s]=t[s]);return a}}(e)});t=this._prefix+c()+JSON.stringify(o)}catch(e){return}if(e>=this.logCacheLevel&&(this.logSize+=t.length,this.logTextArray.push(t)),this.logSize>this.logMaxSize){var s=this.logTextArray.shift();this.logSize-=s.length}}}},{key:"getLogCache",value:function(){var e=this.logTextArray.join("\n");return this.reset(),e}},{key:"reset",value:function(){this.logTextArray=[],this.logSize=0}},{key:"table",value:function(){var t;!e.disabled&&(t=console).table.apply(t,arguments)}},{key:"setLogLevel",value:function(e){this.logCacheLevel=e}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();function c(){return new Date().toLocaleString()}(0,r._x)(u,"disabled",!0)},162276:function(e,t,n){n.d(t,{G7:function(){return o},Gu:function(){return i},pl:function(){return l},rO:function(){return s}});var r=n(663786);function i(e){if(!!e&&null!==e[0]&&void 0!==e[0]&&(0!==e[0]||null!==e[1]&&void 0!==e[1])){var t="bytes="+e[0]+"-";return e[1]&&(t+=e[1]),t}}function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function o(e,t){if(e){if(!t)return e;var n,i=Object.keys(t).map(function(e){if(null!=(n=t[e]))return Array.isArray(n)?e+="[]":n=[n],n.map(function(t){return(0,r.J_)(t)?t=t.toISOString():(0,r.Kn)(t)&&(t=JSON.stringify(t)),"".concat(a(e),"=").concat(a(t))}).join("&")}).filter(Boolean).join("&");if(i){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}}function s(e,t,n,r,i,a,o,s,l,u,c){return i=null!=i?parseFloat(i):null,Number.isNaN(r=parseInt(r||"0",10))&&(r=0),{data:e,done:t,options:{range:l,vid:u,index:s,contentLength:r,age:i,startTime:a,firstByteTime:o,endTime:Date.now(),priOptions:c},response:n}}function l(e,t){return Math.round(8e3*e/t/1024)}},171569:function(e,t,n){n.d(t,{U:function(){return i},t:function(){return r}});var r={FETCH:"fetch",XHR:"xhr"},i={ARRAY_BUFFER:"arraybuffer",TEXT:"text",JSON:"json"}},886117:function(e,t,n){n.d(t,{c:function(){return u}});var r=n(15810),i=n(393293),a=n(162276),o=n(171569),s=n(197392),l=n(159322),u=function(e){(0,r.XW)(n,e);var t=(0,r.WY)(n);function n(){var e;return(0,r.PA)(this,n),e=t.call(this),(0,r._x)((0,r.Lc)(e),"_xhr",null),(0,r._x)((0,r.Lc)(e),"_aborted",!1),(0,r._x)((0,r.Lc)(e),"_timeoutTimer",null),(0,r._x)((0,r.Lc)(e),"_range",null),(0,r._x)((0,r.Lc)(e),"_receivedLength",0),(0,r._x)((0,r.Lc)(e),"_url",null),(0,r._x)((0,r.Lc)(e),"_onProgress",null),(0,r._x)((0,r.Lc)(e),"_index",-1),(0,r._x)((0,r.Lc)(e),"_headers",null),(0,r._x)((0,r.Lc)(e),"_currentChunkSizeKB",384),(0,r._x)((0,r.Lc)(e),"_timeout",null),(0,r._x)((0,r.Lc)(e),"_xhr",null),(0,r._x)((0,r.Lc)(e),"_withCredentials",null),(0,r._x)((0,r.Lc)(e),"_startTime",-1),(0,r._x)((0,r.Lc)(e),"_loadCompleteResolve",null),(0,r._x)((0,r.Lc)(e),"_loadCompleteReject",null),(0,r._x)((0,r.Lc)(e),"_runing",!1),(0,r._x)((0,r.Lc)(e),"_logger",!1),(0,r._x)((0,r.Lc)(e),"_vid",""),(0,r._x)((0,r.Lc)(e),"_responseType",void 0),(0,r._x)((0,r.Lc)(e),"_credentials",void 0),(0,r._x)((0,r.Lc)(e),"_method",void 0),(0,r._x)((0,r.Lc)(e),"_transformResponse",void 0),(0,r._x)((0,r.Lc)(e),"_firstRtt",void 0),(0,r._x)((0,r.Lc)(e),"_onCancel",null),(0,r._x)((0,r.Lc)(e),"_priOptions",null),e}return(0,r.qH)(n,[{key:"load",value:function(e){var t=this;clearTimeout(this._timeoutTimer),this._logger=e.logger,this._range=e.range,this._onProgress=e.onProgress,this._index=e.index,this._headers=e.headers,this._withCredentials="include"===e.credentials||"same-origin"===e.credentials,this._body=e.body||null,e.method&&(this._method=e.method),this._timeout=e.timeout||null,this._runing=!0,this._vid=e.vid||e.url,this._responseType=e.responseType,this._firstRtt=-1,this._onTimeout=e.onTimeout,this._onCancel=e.onCancel,this._request=e.request,this._priOptions=e.priOptions||{},this._logger.debug("【xhrLoader task】, range",this._range),this._url=(0,a.G7)(e.url,e.params);var n=Date.now();return new Promise(function(e,n){t._loadCompleteResolve=e,t._loadCompleteReject=n,t._startLoad()}).catch(function(e){if(clearTimeout(t._timeoutTimer),t._runing=!1,!t._aborted)throw(e=e instanceof i.C?e:new i.C(t._url,t._request)).startTime=n,e.endTime=Date.now(),e.options={index:t._index,vid:t._vid,priOptions:t._priOptions},e})}},{key:"_startLoad",value:function(){var e=null;if(this._responseType===o.U.ARRAY_BUFFER&&this._range&&this._range.length>1){if(this._onProgress){this._firstRtt=-1;var t=1024*this._currentChunkSizeKB,n=this._range[0]+this._receivedLength,r=this._range[1];t<this._range[1]-n&&(r=n+t),e=[n,r],this._logger.debug("[xhr_loader->],tast :",this._range,", SubRange, ",e)}else e=this._range,this._logger.debug("[xhr_loader->],tast :",this._range,", allRange, ",e)}this._internalOpen(e)}},{key:"_internalOpen",value:function(e){var t=this;try{this._startTime=Date.now();var n=this._xhr=new XMLHttpRequest;n.open(this._method||"GET",this._url,!0),n.responseType=this._responseType,this._timeout&&(n.timeout=this._timeout),n.withCredentials=this._withCredentials,n.onload=this._onLoad.bind(this),n.onreadystatechange=this._onReadyStatechange.bind(this),n.onerror=function(e){t._running=!1;var n,r,a,o=new i.C(t._url,t._request,null==e?void 0:null===(n=e.currentTarget)||void 0===n?void 0:n.response,"xhr.onerror.status:"+(null==e?void 0:null===(r=e.currentTarget)||void 0===r?void 0:r.status)+",statusText,"+(null==e?void 0:null===(a=e.currentTarget)||void 0===a?void 0:a.statusText));o.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(o)},n.ontimeout=function(e){t.cancel();var n=new i.C(t._url,t._request,{status:408},"timeout");t._onTimeout&&(n.isTimeout=!0,t._onTimeout(n,{index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions})),n.options={index:t._index,range:t._range,vid:t._vid,priOptions:t._priOptions},t._loadCompleteReject(n)};var r=this._headers||{},o=(0,a.Gu)(e);o&&(r.Range=o),r&&Object.keys(r).forEach(function(e){n.setRequestHeader(e,r[e])}),this._logger.debug("[xhr.send->] tast,",this._range,",load sub range, ",e),n.send(this._body)}catch(t){t.options={index:this._index,range:e,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(t)}}},{key:"_onReadyStatechange",value:function(e){2===e.target.readyState&&this._firstRtt<0&&(this._firstRtt=Date.now())}},{key:"_onLoad",value:function(e){var t=e.target.status;if(t<200||t>299){var n=new i.C(this._url,null,(0,r.Zj)((0,r.Zj)({},e.target.response),{},{status:t}),"bad response,status:"+t);return n.options={index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions},this._loadCompleteReject(n)}var l=null,u=!1,c=(null===(d=this._range)||void 0===d?void 0:d.length)>0?this._range[0]:0;if(this._responseType===o.U.ARRAY_BUFFER){var d,g,h,f=new Uint8Array(e.target.response);if(g=c+this._receivedLength,f&&f.byteLength>0){this._receivedLength+=f.byteLength;var p=Date.now()-this._startTime,v=(0,a.pl)(this._receivedLength,p);this.emit(s.K.REAL_TIME_SPEED,{speed:v,len:this._receivedLength,time:p,vid:this._vid,index:this._index,range:[g,c+this._receivedLength],priOptions:this._priOptions})}l=f,u=(!((null===(h=this._range)||void 0===h?void 0:h.length)>1)||!this._range[1]||!(this._receivedLength<this._range[1]-this._range[0]))&&!0,this._logger.debug("[xhr load done->], tast :",this._range,", start",g,"end ",c+this._receivedLength,",dataLen,",f?f.byteLength:0,",receivedLength",this._receivedLength,",index,",this._index,", done,",u)}else u=!0,l=e.target.response;var m={ok:t>=200&&t<300,status:t,statusText:this._xhr.statusText,url:this._xhr.responseURL,headers:this._getHeaders(this._xhr),body:this._xhr.response};this._transformResponse&&(m=this._transformResponse(m,this._url)||m),this._onProgress&&this._onProgress(l,u,{index:this._index,vid:this._vid,range:[g,c+this._receivedLength],startTime:this._startTime,endTime:Date.now(),priOptions:this._priOptions},m),u?(this._runing=!1,this._loadCompleteResolve&&this._loadCompleteResolve((0,a.rO)(this._onProgress?null:l,u,m,m.headers["content-length"],m.headers.age,this._startTime,this._firstRtt,this._index,this._range,this._vid,this._priOptions))):this._startLoad()}},{key:"cancel",value:function(){if(!this._aborted&&(this._aborted=!0,this._runing=!1,(0,r.U2)((0,r.IP)(n.prototype),"removeAllListeners",this).call(this),this._onCancel&&this._onCancel({index:this._index,range:this._range,vid:this._vid,priOptions:this._priOptions}),this._xhr))return this._xhr.abort()}},{key:"receiveLen",get:function(){return this._receivedLength}},{key:"running",get:function(){return this._running},set:function(e){this._running=e}},{key:"_getHeaders",value:function(e){var t=e.getAllResponseHeaders().trim().split("\r\n"),n={},i,a=(0,r.sf)(t);try{for(a.s();!(i=a.n()).done;){var o=i.value.split(": ");n[o[0].toLowerCase()]=o.slice(1).join(": ")}}catch(e){a.e(e)}finally{a.f()}return n}}],[{key:"isSupported",value:function(){return"undefined"!=typeof XMLHttpRequest}}]),n}(n.n(l)())},896269:function(e,t,n){n.d(t,{J_:function(){return s},Kn:function(){return a},PO:function(){return o}});var r=n(932393),i=Object.prototype.toString;function a(e){return null!==e&&"object"===(0,r.Ac)(e)}function o(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"[object Date]"===i.call(e)}},51762:function(e,t,n){n.d(t,{i:function(){return a}});var r=n(932393),i=n(43024);function a(e){return(0,r.Zj)({loaderType:i.t.FETCH,retry:0,retryDelay:0,timeout:0,request:null,onTimeout:void 0,onProgress:void 0,onRetryError:void 0,transformRequest:void 0,transformResponse:void 0,transformError:void 0,responseType:i.U.TEXT,range:void 0,url:"",params:void 0,method:"GET",headers:{},body:void 0,mode:void 0,credentials:void 0,cache:void 0,redirect:void 0,referrer:void 0,referrerPolicy:void 0,integrity:void 0,onProcessMinLen:0},e)}},374131:function(e,t,n){n.d(t,{i:function(){return c}});var r=n(932393),i=n(757367),a=n(781462),o=n(43024),s=n(250944),l=n(41866),u=["retry","retryDelay","onRetryError","transformError"],c=function(){var e;function t(e,n){(0,r.PA)(this,t),this.promise=(0,s.Qo)(),this.alive=!!n.onProgress,n.logger||(n.logger=new l.Y("Loader")),this._loaderType=e,this._loader=e===o.t.FETCH&&"undefined"!=typeof fetch?new i.j:new a.c,this._config=n,this._retryCount=0,this._retryTimer=null,this._canceled=!1,this._retryCheckFunc=n.retryCheckFunc,this._logger=n.logger}return(0,r.qH)(t,[{key:"exec",value:function(){var e,t=this,n=this._config,i=n.retry,a=n.retryDelay,o=n.onRetryError,s=n.transformError,l=(0,r.Kd)(n,u);var c=(e=(0,r.x)((0,r.l5)().mark(function e(){var n,u,d;return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t._loader.load(l);case 3:n=e.sent,t.promise.resolve(n),e.next=27;break;case 7:if(e.prev=7,e.t0=e.catch(0),t._loader.running=!1,t._logger.debug("[task request catch err]",e.t0),!t._canceled){e.next=13;break}return e.abrupt("return");case 13:if(e.t0.loaderType=t._loaderType,e.t0.retryCount=t._retryCount,u=e.t0,s&&(u=s(u)||u),o&&t._retryCount>0&&o(u,t._retryCount,{index:l.index,vid:l.vid,range:l.range,priOptions:l.priOptions}),t._retryCount++,d=!0,t._retryCheckFunc&&(d=t._retryCheckFunc(e.t0)),!(d&&t._retryCount<=i)){e.next=26;break}return clearTimeout(t._retryTimer),t._logger.debug("[task request setTimeout],retry",t._retryCount,",retry range,",l.range),t._retryTimer=setTimeout(c,a),e.abrupt("return");case 26:t.promise.reject(u);case 27:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return e.apply(this,arguments)});return c(),this.promise}},{key:"cancel",value:(e=(0,r.x)((0,r.l5)().mark(function e(){return(0,r.l5)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return clearTimeout(this._retryTimer),this._canceled=!0,this._loader.running=!1,e.abrupt("return",this._loader.cancel());case 4:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})},{key:"running",get:function(){return this._loader&&this._loader.running}},{key:"loader",get:function(){return this._loader}}]),t}()},244542:function(e,t,n){n.d(t,{b:function(){return g}});var r=n("429250"),i=n("392869"),a=n("247425"),o=n("938156"),s=n("668117");n("561999"),n("864614"),n("121621"),n("812735"),n("623302"),n("983431"),n("319386"),n("657170"),n("853127"),n("644952"),n("759149"),n("949136"),n("966922"),n("33814"),n("29536"),n("716005"),n("548485"),n("260075"),n("791017"),n("743286"),n("310378"),n("124539"),n("48498"),n("728271"),n("814647"),n("535689"),n("659673"),n("210434"),n("831528"),n("514312"),n("904644"),n("577829");var l=n("115869"),u="video",c={HEVC:"hevc"},d=4294967295,g=function(){function e(){(0,a.Z)(this,e)}return(0,o.Z)(e,null,[{key:"box",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=8+(n=n.filter(Boolean)).reduce(function(e,t){return e+t.byteLength},0),a=new Uint8Array(i);a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=255&i,a.set(e,4);var o=8;return n.forEach(function(e){a.set(e,o),o+=e.byteLength}),a}},{key:"ftyp",value:function(t){return t.find(function(e){return e.type===u&&e.codecType===c.HEVC})?e.FTYPHEV1:e.FTYPAVC1}},{key:"initSegment",value:function(t){return(0,l.gJ)(e.ftyp(t),e.moov(t))}},{key:"moov",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,i.Z)(t.map(function(t){return e.trak(t)})),[e.mvex(t)]))}},{key:"mvhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdia(t))}},{key:"tkhd",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e.box(e.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,255&t,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,i>>8&255,255&i,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minf(t))}},{key:"mdhd",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9e4;return e.box(e.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,n>>24&255,n>>16&255,n>>8&255,255&n,t>>24&255,t>>16&255,t>>8&255,255&t,85,196,0,0]))}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"minf",value:function(t){return e.box(e.types.minf,t.type===u?e.VMHD:e.SMHD,e.DINF,e.stbl(t))}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.STTS,e.STSC,e.STSZ,e.STCO)}},{key:"stsd",value:function(t){return e.box(e.types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),t.type===u?e.avc1hev1(t):e.mp4a(t))}},{key:"avc1hev1",value:function(t){var n=t.codecType===c.HEVC,r=n?e.types.hvc1:e.types.avc1,i=n?e.hvcC(t):e.avcC(t),a=[new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,t.width>>8&255,255&t.width,t.height>>8&255,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),i];return t.sarRatio&&t.sarRatio.length>1&&a.push(e.pasp(t.sarRatio)),e.box.apply(e,[r].concat(a))}},{key:"avcC",value:function(t){var n,r=[],a=[];return t.sps.forEach(function(e){n=e.byteLength,r.push(n>>>8&255),r.push(255&n),r.push.apply(r,(0,i.Z)(e))}),t.pps.forEach(function(e){n=e.byteLength,a.push(n>>>8&255),a.push(255&n),a.push.apply(a,(0,i.Z)(e))}),e.box(e.types.avcC,new Uint8Array([1,r[3],r[4],r[5],255,224|t.sps.length].concat(r).concat([t.pps.length]).concat(a)))}},{key:"hvcC",value:function(t){var n,r=t.hvcC;if(r instanceof ArrayBuffer)return r;var a=t.vps,o=t.sps,s=t.pps;if(r){var l=r.generalProfileCompatibilityFlags,u=r.generalConstraintIndicatorFlags,c=(a.length&&1)+(o.length&&1)+(s.length&&1);n=[1,r.generalProfileSpace<<6|r.generalTierFlag<<5|r.generalProfileIdc,l>>>24,l>>>16,l>>>8,l,u[0],u[1],u[2],u[3],u[4],u[5],r.generalLevelIdc,240,0,252,252|r.chromaFormatIdc,248|r.bitDepthLumaMinus8,248|r.bitDepthChromaMinus8,0,0,r.numTemporalLayers<<3|r.temporalIdNested<<2|3,c];var d=function(e){var t;n.push(e.length>>8,e.length),(t=n).push.apply(t,(0,i.Z)(e))};a.length&&(n.push(160,0,a.length),a.forEach(d)),o.length&&(n.push(161,0,o.length),o.forEach(d)),s.length&&(n.push(162,0,s.length),s.forEach(d))}else n=[1,1,96,0,0,0,144,0,0,0,0,0,93,240,0,252,253,248,248,0,0,15,3,160,0,1,0,24,64,1,12,1,255,255,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,153,152,9,161,0,1,0,45,66,1,1,1,96,0,0,3,0,144,0,0,3,0,0,3,0,93,160,2,128,128,45,22,89,153,164,147,43,154,128,128,128,130,0,0,3,0,2,0,0,3,0,50,16,162,0,1,0,7,68,1,193,114,180,98,64];return e.box(e.types.hvcC,new Uint8Array(n))}},{key:"pasp",value:function(t){var n=(0,r.Z)(t,2),i=n[0],a=n[1];return e.box(e.types.pasp,new Uint8Array([i>>24,i>>16&255,i>>8&255,255&i,a>>24,a>>16&255,a>>8&255,255&a]))}},{key:"mp4a",value:function(t){return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,t.sampleRate>>8&255,255&t.sampleRate,0,0]),t.config.length?e.esds(t.config):void 0)}},{key:"esds",value:function(t){var n=t.length;return e.box(e.types.esds,new Uint8Array([0,0,0,0,3,23+n,0,0,0,4,15+n,64,21,0,6,0,0,0,218,192,0,0,218,192,5].concat([n]).concat(t).concat([6,1,2])))}},{key:"mvex",value:function(t){return e.box.apply(e,[e.types.mvex].concat((0,i.Z)(t.map(function(t){return e.trex(t.id)}))))}},{key:"trex",value:function(t){return e.box(e.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"moof",value:function(t,n){return e.box.apply(e,[e.types.moof,e.mfhd(t)].concat((0,i.Z)(n.map(function(t){return e.traf(t)}))))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"traf",value:function(t){return e.box(e.types.traf,e.tfhd(t.id),e.tfdt(t.baseMediaDecodeTime),e.trun(t.samples,76))}},{key:"tfhd",value:function(t){return e.box(e.types.tfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"tfdt",value:function(t){var n=Math.floor(t/(d+1)),r=Math.floor(t%(d+1));return e.box(e.types.tfdt,new Uint8Array([1,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,r>>24,r>>16&255,r>>8&255,255&r]))}},{key:"trun",value:function(t,n){var r=t.length,i=12+16*r;n+=8+i;var a=new Uint8Array(i);a.set([0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,255&r,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0);for(var o=0;o<r;o++){var s=t[o],l=s.duration,u=s.size,c=s.flag,d=void 0===c?{}:c,g=s.cts,h=void 0===g?0:g;a.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,u>>>24&255,u>>>16&255,u>>>8&255,255&u,d.isLeading<<2|(null==d.dependsOn?1:d.dependsOn),d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|(null==d.isNonSyncSample?1:d.isNonSyncSample),61440&d.degradationPriority,15&d.degradationPriority,h>>>24&255,h>>>16&255,h>>>8&255,255&h],12+16*o)}return e.box(e.types.trun,a)}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"moovMP4",value:function(t){return e.box.apply(e,[e.types.moov,e.mvhd(t[0].duration,t[0].timescale)].concat((0,i.Z)(t.map(function(t){return e.trackMP4(t)}))))}},{key:"trackMP4",value:function(t){return e.box(e.types.trak,e.tkhd(t.id,t.duration,t.width,t.height),e.mdiaMP4(t))}},{key:"mdiaMP4",value:function(t){return e.box(e.types.mdia,e.mdhd(t.duration,t.timescale),e.hdlr(t.type),e.minfMP4(t))}},{key:"minfMP4",value:function(t){return e.box(e.types.minf,t.type===u?e.VMHD:e.SMHD,e.DINF,e.stblMP4(t))}},{key:"stblMP4",value:function(t){var n=t.ext,r=[e.stsd(t),e.stts(n.stts),e.stsc(n.stsc),e.stsz(n.stsz),e.stco(n.stco)];return n.stss.length&&r.push(e.stss(n.stss)),n.ctts.length&&r.push(e.ctts(n.ctts)),e.box.apply(e,[e.types.stbl].concat(r))}},{key:"stts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach(function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8}),e.box(e.types.stts,(0,l.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsc",value:function(t){var n=t.length,r=new Uint8Array(12*n),i=0;return t.forEach(function(e){var t=e.firstChunk,n=e.samplesPerChunk,a=e.sampleDescIndex;r.set([t>>24,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a],i),i+=12}),e.box(e.types.stsc,(0,l.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stsz",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach(function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stsz,(0,l.gJ)(new Uint8Array([0,0,0,0,0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stco",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach(function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stco,(0,l.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"stss",value:function(t){var n=t.length,r=new Uint8Array(4*n),i=0;return t.forEach(function(e){r.set([e>>24,e>>16&255,e>>8&255,255&e],i),i+=4}),e.box(e.types.stss,(0,l.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}},{key:"ctts",value:function(t){var n=t.length,r=new Uint8Array(8*n),i=0;return t.forEach(function(e){var t=e.value,n=e.count;r.set([n>>24,n>>16&255,n>>8&255,255&n,t>>24,t>>16&255,t>>8&255,255&t],i),i+=8}),e.box(e.types.ctts,(0,l.gJ)(new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n]),r))}}]),e}();(0,s.Z)(g,"types",["avc1","avcC","hvc1","hvcC","dinf","dref","esds","ftyp","hdlr","mdat","mdhd","mdia","mfhd","minf","moof","moov","mp4a","mvex","mvhd","pasp","stbl","stco","stsc","stsd","stsz","stts","tfdt","tfhd","traf","trak","trun","trex","tkhd","vmhd","smhd","ctts","stss"].reduce(function(e,t){return e[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)],e},Object.create(null))),(0,s.Z)(g,"HDLR_TYPES",{video:new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),audio:new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),(0,s.Z)(g,"FTYPAVC1",g.box(g.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]))),(0,s.Z)(g,"FTYPHEV1",g.box(g.types.ftyp,new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,104,101,118,49]))),(0,s.Z)(g,"DINF",g.box(g.types.dinf,g.box(g.types.dref,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1])))),(0,s.Z)(g,"VMHD",g.box(g.types.vmhd,new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]))),(0,s.Z)(g,"SMHD",g.box(g.types.smhd,new Uint8Array([0,0,0,0,0,0,0,0]))),(0,s.Z)(g,"StblTable",new Uint8Array([0,0,0,0,0,0,0,0])),(0,s.Z)(g,"STTS",g.box(g.types.stts,g.StblTable)),(0,s.Z)(g,"STSC",g.box(g.types.stsc,g.StblTable)),(0,s.Z)(g,"STSZ",g.box(g.types.stsz,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]))),(0,s.Z)(g,"STCO",g.box(g.types.stco,g.StblTable))},187960:function(e,t,n){n.d(t,{i:function(){return o}});var r=n(177595),i=n(299025),a=function(){function e(t){(0,r.PA)(this,e),this._buffer=t,this._offset=0,this._heldBits=0,this._numHeldBits=0}return(0,r.qH)(e,[{key:"readUint8",value:function(){return this._buffer[this._offset++]}},{key:"readUint16",value:function(){return this._buffer[this._offset++]<<8|this._buffer[this._offset++]}},{key:"readUint32",value:function(){return this._buffer[this._offset++]<<24|this._buffer[this._offset++]<<16|this._buffer[this._offset++]<<8|this._buffer[this._offset++]}},{key:"readUint8Array",value:function(e){var t=this._buffer.slice(this._offset,this._offset+e);return this._offset+=e,t}},{key:"streamRead1Bytes",value:function(){this._heldBits=this.readUint8(),this._numHeldBits=8}},{key:"streamRead2Bytes",value:function(){this._heldBits=this.readUint16(),this._numHeldBits=16}},{key:"extractBits",value:function(e){var t=this._heldBits>>this._numHeldBits-e&(1<<e)-1;return this._numHeldBits-=e,t}}]),e}(),o=function(){function e(){(0,r.PA)(this,e)}return(0,r.qH)(e,null,[{key:"parseVVCDecoderConfigurationRecord",value:function(t){var n,r,i,o,s,l,u,c,d=new a(t),g=d.readUint8();d.streamRead1Bytes(),d.extractBits(5);var h=d.extractBits(2)+1,f=d.extractBits(1),p={};f&&(d.streamRead2Bytes(),o=d.extractBits(2),s=d.extractBits(3),r=d.extractBits(3),i=d.extractBits(2),d.extractBits(6),p=e.parseVVCPTLRecord(d,r),n=d.readUint16(),l=d.readUint16(),u=d.readUint16(),c=d.readUint16());for(var v=d.readUint8(),m=[],y=[],I=[],_=null,b=0;b<v;b++){d.streamRead1Bytes(),d.extractBits(1),d.extractBits(2);var C=d.extractBits(5),A=1;13!==C&&12!==C&&(A=d.readUint16());for(var R=0;R<A;R++){var T=d.readUint16();switch(C){case 14:m.push(d.readUint8Array(T));break;case 15:var x=d.readUint8Array(T);!_&&(_=e.parseSPS(e.removeEPB(x))),y.push(x);break;case 16:I.push(d.readUint8Array(T))}}}return{data:t,configurationVersion:g,codec:"bvc2.1.6.L93.B0",nalUnitSize:h,ptlPresentFlag:f,olsIdx:n,numSublayers:r,constantFrameRate:i,chromaFormatIdc:o,bitDepthLumaMinus8:s,ptlRecord:p,width:l,height:u,sampleRate:c,numOfArrays:v,vps:m,sps:y,pps:I,spsParsed:_}}},{key:"parseVVCPTLRecord",value:function(e,t){e.streamRead2Bytes(),e.extractBits(2);var n=e.extractBits(6),r=e.extractBits(7),i=e.extractBits(1),a=e.readUint8();e.streamRead1Bytes();var o=e.extractBits(1),s=e.extractBits(1),l=new Uint8Array(n);if(n){for(var u=0;u<n-1;u++){var c=e.extractBits(6);e.streamRead1Bytes();var d=e.extractBits(2);l[u]=c<<2|d}l[n-1]=e.extractBits(6)}else e.extractBits(6);var g=[];if(t>1){e.streamRead1Bytes();for(var h=0,f=t-2;f>=0;--f)h|=e.extractBits(1)<<f;for(var p=t;p<=8&&t>1;++p)e.extractBits(1);for(var v=t-2;v>=0;--v)h&1<<v&&(g[v]=e.readUint8())}var m=e.readUint8(),y=[];if(m)for(var I=0;I<m;I++)y.push(e.readUint32());return{generalProfileIdc:r,generalTierFlag:i,generalLevelIdc:a,ptlFrameOnlyConstraintFlag:o,ptlMultilayerEnabledFlag:s,generalConstraintInfo:l,subLayerLevelIdc:g,generalSubProfileIdc:y,ptlNumSubProfiles:m,numBytesConstraintInfo:n}}},{key:"getAvccNals",value:function(e){for(var t=[];e.position<e.length-4;){var n=e.dataview.getInt32(e.dataview.position);if(e.length-e.position>=n){var r=e.buffer.slice(e.position,e.position+4);e.skip(4);var i=new Uint8Array(e.buffer.slice(e.position,e.position+n));e.skip(n),t.push({header:r,body:i});continue}break}return t}},{key:"analyseNal",value:function(e){var t=(248&e.body[1])>>3;switch(e.type=t,t){case 23:case 24:break;case 7:case 8:e.key=!0;break;case 14:e.vps=!0;break;case 15:e.sps=!0;break;case 16:e.pps=!0;break;case 17:e.aps=!0}}},{key:"removeEPB",value:function(e){for(var t=e.byteLength,n=[],r=1;r<t-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(n.push(r+2),r+=2):r++;if(!n.length)return e;var i=t-n.length,a=new Uint8Array(i),o=0;for(r=0;r<i;o++,r++)o===n[0]&&(o++,n.shift()),a[r]=e[o];return a}},{key:"parseVps",value:function(){}},{key:"parseSPS",value:function(t){var n=new i.Z(t);n.readUByte(),n.readUByte(),n.skipBits(4);var r=n.readBits(4),a=n.readBits(3),o=n.readBits(2),s=420;o<=3&&(s=[0,420,422,444][o]),n.readBits(2),n.readBits(1);var l=e._parseProfileTierLevel(n,1,a);n.readBits(1),n.readBits(1)&&n.readBits(1);var u=n.readUEG();return{width:u,height:n.readUEG(),spsMaxSubLayerMinus1:a,spsVideoParameterSetId:r,chromaFormatIdc:o,chromaFormat:s,ptlInfo:l}}},{key:"_parseProfileTierLevel",value:function(t,n,r){var i,a=t.readBits(7),o=t.readBits(1),s=t.readBits(8),l=t.readBits(1),u=t.readBits(1);n&&(i=e._parseGeneralConstraintsInfo(t));for(var c=r-1,d=[],g=[],h=[],f=c;f>=0;--f)d[f]=t.readBits(1);for(;!t.byteAligned();)t.readBits(1);for(var p=c;p>=0;--p)d[p]&&(g[p]=t.readUByte());if(n){for(var v=t.readUByte(),m=0;m<v;m++)h[m]=t.readBits(32)}return{generalProfileIdc:a,generalTierFlag:o,generalLevelIdc:s,ptlFrameOnlyConstraintFlag:l,ptlMultilayerEnabledFlag:u,ptlSublayerLevelPresentFlags:d,ptlSublayerLevelIdcs:g,ptlSubProfileIdcs:h,gciInfo:i}}},{key:"_parseGeneralConstraintsInfo",value:function(e){var t=e.readBits(1);if(t){e.skipBits(71);var n=e.readBits(8);n&&e.skipBits(n)}var r=8-e.bitsPos()%8;return e.skipBits(r),{gciPresentFlag:t}}}]),e}()},128159:function(e,t,n){n.d(t,{_:function(){return i}});var r=n(177595),i=function(){function e(t,n,i){(0,r.PA)(this,e),(0,r._x)(this,"flag",{}),(0,r._x)(this,"keyframe",!1),(0,r._x)(this,"gopId",0),(0,r._x)(this,"duration",0),(0,r._x)(this,"size",0),(0,r._x)(this,"units",[]),(0,r._x)(this,"chromaFormat",420),this.originPts=this.pts=t,this.originDts=this.dts=n,i&&(this.units=i)}return(0,r.qH)(e,[{key:"cts",get:function(){return this.pts-this.dts}},{key:"setToKeyframe",value:function(){this.keyframe=!0,this.flag.dependsOn=2,this.flag.isNonSyncSample=0}}]),e}()},145454:function(e,t,n){n.d(t,{Y:function(){return i}});var r=n(177595),i=function(){function e(t,n){(0,r.PA)(this,e),this.name=t||"",this._prefix="[".concat(this.name,"]"),e.disabled=n}return(0,r.qH)(e,[{key:"debug",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).debug.apply(t,[this._prefix].concat(r))}}},{key:"log",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).log.apply(t,[this._prefix].concat(r))}}},{key:"warn",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).warn.apply(t,[this._prefix].concat(r))}}},{key:"error",value:function(){var t;if(!e.disabled){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=console).error.apply(t,[this._prefix].concat(r))}}},{key:"table",value:function(){var t;!e.disabled&&(t=console).table.apply(t,arguments)}}],[{key:"enable",value:function(){e.disabled=!1}},{key:"disable",value:function(){e.disabled=!0}}]),e}();(0,r._x)(i,"disabled",!0)}}]);