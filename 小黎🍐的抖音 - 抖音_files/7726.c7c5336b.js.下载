"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["7726"],{55035:function(e,t,i){i.d(t,{a:function(){return f}});var n=i(590921),l=i(874155),o=i(250751);i(930798),i(612222),i(586529),i(227470);var a=i(259202),r=i(611542),s=i(833451),u=i(825211),d=i.n(u),c=i(897298);let f=e=>{let{href:t="",children:i,style:u,className:f,spa:h,isNeedSeoOpt:v=!1,refEl:m}=e,g=(0,o._)(e,["href","children","style","className","spa","isNeedSeoOpt","refEl"]),p=(0,r.useRef)(null),_=(0,r.useMemo)(()=>{let e,i;if(!t)return;let n=t.indexOf("#");-1!==n?(e=t.slice(0,n),i=t.slice(n+1)):(e=t,i="");let l=e.indexOf("?"),o="",a="";-1!==l?(o=e.slice(0,l),a=e.slice(l+1)):(o=e,a="");let r=[];return(a&&r.push(a),r.length>0)?[o,r.join("&")].join("?")+(i&&`#${i}`):o+(i&&`#${i}`)},[t]),y=_;return v&&!h&&y&&([y]=y.split("#"),[y]=y.split("?")),h?(0,a.jsx)(c.Link,(0,l._)((0,n._)({to:_,className:d()(s.default.aLink,f),style:u},g),{children:i})):(0,a.jsx)("a",(0,l._)((0,n._)({href:y,className:d()(s.default.aLink,f),style:u,ref:e=>{p.current=e,m&&(m.current=e)}},g),{target:g.target,onClick:e=>{try{var t;p.current.href=_,null==g||null===(t=g.onClick)||void 0===t||t.call(g,e)}catch(e){}},children:i}))}},668435:function(e,t,i){i.d(t,{q:function(){return s}}),i(612222);var n=i(259202),l=i(611542),o=i(254546),a=i(825211),r=i.n(a);let s=e=>{let{type:t="default",src:i,alt:a="",isSpider:s=!1}=e,[u,d]=(0,l.useState)(0),c=i&&(1===u||s),f=()=>{d(1)};return(0,l.useEffect)(()=>{if(!i)return;let e=!1,t=new Image;t.onload=function(){if(!e)e=!0,f(),t=null},t.onerror=function(){if(!e)e=!0,d(-1),t=null};let n=setTimeout(()=>{e=!0,f()},3e3);return t.src=i,()=>{t&&(t.onload=null,t.onerror=null),clearTimeout(n)}},[i]),(0,n.jsx)("div",{className:r()(o.default.avatar,o.default[t]),children:c?(0,n.jsx)("img",{src:i,alt:a,className:o.default.image,onError:()=>{d(-1)},onLoad:f}):(0,n.jsx)("div",{className:o.default.icon,children:(0,n.jsx)("div",{className:r()(o.default[t],o.default.avatarIcon)})})})}},616588:function(e,t,i){i.d(t,{Z:function(){return g}});var n=i("590921");i("612222"),i("930798");var l=i("259202"),o=i("611542"),a=i("644171"),r=i("403709"),s=i("402218"),u=i("551993"),d=i("825211"),c=i.n(d);let f=e=>{let{selected:t,disable:i,label:n,className:a,onClick:r,value:s}=e,d=o.useCallback(()=>{r&&r(s,!t)},[s,t,r]);return(0,l.jsxs)("div",{className:c()(u.default.radioContainer,a),children:[(0,l.jsx)("div",{onClick:d,className:c()(u.default.radio,{[u.default.selected]:t,[u.default.disable]:i})}),n&&(0,l.jsx)("span",{className:u.default.label,children:n})]})};var h=i("886245"),v=i("814421");function m(e){let{size:t="normal",type:i="primary",children:o,autoFixed:a=!0,className:r,width:s,style:u,theme:d="solid",disabled:f=!1,onClick:h=function(){}}=e;return(0,l.jsx)("button",{type:"button",disabled:f,onClick:h,className:c()(v.default.button,v.default[t],v.default[i],v.default[d],{[v.default.fixed]:!a},r),style:(0,n._)({width:s&&`${s}px`},u),children:o})}var g=e=>{let{reasons:t,type:i,object_id:u,isLive:d=!1,onLiveReport:c=()=>void 0,logParams:v,toast:g}=e,[p,_]=o.useState(""),[y,x]=o.useState(""),w=o.useMemo(()=>{let e={};for(let i=0;i<t.length;i++){let n=t[i];e[i%3]?e[i%3].push(n):e[i%3]=[n]}return e},[t]),C=o.useCallback(e=>{x(e)},[]),S=o.useCallback(()=>{!d&&(r.Z.sendLog("report_web",(0,n._)({report_type:i,object_id:u},v)),null==e||e.onClose()),d&&(c(y,p),null==e||e.onClose()),g?g("提交成功",null==e?void 0:e.toastParent):s.F.info("提交成功",null==e?void 0:e.toastParent)},[y,p,c]);return(0,l.jsxs)("div",{className:a.default.reportContainer,"data-e2e":"report-container",children:[(0,l.jsxs)("div",{className:a.default.reasonList,children:[(0,l.jsx)("div",{className:a.default.col,children:(w[0]||[]).map(e=>(0,l.jsx)(f,{selected:y===e.value,label:e.label,value:e.value,className:a.default.reasonItem,onClick:C},e.value))}),(0,l.jsx)("div",{className:a.default.col,children:(w[1]||[]).map(e=>(0,l.jsx)(f,{selected:y===e.value,label:e.label,value:e.value,className:a.default.reasonItem,onClick:C},e.value))}),(0,l.jsx)("div",{className:a.default.col,children:(w[2]||[]).map(e=>(0,l.jsx)(f,{selected:y===e.value,label:e.label,value:e.value,className:a.default.reasonItem,onClick:C},e.value))})]}),(0,l.jsx)(h.K,{notResize:!0,maxLength:140,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:p,onChange:e=>_(e),className:a.default.reportDesc}),(0,l.jsx)(m,{className:a.default.submit,onClick:S,disabled:!y,children:"提交"})]})}},403709:function(e,t,i){var n=i(354795);t.Z=new n.h({report_web:{eventName:"report_web",params:{report_type:"",object_id:"",enter_method:""}}})},720480:function(e,t,i){i(612222);var n=i(259202),l=i(611542),o=i(781111),a=i(221857),r=i(914162),s=i(616588),u=i(819769);let d=["色情低俗","违法犯罪","造谣传谣","垃圾广告","售卖假货","非原创内容","未成年人相关","其他"],c=["色情低俗","违法犯罪","造谣传谣","垃圾广告","骚扰","人身攻击","时政不实信息"],f=["色情低俗","违法犯罪","造谣传谣","垃圾广告","骚扰","人身攻击","时政不实信息"],h=["色情低俗","违法犯罪","造谣传谣","垃圾广告","售卖假货","未成年相关","头像、昵称、签名、背景图违规"],v=["违法违禁","淫秽色情","抽烟饮酒","欺诈/售假","未成年人相关","危险行为","录像/盗播","声音违规","诱导刷礼","引导线下转账","侮辱谩骂","其他"];t.Z=e=>{let[t,i]=(0,l.useState)(!0),[m,g]=l.useState(a.default.zoomIn),p=l.useCallback(()=>{g(a.default.zoomOut),setTimeout(()=>{var t;i(!1),o.unmountComponentAtNode(e.portalRef),e.portalRef.remove(),null===(t=e.onClose)||void 0===t||t.call(e)},300)},[t]);return(0,l.useEffect)(()=>()=>{u.Le.setConfig(u.gI.IsAlreadyExsitReportModal,!1)},[]),(0,n.jsx)(r.u,{title:e.title,visible:t,className:m,onCancel:p,children:(0,n.jsx)(s.Z,{toast:null==e?void 0:e.toast,toastParent:e.toastParent,reasons:function(e){switch(e){case"video":return d.map(e=>({label:e,value:e}));case"comment":return c.map(e=>({label:e,value:e}));case"user":return h.map(e=>({label:e,value:e}));case"live":return v.map(e=>({label:e,value:e}));case"danmaku":return f.map(e=>({label:e,value:e}));default:return[]}}(e.type),onClose:p,object_id:e.object_id,type:e.type,isLive:!0,onLiveReport:e.onLiveReport,logParams:e.logParams})})}},71880:function(e,t,i){i.d(t,{nI:function(){return eu},mJ:function(){return er}});var n=i("259202"),l=i("611542"),o=i("781111"),a=i("606660"),r=i("819769"),s=i("245086"),u=i("356789"),d=i("720480"),c=i("590921");i("612222"),i("347885"),i("101060"),i("930798");var f=i("397941"),h=i("402218"),v=i("507921"),m=i("825211"),g=i.n(m),p=i("944110");function _(e){let{children:t,className:i,width:l,style:o,disabled:a=!1,onClick:r=function(){}}=e;return(0,n.jsx)("button",{type:"button",disabled:a,onClick:r,className:g()(p.default.button,i),style:(0,c._)({width:l&&`${l}px`},o),children:t})}var y=i("67368");let x=e=>{let{text:t,required:i=!1,className:l}=e;return(0,n.jsxs)("div",{className:g()(y.default.container,l),children:[(0,n.jsx)("div",{className:y.default.text,children:t}),i&&(0,n.jsx)("div",{className:y.default.icon,children:"*"})]})};var w=i("702422"),C=i("314770");let S=e=>{let{className:t,column:i=1,optionList:o,value:a,onChange:r}=e,s=(0,l.useMemo)(()=>({width:`${100/i}%`}),[i]);return Array.isArray(o)?(0,n.jsx)("div",{className:g()(C.default.container,t),children:o.map(e=>(0,n.jsx)(w.Y,{className:C.default.radio,style:s,label:e.label,value:e.value,checked:a===e.value,onCheck:r},e.value))}):null};var b=i("990441"),N=i("712314");let A=e=>{let{value:t="",onChange:i,placeholder:o,maxLength:a,width:r,className:s,minHeight:u}=e,d=l.useRef(null),c=l.useCallback(e=>{let t=e.target.value;t.length<=a&&i(t)},[i]);return(0,n.jsxs)("div",{style:{width:r},className:g()(N.default.textareaContainer,s),children:[(0,n.jsx)("textarea",{value:t,ref:d,style:{minHeight:u},onChange:c,onKeyDown:e=>e.stopPropagation(),placeholder:o,className:N.default.textarea}),void 0!==a&&(0,n.jsxs)("div",{className:g()(N.default.count,{[N.default.overflow]:t.length>a}),children:[t.length,"/",a]})]})};var k=i("27510"),I=i("552530"),j=i("428992"),E=i("188732");let P=e=>{let{value:t,className:i,onClick:l}=e;return(0,n.jsxs)("div",{className:g()(I.default.container,i),onClick:l,children:[(0,n.jsx)("div",{className:I.default.text,children:t}),(0,n.jsx)(j.n,{className:I.default.icon,src:E.Z,width:24,height:24})]})};var L=i("64788"),T=i("874155");let R=(0,l.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,T._)((0,c._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M20.566 9.364a1.929 1.929 0 0 1 2.727 2.727l-5.637 5.637 5.637 5.637a1.928 1.928 0 1 1-2.727 2.727l-6.985-6.985-.016-.015a1.929 1.929 0 0 1 0-2.728l7-7z",fill:"#0A0C20"})})));var D=e=>{let{visible:t,defaultValue:i=[],onCancel:o,onOk:a}=e,[r,s]=(0,l.useState)(i),{ReportEntry:u}=window;return u?(0,n.jsx)(v.u,{title:(0,n.jsxs)("div",{className:L.default.title,children:[(0,n.jsx)(j.n,{className:L.default.icon,src:R,width:24,height:24,onClick:()=>o()}),(0,n.jsx)("div",{children:"选择聊天证据"})]}),visible:t,showClose:!1,onCancel:()=>o(),footer:(0,n.jsx)(_,{style:{width:"100%"},onClick:()=>a(r),disabled:!r.length,children:"确定"}),children:(0,n.jsx)("div",{className:L.default.messageContainer,children:(0,n.jsx)(u,{onMessageSelect:e=>s(e),selectedMessage:r})})}):null},M=i("507979");i("632852");var B={VIDEO:101,101:"VIDEO",COMMENT:102,102:"COMMENT",USER:103,103:"USER",IMAGE:126,126:"IMAGE",IM:106,106:"IM",IM_GROUP:115,115:"IM_GROUP"};let F=e=>{var t,i,o,a,r;let{reportScene:s,objectId:u,reasonList:d,reasonMap:c,onChange:f}=e,[h,v]=(0,l.useState)(),[m,g]=(0,l.useState)(),[p,_]=(0,l.useState)(),[y,w]=(0,l.useState)(),[C,N]=(0,l.useState)();return(0,l.useEffect)(()=>{let e=s===B.USER?m:h&&60448!==h;f({reasonCode:m||h,reportLabels:p,reportDesc:y,imgList:C,validate:e})},[h,m,p,y]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"举报原因",required:!0}),(0,n.jsx)(S,{column:3,optionList:d,value:h,onChange:e=>{v(e),g(void 0),_(void 0)}}),60448===h?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:M.default.infringement,children:["侵权问题需要详细举证，可扫描下方抖音码前往",(0,n.jsx)("br",{}),"「抖音APP」进行侵权举报"]}),(0,n.jsx)(b.N,{className:M.default.douyinCode,objectId:u,schemaType:s===B.USER?4:1})]}):(0,n.jsxs)(n.Fragment,{children:[(null===(i=c.get(h))||void 0===i?void 0:null===(t=i.children)||void 0===t?void 0:t.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型",required:s===B.USER}),(0,n.jsx)(S,{column:3,optionList:null===(o=c.get(h))||void 0===o?void 0:o.children,value:m,onChange:g})]}),(null===(r=c.get(h))||void 0===r?void 0:null===(a=r.report_labels)||void 0===a?void 0:a.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型"}),(0,n.jsx)(S,{column:3,optionList:c.get(h).report_labels,value:p,onChange:_})]}),(0,n.jsx)(x,{text:"举报描述"}),(0,n.jsx)(A,{maxLength:200,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:y,onChange:w}),(0,n.jsxs)("div",{className:M.default.uploadContainer,children:[(0,n.jsx)(k.U,{value:C,onChange:N}),(0,n.jsx)("div",{className:M.default.uploadTips,children:"每张小于 10M，支持JPG、PNG格式，最多上传4张"})]})]})]})},O=e=>{var t,i,o,a,r;let{reasonList:s,reasonMap:u,onChange:d}=e,[c,f]=(0,l.useState)(),[h,v]=(0,l.useState)(),[m,g]=(0,l.useState)(),[p,_]=(0,l.useState)(),[y,w]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{let e=c&&(null==p?void 0:p.length);d({reasonCode:h||c,reportLabels:m,chatList:p,validate:e})},[c,h,m,p]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"举报原因",required:!0}),(0,n.jsx)(S,{column:3,optionList:s,value:c,onChange:e=>{f(e),v(void 0),g(void 0)}}),(null===(i=u.get(c))||void 0===i?void 0:null===(t=i.children)||void 0===t?void 0:t.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型"}),(0,n.jsx)(S,{column:3,optionList:null===(o=u.get(c))||void 0===o?void 0:o.children,value:h,onChange:v})]}),(null===(r=u.get(c))||void 0===r?void 0:null===(a=r.report_labels)||void 0===a?void 0:a.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型"}),(0,n.jsx)(S,{column:3,optionList:u.get(c).report_labels,value:m,onChange:g})]}),(0,n.jsx)(x,{text:"聊天证据",required:!0}),(0,n.jsx)(P,{value:(null==p?void 0:p.length)?`已添加${p.length}条聊天证据`:"添加聊天证据",onClick:()=>w(!0)}),(0,n.jsx)(D,{visible:y,defaultValue:p,onCancel:()=>w(!1),onOk:e=>{_(e),w(!1)}})]})},U=e=>{var t,i,o,a,r;let{videoId:s,reasonList:u,reasonMap:d,onChange:c}=e,[f,h]=(0,l.useState)(),[v,m]=(0,l.useState)(),[g,p]=(0,l.useState)();return(0,l.useEffect)(()=>{let e=f&&60466!==f;c({reasonCode:v||f,reportLabels:g,validate:e})},[f,v,g]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"举报原因",required:!0}),(0,n.jsx)(S,{column:3,optionList:u,value:f,onChange:e=>{h(e),m(void 0),p(void 0)}}),60466===f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:M.default.infringement,children:["侵权问题需要详细举证，可扫描下方抖音码前往",(0,n.jsx)("br",{}),"「抖音APP」进行侵权举报"]}),(0,n.jsx)(b.N,{className:M.default.douyinCode,objectId:s})]}):(0,n.jsxs)(n.Fragment,{children:[(null===(i=d.get(f))||void 0===i?void 0:null===(t=i.children)||void 0===t?void 0:t.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型"}),(0,n.jsx)(S,{column:3,optionList:null===(o=d.get(f))||void 0===o?void 0:o.children,value:v,onChange:m})]}),(null===(r=d.get(f))||void 0===r?void 0:null===(a=r.report_labels)||void 0===a?void 0:a.length)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{text:"请选择具体的类型"}),(0,n.jsx)(S,{column:3,optionList:d.get(f).report_labels,value:g,onChange:p})]})]})]})};var H=e=>{let{reportScene:t,reasonData:i,dataSource:l,onValuesChange:o}=e,{object_id:a,video_id:r}=l,{reasonList:s=[],reasonMap:u=new Map}=i;return(0,n.jsxs)("div",{children:[[B.VIDEO,B.IMAGE,B.USER].includes(t)&&(0,n.jsx)(F,{reportScene:t,objectId:a,reasonList:s,reasonMap:u,onChange:o}),[B.IM,B.IM_GROUP].includes(t)&&(0,n.jsx)(O,{reasonList:s,reasonMap:u,onChange:o}),[B.COMMENT].includes(t)&&(0,n.jsx)(U,{videoId:r,reasonList:s,reasonMap:u,onChange:o})]})},W=i("440376"),V=i("877435"),q=i("131824"),Z=i("354795"),K=new Z.h({enter_report_edit_page:{eventName:"enter_report_edit_page",params:{object_type:"",object_id:"",enter_from:""}},report_submit:{eventName:"report_submit",params:{object_type:"",object_id:"",enter_from:"",follow_status:"",reason_type:"",report_labels:""}}}),G=i("283641"),$=e=>{let{pipelineId:t,dataSource:i,logParams:a,onReport:s,toast:d}=e,{object_id:m,owner_id:g,owner_sec_id:p,user_id:y,comment_with_emoji:x,enter_from:w,con_short_id:C}=i,[S,b]=(0,l.useState)(!0),[N,A]=l.useState(f.default.zoomIn),[k,I]=(0,l.useState)(),[j,E]=(0,l.useState)(),P=l.useCallback(()=>{A(f.default.zoomOut),setTimeout(()=>{var t;b(!1),o.unmountComponentAtNode(e.portalRef),e.portalRef.remove(),null===(t=e.onClose)||void 0===t||t.call(e)},300)},[e.onClose]);(0,l.useEffect)(()=>{let e=u.listen(u.EVENT.hideModal,P);return()=>{e()}},[P]),(0,l.useEffect)(()=>()=>{r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!1)},[]),(0,W.O)({onChange:e=>{let{isFullscreen:t}=e;t&&P()}});let L=(e,t)=>d?null==d?void 0:d(e,t):h.F.info(e,t),T=async()=>{let e,t,i;let n=await (0,G.b)(p),{reasonCode:l,reportLabels:o,reportDesc:r,imgList:u,chatList:d}=j,{reportScene:f,reasonData:h}=k;if(o){let t=new Map;h.reasonMap.get(l).report_labels.forEach(e=>t.set(e.value,e.label)),e=t.get(o)}(null==u?void 0:u.length)&&(t=null==u?void 0:u.map(e=>e.Uri).join(",")),(null==d?void 0:d.length)&&(i=d.join(","));let v={follow_status:null==n?void 0:n.follow_status,con_short_id:C,im_message_list:i,source:w},_={app_id:6383,object_id:m,owner_id:g,user_id:y,reported_id:y,report_type:f,reason:l,report_labels:e,report_desc:r,uri:t,image_uri_list:t,msg_list:[B.IM,B.IM_GROUP].includes(f)?i:void 0,report_data:JSON.stringify(v)};(0,V.v_)("/aweme/v1/report/submit/",{},_).then(t=>{switch(!0){case 2159===t.status_code:L("你已举报过该内容，请稍后再试");break;case 0===t.status_code:K.sendLog("report_submit",(0,c._)({object_type:k.reportScene,object_id:m,enter_from:w,follow_status:null==n?void 0:n.follow_status,reason_type:l,report_labels:e},a)),L("提交成功，我们将尽快受理");break;default:L("提交失败，请稍后再试")}P(),null==s||s(0===t.status_code)}).catch(()=>L("服务器打瞌睡了，请稍后再试"))};return((0,l.useEffect)(()=>{var i;(i=t,fetch(`https://lf-mortise.douyinstatic.com/obj/mortise-online/online/${i}_3364`).then(e=>e.json()).then(e=>{var t;let{reportScene:i,reasonCode:n}=e.pluginData;let l=Array.isArray(t=n)?t[0].list.map(e=>{let{reason_code:t,next_reasons:i,report_labels:n}=e.data;return{label:e.text,value:t,children:Array.isArray(i)?i[0].list.map(e=>({label:e.text,value:e.data.reason_code})):void 0,report_labels:Array.isArray(n)?n.map(e=>({label:e.name,value:e.code})):void 0}}):[],o=new Map;return l.forEach(e=>{o.set(e.value,e)}),{reportScene:i,reasonData:{reasonList:l,reasonMap:o}}})).then(e=>{(0,q.Z)(y),K.sendLog("enter_report_edit_page",(0,c._)({object_type:e.reportScene,object_id:m,enter_from:w},a)),1===x&&e.reasonData.reasonList.push({label:"表情包侵权",value:60466}),I(e)}).catch(()=>L("服务器打瞌睡了，请稍后再试",null==e?void 0:e.toastParent))},[]),k&&i)?(0,n.jsx)(v.u,{title:e.title,visible:S,className:N,onCancel:P,footer:(0,n.jsx)(_,{className:f.default.submit,onClick:T,disabled:!(null==j?void 0:j.validate),children:"提交"}),children:(0,n.jsx)(H,{dataSource:i,reportScene:k.reportScene,reasonData:k.reasonData,onValuesChange:E})}):null};i("41873"),i("238658");var z=i("202856"),Q=i("520815"),J=i("97429");let Y=e=>{let{optionList:t,value:i=[],onChange:l}=e,o=new Set(i),a=e=>{o.has(e)?o.delete(e):o.add(e),l([...o.values()])};return Array.isArray(t)?(0,n.jsx)("div",{className:Q.default.container,children:t.map(e=>(0,n.jsx)(J.J,{className:Q.default.radio,style:e.label.length>=7?{width:"calc(100% - 40px)"}:void 0,label:e.label,value:e.value,selected:o.has(e.value),onSelect:a},e.value))}):null};var X=i("270510"),ee=i("695758");function et(e){let{className:t,text:i,textClassName:l}=e;return(0,n.jsxs)("div",{className:g()(ee.default.container,t,"HideInLynxClassName"),children:[(0,n.jsx)("div",{className:ee.default.loading}),i&&(0,n.jsx)("div",{className:g()(ee.default.text,l),children:i})]})}var ei=i("213154"),en=i("645003");function el(){return(0,n.jsxs)("svg",{className:z.default.svg,viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M6.12852 1.14357C5.95738 0.680906 5.51668 0.351562 5 0.351562C4.48332 0.351562 4.04262 0.680906 3.87148 1.14357C2.4282 1.62362 1.38595 2.9984 1.38595 4.62081V5.837C1.38595 6.52216 1.19579 7.19354 0.837147 7.77455L0.11565 8.94342C-0.19778 9.45119 0.162759 10.1098 0.754132 10.1098H9.24587C9.83724 10.1098 10.1978 9.45119 9.88435 8.94342L9.16285 7.77455C8.80421 7.19354 8.61405 6.52216 8.61405 5.837V4.62081C8.61405 2.9984 7.5718 1.62361 6.12852 1.14357Z"}),(0,n.jsx)("path",{d:"M5 12.3969C4.07376 12.3969 3.27772 11.8324 2.92917 11.0247H7.07083C6.72228 11.8324 5.92624 12.3969 5 12.3969Z"})]})}let eo=e=>{var t,i,o,a;let{dataSource:r,onChange:s}=e,[u,d]=(0,l.useState)(),[c,f]=(0,l.useState)(),[h,v]=(0,l.useState)(),[m,g]=(0,l.useState)(),[p,_]=(0,l.useState)(),[y,w]=(0,l.useState)(),C=(0,l.useRef)(),S=(0,l.useRef)(),b=(0,l.useMemo)(()=>{let e={};return r.forEach(t=>{let{label:i,tips:n}=t;e[i]?e[i].children=e[i].children.concat(t):e[i]={name:i,tooltip:n,children:[t]}}),Object.values(e).map(e=>{let{name:t,tooltip:i,children:n}=e;return{name:t,tooltip:i,children:n.map(e=>{let{text:t,reason_type_id:i,sub_reason_list:n=[],toast:l}=e;return{label:t,value:i,children:n.map(e=>({label:e.text,value:e.reason_type_id})),extra:l}})}})},[r]);return(0,l.useEffect)(()=>{switch(!0){case(null==u?void 0:u.value)===void 0:case(null==u?void 0:u.value)===18&&!(null==y?void 0:y.length):case(null==u?void 0:u.value)===18&&!h:case(null==y?void 0:y.includes(1))&&!m:s({verified:!1});break;default:s({reasonData:u,subReasonData:c,desc:h,info:m,images:p,codes:y,verified:!0})}},[u,c,h,m,p,y,s]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:z.default.titleBar,children:[(0,n.jsx)(el,{}),(0,n.jsx)("div",{className:z.default.title,children:"您的举报我们将尽快受理，核实后我们将第一时间告知受理结果，请尽量提交完整的举报描述及材料。"})]}),(0,n.jsx)(x,{text:"举报原因",required:!0}),(0,n.jsx)(en.o,{dataList:b,onChange:e=>{if(e.value!==(null==u?void 0:u.value))setTimeout(()=>{var t,i,n,l;(null==e?void 0:e.value)===18?null===(i=S.current)||void 0===i||null===(t=i.scrollIntoView)||void 0===t||t.call(i,{behavior:"smooth",block:"nearest"}):null===(l=C.current)||void 0===l||null===(n=l.scrollIntoView)||void 0===n||n.call(l,{behavior:"smooth",block:"nearest"})},0),f(void 0),w(void 0),d(e)},value:u}),(null==u?void 0:u.value)!==18&&(null==u?void 0:null===(t=u.children)||void 0===t?void 0:t.length)>0&&(0,n.jsxs)("div",{ref:C,children:[(0,n.jsx)(x,{text:"请选择具体的举报类型（选填）"}),(0,n.jsx)(en.D,{dataList:null==u?void 0:u.children,onChange:f,value:c})]}),(null==u?void 0:u.value)===18&&(null==u?void 0:null===(i=u.children)||void 0===i?void 0:i.length)>0&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:z.default.divider}),(0,n.jsxs)("div",{className:z.default.description,ref:S,children:["权利人请通过广告投诉平台",(0,n.jsxs)("a",{className:z.default.link,href:"https://phoniex.toutiao.com/phoniex/index",target:"_blank",rel:"noreferrer",children:[" ","https://phoniex.toutiao.com/phoniex/index"," "]}),"进行投诉，同时上传具体材料（权利人身份证明、侵权内容及权利证明等）"]}),(0,n.jsx)(x,{text:"举报类型（多选）",required:(null==u?void 0:u.value)===18}),(0,n.jsx)(Y,{optionList:null==u?void 0:u.children,value:y,onChange:w}),(0,n.jsx)(x,{text:(null==y?void 0:null===(o=y.includes)||void 0===o?void 0:o.call(y,1))?"原作者信息":"原作者信息（选填）",required:null==y?void 0:null===(a=y.includes)||void 0===a?void 0:a.call(y,1)}),(0,n.jsx)(X.I,{placeholder:"原创作者抖音名称、作品链接或其他信息",value:m,onChange:g})]}),(0,n.jsx)(x,{text:(null==u?void 0:u.value)===18?"举报描述":"举报描述（选填）",required:(null==u?void 0:u.value)===18}),(0,n.jsx)(A,{maxLength:200,placeholder:"请详细描述举报原因，便于平台判断违规情况",minHeight:75,value:h,onChange:v}),(0,n.jsxs)("div",{className:z.default.uploadContainer,children:[(0,n.jsx)(k.U,{value:p,onChange:_}),(0,n.jsx)("div",{className:z.default.uploadTips,children:"每张小于 10M，支持JPG、PNG格式，最多上传4张"})]})]})};var ea=e=>{let{title:t,onClose:i,portalRef:a,toastParent:s,extraInfo:d}=e,[c,f]=(0,l.useState)(!0),[m,g]=l.useState(z.default.zoomIn),[p,y]=(0,l.useState)(),[x,w]=(0,l.useState)(),C=l.useCallback(()=>{g(z.default.zoomOut),setTimeout(()=>{f(!1),o.unmountComponentAtNode(a),a.remove(),null==i||i()},300)},[i]);(0,l.useEffect)(()=>()=>{r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!1)},[]),(0,l.useEffect)(()=>{let e=u.listen(u.EVENT.hideModal,C);return()=>{null==e||e()}},[C]);let S=(0,l.useCallback)(e=>{h.F.info(e,s)},[s]),b=async()=>{let{user_id:e,log_extra:t,creative_id:i}=d,{reasonData:n,subReasonData:l,desc:o,info:a,images:r=[],codes:s=[]}=x,u={creative_id:i,log_extra:t,data:{user_id:e,report_type_id:n.value,report_type_name:n.label,report_pictures:r.map(e=>e.Uri).toString(),report_description:o,sub_reason_id:18===n.value?void 0:null==l?void 0:l.value,sub_reason_name:18===n.value?void 0:null==l?void 0:l.label,report_author_info:18===n.value?a:void 0,report_right_type:18===n.value?s.toString():void 0}};(0,ei.GA)(u).then(e=>{0===e.code?(S("操作成功，将严格审查广告内容"),C()):S("服务器打瞌睡了，请稍后再试")}).catch(()=>S("服务器打瞌睡了，请稍后再试"))};return(0,W.O)({onChange:e=>{let{isFullscreen:t}=e;t&&C()}}),(0,l.useEffect)(()=>{(0,ei.iL)().then(e=>{(0,q.Z)(null==d?void 0:d.user_id),y(e.data)}).catch(()=>S("服务器打瞌睡了，请稍后再试"))},[]),(0,n.jsx)(v.u,{title:t,visible:c,className:m,onCancel:C,footer:(0,n.jsx)(_,{className:z.default.submit,onClick:b,disabled:!(null==x?void 0:x.verified),children:"提交"}),children:p?(0,n.jsx)(eo,{dataSource:p,onChange:w}):(0,n.jsx)(et,{text:"加载中"})})};let er=(e,t)=>{if(r.Le.getConfig(r.gI.IsAlreadyExsitReportModal))return;let{loginDispatch:i,userInfo:n,abtestData:l}=e;if((null==n?void 0:n.uid)||e.user_id||(null==e?void 0:e.isLive)||(null==e?void 0:e.isOrigin))(null==n?void 0:n.uid)&&(e.user_id=null==n?void 0:n.uid),es(e,t);else{var o;(null===(o=window)||void 0===o?void 0:o.showAccount)&&window.showAccount({enterMethod:"report",success:n=>{"recommend"===(0,s.yW)()&&(null==l?void 0:l.recommendLoginResume)===a.RecommendLoginResume.V2?u.emit(u.EVENT.RecommendLoginResume):i({type:"updateUserInfo"}),e.user_id=null==n?void 0:n.user_id,es(e,t)}})}},es=(e,t)=>{var i,l;if("object"!=typeof e)return;let a=()=>{r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!1),"function"==typeof e.onClose&&e.onClose()},s=(null==e?void 0:e.type)==="live",u=document.createElement("div"),c=document.getElementById("root"),f=(()=>{var e;if(t)return t;if(!s)return document.fullscreenElement||c;let i=document.getElementById("slideMode")||document.getElementsByClassName("xgplayer-fullscreen-parent")[0]||document.getElementsByClassName("isCssFullScreen")[0]||document.fullscreenElement,n=document.querySelector(".modal-video-container");return i?i:(null===(e=r.Le.getConfig(r.gI.IsPageFullScreen))||void 0===e?void 0:e.type)?c:n?n:c})();if(!!f)if(f.appendChild(u),e.isOrigin)r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!0),null==e||null===(i=e.onShow)||void 0===i||i.call(e),o.render((0,n.jsx)(d.Z,{toastParent:f,portalRef:u,title:e.title,type:e.type,object_id:e.object_id,logParams:e.logParams,onClose:a,onLiveReport:e.onLiveReport||(()=>void 0),toast:null==e?void 0:e.toast}),u);else{let{title:t,logParams:i,pipeline_id:s,object_id:d,owner_id:c,user_id:h,comment_with_emoji:v=0,enter_from:m,con_short_id:g,video_id:p,onReport:_,toast:y,owner_sec_id:x}=e;r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!0),null==e||null===(l=e.onShow)||void 0===l||l.call(e),o.render((0,n.jsx)($,{toastParent:f,portalRef:u,title:t,onClose:a,logParams:i,pipelineId:s,dataSource:{object_id:d,owner_id:c,user_id:h,comment_with_emoji:v,enter_from:m,con_short_id:g,video_id:p,owner_sec_id:x},onReport:_,toast:y}),u)}},eu=(e,t)=>{if(r.Le.getConfig(r.gI.IsAlreadyExsitReportModal))return;let{loginDispatch:i,user_id:n,abtestData:l}=e;if(n)ed(e,t);else{var o;(null===(o=window)||void 0===o?void 0:o.showAccount)&&window.showAccount({enterMethod:"report",success:n=>{var o;"recommend"===(0,s.yW)()&&(null==l?void 0:l.recommendLoginResume)===a.RecommendLoginResume.V2?u.emit(u.EVENT.RecommendLoginResume):i({type:"updateUserInfo"}),null==e||null===(o=e.onLoginSuccess)||void 0===o||o.call(e),e.user_id=null==n?void 0:n.user_id,ed(e,t)}})}},ed=(e,t)=>{let{creative_id:i,log_extra:l,user_id:a,title:s,onClose:u,onShow:d}=e,c=document.createElement("div"),f=document.getElementById("root");if(t)f=t,null==t||t.appendChild(c);else{var h;let e=document.getElementById("slideMode")||document.getElementsByClassName("xgplayer-fullscreen-parent")[0]||document.getElementsByClassName("isCssFullScreen")[0],t=document.querySelector(".modal-video-container");if((null===(h=r.Le.getConfig(r.gI.IsPageFullScreen))||void 0===h?void 0:h.type)||e)e&&(f=e),f.appendChild(c);else if(t)f=t,t.appendChild(c);else{let e=document.getElementById("root");null==e||e.appendChild(c)}}r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!0),null==d||d(),o.render((0,n.jsx)(ea,{toastParent:f,portalRef:c,title:s,onClose:()=>{r.Le.setConfig(r.gI.IsAlreadyExsitReportModal,!1),"function"==typeof u&&u()},extraInfo:{creative_id:i,log_extra:l,user_id:a}}),c)}},645003:function(e,t,i){i.d(t,{D:function(){return d},o:function(){return c}});var n=i(259202),l=i(611542),o=i(421183),a=i(857695),r=i(702422);function s(e){return(0,n.jsxs)("svg",{className:e.className,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M6.31015 4.19993C6.30457 3.81502 6.61505 3.5 7 3.5C7.38495 3.5 7.69543 3.81502 7.68984 4.19993L7.63803 7.77116C7.63297 8.11992 7.3488 8.4 7 8.4C6.6512 8.4 6.36703 8.11992 6.36197 7.77116L6.31015 4.19993Z"}),(0,n.jsx)("path",{d:"M7 10.64C7.42526 10.64 7.77 10.2953 7.77 9.87C7.77 9.44474 7.42526 9.1 7 9.1C6.57474 9.1 6.23 9.44474 6.23 9.87C6.23 10.2953 6.57474 10.64 7 10.64Z"}),(0,n.jsx)("path",{d:"M7 14C10.866 14 14 10.866 14 7C14 3.13401 10.866 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14ZM7 12.95C3.71391 12.95 1.05 10.2861 1.05 7C1.05 3.71391 3.71391 1.05 7 1.05C10.2861 1.05 12.95 3.71391 12.95 7C12.95 10.2861 10.2861 12.95 7 12.95Z"})]})}function u(e){let{text:t,tooltip:i}=e,r=(0,l.useRef)();return(0,n.jsxs)("div",{className:o.default.categoryTextContainer,children:[(0,n.jsx)("div",{className:o.default.categoryText,children:t}),i&&(0,n.jsx)(a.e,{text:i,type:"right",target:r.current,children:(0,n.jsx)("div",{className:o.default.iconContainer,ref:r,children:(0,n.jsx)(s,{className:o.default.alertCircle})})})]})}function d(e){let{dataList:t=[],value:i,onChange:l}=e;return(0,n.jsx)("div",{className:o.default.dataItemList,children:t.map(e=>(0,n.jsx)(r.Y,{className:o.default.dataItem,style:e.label.length>=7?{width:"calc(100% - 40px)"}:void 0,label:e.label,checked:(null==i?void 0:i.value)===e.value,value:e.value,onCheck:()=>l(e)},e.value))})}function c(e){let{dataList:t=[],value:i,onChange:l}=e;return(0,n.jsx)("div",{className:o.default.container,children:t.map(e=>{let{name:t,tooltip:a,children:r=[]}=e;return(0,n.jsxs)("div",{className:o.default.categoryItemList,children:[t&&(0,n.jsx)(u,{text:t,tooltip:a}),(0,n.jsx)(d,{dataList:r,value:i,onChange:l})]},t)})})}},97429:function(e,t,i){i.d(t,{J:function(){return r}});var n=i(259202);i(611542);var l=i(536812),o=i(825211),a=i.n(o);let r=e=>{let{label:t,className:i,onSelect:o,value:r,style:s,selected:u}=e;return(0,n.jsxs)("div",{className:a()(l.default.container,i),style:s,children:[(0,n.jsx)("div",{className:u?l.default.selected:l.default.icon,onClick:()=>o(r)}),t&&(0,n.jsx)("span",{className:l.default.label,children:t})]})}},990441:function(e,t,i){i.d(t,{N:function(){return r}}),i(612222);var n=i(259202),l=i(611542),o=i(944845),a=i(402218);let r=e=>{let{objectId:t,schemaType:i=1}=e,[r,s]=(0,l.useState)();return(0,l.useEffect)(()=>{let n=`schema_type=${i}&object_id=${t}`;(0,o.ep)(e.objectId,{schema:n}).then(e=>{!e||(null==e?void 0:e.statusCode)?a.F.info("服务器打瞌睡了，请稍后再试"):s(null==e?void 0:e.qrcodeUrl)})},[t,i]),(0,n.jsx)("img",{className:e.className,src:r})}},27510:function(e,t,i){i.d(t,{U:function(){return m}});var n=i(590921),l=i(874155);i(612222),i(347885),i(510766),i(312602);var o=i(259202),a=i(611542),r=i(428992),s=i(867942),u=i(476479),d=i(131824),c=i(402218);let f="image/png,image/jpeg,image/jpg";function h(e){let{currentLength:t,maxLength:i,onUpload:n}=e,l=(0,a.useRef)(),d=(0,a.useCallback)(()=>{var e;(null===(e=l.current)||void 0===e?void 0:e.value)&&(l.current.value="")},[]);return t===i?null:(0,o.jsxs)("div",{className:u.default.wrap,children:[(0,o.jsx)("input",{className:u.default.input,type:"file",accept:f,multiple:!0,onChange:e=>n(e,d),ref:l}),(0,o.jsx)("div",{className:u.default.buttonContainer,children:(0,o.jsxs)("div",{className:u.default.buttonContent,children:[(0,o.jsx)(r.n,{width:24,height:24,src:s.Z}),(0,o.jsx)("div",{className:u.default.counter,children:`${t}/${i}`})]})})]})}function v(e){let{dataList:t=[],onChange:i}=e,n=e=>{let n=[...t];n.splice(e,1),"function"==typeof i&&i(n)};return(0,o.jsx)(o.Fragment,{children:t.map((e,t)=>(0,o.jsxs)("div",{className:u.default.cover,children:[(0,o.jsx)("div",{className:u.default.close,onClick:()=>n(t)}),(0,o.jsx)("img",{className:u.default.image,src:e.Url})]},e.Uri))})}function m(e){let t=(0,d.Z)(),{maxLength:i=4,value:a=[],onChange:r}=e;return(0,o.jsxs)("div",{className:u.default.container,children:[(0,o.jsx)(v,{dataList:a,onChange:r}),(0,o.jsx)(h,{onUpload:(e,o)=>{let{files:s}=e.target;if(s.length>i){c.F.info(`当前上传图片数量大于 ${i}`);return}for(let e=0;e<s.length;e++){if(s[e].size>10485760){c.F.info("当前上传图片尺寸大于10M");return}if(!f.includes(s[e].type)){c.F.info("当前上传图片是不支持的类型");return}}if(!t){c.F.info("图片上传服务不可用，请稍后再试");return}t.uploadFile(s).then(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r([...a,...e.map((e,t)=>(0,l._)((0,n._)({},e),{Url:window.URL.createObjectURL(s[t])}))]),"function"==typeof o&&o()}).catch(()=>c.F.info("图片上传失败，请重试"))},currentLength:a.length,maxLength:i})]})}},270510:function(e,t,i){i.d(t,{I:function(){return o}});var n=i(259202);i(611542);var l=i(336424);let o=e=>{let{value:t="",onChange:i,placeholder:o}=e;return(0,n.jsx)("input",{className:l.default.container,placeholder:o,value:t,onChange:e=>i(e.target.value)})}},914162:function(e,t,i){i.d(t,{u:function(){return _}});var n=i(259202),l=i(816356),o=i(611542),a=i(799506),r=i(224934),s=i(467083),u=i(825211),d=i.n(u),c=i(428992);let{ArrowUp:f,ArrowDown:h,W:v,S:m,Escape:g,N:p}=a.bf,_=e=>{let{children:t,title:i,visible:a,onCancel:u}=e,_=o.useCallback(()=>{u&&u(!1)},[]),y=o.useRef(null),x=e=>{e.stopPropagation()};return o.useEffect(()=>{let e="report/ui/Modal";return(0,r.o)({disableKey:[h,f,v,m,g,p].map(e=>e.code),pauseGlobalShortcut:!0},e),()=>{(0,r.m)(e)}},[]),o.useEffect(()=>{let{current:e}=y;if(e)return e.setAttribute("tabindex","0"),e.addEventListener("DOMMouseScroll",x),e.onwheel=e=>e.preventDefault(),e.focus(),()=>{e.removeEventListener("DOMMouseScroll",x)}},[a]),a?(0,n.jsx)("div",{className:s.default.mask,ref:y,onWheel:x,children:(0,n.jsxs)("div",{className:d()(s.default.modalContainer,e.className),"data-e2e":"report-container",children:[(0,n.jsx)("div",{className:s.default.close,onClick:_,"data-e2e":"report-container-close",children:(0,n.jsx)(c.n,{width:36,height:36,src:l.Z})}),i&&(0,n.jsx)("div",{className:s.default.title,children:i}),(0,n.jsx)("div",{className:s.default.content,children:t})]})}):null}},507921:function(e,t,i){i.d(t,{u:function(){return _}});var n=i(259202),l=i(611542),o=i(825211),a=i.n(o),r=i(799506),s=i(224934),u=i(428992),d=i(788778),c=i(816356);let{ArrowUp:f,ArrowDown:h,W:v,S:m,Escape:g,N:p}=r.bf,_=e=>{let{visible:t,children:i,title:o,footer:r,className:_,onCancel:y,showClose:x=!0}=e,w=l.useRef(),C=e=>{e.stopPropagation()};return(l.useEffect(()=>{let e="report/ui/Modal";return(0,s.o)({disableKey:[h,f,v,m,g,p].map(e=>e.code),pauseGlobalShortcut:!0},e),()=>{(0,s.m)(e)}},[]),(0,l.useEffect)(()=>{var e,t,i;return null===(e=w.current)||void 0===e||e.setAttribute("tabindex","0"),null===(t=w.current)||void 0===t||t.addEventListener("DOMMouseScroll",C),null===(i=w.current)||void 0===i||i.focus(),()=>{var e;null===(e=w.current)||void 0===e||e.removeEventListener("DOMMouseScroll",C)}},[t]),t)?(0,n.jsx)("div",{className:d.default.mask,ref:w,onWheel:C,children:(0,n.jsxs)("div",{className:a()(d.default.modalContainer,_),"data-e2e":"report-container",children:[x&&(0,n.jsx)("div",{className:d.default.close,onClick:()=>{"function"==typeof y&&y(!1)},"data-e2e":"report-container-close",children:(0,n.jsx)(u.n,{width:36,height:36,src:c.Z})}),o&&(0,n.jsx)("div",{className:d.default.title,children:o}),(0,n.jsx)("div",{className:d.default.content,children:i}),(0,n.jsx)("div",{className:d.default.footer,children:r})]})}):null}},702422:function(e,t,i){i.d(t,{Y:function(){return r}});var n=i(259202);i(611542);var l=i(538604),o=i(825211),a=i.n(o);let r=e=>{let{label:t,value:i,checked:o,disabled:r,className:s,style:u,onCheck:d}=e;return(0,n.jsxs)("div",{className:a()(l.default.container,s),style:u,children:[(0,n.jsx)("div",{onClick:()=>{"function"==typeof d&&d(i)},className:a()(l.default.radio,{[l.default.checked]:o,[l.default.disabled]:r})}),t&&(0,n.jsx)("span",{className:l.default.label,children:t})]})}},428992:function(e,t,i){i.d(t,{n:function(){return u}});var n=i(590921),l=i(259202),o=i(611542),a=i(70570),r=i(825211),s=i.n(r);let u=o.memo(e=>{let{src:t,width:i=18,height:o=18,color:r,viewBox:u,className:d="",onClick:c=()=>void 0,style:f={}}=e,h=r?(0,n._)({fill:r},f):(0,n._)({},f);return(0,l.jsx)(t,(0,n._)({className:s()(r?"":a.default.svg,d),width:i,height:o,viewBox:u||"0 0 36 36",onClick:c},h))})},886245:function(e,t,i){i.d(t,{K:function(){return s}}),i(612222);var n=i(259202),l=i(611542),o=i(825211),a=i.n(o),r=i(577938);let s=e=>{let{notResize:t=!1,value:i,onChange:o,placeholder:s,maxLength:u,width:d,className:c,minHeight:f}=e,h=l.useRef(null),[v,m]=l.useState(),g=l.useCallback(e=>{let t=e.target.value;t.length<=u&&o(t)},[o]);return(0,n.jsxs)("div",{style:{width:d},className:a()(r.default.textareaContainer,c),children:[(0,n.jsx)("textarea",{value:i,ref:h,style:{minHeight:f,height:v},onChange:g,onKeyDown:e=>e.stopPropagation(),placeholder:s,className:r.default.textarea}),void 0!==u&&(0,n.jsxs)("div",{className:a()(r.default.count,{[r.default.overflow]:i.length>u}),children:[i.length,"/",u]})]})}},402218:function(e,t,i){i.d(t,{F:function(){return y}});var n,l=i(7979),o=i(590921),a=i(874155);i(930798),i(612222);var r=i(259202),s=i(825211),u=i.n(s),d=i(611542),c=i(781111),f=i(895184),h=i(664618);let v=null,m=null,g=null,p=null,_={text:"",duration:3e3};class y extends(n=d.Component){static create(e){if(v)return e&&e(v);g=document.body,!document.querySelector("#toastContainer")&&((p=document.createElement("div")).className=h.default.toastWrapper,p.id="toastContainer"),g.appendChild(p),c.render((0,r.jsx)(y,{ref:t=>{v=t,e&&e(v)}}),p)}static info(e,t){let i=(0,o._)({},_);"string"==typeof e?(i.text=e,i.root=t):"object"==typeof e&&null!==e&&(i=(0,o._)((0,a._)((0,o._)({},_),{root:t}),e));let n=document.fullscreenElement||document.getElementsByClassName("xgplayer-fullscreen-parent")[0];(0,f.r)()&&n&&(i.root=n),this.textList.push(i),this.create(e=>{!m&&e&&e.handleShowToast()})}handleShowToast(){m&&(clearTimeout(m),m=null);let e=y.textList.shift();this.setState({showToast:!0,options:e}),m=setTimeout(()=>{y.textList.length?this.handleCloseToast(()=>{setTimeout(this.handleShowToast.bind(this),50)}):(this.handleCloseToast(),this.destroy()),m=null},e.duration)}handleCloseToast(e){this.setState({showToast:!1},()=>e&&e())}destroy(){g.removeChild(p),v=null}render(){let{showToast:e,options:t}=this.state,i=e&&t&&(0,r.jsx)("div",{className:u()(h.default.toast,t.className,{[h.default.parentToastWrapper]:t.root||(0,f.r)()}),children:t.text});return(0,r.jsx)(d.Fragment,{children:t&&t.root?c.createPortal(i,t.root):i})}constructor(...e){super(...e),(0,l._)(this,"state",{showToast:!1})}}(0,l._)(y,"textList",[])},857695:function(e,t,i){i.d(t,{e:function(){return m}});var n=i("590921"),l=i("874155");i("612222"),i("347885");var o=i("259202"),a=i("611542"),r=i("781111"),s=i("876085");let u=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,n._)({width:4,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M0 0a8 8 0 0 0 2.168 5.476l1.174 1.25a2 2 0 0 1 0 2.738l-1.174 1.25A8 8 0 0 0 0 16.19V0z",fill:"#323442"})})));var d=i("428992"),c=i("825211"),f=i.n(c);i("238658");let h=e=>{let t;return"string"==typeof e&&(t=document.querySelector(e)),"function"==typeof e&&(t=e()),"object"==typeof e&&e instanceof window.HTMLElement&&(t=e),t||document.body};var v={left:"top",right:"top",top:"left",bottom:"left"};let m=e=>{let{type:t="left",text:i,offsetArrow:c,offsetContainer:m,className:g,children:p,onTipClick:_,renderContent:y,clickHidden:x=!1,target:w,offsetWidth:C=0}=e,[S,b]=(0,a.useState)({width:0,height:0}),[N,A]=(0,a.useState)(t),[k,I]=(0,a.useState)(!1),[j,E]=(0,a.useState)({}),P=(0,a.useRef)(null),L=(0,a.useRef)(),T=(0,a.useRef)(null),R=(0,a.useMemo)(()=>h(w),[w]),D=(0,a.useMemo)(()=>{var e;return e=R,"[object HTMLBodyElement]"===Object.prototype.toString.call(e)},[R]),M=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,l=window.innerWidth,o=window.innerHeight;return{left:e<0?e:0,top:t<0?t:0,right:e+i>l?l-e-i:0,bottom:t+n>o?o-t-n:0}},B=function(){clearTimeout(T.current),T.current=setTimeout(()=>{I(!1)},200)},F=(0,a.useCallback)(()=>{if(!P.current)return{};let e=L.current.getBoundingClientRect(),{width:i,height:o}=e,a=D?e.x:0,r=D?e.y:0,s=(S.width-i)/2,u=(S.height-o)/2;if(["left","right"].includes(t)){switch(t){case"left":a-=S.width+10;break;case"right":a+=i+10}"number"==typeof m?r+=m:r+=-u}else if(["top","bottom"].includes(t)){switch(t){case"top":r-=S.height+10;break;case"bottom":r+=o+10}"number"==typeof m?a+=m:a+=-s}if(D){let{top:e,left:n,right:l,bottom:s}=M(a,r,S.width,S.height);A(t),["left","right"].includes(t)?(e&&(r-=e),s&&(r+=s),n&&!l&&(a+=S.width+20+i,A("right")),l&&!n&&(a-=S.width+20+i,A("left"))):["top","bottom"].includes(t)&&(n&&(a-=n+C),l&&(a+=l-C),e&&!s&&(r+=S.height+20+o,A("bottom")),s&&!e&&(r-=S.height+20+o,A("top")))}return(0,l._)((0,n._)({},j),{left:`${a}px`,top:`${r}px`})},[j,S,m,t,D]),O=(0,a.useCallback)(()=>{let e=a.Children.only(p);return a.cloneElement(e,{onMouseEnter:t=>{var i,n;clearTimeout(T.current),I(!0),L.current=t.target,E(F()),null==e||null===(n=e.props)||void 0===n||null===(i=n.onMouseEnter)||void 0===i||i.call(n,t)},onMouseLeave:()=>{B()}})},[F,p]);(0,a.useEffect)(()=>{let e=e=>{if(!!k)E(F())};return document.addEventListener("scroll",e,!0),()=>{document.removeEventListener("scroll",e,!0)}},[F,k]),(0,a.useLayoutEffect)(()=>{if(!!P.current)b(P.current.getBoundingClientRect())},[k]),(0,a.useLayoutEffect)(()=>{L.current&&E(F())},[S]);let U=(0,a.useMemo)(()=>(0,o.jsxs)("div",{ref:P,style:(0,n._)({position:D?"fixed":"absolute"},j),onMouseEnter:e=>{clearTimeout(T.current)},onMouseLeave:()=>{B()},className:f()(s.default.tooltip,s.default[t],g),onClick:e=>{null==_||_(e),x&&I(!1)},children:[(0,o.jsx)(d.n,{width:4,height:17,src:u,style:{[v[N]]:`${c}%`},className:f()(s.default.icon,s.default[N]),viewBox:"0 0 4 17"}),(0,o.jsx)("span",{className:"",children:y||i})]}),[N,g,x,c,_,y,i,j,t,D]);return(0,o.jsxs)(o.Fragment,{children:[k&&r.createPortal(U,R),O()]})}},131824:function(e,t,i){let n;var l=i(7979);i(632852);var o=i(877435),a=i(770492),r=i.n(a);class s{initUploader(e,t){let{token:i,service_id:n,origin:l,template:o}=e,a=JSON.parse(i);this.bytedUploader=new(r())({userId:t,appId:1128,stsToken:a,imageConfig:{serviceId:n}}),this.uploaderOptions={stsToken:a,serviceId:n,origin:l,template:o}}uploadFile(e){let t=this.bytedUploader.addImageFile({file:Array.from(e).map(e=>new Blob([e])),stsToken:this.uploaderOptions.stsToken});return this.bytedUploader.start(t),new Promise((e,t)=>{this.bytedUploader.on("complete",t=>{e(t.uploadResult)}),this.bytedUploader.on("error",e=>{t(e.extra)})})}constructor(e){(0,l._)(this,"bytedUploader",null),(0,l._)(this,"uploaderOptions",null),(0,o.U2)("/aweme/v1/report/upload/auth/",{}).then(t=>{let{token:i,service_id:n,origin:l,template:o,status_code:a}=t;if(0===a)this.initUploader({token:i,service_id:n,origin:l,template:o},e.userId)})}}t.Z=function(e){return!n&&(n=new s({userId:e})),n}},813625:function(e,t,i){i.d(t,{d:function(){return h},s:function(){return f}}),i(482392),i(612222);var n=i(611542),l=i(910924),o=i(356789),a=i(819769),r=i(245086),s=i(293059),u=i(238560);let d=e=>window.location.pathname.startsWith(`/${e}`),c=!1,f=e=>{(0,n.useEffect)(()=>{let t=o.listen(o.EVENT.changeVideoSideBar,t=>{let{isShowRelatedCard:i,isShowComment:n,lastStatus:o}=t;(n&&i)===!((null==o?void 0:o.isShow)&&(null==o?void 0:o.tab)===l.L.Comment)&&e&&(c=!0)});return()=>{null==t||t()}},[e])},h=e=>{let{canShowDownloadBar:t,type:i}=e,[l,f]=(0,n.useState)(!0),[h,v]=(0,n.useState)(()=>{let{isCommentShow:e}=a.Le.getConfig(a.gI.IsDownloadBarShow)||{};return e&&f(!1),!!e}),m=(0,n.useCallback)(e=>{if(!!t&&!!(0,s.A8)(e))u.Z.sendLog("addToDesktopShow",{enter_from:(0,r.vM)(),type:"comment"}),(0,s.D0)(e),v(!0),"comment"===e&&(a.Le.setConfig(a.gI.IsDownloadBarShow,{isCommentShow:!0}),o.emit(o.EVENT.showClientDownloadGuide,{isShow:!0,type:"comment",text:"",isBar:!0}))},[t]),g=(0,n.useCallback)(e=>{if(!!t&&!!h)"comment"===e&&(a.Le.setConfig(a.gI.IsDownloadBarShow,{isCommentShow:!1}),o.emit(o.EVENT.showClientDownloadGuide,{isShow:!1,type:"comment",text:"",isBar:!0})),v(!1)},[t,h]);return(0,n.useEffect)(()=>{if(!t)return()=>null;let e=o.listen(o.EVENT.showClientDownloadGuide,e=>{let{isShow:t,type:n,isBar:l}=e;if(n===i&&!!l)"comment"===n?v(t):t?(0,s.A8)(n)&&((0,s.D0)(n),v(!0)):v(!1)});return()=>{null==e||e()}},[t,i]),(0,n.useEffect)(()=>{c&&(g("comment"),c=!1)},[g,c]),{showBar:m,hideBar:g,isShow:h,isHighlight:l,canShowLightComment:d("search")||d("video")}}},447362:function(e,t,i){i.d(t,{J:function(){return u},e:function(){return d}});var n=i(259202);i(611542);var l=i(825211),o=i.n(l),a=i(952013),r=i(699233),s=i(255958);let u=e=>{let{className:t="",svgClassName:i=""}=e;return(0,n.jsxs)("div",{className:o()(a.default.PictureWordIconContainer,t),children:[(0,n.jsx)(r.Z,{className:o()(a.default.icon,i),src:s.Z,width:12,height:12,viewBox:"0 0 12 12"}),"图文"]})},d=e=>{let{className:t=""}=e;return(0,n.jsx)("div",{className:o()(a.default.PictureIconContainer,t),children:(0,n.jsx)(r.Z,{src:s.Z,width:12,height:12,viewBox:"0 0 12 12"})})}},913046:function(e,t,i){i.d(t,{s:function(){return o}}),i(612222),i(347885);var n=i(611542),l=i(654738);let o=()=>{let[e,t]=(0,l.x)();return{handleHiddenLog:(0,n.useCallback)(e=>{if(![l.O.LogTrace,l.O.UserInfo].includes(e))return!0;t()},[])}}},367503:function(e,t,i){i.d(t,{IG:function(){return g},T3:function(){return m}});var n=i("590921"),l=i("874155"),o=i("250751");i("612222");var a=i("259202"),r=i("611542"),s=i("825211"),u=i.n(s),d=i("713017"),c=i("13351"),f=i("943393"),h=i("405730"),v=i("342792");let m=e=>{var t,i,s,f,m,g,p,_,y;let x;let{awemeInfo:w,isRenderInSSR:C,useServerFilterCover:S=(0,d.b_)()||(0,d.Sb)()||(0,c.tq)()||C,className:b,maskClassName:N,abtestData:A,priorityServerBackupBg:k}=e,I=(0,o._)(e,["awemeInfo","isRenderInSSR","useServerFilterCover","className","maskClassName","abtestData","priorityServerBackupBg"]),j=!1,E=!1,P=!!(null==w?void 0:null===(t=w.video)||void 0===t?void 0:t.gaussianCover);S||(0,d.G6)()?P&&(!(0,d.G6)()||(0,d.G6)()&&(null==A?void 0:A.playerSsr)||C)?(j=!0,x="low"):E=!0:k&&P&&(j=!0,x="low");let L=(0,d.GP)(),T=!1,R=(null==w?void 0:null===(i=w.video)||void 0===i?void 0:i.originCover)||(null==w?void 0:null===(g=w.cellRoom)||void 0===g?void 0:null===(m=g.rawdata)||void 0===m?void 0:null===(f=m.cover)||void 0===f?void 0:null===(s=f.url_list)||void 0===s?void 0:s[0])||(null==w?void 0:null===(y=w.varietyVideo)||void 0===y?void 0:null===(_=y.cover)||void 0===_?void 0:null===(p=_.url_list)||void 0===p?void 0:p[0]);E?R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAAALQAQMAAAD1s08VAAAAA1BMVEUAAACnej3aAAAAlElEQVR42uzBgQAAAACAoP2pF6kCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOD24JAAAAAAQND/154wAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAqwDE3wABfajOdgAAAABJRU5ErkJggg==":j&&P&&(R=w.video.gaussianCover,T=!0);let[D,M]=(0,r.useState)(!1),B=C?v.r:r.Fragment;return(0,a.jsxs)("div",{className:u()(b,{[h.default.backgroundImg]:!E,[h.default.backgroundImgSarari]:E,[h.default.backgroundImgQq]:L,[h.default.backgroundImgFirefox]:(0,d.vU)(),[h.default.hideFilterBlur]:T&&P,[h.default.isError]:D}),children:[(0,a.jsx)("img",(0,l._)((0,n._)({},I),{fetchPriority:(null==I?void 0:I.fetchPriority)||x,src:R,onError:()=>M(!0)})),(0,a.jsx)(B,{children:!E&&(0,a.jsx)("div",{className:u()(h.default.backgroundMask,N)})})]})},g=e=>{let{player:t,awemeInfo:i,isRenderInSSR:s,isActive:c,className:m,maskClassName:g,abtestData:p,priorityServerBackupBg:_}=e,y=(0,o._)(e,["player","awemeInfo","isRenderInSSR","isActive","className","maskClassName","abtestData","priorityServerBackupBg"]),x=(0,d.GP)(),w=s?v.r:r.Fragment,C=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(!t||!i||C.current)return;let e=()=>{let e=()=>{let e=null==t?void 0:t.video,n=document.getElementById(`myCanvas_${null==i?void 0:i.awemeId}`);n.getContext("2d").drawImage(e,0,0,null==n?void 0:n.width,null==n?void 0:n.height),C.current=!0};if(!c){(0,f.K)(e);return}e()};return t.on("canplay",e),()=>{t.off("canplay",e)}},[t,i]),(0,a.jsxs)("div",{className:u()(m,{[h.default.canvasWarpperFilter]:!0,[h.default.backgroundImg]:true,[h.default.backgroundImgSarari]:!1,[h.default.backgroundImgQq]:x,[h.default.backgroundImgFirefox]:(0,d.vU)()}),children:[(0,a.jsx)("canvas",(0,l._)((0,n._)({style:{width:"100%",height:"100%"}},y),{id:`myCanvas_${null==i?void 0:i.awemeId}`})),(0,a.jsx)(w,{children:(0,a.jsx)("div",{className:u()(h.default.backgroundMask,g)})})]})}},54581:function(e,t,i){i.d(t,{Y:function(){return o}}),i(612222);var n=i(910924),l=i(106649);let o=new Map([[n.L.Related,`${l.a.t("related",{},"相关推荐")}`],[n.L.AwemeRelated,`${l.a.t("related",{},"相关推荐")}`],[n.L.Music,`${l.a.t("music",{},"音乐")}`],[n.L.Topic,`${l.a.t("topic",{},"话题")}`],[n.L.Mix,`${l.a.t("mix",{},"合集")}`],[n.L.Series,`${l.a.t("series",{},"短剧")}`],[n.L.Comment,`${l.a.t("comment",{},"评论")}`],[n.L.Hot,`${l.a.t("hot",{},"热点")}`],[n.L.Author,`${l.a.t("ta_s_works",{},"TA的作品")}`],[n.L.Handpick,`${l.a.t("handplick",{},"编辑精选")}`],[n.L.Search,"搜索结果"],[n.L.History,`${l.a.t("history",{},"历史记录")}`],[n.L.Like,"TA的喜欢"],[n.L.Collection,"TA的收藏"],[n.L.CollectFolder,`${l.a.t("collect_folder",{},"收藏夹")}`],[n.L.AbstractList,`${l.a.t("abstract_list",{},"摘要")}`],[n.L.Record,`${l.a.t("record",{},"观看历史")}`]])},335060:function(e,t,i){i.d(t,{L:function(){return n}}),i(612222),i(238658),i(459167),i(227470),i(259202),i(611542),i(690352),i(825211);var n={Comment:"comment",VideoInfoTitle:"videoInfoTitle",SearchVideoInfo:"searchVideoInfo",VideoDetailTitle:"videoDetailTitle"}},324887:function(e,t,i){i.d(t,{N:function(){return g}}),i(347885),i(612222),i(459167),i(227470);var n=i(259202),l=i(611542),o=i(825211),a=i.n(o),r=i(432097),s=i(606660),u=i(910924),d=i(356789),c=i(983107),f=i(403335),h=i(54581),v=i(456713),m=i(107003);let g=e=>{let{exitTextProps:t,onHandleReturn:i,positionFixed:o,clientHomeStyle:u}=e,d=p(t),h=(0,l.useRef)(),g=[s.ClientHomeStyle.V1,s.ClientHomeStyle.V2,s.ClientHomeStyle.V3].includes(u);return(0,n.jsx)("div",{className:a()("isDark",m.default.container,o&&m.default.fixed,g&&m.default.clientHomeStyleWrap),children:(0,n.jsx)(r.u,{getPopupContainer:()=>h.current||document.body,position:"bottom",content:d,children:(0,n.jsxs)("div",{className:m.default.circle,onClick:i,ref:h,children:[!g&&(0,n.jsx)(v.z,{size:"large",svg:(0,n.jsx)(c.Z,{}),className:m.default.return}),g&&(0,n.jsx)(v.z,{svg:(0,n.jsx)(f.Z,{style:{fontSize:"24px"}}),className:a()(m.default.back)})]})})})},p=e=>{let{getCurrentTab:t,modalEnterFrom:i,isSelf:n,uidEquals:o}=e,[a,r]=(0,l.useState)("");return(0,l.useEffect)(()=>{let e=null==t?void 0:t();if(e===u.L.Comment)return;let l=h.Y.has(e)?`退出${h.Y.get(e)}`:"";switch(e){case u.L.Like:"userLike"===i&&n&&(l=l.replace("TA","我"));break;case u.L.Collection:"userCollection"===i&&n&&(l=l.replace("TA","我"));break;case u.L.Author:"userPost"===i&&o&&n&&(l=l.replace("TA","我"))}r(l||"退出")},[t,i,n,o]),(0,l.useEffect)(()=>d.listen(d.EVENT.changeTab,e=>{let t=h.Y.has(e)?`退出${h.Y.get(e)}`:"";t&&r(t)}),[]),a}},555835:function(e,t,i){i.d(t,{Ci:function(){return m},aW:function(){return h},cy:function(){return s},fF:function(){return _},mM:function(){return d},nJ:function(){return p},vV:function(){return c},zo:function(){return v}});var n=i(590921),l=i(874155);i(612222),i(632852),i(238658),i(677546),i(227470);var o=i(886330),a=i(579309),r=i(477509);let s=function(){let e={};return{setPreloadCache:(t,i)=>{e[t]=i},getPreloadCache:t=>{if(t in e)return e[t]}}}(),u=new Map;var d={PROFILE_BTN_CLICKED:"profileBtnClicked",COMMENT_BTN_CLICKED:"commentBtnClicked"},c={PROFILE_PRELOAD:"profilePreload",COMMENT_PRELOAD:"commentPreload"};let f=async e=>{try{return await o.U2({key:e,defaultValue:a.TCC_DEFAULT_VALUE_MAP.get(e)})}catch(e){return null}};async function h(e){let t=u.get(e);if(t)return t;let i=await f(e);return u.set(e,i),i}let v=function(e,t,i,n,l){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0,r=arguments.length>7?arguments[7]:void 0,u="commentPreload"===i,d=u?"commentInferenceResult":"profileInferenceResult",c=s.getPreloadCache(d)||{};c={scene:u?"comment_preload_ml":"profile_preload_ml",model_name:n,s_result:String(t),f_result:e,threshold:l,with_feature:o.toString(),is_ad:a,vid:r},s.setPreloadCache(d,c)},m=()=>{let e=s.getPreloadCache("commentInferenceResult")||{};if(e&&Object.keys(e).length>0){let t=s.getPreloadCache("commentBtnClicked"),i=(0,l._)((0,n._)({},e),{s_real:String(t),f_real:t?1:0});r.i.sendLog("aiPreloadResult",i)}g()},g=()=>{s.setPreloadCache("commentInferenceResult",{}),s.setPreloadCache("profileInferenceResult",{}),s.setPreloadCache("commentBtnClicked",!1),s.setPreloadCache("profileBtnClicked",!1)},p=e=>{s.setPreloadCache(e,!0)};function _(e){return function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];try{window.location.search.indexOf("pylon-debug")}catch(e){}}}},641559:function(e,t,i){i(612222);var n=i(259202),l=i(611542),o=i(623176),a=i(825211),r=i.n(a),s=i(552432),u=i.n(s),d=i(819769),c=i(245086),f=i(713017),h=i(600743),v=i(106649),m=i(583128),g=i(606130),p=i(982913);t.Z=l.memo(e=>{let{children:t,lineClamp:i=2,btnClassName:a,onlyKey:s="",maxLine:_=999,btnOnClick:y,renderContent:x,lineHeight:w=20,renderButton:C,player:S,showExpandButton:b=!0,renderBeforeContent:N,isMobile:A,isActive:k}=e,[I,j]=(0,l.useState)(!1),[E,P]=(0,l.useState)(!1),[L,T]=(0,l.useState)(0),R=(0,l.useRef)(_);R.current=_;let[D,M]=(0,l.useState)(i),{isFullScreen:B,isCssFullScreen:F}=(0,l.useContext)(m.C),O=(0,l.useRef)(null),[U,H]=(0,l.useState)(!1),[W,V]=(0,l.useState)(!1),[q,Z]=(0,l.useState)(()=>{let e=d.Le.getConfig(d.gI.IsInModalVideo),t=(null==e?void 0:e.isInModal)||!1;return"video_detail"===(0,c.vM)()&&!B&&!F&&!t&&!0});(0,l.useEffect)(()=>{if(S){let e=e=>{let t=d.Le.getConfig(d.gI.IsInModalVideo),i=(null==t?void 0:t.isInModal)||!1;"video_detail"!==(0,c.vM)()||e||F||i?Z(!1):Z(!0)};return S.on(o.FULLSCREEN_CHANGE,e),()=>{S.off(o.FULLSCREEN_CHANGE,e)}}},[]),(0,l.useEffect)(()=>{H((0,f.i7)()&&!(0,f.GP)())},[]);let K=(0,l.useCallback)(()=>{(0,l.startTransition)(()=>{if((null==O?void 0:O.current)&&!E){let{scrollHeight:e,clientHeight:t}=null==O?void 0:O.current;t>0&&(e-t>15||e>=w*i+15)?j(!0):j(!1)}})},[w,i,E]);return(0,l.useEffect)(()=>{if(!E){var e;null===(e=O.current)||void 0===e||e.scrollTo(0,0)}},[E]),(0,l.useEffect)(()=>{let e=null;return O.current&&(e=h.Z.bind(O.current,K)),()=>{e&&(null==e||e())}},[K]),(0,l.useEffect)(()=>{P(!1),M(i),j(!1),K()},[s,i,w]),(0,l.useEffect)(()=>{!k&&(P(!1),M(i),j(!1),K())},[k,i]),(0,l.useEffect)(()=>{if(O.current&&E&&S){var e,t,i,n,l;let o=e=>{var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e)},a=e=>{var t,i;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),(null==O?void 0:null===(i=O.current)||void 0===i?void 0:i.scrollTop)?V(!0):V(!1)},r=u()(()=>{var e,t,i,n;T(((null==S?void 0:null===(n=S.config)||void 0===n?void 0:null===(i=n.el)||void 0===i?void 0:null===(t=i.getBoundingClientRect)||void 0===t?void 0:null===(e=t.call(i))||void 0===e?void 0:e.height)-48)/4)},200);return r(),null===(e=O.current)||void 0===e||e.addEventListener("wheel",o),null===(t=O.current)||void 0===t||t.addEventListener("scroll",a),null===(i=O.current)||void 0===i||i.addEventListener("mousedown",o),null===(n=O.current)||void 0===n||n.addEventListener("pointerdown",o),null===(l=O.current)||void 0===l||l.addEventListener("touchstart",o),window.addEventListener("resize",r),()=>{var e,t,i,n,l;null===(e=O.current)||void 0===e||e.removeEventListener("wheel",o),null===(t=O.current)||void 0===t||t.removeEventListener("scroll",a),null===(i=O.current)||void 0===i||i.removeEventListener("mousedown",o),null===(n=O.current)||void 0===n||n.removeEventListener("pointerdown",o),null===(l=O.current)||void 0===l||l.removeEventListener("touchstart",o),window.removeEventListener("resize",r)}}},[E,S]),(0,n.jsxs)("div",{className:r()(g.default.wrapper,{[g.default.notChrome]:!U,[g.default.isDetailSearch]:q,[g.default.isFixAfter]:!b,[g.default.expandMask]:W}),children:[(0,n.jsxs)("div",{ref:O,className:r()(g.default.text,{[g.default.showButton]:I,[g.default.expandText]:E,[g.default.isMobile]:A,[g.default.lowChome]:(0,f.h5)("69.0"),[g.default.isSafari]:(0,f.G6)()}),style:{"--lineClamp":D,"--lineHeight":`${w}px`,"--maxHeight":`${w*D}px`,maxHeight:E?L:""},children:[N&&N(I),x&&x({isUnfold:E}),"function"==typeof t?t(I):t]}),(0,n.jsx)("div",{className:r()(g.default.btnWrap,{[g.default.btnShow]:I,[g.default.isUnfold]:E}),style:{height:`${w-2}px`},children:b&&(0,n.jsx)("button",{type:"button",onClick:e=>{if(!E){let e=(0,p.Y)(w,S);e&&(R.current=e)}M(e=>e===i?R.current:i),P(e=>!e),y&&y(E),(null==e?void 0:e.target)&&e.target.blur()},className:r()(a,g.default.btn),children:C?C(E):E?v.a.t("fold",{},"收起"):v.a.t("expand",{},"展开")})})]})})},132586:function(e,t,i){i.d(t,{F2:function(){return H},hp:function(){return Z}});var n=i("590921");i("612222"),i("526789"),i("130458"),i("632852");var l=i("259202"),o=i("611542"),a=i("825211"),r=i.n(a),s=i("623176"),u=i("67108"),d=i.n(u),c=i("124797"),f=i("688497"),h=i("511700"),v=i("147083"),m=i("245086"),g=i("13351"),p=i("656371"),_=i("356789"),y=i("600743"),x=i("51811"),w=i("354795"),C=new w.h({hover_bottom_bar:{eventName:"hover_bottom_bar",params:{enter_from:"",bar_type:""}},compilationEntranceShow:{eventName:"compilation_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceShow:{eventName:"hot_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},compilationEntranceClick:{eventName:"compilation_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:"",entrance_cnt:1,is_update:0}},hotEntranceClick:{eventName:"hot_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0,entrance_cnt:1}},moreVideoEntranceShow:{eventName:"more_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},moreVideoEntranceClick:{eventName:"more_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0,entrance_cnt:1,words_num:0,group_id:"",impr_id:""}},relatedVideoEntranceShow:{eventName:"related_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},relatedVideoEntranceClick:{eventName:"related_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",entrance_cnt:1}},bottomBarShow:{eventName:"bottom_bar_show",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:""}},bottomBarClick:{eventName:"bottom_bar_click",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",action:"open"}},relatedVideoClick:{eventName:"related_video_click",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:0}},compilationNextVideoShow:{eventName:"compilation_next_video_show",params:{enter_from:"",group_id:"",compilation_id:""}},compilationNextVideoHover:{eventName:"compilation_next_video_hover",params:{enter_from:"",group_id:"",compilation_id:""}},compilationNextVideoClick:{eventName:"compilation_next_video_click",params:{enter_from:"",group_id:"",compilation_id:""}},aiChatButtonShow:{eventName:"ai_chat_button_show",params:{enter_from:"",group_id:"",ai_chat_button_position:""}},aiChatButtonClick:{eventName:"ai_chat_button_click",params:{enter_from:"",group_id:"",ai_chat_button_position:""}}}),S=i("133122"),b=i("555761"),N=i("863749"),A=i("874155");let k=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,A._)((0,n._)({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("mask",{id:"hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:-2,width:10,height:14,children:(0,l.jsx)("path",{d:"M.5-1.05h9.208v8.234A4.516 4.516 0 0 1 5.192 11.7 4.692 4.692 0 0 1 .5 7.008V-1.05z",fill:"#C4C4C4"})}),(0,l.jsxs)("g",{mask:"url(#hot_svg__a)",children:[(0,l.jsx)("path",{d:"M8.393 3.553c.961 1.063 1.315 2.125 1.315 3.188 0 1.416-.067 1.796 0 1.77-1.858.738-5.122-.93-6.02-3.187-.899-2.257.38-4.25 2.353-5.312.078-.042.126.027.126.132 0 1.638 1.265 2.347 2.226 3.41z",fill:"url(#hot_svg__paint0_linear_23665_194053)"}),(0,l.jsx)("path",{d:"M9.545 8.872c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.322-1.645.709-2.48.709-3.542.355-.69-.23-1.638-.709-1.934-1.771-.329 1.416.66 4.065 2.157 4.964 1.497.899 5.09.348 5.28 0z",fill:"url(#hot_svg__paint1_linear_23665_194053)"}),(0,l.jsx)("path",{d:"M1.775 3.339C1.534 3.58.5 4.826.5 6.816c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.77-5.656 0-6.021-.354-.9-.872-2.125-2.412-2.338-4.604-.029-.302-.042-.39-.283-.148z",fill:"url(#hot_svg__paint2_linear_23665_194053)"})]}),(0,l.jsxs)("defs",{children:[(0,l.jsxs)("linearGradient",{id:"hot_svg__paint0_linear_23665_194053",x1:3.536,y1:".28",x2:7.934,y2:6.743,gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{offset:".021",stopColor:"#FADF32"}),(0,l.jsx)("stop",{offset:".451",stopColor:"#EB9B46"}),(0,l.jsx)("stop",{offset:".782",stopColor:"#EB5854"})]}),(0,l.jsxs)("linearGradient",{id:"hot_svg__paint1_linear_23665_194053",x1:2.616,y1:4.79,x2:10.598,y2:9.517,gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#FFC533"}),(0,l.jsx)("stop",{offset:".436",stopColor:"#F26461"}),(0,l.jsx)("stop",{offset:".809",stopColor:"#FF0544"})]}),(0,l.jsxs)("linearGradient",{id:"hot_svg__paint2_linear_23665_194053",x1:8.195,y1:11.127,x2:".577",y2:4.974,gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{offset:".134",stopColor:"#FA0951"}),(0,l.jsx)("stop",{offset:".354",stopColor:"#FA3E65"}),(0,l.jsx)("stop",{offset:".881",stopColor:"#F2AE49"}),(0,l.jsx)("stop",{offset:".998",stopColor:"#FAC032"})]})]})]}))),I=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,A._)((0,n._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("g",{filter:"url(#related_svg__filter0_d_914_35212)",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 3a1 1 0 0 1 1-1h7a2 2 0 0 1 2 2v5a1 1 0 0 1-1 1V5a2 2 0 0 0-2-2H3zM1 5a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V5zm6.75 2.567a.5.5 0 0 1 0 .866L5.5 9.732a.5.5 0 0 1-.75-.433V6.701a.5.5 0 0 1 .75-.433l2.25 1.299z",fill:"#fff"})}),(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:"related_svg__filter0_d_914_35212",x:0,y:1,width:14,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,l.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,l.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,l.jsx)("feOffset",{}),(0,l.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,l.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,l.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_914_35212"}),(0,l.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_914_35212",result:"shape"})]})})]}))),j=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,A._)((0,n._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("g",{filter:"url(#chapter_svg__filter0_d_43627_262165)",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.65 2a.65.65 0 1 0 0 1.3h8.7a.65.65 0 1 0 0-1.3h-8.7zm2.139 8.664a.28.28 0 0 0 0-.483L2.622 8.908a.28.28 0 0 0-.422.242v2.546a.28.28 0 0 0 .422.242l2.167-1.274zM2 6.517a.65.65 0 0 1 .65-.65h8.7a.65.65 0 1 1 0 1.3h-8.7a.65.65 0 0 1-.65-.65zm4.65 3.216a.65.65 0 1 0 0 1.3h4.7a.65.65 0 1 0 0-1.3h-4.7z",fill:"#fff"})}),(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:"chapter_svg__filter0_d_43627_262165",x:-1,y:-1,width:16,height:16,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,l.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,l.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,l.jsx)("feOffset",{}),(0,l.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,l.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,l.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_43627_262165"}),(0,l.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_43627_262165",result:"shape"})]})})]}))),E=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,A._)((0,n._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("g",{filter:"url(#semi-icons-search_svg__filter0_d_2327_94143)",children:(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.25 2a4.25 4.25 0 1 0 2.428 7.739l2.042 2.041a.75.75 0 1 0 1.06-1.06L9.74 8.678A4.25 4.25 0 0 0 6.25 2zM3.5 6.25a2.75 2.75 0 1 1 5.5 0 2.75 2.75 0 0 1-5.5 0z",fill:"#fff"})}),(0,l.jsx)("defs",{children:(0,l.jsxs)("filter",{id:"semi-icons-search_svg__filter0_d_2327_94143",x:1,y:1,width:12,height:12,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,l.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,l.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,l.jsx)("feOffset",{}),(0,l.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,l.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,l.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,l.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2327_94143"}),(0,l.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2327_94143",result:"shape"})]})})]})));var P=i("477509");let L=e=>{let{title:t,onClick:i,itemClassName:n,awemeInfo:o,chapterProgress:a,isFirstTag:s,showMiniTitle:u}=e,d=()=>{var e;let t="number"==typeof a&&-1!==a;return{enter_from:(0,m.mo)(),enter_from_merge:(0,m.vM)(),group_id:null==o?void 0:o.awemeId,author_id:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.uid,chapter_sequence_num_impr:t?a+1:null}},h=(0,f.Y)(()=>{P.i.sendLog("chapterTagShow",d())});return(0,l.jsxs)("div",{className:r()(S.default.tag,S.default.chapterTag,n,{[S.default.noFirst]:!s}),onClick:()=>{P.i.sendLog("chapterTagClick",d()),i(a)},ref:h,children:[(0,l.jsx)("span",{className:r()(S.default.tagBg)}),(0,l.jsx)("span",{className:r()(S.default.tagIcon),children:H.get(c.WZ.Chapter)}),(0,l.jsx)("span",{className:r()(S.default.tagText),children:u?"章节要点":t})]})};i("238658");let T=e=>{let{className:t}=e,i=(0,o.useMemo)(()=>`paint0_linear_29_${Math.random().toString(36).substring(2,15)}`,[]);return(0,l.jsxs)("svg",{className:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M11.4435 7.12305H10.0543V10.7496H11.4435V7.12305Z",fill:"#E8E8E9"}),(0,l.jsx)("path",{d:"M4.82377 10.7498L6.50665 7.00456L8.18954 10.7498H9.70893L7.158 5.25061H5.85518L3.30425 10.7498H4.82377Z",fill:"#E8E8E9"}),(0,l.jsx)("path",{d:"M10.7477 6.72761C11.1773 6.72761 11.5256 6.37935 11.5256 5.94974C11.5256 5.52014 11.1773 5.17188 10.7477 5.17188C10.3181 5.17188 9.96988 5.52014 9.96988 5.94974C9.96988 6.37935 10.3181 6.72761 10.7477 6.72761Z",fill:"#E8E8E9"}),(0,l.jsx)("path",{d:"M14.5081 12.853C13.9615 12.1176 12.9426 11.9194 12.163 12.4006C11.9047 12.5601 11.6713 12.6986 11.5304 12.77C10.3605 13.3634 9.01917 13.7863 7.9112 13.8161L7.89396 13.8167C4.79597 13.9707 2.15574 11.6839 2.00836 8.7192C1.838 5.29261 4.61037 2.36036 8.18847 2.18251C10.7992 2.05274 13.1632 3.92921 13.3529 6.42119C13.4769 8.04962 12.9506 9.28487 12.1247 10.1914C12.4603 10.527 12.7957 10.8625 13.1313 11.1981C14.3879 9.91548 14.9783 8.24709 14.7957 6.25458C14.5044 3.07528 11.7254 0.64138 8.12015 0.807995C3.78342 1.00846 0.425767 4.60317 0.633723 8.78752C0.818448 12.5046 4.09654 15.3739 7.94505 15.1917C7.94817 15.1917 7.95116 15.1916 7.95429 15.1915C7.95704 15.1913 7.95966 15.1915 7.96228 15.1912C9.50341 15.1485 11.2601 14.5513 12.8584 13.6115C13.0561 13.4952 13.3102 13.5482 13.447 13.7323L14.2622 14.8294L15.3669 14.0084L14.5082 12.8529L14.5081 12.853Z",fill:`url(#${i})`}),(0,l.jsx)("defs",{children:(0,l.jsxs)("linearGradient",{id:i,x1:"2.96063",y1:"3.01023",x2:"14.6635",y2:"14.7132",gradientUnits:"userSpaceOnUse",children:[(0,l.jsx)("stop",{stopColor:"#00E6F0"}),(0,l.jsx)("stop",{offset:"0.11",stopColor:"#05E3F0"}),(0,l.jsx)("stop",{offset:"0.24",stopColor:"#15DDF3"}),(0,l.jsx)("stop",{offset:"0.39",stopColor:"#2FD3F7"}),(0,l.jsx)("stop",{offset:"0.55",stopColor:"#52C4FC"}),(0,l.jsx)("stop",{offset:"0.61",stopColor:"#64BEFF"}),(0,l.jsx)("stop",{offset:"0.71",stopColor:"#4FADFF"}),(0,l.jsx)("stop",{offset:"0.92",stopColor:"#1B84FF"}),(0,l.jsx)("stop",{offset:"1",stopColor:"#0573FF"})]})})]})};var R=i("699233"),D=i("139444");i("482392"),i("347885"),i("532788");var M=i("35294"),B=i("770193"),F=i("222397");c.WZ.Mix,c.WZ.Series,c.WZ.Related,c.WZ.Hot;let O=(e,t)=>{let{seriesInfo:i,mixInfo:l,authorInfo:o,createTime:a,awemeId:r}=t;if(e===c.WZ.Series&&i.seriesId)return(0,M.Ab)({cursor:i.currentEpisode,seriesId:i.seriesId,count:1}).then(e=>{let{data:[t]}=e;return t});if(e===c.WZ.Mix&&l.mixId)return(0,B.FF)({cursor:l.currentEpisode,mixId:l.mixId,count:1}).then(e=>{let{data:[t]}=e;return t});if(e===c.WZ.AuthorCard){let e={locateItemId:r,userId:o.secUid,count:2};return Promise.all([(0,F.eG)((0,A._)((0,n._)({},e),{maxCursor:0})),(0,F.eG)((0,A._)((0,n._)({},e),{maxCursor:1e3*a}))]).then(e=>{let[{data:t},{data:i}]=e,n=t.findIndex(e=>e.awemeId===r)+1;return n>0&&n<t.length?t[n]:i[0]})}return Promise.resolve()},U={[c.WZ.Mix]:"compilation",[c.WZ.Series]:"playlet",[c.WZ.Related]:"related_video",[c.WZ.Hot]:"trending_topic",[c.WZ.RelatedSearch]:"related_search_anchor_v2"},H=new Map([[c.WZ.Mix,(0,l.jsx)(R.Z,{src:b.Z,width:12,height:12,viewBox:"0 0 12 12"},c.WZ.Mix)],[c.WZ.Series,(0,l.jsx)(R.Z,{src:N.Z,width:14,height:14,viewBox:"0 0 14 14"},c.WZ.Series)],[c.WZ.Hot,(0,l.jsx)(R.Z,{src:k,width:12,height:12,viewBox:"0 0 12 12"},c.WZ.Hot)],[c.WZ.Related,(0,l.jsx)(R.Z,{src:I,width:14,height:14,viewBox:"0 0 14 14"},c.WZ.Related)],[c.WZ.Chapter,(0,l.jsx)(R.Z,{src:j,width:14,height:14,viewBox:"0 0 14 14"},c.WZ.Chapter)]]),W=e=>{let{item:t,awemeInfo:i,feedbarCount:a,isShowUpdateText:u,player:d,reportExtraParams:h,abTestData:v,onMouseLeave:p,hasChapterTag:_,showMiniTitle:y}=e,{awemeId:x,mixInfo:w,relatedVideo:b,seriesInfo:N}=i,A=(0,o.useMemo)(()=>{let{totalEpisode:e,currentEpisode:t}=(null==i?void 0:i.mixInfo)||{};return u&&(null==i?void 0:i.mixInfo.mixId)?e===t?"已是最新集":`更新至第${e}集`:null},[u,i,null==i?void 0:i.mixInfo]),k=(0,o.useMemo)(()=>{let{totalEpisode:e,currentEpisode:t}=(null==i?void 0:i.seriesInfo)||{};return u&&(null==i?void 0:i.seriesInfo.seriesId)?e===t?"已是最新集":`更新至第${e}集`:null},[u,i,null==i?void 0:i.seriesInfo]),I=(0,f.x)(()=>{var e,l,o,r,s,u,d,f,v;if(t.type===c.WZ.Mix&&C.sendLog("compilationEntranceShow",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(s=i.authorInfo)||void 0===s?void 0:s.uid,compilation_id:null==w?void 0:w.mixId,entrance_cnt:a,is_update:(null==i?void 0:null===(u=i.mixInfo)||void 0===u?void 0:u.totalEpisode)===(null==i?void 0:null===(d=i.mixInfo)||void 0===d?void 0:d.currentEpisode)?0:1}),t.type===c.WZ.Related&&C.sendLog("relatedVideoEntranceShow",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(f=i.authorInfo)||void 0===f?void 0:f.uid,entrance_cnt:a}),t.type===c.WZ.Hot){let{trending_topic:e,first_tag_name:n,top:l}=t.customProps||{};C.sendLog("hotEntranceShow",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(v=i.authorInfo)||void 0===v?void 0:v.uid,trending_topic:e,first_tag_name:n,top:l,entrance_cnt:a})}let g=0;g=(null==N?void 0:N.seriesId)?(null==N?void 0:N.totalEpisode)===(null==N?void 0:N.currentEpisode)?0:1:(null==w?void 0:w.totalEpisode)===(null==w?void 0:w.currentEpisode)?0:1,C.sendLog("bottomBarShow",(0,n._)({playlet_id:null==N?void 0:N.seriesId,compilation_id:null==w?void 0:w.mixId,group_id:x,enter_from:(0,m.yW)(),enter_from_merge:(0,m.vM)(),bar_type:U[t.type],entrance_cnt:a,is_update:g,item_duration_ms:(null==i?void 0:null===(e=i.video)||void 0===e?void 0:e.duration)||0,bar_tag_name:null==i?void 0:null===(r=i.webRawData)||void 0===r?void 0:null===(o=r.CTR)||void 0===o?void 0:null===(l=o.recommendScore)||void 0===l?void 0:l.relateAiTag},h||{}))}),j=e=>{var l,o,r,u,f,v,g,p,_;if(t.onClick({awemeInfo:e}),t.type===c.WZ.Mix&&(C.sendLog("compilationEntranceClick",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(f=i.authorInfo)||void 0===f?void 0:f.uid,compilation_id:w.mixId,entrance_cnt:a,is_update:(null==e?void 0:null===(v=e.mixInfo)||void 0===v?void 0:v.totalEpisode)===(null==e?void 0:null===(g=e.mixInfo)||void 0===g?void 0:g.currentEpisode)?0:1}),null==d||d.emit(s.USER_ACTION,{action:"click_compilation"})),t.type===c.WZ.Hot){let{trending_topic:e,first_tag_name:n,top:l}=(null==t?void 0:t.customProps)||{};C.sendLog("hotEntranceClick",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(p=i.authorInfo)||void 0===p?void 0:p.uid,trending_topic:e,first_tag_name:n,top:l,entrance_cnt:a}),null==d||d.emit(s.USER_ACTION,{action:"click_hot"})}t.type===c.WZ.Related&&C.sendLog("relatedVideoEntranceClick",{enter_from:(0,m.yW)(),group_id:x,author_id:null==i?void 0:null===(_=i.authorInfo)||void 0===_?void 0:_.uid,entrance_cnt:a}),t.type===c.WZ.Series&&(null==d||d.emit(s.USER_ACTION,{action:"click_series"}));let y=0;y=(null==N?void 0:N.seriesId)?(null==N?void 0:N.totalEpisode)===(null==N?void 0:N.currentEpisode)?0:1:(null==w?void 0:w.totalEpisode)===(null==w?void 0:w.currentEpisode)?0:1,C.sendLog("bottomBarClick",(0,n._)({playlet_id:null==N?void 0:N.seriesId,compilation_id:null==w?void 0:w.mixId,group_id:x,enter_from:(0,m.yW)(),enter_from_merge:(0,m.vM)(),bar_type:U[t.type],entrance_cnt:a,is_update:y,item_duration_ms:(null==e?void 0:null===(l=e.video)||void 0===l?void 0:l.duration)||0,bar_tag_name:null==e?void 0:null===(u=e.webRawData)||void 0===u?void 0:null===(r=u.CTR)||void 0===r?void 0:null===(o=r.recommendScore)||void 0===o?void 0:o.relateAiTag},h||{}))},E=(0,l.jsxs)("div",{className:r()(t.itemClassName,S.default.tag),ref:I,onClick:()=>j(i),onMouseLeave:p,children:[(0,l.jsx)("span",{className:r()(S.default.tagBg)}),(0,l.jsx)("span",{className:r()(S.default.tagIcon),children:H.get(t.type)}),(0,l.jsx)("span",{className:r()(S.default.tagText,t.textClassName),children:y?"合集":t.title}),t.type===c.WZ.Mix&&!y&&u&&(0,l.jsxs)("div",{className:r()(S.default.updateTextContainer),children:[(0,l.jsx)("div",{className:r()(S.default.divide)}),(0,l.jsx)("div",{className:r()(S.default.updateText),children:A})]}),t.type===c.WZ.Series&&!y&&u&&(0,l.jsxs)("div",{className:r()(S.default.updateTextContainer),children:[(0,l.jsx)("div",{className:r()(S.default.divide)}),(0,l.jsx)("div",{className:r()(S.default.updateText),children:k})]})]},t.type);return(0,g.tq)()||(0,g._1)()||(0,g.iO)()||"undefined"==typeof window||"/"!==window.location.pathname||(t.type!==c.WZ.Mix||!(i.mixInfo.totalEpisode>i.mixInfo.currentEpisode))&&(t.type!==c.WZ.Series||!(i.seriesInfo.totalEpisode>i.seriesInfo.currentEpisode)||y)?E:(0,l.jsx)(V,{item:t,awemeInfo:i,onClick:j,hasChapterTag:_,children:E})},V=e=>{var t,i;let{item:n,children:a,awemeInfo:s,onClick:u,hasChapterTag:d}=e,c=(0,o.useRef)(null),f={enter_from:(0,m.yW)(),group_id:s.awemeId,compilation_id:(null===(t=s.mixInfo)||void 0===t?void 0:t.mixId)||(null===(i=s.seriesInfo)||void 0===i?void 0:i.seriesId)};return(0,o.useEffect)(()=>{C.sendLog("compilationNextVideoShow",f)},[]),(0,l.jsxs)("div",{className:r()(S.default.tagWithNextContainer,{[S.default.hasChapterTag]:d}),children:[a,(0,l.jsxs)("div",{className:r()(n.itemClassName,S.default.tag,S.default.nextTag),onMouseEnter:()=>{C.sendLog("compilationNextVideoHover",f)},onClick:()=>{(c.current||(c.current=O(n.type,s))).then(e=>{if(!e)throw Error("暂无下一集");u(e)}).catch(e=>{v.F.info((null==e?void 0:e.message)||"暂无下一集"),c.current=null}).finally(()=>{C.sendLog("compilationNextVideoClick",f)})},children:[(0,l.jsx)("span",{className:r()(S.default.tagBg)}),(0,l.jsx)("span",{className:r()(S.default.tagText,n.textClassName),children:"下一集"}),(0,l.jsx)(R.Z,{className:r()(S.default.nextMixIcon),src:x.Z,width:12,height:12,viewBox:"0 0 12 12"})]})]})},q=e=>{var t;let{tag:i,awemeInfo:a,feedbarCount:u,isActive:d,player:c,reportExtraParams:f,userInfo:v,abTestData:y,onMouseLeave:w}=e,{historyAdditions:b}=y,N=null==v?void 0:null===(t=v.info)||void 0===t?void 0:t.secUid,{unshiftWord:A}=(0,h.u)(N),{searchWord:k,index:I,itemClassName:j,textClassName:P,hintText:L,word:M,wordsNum:B}=i,{word:F,wordId:O}=k||{},U=(null==y?void 0:y.pcAiFeed)&&(function(e){var t;let i=null==e?void 0:null===(t=e.searchWord)||void 0===t?void 0:t.info;try{let e=JSON.parse(i);return(null==e?void 0:e.query_type)==="ai"}catch(e){return!1}}(i)||!!localStorage.getItem("isAiSearchForceTrue")),{awemeId:H,groupId:W}=a||{},V=(0,o.useMemo)(()=>(0,p.U)(a).impr_id,[a]);(0,o.useEffect)(()=>{(void 0===d||d)&&(U?C.sendLog("aiChatButtonShow",(0,n._)({enter_from:"homepage_hot",ai_chat_button_position:"bottom_bar",words_content:F,enter_group_id:H,words_position:I,entrance_cnt:u,words_num:B,group_id:O,impr_id:V},f||{},(null==f?void 0:f.search_params)||{})):C.sendLog("trendingWordsShow",(0,n._)({words_source:"related_search_anchor_v2",enter_from:(0,m.yW)(),words_content:F,enter_group_id:H,words_position:I,entrance_cnt:u,words_num:B,group_id:O,impr_id:V},f||{},(null==f?void 0:f.search_params)||{})))},[F,H,I,d,O]);let q=(0,o.useMemo)(()=>({source:"related_search_anchor_v2",enter_from:(0,m.vM)(),aweme_id:H,gid:W}),[H,W,m.vM]);return(0,l.jsxs)(D.Z,{className:r()(j,S.default.searchRelatedTag,S.default.tag),query:F,params:q,onClick:()=>{var e;if(U){C.sendLog("aiChatButtonClick",(0,n._)({enter_from:"homepage_hot",ai_chat_button_position:"bottom_bar",words_content:F,enter_group_id:H,words_position:I,entrance_cnt:u,words_num:B,group_id:O,impr_id:V},f||{},(null==f?void 0:f.search_params)||{})),_.emit(_.EVENT.openAiSearchCard,{from:"button",word:F,awemeId:H});return}C.sendLog("trendingWordsClick",(0,n._)({words_source:"related_search_anchor_v2",enter_from:(0,m.yW)(),words_content:F,enter_group_id:H,words_position:I,entrance_cnt:u,words_num:B,group_id:O,impr_id:V},f||{},(null==f?void 0:f.search_params)||{})),b&&(null==A||A(F));let t=null==y?void 0:y.searchOpenCurrentTab;((null==t?void 0:t.save_status)!==1||(0,g.DT)()||(null===(e=window)||void 0===e?void 0:e.location.pathname)==="/")&&_.emit(_.EVENT.videoPause),null==c||c.emit(s.USER_ACTION,{action:"click_related_search"})},onMouseEnter:()=>{_.emit(_.EVENT.renderAiSearchSideCard,{awemeId:H})},onMouseLeave:w,isAiSearch:U,children:[(0,l.jsx)("span",{className:r()(S.default.tagBg)}),U?(0,l.jsx)(T,{className:r()(S.default.searchIcon,S.default.aiSearchIcon)}):(0,l.jsx)(R.Z,{className:S.default.searchIcon,src:E,width:14,height:14,viewBox:"0 0 14 14"}),(0,l.jsx)("div",{className:r()(S.default.text,P),children:L?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("span",{className:S.default.hintText,children:[U?"AI 搜索":L,"："]}),(0,l.jsx)("span",{className:r()(S.default.titleWord,S.default.rsBarOpt),children:M})]}):(0,l.jsx)("span",{className:r()(S.default.titleWord,S.default.rsBarOpt),children:F})}),U?null:(0,l.jsx)(R.Z,{className:r()(S.default.enterIcon),src:x.Z,width:12,height:12,viewBox:"0 0 12 12"})]})},Z=e=>{let{tagList:t,awemeInfo:i,reportExtraParams:n,isShowUpdateText:a,isActive:s,player:u,userInfo:f,abTestData:h,containerRef:v}=e,[g,p]=(0,o.useState)(!1),_=(0,o.useCallback)(e=>{let t=U[e];if(!!t)C.sendLog("hover_bottom_bar",{enter_from:(0,m.mo)(),bar_type:t})},[]),x=t.some(e=>e.type===c.WZ.Chapter);return(0,o.useEffect)(()=>{if((null==v?void 0:v.current)&&x&&t.length>1){let e=d()(e=>{let{target:t,contentRect:i}=(null==e?void 0:e[0])||{};if(i){let{width:e}=i;if(0===e)return;p(e<320)}},50,{trailing:!0}),t=y.Z.bind(v.current,e);return()=>{null==t||t()}}},[x,t]),(0,l.jsx)("div",{className:r()("feedbar-new-style","feedbar-new-style-adapter",S.default.root,{feedbarHeight36:!0}),children:t.map(e=>e.type===c.WZ.RelatedSearch?(0,l.jsx)(q,{isActive:s,tag:e,awemeInfo:i,feedbarCount:t.length,player:u,reportExtraParams:n,userInfo:f,abTestData:h,onMouseLeave:()=>_(e.type)},e.type):e.type===c.WZ.Chapter?(0,l.jsx)(L,{title:e.title,itemClassName:e.itemClassName,awemeInfo:i,chapterProgress:e.chapterProgress,onClick:e.onClick,isFirstTag:0===e.idx,showMiniTitle:g},e.type):(0,l.jsx)(W,{item:e,awemeInfo:i,feedbarCount:t.length,isShowUpdateText:a,player:u,reportExtraParams:n,abTestData:h,onMouseLeave:()=>_(e.type),hasChapterTag:x,showMiniTitle:g},e.type))})}},750681:function(e,t,i){i.d(t,{K:function(){return r}});var n=i(590921);i(41873);var l=i(259202),o=i(611542);let a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.memo"):"function"==typeof o.memo&&(0,o.memo)(e=>null).$$typeof;function r(e){let t=a&&e.$$typeof===a?e:(0,o.memo)(e);return function(e){let{isActive:i=!1,forceDelayUpdate:a=!1}=e,r=(0,o.useDeferredValue)(e),s=!i||a?r:e;return(0,l.jsx)(t,(0,n._)({},s))}}},719250:function(e,t,i){i.d(t,{u:function(){return a}}),i(612222);var n=i(611542),l=i(819769),o=i(646285);let a=e=>{var t,i,a,r;let{awemeId:s,defaultCount:u,selfUid:d,defaultCollectStatus:c}=e,f=l.Le.getConfig(l.gI.CollectStatusCache),[h,v]=(0,n.useState)(null!==(a=null==f?void 0:null===(t=f[s])||void 0===t?void 0:t.count)&&void 0!==a?a:u),[m,g]=(0,n.useState)(null!==(r=null==f?void 0:null===(i=f[s])||void 0===i?void 0:i.collectStatus)&&void 0!==r?r:c);return(0,n.useEffect)(()=>{var e,t,i,n;v(null!==(i=null==f?void 0:null===(e=f[s])||void 0===e?void 0:e.count)&&void 0!==i?i:u),g(null!==(n=null==f?void 0:null===(t=f[s])||void 0===t?void 0:t.collectStatus)&&void 0!==n?n:c)},[c,u,s]),(0,n.useEffect)(()=>{let e=o.a.addCb(e=>{let{selfUid:t,awemeId:i,action:n}=e,o=t===d,a=void 0===t||void 0===d;if((o||a)&&i===s&&("collect"===n||"unCollect"===n)){var r,f,h;let e=null===(r=l.Le.getConfig(l.gI.CollectStatusCache))||void 0===r?void 0:r[s];v(null!==(f=null==e?void 0:e.count)&&void 0!==f?f:u),g(null!==(h=null==e?void 0:e.collectStatus)&&void 0!==h?h:c)}});return()=>{e()}},[d,s,u,c]),{count:Math.max(h,0),collectStatus:m}}},628559:function(e,t,i){i.d(t,{P:function(){return a}}),i(612222);var n=i(611542),l=i(819769),o=i(646285);let a=e=>{var t,i,a;let{awemeId:r,defaultCount:s,selfUid:u,defaultDiggStatus:d}=e,c=null===(t=l.Le.getConfig(l.gI.DiggStatusCache))||void 0===t?void 0:t[r],[f,h]=(0,n.useState)(null!==(i=null==c?void 0:c.count)&&void 0!==i?i:s),[v,m]=(0,n.useState)(null!==(a=null==c?void 0:c.diggStatus)&&void 0!==a?a:d);return(0,n.useEffect)(()=>{var e,t;h(null!==(e=null==c?void 0:c.count)&&void 0!==e?e:s),m(null!==(t=null==c?void 0:c.diggStatus)&&void 0!==t?t:d)},[d,s,r]),(0,n.useEffect)(()=>{let e=o.a.addCb(e=>{let{selfUid:t,awemeId:i,action:n}=e,o=t===u,a=void 0===t||void 0===u;if((o||a)&&i===r&&("digg"===n||"unDigg"===n)){var c,f,v;let e=null===(c=l.Le.getConfig(l.gI.DiggStatusCache))||void 0===c?void 0:c[r];h(null!==(f=null==e?void 0:e.count)&&void 0!==f?f:s),m(null!==(v=null==e?void 0:e.diggStatus)&&void 0!==v?v:d)}});return()=>{e()}},[u,r,s,d]),{count:Math.max(f,0),diggStatus:v}}},458463:function(e,t,i){i.d(t,{C:function(){return d},p:function(){return u}});var n=i(590921),l=i(874155);i(612222);var o=i(611542),a=i(67108),r=i.n(a),s=i(600743),u={Margin:"Margin",PlayIcon:"PlayIcon",PlayerTime:"PlayerTime",DanMuInput:"DanMuInput",DanMuIcon:"DanMuIcon",SettingList:"SettingList",InnerAutoPlayer:"InnerAutoPlayer",AutoPlayer:"AutoPlayer",Clear:"Clear",FakeScreen:"FakeScreen",PlayBackRatio:"PlayBackRatio",Volume:"Volume",PageFullScreen:"PageFullScreen",Fullscreen:"Fullscreen",WatchLater:"WatchLater",NativePicture:"NativePicture",ChapterIcon:"ChapterIcon"};let d=e=>{let{isActive:t,player:i,abtestData:a,hasChapter:u=!1,isClientMiniWin:d=!1,showInnerAutoplay:c,showAutoPlay:f,showClear:h,showFakeScreen:v,showPlayBackRatio:m,showNativePicture:g=!1,showWatchLater:p=!1}=e,[_,y]=(0,o.useState)(!1),[x,w]=(0,o.useState)(!1),[C,S]=(0,o.useState)(),[b,N]=(0,o.useState)([]),A=(0,o.useRef)(b);return(0,o.useEffect)(()=>{if(t&&i&&!d){var e;let t;let o=new Map([["Margin",74],["PlayIcon",32],["PlayerTime",100],["Clear",72],["Volume",36],["PageFullScreen",36],["Fullscreen",36]]),a=new Map;g&&o.set("NativePicture",36),c?(o.set("InnerAutoPlayer",92),a.set("InnerAutoPlayer",{className:"hideInnerAutoPlayer",width:92}),o.delete("AutoPlayer"),a.delete("AutoPlayer")):(o.delete("InnerAutoPlayer"),a.delete("InnerAutoPlayer"),f&&o.set("AutoPlayer",72),f&&a.set("AutoPlayer",{className:"hideAutoPlayer",width:72})),o.set("DanMuIcon",55),o.set("SettingList",36),u&&o.set("ChapterIcon",14),h&&a.set("Clear",{className:"hideImmersivePlayer",width:72}),v?(o.set("FakeScreen",46),a.set("FakeScreen",{className:"hideFakeScreen",width:46})):(o.delete("FakeScreen"),a.delete("FakeScreen")),m?(o.set("PlayBackRatio",44),a.set("PlayBackRatio",{className:"hidePlayBackRatio",width:44})):(o.delete("PlayBackRatio"),a.delete("PlayBackRatio")),p?(o.set("WatchLater",36),a.set("WatchLater",{className:"hideWatchLater",width:36})):(o.delete("WatchLater"),a.delete("WatchLater"));let d=0;o.forEach(e=>d+=e),[...a].forEach((e,t,i)=>{let[o,r]=e;i[t-1]&&(d-=i[t-1][1].width),a.set(o,(0,l._)((0,n._)({},r),{minWidth:d}))});let _=r()(e=>{let{target:t,contentRect:n}=(null==e?void 0:e[0])||{};if(n){var l,r,s,d;let{width:e}=n;if(0===e)return;a.forEach(i=>{e<i.minWidth?(t.classList.add(i.className),i.hide=!0):(t.classList.remove(i.className),i.hide=!1)}),!c&&t.classList.contains("hideInnerAutoPlayer")&&t.classList.remove("hideInnerAutoPlayer");let f=[...a].filter(e=>e[1].hide);(f.length!==(null===(l=A.current)||void 0===l?void 0:l.length)||f.some((e,t)=>{var i;return(null==e?void 0:e[0])!==(null===(i=A.current[t])||void 0===i?void 0:i[0])}))&&N(f);let h=0;o.forEach(e=>h+=e);if(h+=150,u&&(i?h+=null!==(d=null===(s=i.root.querySelector(".chapterContainer"))||void 0===s?void 0:null===(r=s.getBoundingClientRect())||void 0===r?void 0:r.width)&&void 0!==d?d:285:h+=285),e<h?y(!0):y(!1),u){let t=0;o.forEach(e=>t+=e);e<(t-=14)+110?(w(!0),S(void 0)):(w(!1),S(e>t+285?void 0:e-t))}}},50,{trailing:!0}),x=null===(e=i.root.getElementsByClassName("xgplayer-controls"))||void 0===e?void 0:e[0];return x&&(t=s.Z.bind(x,_)),()=>{null==t||t()}}},[t,i,a,d,u,c,v,f,h,m,p]),A.current=b,{isDanmuIcon:_,hideList:b,isChapterIcon:x,chapterMaxWidth:C}}},133410:function(e,t,i){i.d(t,{AN:function(){return A},u_:function(){return N}});var n=i(611542),l=i(623176),o=i(837305),a=i(477509),r=i(532910),s=i(147083),u=i(819769),d=i(528557),c=i(356789),f=i(245086),h=i(898263),v=i(675145),m=i(322903),g=i(945363),p=i(459576),_=i(797210),y=i(546186);let x=e=>("KeyD"===e.code||"ArrowRight"===e.code)&&!1===e.altKey&&!1===e.shiftKey&&!1===e.metaKey&&!1===e.ctrlKey,w=()=>{let e=(0,u.AQ)();return!!e&&new Date(1e3*e).toDateString()===new Date().toDateString()||!1},C=()=>!!(0,d.$o)(o.LocalStorageKeys.IsRatePageShow),S=()=>w()&&!C(),b=!1,N=e=>{let{player:t,isActive:i,isLongPressOn:g,disableLongPress:w,awemeInfo:C,abtestData:N}=e,A=(0,n.useRef)(null),k=(0,n.useRef)(C);k.current=C;let I=(0,n.useCallback)(e=>{var i,n,l,r,f;let{pausePlayControlShortcut:h}=u.Le.getConfig(u.gI.PlayerShortcutConf)||{};if(!b&&!!x(e)&&!!(null==t?void 0:t.isUserActive)&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.nodeName)!=="INPUT"&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.nodeName)!=="TEXTAREA"&&(null==t?!void 0:null===(f=t.plugins)||void 0===f?!void 0:null===(r=f.keyboard)||void 0===r?!void 0:null===(l=r.config)||void 0===l?!void 0:!l.disable)&&!h)e.preventDefault(),b=!0,A.current=setTimeout(()=>{if(A.current=null,!w)if(u.Le.getConfig(u.gI.disableSpeed)&&!u.Le.getConfig(u.gI.IsMiniWin))c.emit(c.EVENT.loginBlockKeyBoard,{speed:!0});else{var e;u.Le.setConfig(u.gI.PlayRatioBeforeLongPress,t.playbackRate),t.emit(_.B.ChangePlayRate,{rate:2,notStorage:!0,click_method:"longPress"}),S()&&(s.F.info({text:"2.0x播放中",duration:1e3}),(0,d.qQ)(o.LocalStorageKeys.IsRatePageShow,!0)),a.i.sendLog("holdVideoSpeed",{group_id:null===(e=k.current)||void 0===e?void 0:e.awemeId})}},200)},[t,w]),j=(0,n.useCallback)(e=>{var i,n,o,a,s,d,c,g,w,C,S,N;let{pausePlayControlShortcut:I}=u.Le.getConfig(u.gI.PlayerShortcutConf)||{};if(!!x(e)&&!!(null==t?void 0:t.isUserActive)&&(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.nodeName)!=="INPUT"&&(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.nodeName)!=="TEXTAREA"&&(null==t?!void 0:null===(s=t.plugins)||void 0===s?!void 0:null===(a=s.keyboard)||void 0===a?!void 0:null===(o=a.config)||void 0===o?!void 0:!o.disable)&&!I){if(clearTimeout(A.current),A.current){if(!t)return;let{currentTime:e,paused:i,duration:n}=t,o=e+5,a=!!(null===(c=k.current)||void 0===c?void 0:null===(d=c.chapterInfo)||void 0===d?void 0:d.status);p.Z.sendLog("progressClick",{enter_from_merge:(0,f.vM)(),tab_name:r.getTabName()||(0,h.Rs)("tab_name")||"",group_id:null===(g=k.current)||void 0===g?void 0:g.awemeId,author_id:null===(C=k.current)||void 0===C?void 0:null===(w=C.authorInfo)||void 0===w?void 0:w.uid,is_chapter_bar:a?1:0,chapter_index:(0,v.P)({awemeInfo:k.current,currentTime:o}),position:o||0,enter_from:(0,f.yW)(),click_method:"hot_key",rate:o/n,action:"forward",is_small_window:(0,m.QD)()?"1":"0",vduration:null===(N=k.current)||void 0===N?void 0:null===(S=N.video)||void 0===S?void 0:S.duration,if_continued_play:u.Le.getConfig(u.gI.PlayRecord)?(0,y.v)(k.current.awemeId)?1:0:"",before_rate:e/n,before_position:e}),t.seek(o,i?"pause":"play"),t.emit(l.USER_ACTION,{action:_.B.DyUserSeek,currentTime:o,prePlayTime:e})}else{let e=u.Le.getConfig(u.gI.PlayRatioBeforeLongPress);t.emit(_.B.ChangePlayRate,{rate:e||1,click_method:"longPress"}),u.Le.setConfig(u.gI.PlayRatioBeforeLongPress,0)}b=!1,A.current=null}},[t,N]);(0,n.useEffect)(()=>g&&i?(document.addEventListener("keydown",I),document.addEventListener("keyup",j),()=>{document.removeEventListener("keydown",I),document.removeEventListener("keyup",j)}):()=>null,[e,i,g,j,I])},A=()=>{let e=u.Le.getConfig(u.gI.PlayRatioBeforeLongPress);e&&(0,g.t_)(o.SessionStorageKeys.PlayerPlaybackratio,e)}},721027:function(e,t,i){i.d(t,{u:function(){return a}});var n=i(683855),l=i.n(n),o=i(611542);let a=(e,t,i)=>(o.useEffect(()=>i&&e?(null==e||e.on(t,i),()=>{null==e||e.off(t,i)}):l(),[i,t,e]),null)},232021:function(e,t,i){i.d(t,{M:function(){return H},Q:function(){return W}});var n=i("590921");i("612222"),i("347885");var l=i("611542"),o=i("623176"),a=i("283132"),r=i("135524"),s=i("775583"),u=i("697878"),d=i("532910"),c=i("799506"),f=i("819769"),h=i("426852"),v=i("245086"),m=i("322903"),g=i("898263"),p=i("675145"),_=i("442183");i("842903");var y=i("895184"),x=i("356789"),w=i("797210"),C=i("966312"),S=i("375456"),b=i("137180");let N=e=>e.metaKey||e.ctrlKey||e.shiftKey,A=(e,t)=>t&&e.metaKey===t.includes(C.cQ.Meta)&&e.shiftKey===t.includes(C.cQ.Shift)&&e.ctrlKey===t.includes(C.cQ.Ctrl),k=(e,t)=>{if(!e||(null==e?void 0:e.musicMute))return;if(e.muted){e.muted=!1,e.volume="up"===t?.1:0;return}let i="up"===t?e.volume+.1:e.volume-.1;i=Math.max(i=Math.min(i,1),0),e.volume=i.toFixed(3)},I=(e,t)=>{var i,n,l,o,a,r,s,u,d,c,g,p,_,I,j,E,P,L,T,R,D;let M=null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.tagName;if("INPUT"===M||"TEXTAREA"===M||(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.contentEditable)==="true")return;let{player:B,shortcut:F={},isKeyWorkCancalLike:O,isAd:U,enableCustomKey:H,abtestData:W}=t;if(!((null==H?void 0:H.length)>0)||!!(null==H?void 0:H.includes(e.code))){if("Minus"===e.code&&A(e,[C.cQ.Shift])&&(k(B,"down"),null==B||B.emit(w.B.CustomShortCut,{action:"volumeDown"}),(0,h.hB)()),"Equal"===e.code&&A(e,[C.cQ.Shift])&&(null==B||B.emit(w.B.CustomShortCut,{action:"volumeUp"}),k(B,"up"),(0,h.hB)()),e.code===(null===(l=F.like)||void 0===l?void 0:l.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onStar",{event:e,clickMethod:"hot_key",isKeyWorkCancalLike:O}),(0,h.hB)("like")),e.code===(null===(o=F.comment)||void 0===o?void 0:o.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("showComment",{clickMethod:"hot_key"}),(0,h.hB)("comment"),"video_detail"===(0,v.yW)()&&!(0,y.r)()&&x.emit(x.EVENT.commentFocus)),e.code===(null===(a=F.watchLater)||void 0===a?void 0:a.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onWatchLater",{e,clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(r=F.collect)||void 0===r?void 0:r.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onCollect",{clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(s=F.related)||void 0===s?void 0:s.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onRelated",{e,clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(u=F.share)||void 0===u?void 0:u.code)&&!N(e)&&(B.emit("showShareCode",{clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(d=F.videoInfo)||void 0===d?void 0:d.code)&&!N(e)&&(B.emit("videoInfo",{clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(c=F.dislike)||void 0===c?void 0:c.code)&&!N(e)&&(B.emit(w.B.Dislike,{clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(g=F.avatar)||void 0===g?void 0:g.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onAvatar"),(0,h.hB)("avatar")),e.code===(null===(p=F.follow)||void 0===p?void 0:p.code)&&!N(e)&&(null==B||B.emit("shortcutTopic",!0),B.emit("onFollow",{clickMethod:"hot_key"}),(0,h.hB)()),e.code===(null===(_=F.fullscreen)||void 0===_?void 0:_.code)&&!N(e)){if((0,m.QD)()&&x.emit(x.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"hotkey_fullScreen"}),null==B?void 0:null===(R=B.openGeneralSearchModalSlide)||void 0===R?void 0:R.call(B,{from:"fullscreen"}))return;(0,h.hB)(),(0,y.r)()?(B.exitFullscreen(),B.emit("switch_fullscreen",{fullscreen:!1})):f.Le.getConfig(f.gI.disableFullScrren)&&!f.Le.getConfig(f.gI.IsMiniWin)?x.emit(x.EVENT.loginBlockKeyBoard,{fullscreen:!0}):(B.getFullscreen(),B.emit("switch_fullscreen",{fullscreen:!0}))}if(e.code===(null===(I=F.pageFullScreen)||void 0===I?void 0:I.code)&&!N(e)&&(null==B?void 0:B.isUserActive)&&(null==B?void 0:null===(j=B.getPlugin)||void 0===j?void 0:j.call(B,"PageFullScreenPlugin"))){if(null==B?void 0:null===(D=B.openGeneralSearchModalSlide)||void 0===D?void 0:D.call(B,{from:"pageFullscreen"}))return;(0,h.hB)();let e=!S.s.getPlayerIsPageFullscreen(B.playerId);S.s.setPageFullscreen({playerId:B.playerId,isPageFullscreen:e}),x.emit(x.EVENT.pageFullScreen,{clickMethod:"hot_key",fullScreen:e,playerId:B.playerId})}if(e.code===(null===(E=F.immersivePlayer)||void 0===E?void 0:E.code)&&!N(e)&&(null==B||B.emit(w.B.UpdateImmersiveSwitch,{logParams:{enter_method:"hot_key"}}),(0,h.hB)()),e.code===(null===(P=F.danmaku)||void 0===P?void 0:P.code)&&!N(e)&&(null==B||B.emit(w.B.ChangeDanmaku),(0,h.hB)()),e.code===(null===(L=F.autoPlay)||void 0===L?void 0:L.code)&&!N(e)){let e={switchBy:b.l7.Shortcut,logParams:{enter_method:"hot_key"}};f.Le.getConfig(f.gI.IsInMixCard)&&f.Le.setConfig(f.gI.AutoPlayChanged,{changed:!0}),null==B||B.emit(w.B.UpdateAutoPlaySwitch,e),(0,h.hB)()}e.code===(null===(T=F.showAdDetail)||void 0===T?void 0:T.code)&&U&&!N(e)&&(x.emit(x.EVENT.openAdSideCard,{from:"keyboard"}),(0,h.hB)())}};var j=i("133410"),E=i("696871"),P=i("459576"),L=i("546186");let{AwemeType:T}=a,R=[T.LiveCard,T.Lvideo,T.Normal,T.WordCupCard,T.XgVideo,T.NewNormal,T.Canvas],{D,A:M,ArrowLeft:B,ArrowRight:F,Space:O}=c.bf,U=[B,F,M,D,O].map(e=>e.code),H=()=>{(0,l.useEffect)(()=>{let e=e=>{let{pausePlayControlShortcut:t,disableKey:i=[]}=f.Le.getConfig(f.gI.PlayerShortcutConf)||{};[...t?[...U]:[],...i].includes(e.code)&&e.stopPropagation()};return document.addEventListener("keydown",e,!0),document.addEventListener("keyup",e,!0),document.addEventListener("keypress",e,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",e,!0),document.removeEventListener("keypress",e,!0)}},[])},W=e=>{let{player:t,isActive:i=!1,abtestData:a,isSliderVideo:c,isKeyWorkCancalLike:y,shortcutDisable:x,shortcutInclude:C,shortcutExclude:S,awemeInfo:b,showAdMenu:N=!1,disableShortCut:A=!1,disableAllNativeShortCut:k=!1,isClientMiniWin:T=!1}=e;(0,j.u_)({player:t,isActive:i,isLongPressOn:!A&&(null==b?void 0:b.awemeType)!==r.e.Note,disableLongPress:(0,s.Jt)(b),awemeInfo:b,abtestData:a}),H();let O=(0,l.useMemo)(()=>u.getShortcut({disable:x,include:C,exclude:S}),[x,C,S]);(0,l.useEffect)(()=>{if(A)return()=>null;if(i&&t){(0,h.z5)();let e=e=>{let{pauseCustomShortcut:i,enableCustomKey:n}=f.Le.getConfig(f.gI.PlayerShortcutConf)||{};if(!(i||!t.isUserActive||f.Le.getConfig(f.gI.IsAlreadyExsitReportModal)))I(e,{player:t,shortcut:O,isSliderVideo:c,isKeyWorkCancalLike:y,enableCustomKey:n,abtestData:a,isAd:N})};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}},[t,i,a,O,c,y,A,N]),(0,l.useEffect)(()=>{if(t&&R.includes(null==b?void 0:b.awemeType)){var e,i,l,a;if(k&&(null==t?void 0:null===(e=t.plugins)||void 0===e?void 0:e.keyboard))return(0,E.K)(t);if(!A){let e=e=>()=>{var i,n,l;let{currentTime:a,paused:r,duration:s}=t,u="forward"===e?a+5:a-5,{pausePlayControlShortcut:c}=f.Le.getConfig(f.gI.PlayerShortcutConf)||{};if(c)return;let h=!!(null==b?void 0:null===(i=b.chapterInfo)||void 0===i?void 0:i.status);P.Z.sendLog("progressClick",{position:u||0,enter_from:(0,v.mo)(),click_method:"hot_key",rate:u/s,action:e,is_small_window:(0,m.QD)()?"1":"0",enter_from_merge:(0,v.vM)(),tab_name:d.getTabName()||(0,g.Rs)("tab_name")||"",is_chapter_bar:h?1:0,chapter_index:(0,p.P)({awemeInfo:b,currentTime:u}),group_id:null==b?void 0:b.awemeId,author_id:null==b?void 0:null===(n=b.authorInfo)||void 0===n?void 0:n.uid,vduration:null==b?void 0:null===(l=b.video)||void 0===l?void 0:l.duration,if_continued_play:f.Le.getConfig(f.gI.PlayRecord)?(0,L.v)(b.awemeId)?1:0:"",before_rate:a/s,before_position:a}),t.seek(u,r?"pause":"play"),t.emit(o.USER_ACTION,{action:w.B.DyUserSeek,currentTime:u,prePlayTime:a})},r={left:{keyCode:B.keyCode,action:e("rewind"),disable:!1,noBodyTarget:!1},letterA:{keyCode:M.keyCode,action:e("rewind"),disable:!1,noBodyTarget:!1},letterD:{keyCode:D.keyCode,action:e("forward"),disable:!0,noBodyTarget:!1},right:{keyCode:F.keyCode,action:e("forward"),disable:!0,noBodyTarget:!1}};if(null==t?void 0:null===(i=t.plugins)||void 0===i?void 0:i.keyboard){let i=(null==t?void 0:null===(a=t.plugins)||void 0===a?void 0:null===(l=a.keyboard)||void 0===l?void 0:l.keyCodeMap)||{},o=(0,_.x)();return!T||o?t.plugins.keyboard.keyCodeMap=(0,n._)({},i,r):t.plugins.keyboard.keyCodeMap=(0,n._)({},i,{left:{keyCode:B.keyCode,action:e("rewind"),disable:!1,noBodyTarget:!1},right:{keyCode:F.keyCode,action:e("forward"),disable:!1,noBodyTarget:!1}}),()=>{var l;(null===(l=t.plugins.keyboard)||void 0===l?void 0:l.keyCodeMap)&&(t.plugins.keyboard.keyCodeMap=(0,n._)({},i,{left:{keyCode:B.keyCode,action:e("rewind"),disable:!1,noBodyTarget:!1},right:{keyCode:F.keyCode,action:e("forward"),disable:!1,noBodyTarget:!1}}))}}}}},[t,b,k,A,T,a])}},877439:function(e,t,i){i.d(t,{Jy:function(){return es},Cf:function(){return er},Xf:function(){return ed},ZL:function(){return ec}});var n=i("7979"),l=i("590921"),o=i("874155");i("612222"),i("930798"),i("347885");var a=i("259202"),r=i("611542"),s=i("753451"),u=i("52341"),d=i("825211"),c=i.n(d),f=i("623176"),h=i("185791"),v=i("448454"),m=i("552432"),g=i.n(m),p=i("606660"),_=i("837305"),y=i("305452"),x=i("283132"),w=i("135524"),C=i("801002"),S=i("945363"),b=i("245086"),N=i("160551"),A=i("356789"),k=i("554898"),I=i("401310"),j=i("536662"),E=i("997266"),P=i("234766");i("910758");var L=i("797210"),T=i("77435"),R=i("975181");let D=e=>{let{awemeInfo:t,abtestData:i,enableDash:n}=e;return(0,R.QF)({awemeInfo:t,abtestData:i,enableDash:n,disableBitRateFilter:!0,enableCodecMix:(null==i?void 0:i.codecMix)===1}).definition};var M=i("769609"),B=i("208960"),F=i("819769");class O{static addAutoSwitchCount(e){e.autoSwitchCount?e.autoSwitchCount++:e.autoSwitchCount=1}static resetAutoSwitchCount(e){e.autoSwitchCount=0}static getAutoSwitchCount(e){return e.autoSwitchCount}static getIsInAutoSwitch(e){return e.autoSwitchCount>0}static subAutoSwitchCount(e){e.autoSwitchCount&&e.autoSwitchCount--}}let U=e=>{try{var t,i,n,l,o,a,r;if(!e||!(null===(t=F.Le.getConfig(F.gI.AbtestData))||void 0===t?void 0:t.autoClarityReselect))return;let{curDefinition:s}=e;null===(o=e.plugins.bitrateselector.bitRateAdapter)||void 0===o||null===(l=o.selector)||void 0===l||null===(n=l._rule)||void 0===n||null===(i=n.setCurrent)||void 0===i||i.call(n,{bitrate:null==s?void 0:s.bitrate,_xgOrgBitrate:null==s?void 0:s.bitrate,duration:null==s?void 0:s.duration}),null===(r=e.plugins.bitrateselector.bitRateAdapter)||void 0===r||null===(a=r.selector)||void 0===a||a._updateInfo()}catch(e){}};i("101060");var H=i("233343"),W=i("836921"),V=i.n(W),q={Up:1,1:"Up",Down:2,2:"Down",Auto:0,0:"Auto"},Z={start:1,1:"start",process:2,2:"process",end:3,3:"end"},K={auto:"auto",mannual:"mannual",abr:"abr"},G=i("750258"),$=i("44249");let z=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i]},Q={[j.hq.HD4K]:j.rT.HD4K,[j.hq.HD2K]:j.rT.HD2K,[j.hq.Hd]:j.rT.Hd,[j.hq.Clear]:j.rT.Clear,[j.hq.Smooth]:j.rT.Smooth,[j.hq.Fast]:j.rT.Fast,[j.hq.Auto]:j.rT.Auto},J={[j.hq.HD4K]:j.YB.HD4K,[j.hq.HD2K]:j.YB.HD2K,[j.hq.Hd]:j.YB.Hd,[j.hq.Clear]:j.YB.Clear,[j.hq.Smooth]:j.YB.Smooth,[j.hq.Auto]:j.YB.Auto};class Y{start(){if(2!==this._status&&0!==this._status)this._initPlayClarity(),this.initSwitchDefinationInfos(),this._status=2}reset(){this._status=1,this._switchDefinationInfos=[],this._count=0,this._startTime=0,this._srStatus=0}isHas2K(){return(0,C.fR)()}IsReady(){return 1===this._status}getClarityTypeByDefination(){let e=(0,S.G)(_.SessionStorageKeys.manualSwitch)||{};return(null==e?void 0:e.gearClarity)||(null===j.hq||void 0===j.hq?void 0:j.hq.Auto)}setClarity(e){this._nowClarity=e}_initPlayClarity(){let e=this._clarityTransform(this.getClarityTypeByDefination());this._initClarity=e,this._nowClarity=e}bindFunc(){(null===this||void 0===this?void 0:this._player)&&(this._player.getSwitchDefinationInfos=this.getSwitchDefinationInfos.bind(this),this._player.getIsInSwitching=this.getIsInSwitching.bind(this),this._player.getClarity=this.getClarity.bind(this))}unbindFunc(){(null===this||void 0===this?void 0:this._player)&&(this._player.getSwitchDefinationInfos=void 0,this._player.getIsInSwitching=void 0,this._player.getClarity=void 0)}init(){this._initPlayClarity(),this._initListener(),this.bindFunc(),this._status=1}getClarity(e){return e?this._initClarity:this._nowClarity}getAdjustPlayDuration(e){return Math.round(e<0?0:e)}getSwitchDefinationInfos(){let{_switchDefinationInfos:e}=this,t=this.findLatestSwitchSuccessItem();if(t){let e=this._calcPlayDuration();t.definationInfo.play_duration=t.definationInfo.play_duration+this.getAdjustPlayDuration(e),t.definationInfo.is_super_resolution=this.getSuperResolution(!0),this._recordStartTime()}let i={start_play_clarity_type:this._initClarity,switch_down_cnt:0,switch_up_cnt:0,abr_down_cnt:0,abr_up_cnt:0,switch_to_auto_cnt:0,switch_from_auto_cnt:0,switch_up_duration:[],switch_down_duration:[],switch_to_auto_duration:[],switch_from_auto_duration:[],switch_info:""},n=[];e.forEach(e=>{let{stage:t,switchEndTime:l,switchStartTime:o,switchFromAuto:a,switchToAuto:r,switchOption:s,definationInfo:u,isABR:d}=e;if(t!==Z.start){let e=l-o;s===q.Up&&(d?i.abr_up_cnt++:i.switch_up_cnt++,i.switch_up_duration.push(e)),s===q.Down&&(d?i.abr_down_cnt++:i.switch_down_cnt++,i.switch_down_duration.push(e)),r&&(i.switch_to_auto_cnt++,i.switch_to_auto_duration.push(e)),a&&(i.switch_from_auto_cnt++,i.switch_from_auto_duration.push(e))}u&&(u.play_duration=u.play_duration||0,n.push(u))});try{i.switch_info=JSON.stringify(n||[])}catch(e){i.switch_info=""}return z("getSwitchDefinationInfos",i),i}getIsInSwitching(){let e=this.getLatestSwitchDefinationInfo();return e?(null==e?void 0:e.status)===3?1:0:0}_clarityTransform(e){let t=this.isHas2K()?J:Q;return null==t?void 0:t[e]}_calcPlayDuration(){var e,t;return(null===(e=this._player)||void 0===e?void 0:e.cumulateTime)?this.getAdjustPlayDuration(((null===(t=this._player)||void 0===t?void 0:t.cumulateTime)||0)-this._startTime):0}_recordStartTime(){var e;this._startTime=(null===(e=this._player)||void 0===e?void 0:e.cumulateTime)||0}_getCodec(){return(0,$.U)({awemeInfo:this._awemeInfo,player:this._player,abtestData:this._abtestData})}initSwitchDefinationInfos(){var e;let{_player:t}=this;this._recordStartTime();let{curDefinition:i={}}=t||{},n=(null==i?void 0:i.bitrate)||(null==i?void 0:i.realBitrate)||0,l=(null==i?void 0:null===(e=i.audioDefinition)||void 0===e?void 0:e.bitrate)||0,o=(null==i?void 0:i.realBitrate)||0,a={stage:Z.start,status:1,definationInfo:{switch_order:this._count++,clarity_now:this._initClarity,video_quality:null==i?void 0:i.qualityType,is_bytevc1:this._getCodec(),video_bitrate:n,audio_bitrate:l,play_bitrate:o,is_super_resolution:this.getSuperResolution(),play_duration:0,switch_type:K.auto}};this.addSwitchDefinationInfo(a)}getSuperResolution(){var e,t,i,n;let l=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=null===(e=this._abtestData)||void 0===e?void 0:e.onActiveChangePlay;if(l&&o){let e=null===(i=this._player)||void 0===i?void 0:null===(t=i.superResolution)||void 0===t?void 0:t.is_super_resolution;return V()(e)&&(e=null===(n=(0,G.B)({player:this._player}))||void 0===n?void 0:n.is_super_resolution),e||0}let{is_super_resolution:a}=(0,G.B)({player:this._player});return a}onBeforeDefinitionChange(){this._srStatus=this.getSuperResolution()}_calcPlayTimeForPreItem(){let e=this.findLatestSwitchSuccessItem(1);if(e){var t;let i=this._calcPlayDuration();this._recordStartTime(),e.definationInfo=(0,o._)((0,l._)({},e.definationInfo),{is_super_resolution:this._srStatus,play_duration:(null==e?void 0:null===(t=e.definationInfo)||void 0===t?void 0:t.play_duration)+this.getAdjustPlayDuration(i)})}}onABRDefinitionChangeSuccess(e){var t;let{_player:i}=this,{curDefinition:n={}}=i||{};this._calcPlayTimeForPreItem();let{orgDefinition:l,currentDefinition:o}=e,a=(null==n?void 0:n.bitrate)||(null==n?void 0:n.realBitrate)||0,r=(null==n?void 0:null===(t=n.audioDefinition)||void 0===t?void 0:t.bitrate)||0,s=(null==n?void 0:n.realBitrate)||0,u=null==n?void 0:n.qualityType,d=o<l?q.Up:q.Down,c={switch_order:this._count++,clarity_now:this._clarityTransform(j.hq.Auto),video_quality:u,video_bitrate:a,audio_bitrate:r,play_bitrate:s,play_duration:0,is_super_resolution:this.getSuperResolution(),switch_type:K.abr,is_bytevc1:this._getCodec()};this.addSwitchDefinationInfo({switchOption:d,switchFromAuto:!1,switchToAuto:!1,switchStartTime:0,switchEndTime:0,isABR:!0,status:1,definationInfo:c}),this.recordSrStatus()}onDefinitionChangeFail(){}onDefinitionChangeSuccess(e){var t,i;if(O.getIsInAutoSwitch(this._player))return;let{hack:n}=e,a=this.findLatestSwitchSuccessItem(1);if(a){let e=this._calcPlayDuration();this._recordStartTime(),a.definationInfo=(0,o._)((0,l._)({},a.definationInfo),{play_duration:(null==a?void 0:null===(i=a.definationInfo)||void 0===i?void 0:i.play_duration)+e})}let r=this.findLatestSwitchSuccessItem(3);this.setClarity(null==r?void 0:null===(t=r.definationInfo)||void 0===t?void 0:t.clarity_now),r&&(r.switchEndTime=n?null==r?void 0:r.switchStartTime:Date.now(),r.status=1,r.definationInfo=(0,o._)((0,l._)({},r.definationInfo),{is_super_resolution:this._srStatus,play_duration:0})),this.recordSrStatus()}recordSrStatus(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._timer=setTimeout(()=>{this._srStatus=this.getSuperResolution(),this._timer=null},1e3)}addSwitchDefinationInfo(e){this._switchDefinationInfos.push(e)}removeSwitchDefinationInfo(e){this._switchDefinationInfos.shift()}clearSwitchDefinationInfo(){this._switchDefinationInfos=[]}onDefinitionChange(e){if(O.getIsInAutoSwitch(this._player))return;let{to:t,from:i,hack:n=0}=e||{},{_player:a}=this,{clarityChange:r}=(null==a?void 0:a.config)||{},{from:s,to:u}=r||{};if(s&&u){var d,c,f;let e;let{clarity:i}=u,{clarity:a}=s,r=a===j.hq.Auto,h=i===j.hq.Auto;e=r||h?q.Auto:Number(i)>Number(a)?q.Up:q.Down;let v={};if(n){let e=null===this||void 0===this?void 0:null===(d=this._player)||void 0===d?void 0:d.curDefinition,n=(null==e?void 0:e.bitrate)||(null==e?void 0:e.realBitrate)||0,l=(null==e?void 0:null===(c=e.audioDefinition)||void 0===c?void 0:c.bitrate)||0,o=(null==e?void 0:e.realBitrate)||0;v={switch_order:this._count++,clarity_now:this._clarityTransform(i),video_quality:null==t?void 0:t.qualityType,video_bitrate:n,audio_bitrate:l,play_bitrate:o,play_duration:0,switch_type:K.mannual,is_bytevc1:this._getCodec()}}else{let e=(null==t?void 0:t.bitrate)||(null==t?void 0:t.realBitrate)||0,n=(null==t?void 0:null===(f=t.audioDefinition)||void 0===f?void 0:f.bitrate)||0,l=(null==t?void 0:t.realBitrate)||0;v={switch_order:this._count++,clarity_now:this._clarityTransform(i),video_quality:null==t?void 0:t.qualityType,video_bitrate:e,audio_bitrate:n,play_bitrate:l,play_duration:0,switch_type:K.mannual,is_bytevc1:this._getCodec()}}let m={switchOption:e,switchFromAuto:r,switchToAuto:h,switchStartTime:Date.now(),status:3,definationInfo:v};this.addSwitchDefinationInfo(m);let g=this.findLatestSwitchSuccessItem(1);g&&(g.definationInfo=(0,o._)((0,l._)({},g.definationInfo),{is_super_resolution:this._srStatus}))}}onUserAction(e){}onEnded(){}_initListener(){let{_player:e}=this;null==e||e.on(f.USER_ACTION,this.onUserAction),null==e||e.on(er.BeforeDefinitionChange,this.onBeforeDefinitionChange),null==e||e.on(H._c.ABR_DEFINITION_REAL_CHANGE,this.onABRDefinitionChangeSuccess),null==e||e.on(er.DefinitionChange,this.onDefinitionChange),null==e||e.on(er.DefinitionChangeSuccess,this.onDefinitionChangeSuccess),null==e||e.on(er.DefinitionChangeFail,this.onDefinitionChangeFail),null==e||e.on(f.ENDED,this.onEnded)}_uninitListener(){let{_player:e}=this;null==e||e.off(f.USER_ACTION,this.onUserAction),null==e||e.off(er.BeforeDefinitionChange,this.onBeforeDefinitionChange),null==e||e.off(er.DefinitionChange,this.onDefinitionChange),null==e||e.off(er.DefinitionChangeSuccess,this.onDefinitionChangeSuccess),null==e||e.off(er.DefinitionChangeFail,this.onDefinitionChangeFail),null==e||e.off(f.ENDED,this.onEnded)}destroy(){this._uninitListener(),this.clearSwitchDefinationInfo(),this._initClarity=null,this.unbindFunc(),this._player=null,this._status=null,this._timer&&(clearTimeout(this._timer),this._timer=null)}getLatestSwitchDefinationInfo(){var e,t;return null===(t=this._switchDefinationInfos)||void 0===t?void 0:t[(null===(e=this._switchDefinationInfos)||void 0===e?void 0:e.length)-1]}findLatestSwitchSuccessItem(e){var t;let i;let n=null===(t=this._switchDefinationInfos)||void 0===t?void 0:t.length,l=e||1;for(let e=n-1;e>=0;e--){let t=this._switchDefinationInfos[e];if((null==t?void 0:t.status)===l){i=t;break}}return i}constructor(e){(0,n._)(this,"_switchDefinationInfos",[]),(0,n._)(this,"_player",void 0),(0,n._)(this,"_startTime",void 0),(0,n._)(this,"_initClarity",void 0),(0,n._)(this,"_count",0),(0,n._)(this,"_timer",null),(0,n._)(this,"_status",void 0),(0,n._)(this,"_nowClarity",void 0),(0,n._)(this,"_abtestData",void 0),(0,n._)(this,"_srStatus",void 0),(0,n._)(this,"_awemeInfo",void 0);let{player:t,awemeInfo:i,abtestData:l}=e;this._switchDefinationInfos=[],this._player=t,this._abtestData=l,this._awemeInfo=i,this._status=0,this.onBeforeDefinitionChange=this.onBeforeDefinitionChange.bind(this),this.onDefinitionChangeFail=this.onDefinitionChangeFail.bind(this),this.onDefinitionChangeSuccess=this.onDefinitionChangeSuccess.bind(this),this.onDefinitionChange=this.onDefinitionChange.bind(this),this.onABRDefinitionChangeSuccess=this.onABRDefinitionChangeSuccess.bind(this),this.onUserAction=this.onUserAction.bind(this),this.onEnded=this.onEnded.bind(this)}}let X=e=>{let{player:t,gearList:i,abtestData:n,isActive:l,awemeInfo:o}=e,a=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e,l;return t?(a.current=new Y({player:t,gearList:i,abtestData:n,awemeInfo:o}),null===(e=a.current)||void 0===e||e.init(),null===(l=a.current)||void 0===l||l.start(),()=>{var e;null===(e=a.current)||void 0===e||e.destroy(),a.current=null}):()=>{}},[t,n]),(0,r.useEffect)(()=>{var e,i;if(!!t)l?null===(e=a.current)||void 0===e||e.start():null===(i=a.current)||void 0===i||i.reset()},[l])};var ee=i("687418");let et="xgplayer-playclarity-setting",ei="xgplayer-playclarity-setting-v2",en=e=>{let{indexSelected:t,abtestData:i,uniqueKey:n}=e,l=(0,r.useCallback)(e=>{if((0,C.fR)()||(null==i?void 0:i.exposureDefination))try{var t;let i=e&&e!==j.hq.Auto?0:1,l="xgplayer-playclarity-setting-unique-"+n,o=null===(t=document.getElementsByClassName(l))||void 0===t?void 0:t[0];if(!o)return;let a=o.className.indexOf(ei)>-1?0:1;i!==a&&(o.className=i?`${et} ${l}`:`${et} ${l} ${ei}`)}catch(e){}},[i,n]);(0,r.useEffect)(()=>{l(t)},[t])},el=e=>{let{player:t,action:i,awemeInfo:n,isActive:l,abtestData:o}=e;(0,r.useEffect)(()=>{if(l||!(null==o?void 0:o.switchClarityTiming))return()=>{};let e=A.listen(A.EVENT.syncDefination,e=>{let{awemeId:t}=e;if((null==n?void 0:n.awemeId)!==t)i()});return()=>{e()}},[t,i,n,o])},eo=e=>{let{player:t,awemeInfo:i,isActive:n}=e;(0,r.useEffect)(()=>{if(!t||!n)return;let e=()=>{U(t)};return window.addEventListener("beforeunload",e),t.once(L.B.BeforeDestroy,e),()=>{e(),t.off(L.B.BeforeDestroy,e),window.removeEventListener("beforeunload",e)}},[t,i,n])},ea=(e,t)=>{let i={key:j.hq.HD4K,label:j.cJ.HD4K,val:(0,a.jsxs)("div",{className:"clarity-wrapper",children:[(0,a.jsx)("span",{children:j.cJ.HD4K}),!1===e?(0,a.jsx)("span",{className:"loginV2",children:"登录即享"}):null]}),stat:j.hq.HD4K,quality:0,defaultQuality:1,gearName:"",gearType:j.EA.HD4K},n={key:j.hq.HD2K,label:j.cJ.HD2K,val:(0,a.jsxs)("div",{className:"clarity-wrapper",children:[(0,a.jsx)("span",{children:j.cJ.HD2K}),!1===e?(0,a.jsx)("span",{className:"loginV2",children:"登录即享"}):null]}),stat:j.hq.HD2K,quality:0,defaultQuality:1,gearName:"",gearType:j.EA.HD2K},l=[{key:j.hq.Hd,label:j.cJ.Hd,val:(0,a.jsxs)("div",{className:"clarity-wrapper",children:[(0,a.jsx)("span",{children:j.cJ.Hd}),!1===e?(0,a.jsx)("span",{className:"loginV2",children:"登录即享"}):null]}),stat:j.hq.Hd,quality:0,defaultQuality:1,gearName:"",gearType:j.EA.Hd},{key:j.hq.Clear,label:j.cJ.Clear,val:j.cJ.Clear,stat:j.hq.Clear,quality:0,defaultQuality:10,gearName:"",gearType:j.EA.Clear},{key:j.hq.Smooth,label:j.cJ.Smooth,val:j.cJ.Smooth,stat:j.hq.Smooth,quality:0,defaultQuality:20,gearName:"",gearType:j.EA.Smooth},{key:j.hq.Auto,label:j.cJ.Auto,val:j.cJ.Auto,stat:j.hq.Auto,quality:0,gearName:"",gearType:j.EA.Auto}],o=[{key:j.hq.Hd,label:j.QM.Hd,val:(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{children:j.QM.Hd}),!1===e?(0,a.jsx)("span",{className:"login",children:"登录即享"}):null]}),stat:j.hq.Hd,quality:0,defaultQuality:1,gearName:"",gearType:j.EA.Hd},{key:j.hq.Clear,label:j.QM.Clear,val:j.QM.Clear,stat:j.hq.Clear,quality:0,defaultQuality:10,gearName:"",gearType:j.EA.Clear},{key:j.hq.Smooth,label:j.QM.Smooth,val:j.QM.Smooth,stat:j.hq.Smooth,quality:0,defaultQuality:20,gearName:"",gearType:j.EA.Smooth},{key:j.hq.Fast,label:j.QM.Fast,val:j.QM.Fast,stat:j.hq.Fast,quality:0,defaultQuality:24,gearName:"",gearType:j.EA.Fast},{key:j.hq.Auto,label:j.QM.Auto,val:j.QM.Auto,stat:j.hq.Auto,quality:0,gearName:"",gearType:j.EA.Auto}];return(0,C.fR)()?[i,n].concat(l):(null==t?void 0:t.exposureDefination)?l:o};var er={BeforeDefinitionChange:"BeforeDefinitionChange",DefinitionChange:"DefinitionChange",DefinitionChangeSuccess:"DefinitionChangeSuccess",DefinitionChangeFail:"DefinitionChangeFail",DefinitionChangeOnlyForSr:"DefinitionChangeOnlyForSr"};let es=e=>{let{awemeInfo:t,userInfo:i={},player:n,isActive:a,currentDefinition:s,userSelectDefinition:d,abtestData:c,isInnerFeed:f,srSceneType:h,isModalVideo:v,modalEnterFrom:m}=e,{isLogin:x}=i,w=(0,r.useMemo)(()=>(0,C.fR)()?j.cJ:j.QM,[c]),[b,N]=(0,r.useState)(""),[A,k]=(0,r.useState)(w.Auto);(0,r.useEffect)(()=>{n&&(n.curClarity=b)},[b]);let I=(0,r.useMemo)(()=>{let e=ea(x,c),i=D({awemeInfo:t,abtestData:c,enableDash:!0});if((null==c?void 0:c.switchUseSR)&&(0,ee.CM)({abtestData:c,awemeInfo:t,isInnerFeed:f,isModalVideo:v,modalEnterFrom:m})&&i.list.forEach(e=>{(0,ee.Ak)({srSceneType:h,player:n,abtestData:c,awemeInfo:t,isActive:a,curDefinition:e})&&(e.enableSr=!0)}),e=ea(x,c).filter(e=>{if(e.gearType===j.EA.Auto)return!0;if(Array.isArray(i.list)&&-1!==i.list.findIndex(t=>t.definition===e.gearType))return!0;{let t=j.i4[e.gearType];if(!t)return!1;let n=i.list.find(e=>e.definition===t&&(null==e?void 0:e.enableSr));return!!n&&(e.isSr=!0,e.srInfo=n,!0)}}),a){var l,o;let i=null!==(o=null==c?void 0:c.clarityMap)&&void 0!==o?o:p.ClarityMap,a=[];((null==t?void 0:null===(l=t.video)||void 0===l?void 0:l.bitRateList)||[]).forEach(t=>{a.push(t.gearName),Object.keys(i).forEach(n=>{let l=e.findIndex(e=>{if(null==e||!e.isSr)return e.key===n;{let t=null===j.vk||void 0===j.vk?void 0:j.vk[e.key];return!!t&&t===n}});l>-1&&i[n].includes(t.gearName)&&(e[l].quality=t.qualityType,e[l].gearName=t.gearName)})});let r=(0,S.G)(_.SessionStorageKeys.manualSwitch)||{};r.clarityReal=a,(0,S.t_)(_.SessionStorageKeys.manualSwitch,r),n&&(n.gearList=e,n.allowList=i)}return e},[x,t,s,a,d,c,f]),E=(0,r.useCallback)(g()(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=(0,S.G)(_.SessionStorageKeys.manualSwitch)||{};if(i.gearClarity&&i.gearClarity!==j.hq.Auto){let l,o=!1,a=null==i?void 0:i.gearClarity;if(c.switchUseSR&&(l=I.find(e=>{let t=(null==e?void 0:e.isSr)?null===j.i4||void 0===j.i4?void 0:j.i4[e.gearType]:e.gearType;return e.key===a&&t===Number(null==n?void 0:n.curDefinition.definition)})),!l&&((0,C.fR)()||(null==c?void 0:c.exposureDefination))){if(!(l=I.find(e=>e.key===a))&&(null==I?void 0:I.length)>1){let e=null==I?void 0:I[0],t=null==I?void 0:I[I.length-2];l=Number(a)>Number(null==e?void 0:e.key)?null==I?void 0:I[0]:Number(a)<Number(null==t?void 0:t.key)?[...I].reverse().find(e=>Number(e.key)>Number(a)):I.find(e=>Number(e.key)<Number(a))}l&&!function(e){var t;let{item:i,player:n,onBeforeSwitch:l,awemeInfo:o,abtestData:a}=e,{gearType:r,isSr:s}=i,{curDefinition:u}=n,d=s?null===j.i4||void 0===j.i4?void 0:j.i4[r]:Number(r);if(d===Number(u.definition))return n.emit(er.DefinitionChangeOnlyForSr);let c=D({awemeInfo:o,abtestData:a,enableDash:!0});if(!(null===(t=c.list)||void 0===t?void 0:t.length))return;if(n.plugins.dashplugin){let e=D({awemeInfo:o,abtestData:a,enableDash:!1});c.list=n.plugins.dashplugin.onPreChangeDefinition(c.list,e.list)}let f=c.list.find(e=>Number(e.definition)===d);f&&(n.config.definition.list=c.list,f.definition!==u.definition&&(l(),setTimeout(()=>{n.changeDefinition(f,u)},1e3)))}({onBeforeSwitch:()=>{O.addAutoSwitchCount(n)},abtestData:c,item:l,awemeInfo:t,player:n})}if(l&&(N(l.key),k(l.label),o=!0),!o)for(let t of I)if(e){if(i.gearClarity===t.key){N(t.key),k(t.label),o=!0;break}}else{let e=t.gearType;if(c.switchUseSR&&(e=(null==t?void 0:t.isSr)&&(null===j.i4||void 0===j.i4?void 0:j.i4[t.gearType])||t.gearType),Number(null==n?void 0:n.curDefinition.definition)===e||Number(null==n?void 0:n.curDefinition.definition)===j.EA.Fast&&e===j.EA.Smooth){N(t.key),k(t.label),o=!0;break}}!o&&(k(w.Auto),N(j.hq.Auto))}else k(w.Auto),N(j.hq.Auto)},500),[I,n,c,w]);(0,y.o)(()=>{E()},[E]),el({player:n,action:E,awemeInfo:t,isActive:a,abtestData:c}),(0,r.useEffect)(()=>(null==c?void 0:c.switchClarityTiming)?()=>{}:(null==n||n.on("UpdateSyncText",E),()=>{null==n||n.off("UpdateSyncText",E)}),[E,n,c]);let[P,T]=(0,r.useState)(M.N.Off);(0,r.useEffect)(()=>{if(n){let e=e=>{n.emit("DefinitionChange",(0,o._)((0,l._)({},e),{hack:!1}))},t=e=>{n.emit("DefinitionChangeSuccess",{defination:e,hack:!1})};return n.on(u.W.DEFINITION_CHANGE,e),n.on(u.W.DEFINITION_CHANGE_HINT,t),()=>{n.off(u.W.DEFINITION_CHANGE,e),n.off(u.W.DEFINITION_CHANGE_HINT,t)}}},[n]),(0,r.useEffect)(()=>{if(n){let e;let t=M.N.Off,i=i=>{t=i,T(i),clearTimeout(e),e=setTimeout(()=>{t=M.N.Off,T(M.N.Off)},1e3)},l=()=>{if(!((null==n?void 0:n.curClarity)===j.hq.Auto||O.getIsInAutoSwitch(n)))i(M.N.Switching)},o=()=>{if((null==n?void 0:n.curClarity)!==j.hq.Auto){if(O.getIsInAutoSwitch(n)){O.subAutoSwitchCount(n);return}setTimeout(()=>{i(M.N.SwitchSuccess)},t===M.N.Off?0:500),n.emit(L.B.UpdateDebugInfo)}},a=()=>{if(O.getIsInAutoSwitch(n)){O.subAutoSwitchCount(n);return}setTimeout(()=>{i(M.N.SwitchFail)},t===M.N.Off?0:500),n.emit(L.B.UpdateDebugInfo)};return n.on("DefinitionChange",l),n.on("DefinitionChangeSuccess",o),n.on("DefinitionChangeFail",a),()=>{n.off("DefinitionChange",l),n.off("DefinitionChangeSuccess",o),n.off("DefinitionChangeFail",a),clearTimeout(e)}}},[n]);let R=(0,r.useRef)({indexSelected:b,current:A});return(0,r.useEffect)(()=>{P===M.N.SwitchSuccess&&(R.current={current:A,indexSelected:b})},[P,b,A]),{indexSelectedState:[b,N],currentState:[A,k],lists:I,swichStatus:P,syncSelectText:E}},eu=e=>{let{awemeInfo:t,onMouseLeave:i,dispatch:n,player:s,abtestData:u,timeStamp:d}=e,[h,m]=(0,r.useState)(!1),g=null==t?void 0:t.awemeId,[y,x]=(0,r.useState)(e.userInfo),{isLogin:w}=y,I=(0,T.H)("clarity"),{indexSelectedState:[P,R],currentState:[F,H],lists:W,swichStatus:V,syncSelectText:q}=es((0,o._)((0,l._)({},e),{userInfo:y}));en({indexSelected:P,abtestData:u,current:F,uniqueKey:`${null==t?void 0:t.awemeId}-${d}`}),(0,r.useEffect)(()=>{if(s){var e;s.videoList=null==t?void 0:null===(e=t.video)||void 0===e?void 0:e.bitRateList}},[t,s]);let Z=(0,r.useCallback)((e,t)=>{let i=(0,S.G)(_.SessionStorageKeys.manualSwitch)||{};i.done=1;let n=e||t===j.hq.Auto&&(null==W?void 0:W[(null==W?void 0:W.length)-1]);n&&(i.gearClarity=n.key,i.qualityType=n.quality||(null==e?void 0:e.defaultQuality),i.gearName=n.label,i.gearType=n.gearType),(0,S.t_)(_.SessionStorageKeys.manualSwitch,i)},[W]),K=(0,v.Z)(e=>{Z(e),s.curClarity=e.key;let{curDefinition:i}=s||{};s.config.clarityChange={from:{clarity:P,defination:null==i?void 0:i.definition},to:{clarity:e.key,defination:e.gearType}},!function(e){var t,i,n,l,o;let{item:a,player:r,indexSelected:s,awemeInfo:u,abtestData:d}=e,c=null==d?void 0:d.autoClarityReselect;if(a.key===j.hq.Auto){let e,t=!1,{curDefinition:a}=r;if(c&&s!==j.hq.Auto){let s=D({awemeInfo:u,abtestData:d,enableDash:!0});if(null===(i=s.list)||void 0===i?void 0:i.length){if(r.plugins.dashplugin){let e=D({awemeInfo:u,abtestData:d,enableDash:!1});s.list=r.plugins.dashplugin.onPreChangeDefinition(s.list,e.list)}U(r);let i=null==r?void 0:null===(o=r.plugins)||void 0===o?void 0:null===(l=o.bitrateselector)||void 0===l?void 0:null===(n=l.getSuitableBitrate)||void 0===n?void 0:n.call(l,s.list,void 0);(t=i&&(null==i?void 0:i.definition)!==a.definition)&&(e=i,r.config.definition.list=s.list)}else t=!1}t?(r.emit(er.BeforeDefinitionChange),r.changeDefinition(e,a)):(r.emit(er.DefinitionChange,{hack:!0}),setTimeout(()=>{r.emit(er.DefinitionChangeSuccess,{hack:!0})},1e3),(null==d?void 0:d.switchUseSR)&&r.emit(er.DefinitionChangeOnlyForSr));return}let{gearType:f,isSr:h}=a,{curDefinition:v}=r,m=h?null===j.i4||void 0===j.i4?void 0:j.i4[f]:Number(f);if(m===Number(v.definition)){r.emit(er.BeforeDefinitionChange),(s===j.hq.Auto||s!==a.key)&&(r.emit(er.DefinitionChange,{hack:!0}),setTimeout(()=>{r.emit(er.DefinitionChangeSuccess,{hack:!0})},1e3)),(null==d?void 0:d.switchUseSR)&&r.emit(er.DefinitionChangeOnlyForSr);return}let g=D({awemeInfo:u,abtestData:d,enableDash:!0});if(!(null===(t=g.list)||void 0===t?void 0:t.length)){r.emit(er.DefinitionChangeFail);return}if(r.plugins.dashplugin){let e=D({awemeInfo:u,abtestData:d,enableDash:!1});g.list=r.plugins.dashplugin.onPreChangeDefinition(g.list,e.list)}let p=g.list.find(e=>Number(e.definition)===m);p?p.definition!==v.definition&&(r.config.definition.list=g.list,r.emit(er.BeforeDefinitionChange),U(r),O.resetAutoSwitchCount(r),r.changeDefinition(p,v),(null==d?void 0:d.switchClarityTiming)&&A.emit(A.EVENT.syncDefination,{awemeId:null==u?void 0:u.awemeId})):r.emit(er.DefinitionChangeFail)}({item:e,player:s,indexSelected:P,awemeInfo:t,abtestData:u}),m(!1),R(e.key),H(e.label)}),G=(0,v.Z)(function(e){var a;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==i||i(),s.emit(f.USER_ACTION,{action:"switch_clarity",pluginName:"clarity"});let d=(0,S.G)(_.SessionStorageKeys.manualSwitch)||{};if(E.Z.sendLog("clarityCellClick",(0,l._)({group_id:g,action:e.key,item_duration_ms:(null==t?void 0:null===(a=t.video)||void 0===a?void 0:a.duration)||0,enter_from_merge:(0,b.yW)(),enter_from:(0,b.mo)()},(0,N.t)(),r)),!1===w&&[j.hq.HD4K,j.hq.HD2K,j.hq.Hd].includes(e.key)){(0,k.default)({headerText:"登录后即可享受高清画质",success:()=>{var t,i;"recommend"===(0,b.yW)()&&(null==u?void 0:u.recommendLoginResume)===p.RecommendLoginResume.V2?A.emit(A.EVENT.RecommendLoginResume):n({type:"updateUserInfo"}),(null==s?void 0:s.config)&&(s.config.userSelectDefinition=1),x(e=>(0,o._)((0,l._)({},e),{isLogin:!0})),null==s||null===(i=s.plugins)||void 0===i||null===(t=i.playclaritysettingplugin)||void 0===t||t.renderRoot(),K(e)},enterMethod:"clarity_panel",clarity:d.gearClarity,isAuto:d.done?0:1,gearName:d.gearName});return}K(e)}),[,$]=(0,r.useState)({});(0,r.useEffect)(()=>{var e;let t=null==A?void 0:A.listen(null==A?void 0:null===(e=A.EVENT)||void 0===e?void 0:e.clarityRel,e=>{if(e.hdLogin){(null==s?void 0:s.config)&&(s.config.userSelectUpdate=Date.now());let e=W.find(e=>[j.hq.HD4K,j.hq.HD2K,j.hq.Hd].includes(e.key));e&&K(e),x(e=>(0,o._)((0,l._)({},e),{isLogin:!0}))}if(e.autoSwitch){let e=W.find(e=>e.key===j.hq.Auto);e&&K(e),s.config.userSelectUpdate=Date.now(),$({})}e.exitInner&&(s.config.userSelectUpdate=Date.now(),q(!0),$({}))});return()=>{t()}},[s,u]),(0,r.useEffect)(()=>{let e=e=>{let{item:t,logParams:i}=e;G(t,i)};if(s)return null==s||s.on(L.B.UpdateClarity,e),()=>{null==s||s.off(L.B.UpdateClarity,e)}},[s]),(0,r.useEffect)(()=>{s&&W&&(s.config.clearLists=W)},[s,W]);let z=!!W.find(e=>[j.hq.HD4K,j.hq.HD2K,j.hq.Hd].includes(e.key));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:c()("gear",{hover:h,isClarityLogin:!((0,C.fR)()||(null==u?void 0:u.exposureDefination))&&(w||!z),isSmoothSwitchClarity:((0,C.fR)()||(null==u?void 0:u.exposureDefination))&&!w,isSmoothSwitchClarityLogin:!(((0,C.fR)()||(null==u?void 0:u.exposureDefination))&&!w)}),ref:I,onMouseOver:e=>{if(!e.target.closest(".semi-portal"))m(!0),!h&&E.Z.sendLog("clarityCellShow",(0,l._)({group_id:null==t?void 0:t.awemeId},(0,N.t)()))},onMouseOut:()=>{m(!1)},children:[(0,a.jsx)("div",{className:"virtual",children:null==W?void 0:W.map(e=>(0,a.jsx)("div",{className:c()("item",{selected:e.key===P}),onClick:()=>G(e),children:e.val},e.key))}),(0,a.jsx)(B.A,{visible:V!==M.N.Off,getPopupContainer:()=>I.current,swichStatus:V,current:F,children:(0,a.jsx)("div",{className:c()("btn",{btnV2:((0,C.fR)()||(null==u?void 0:u.exposureDefination))&&P&&P!==j.hq.Auto}),children:F})})]}),(0,a.jsx)("div",{className:"login-tooltip-slot"}),(0,a.jsx)("div",{className:"smart-tooltip-slot"})]})};class ed extends h.ZP{static get pluginName(){return"PlayClaritySettingPlugin"}static get defaultConfig(){return{position:s.POSITIONS.CONTROLS_RIGHT,index:7,className:"xgplayer-playclarity-setting"}}beforePlayerInit(){this.renderRoot()}updateConfig(e){this.config=(0,l._)({},this.config,e)}afterCreate(){this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseleave),this.renderRoot()}destroy(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),(0,P.v)(this)}renderRoot(){var e,t,i,n,r,s,u,d,c;if((null===(t=this.config)||void 0===t?void 0:null===(e=t.awemeInfo)||void 0===e?void 0:e.awemeType)===(null==x?void 0:null===(i=w.e)||void 0===i?void 0:i.Note))return;let f=(0,a.jsx)(eu,(0,o._)((0,l._)({onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave},this.config),{player:this.player,currentDefinition:null===(u=this.player)||void 0===u?void 0:null===(s=u.getPlugin)||void 0===s?void 0:null===(r=s.call(u,"bitrateselector"))||void 0===r?void 0:null===(n=r.curBitRate)||void 0===n?void 0:n.definition,userSelectDefinition:null===(d=this.player)||void 0===d?void 0:d.config.userSelectDefinition,userSelectUpdate:null===(c=this.player)||void 0===c?void 0:c.config.userSelectUpdate}));(0,P.s)(this,f)}render(){var e,t,i;return`
    <xg-icon class="xgplayer-playclarity-setting xgplayer-playclarity-setting-unique-${null===(t=this.config)||void 0===t?void 0:null===(e=t.awemeInfo)||void 0===e?void 0:e.awemeId}-${null===(i=this.config)||void 0===i?void 0:i.timeStamp}" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,n._)(this,"onMouseleave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,n._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})})}}let ec=e=>{let{userInfo:{isLogin:t},awemeInfo:i,abtestData:n,isActive:a}=e,s=(0,I.n)();return(0,y.o)(()=>{if(s&&(null==i?void 0:i.awemeType)!==w.e.Note)return s.registerPlugin(ed,(0,o._)((0,l._)({},e),{player:s,timeStamp:Date.now()})),()=>{s.getPlugin("PlayClaritySettingPlugin")&&s.unRegisterPlugin("PlayClaritySettingPlugin",!0)}},[s,t,i]),(0,r.useEffect)(()=>{s&&a&&s.emit("UpdateSyncText")},[a,s]),X({isActive:a,player:s,abtestData:n,awemeInfo:i}),eo({isActive:a,player:s,awemeInfo:i}),null}},687418:function(e,t,i){i.d(t,{Ak:function(){return v},CM:function(){return c},RH:function(){return m},m2:function(){return u}}),i(347885);var n=i(837305),l=i(528557),o=i(819769),a=i(13351),r=i(536662),s=i(751765);let u=e=>!!e&&e>1&&e<10,d=e=>{var t;let{player:i,abtestData:a,awemeInfo:r,curDefinition:s}=e;if((0,l.$o)(n.LocalStorageKeys.srDegradePermanently)||o.Le.getConfig(o.gI.SrDegrade))return!1;if(!u(null==s?void 0:s.definition))return!1;return(null==a?!!void 0:null===(t=a.SR)||void 0===t?!!void 0:!!t.improvePictureQuality)||(null==s?!!void 0:!!s.orgDefinition)||!1},c=e=>!!(0,a.DT)()||(0,s.YO)(e),f=e=>{var t,i,n,l,o,a,r,s,u,d,c,f,h,v,m,g;let{player:p,abtestData:_,awemeInfo:y,isActive:x,curDefinition:w}=e,{awemeId:C,isAds:S}=y;if((null==w?void 0:w.qualityType)>9&&!S&&((null==_?void 0:null===(i=_.SR)||void 0===i?void 0:i.improvePictureQuality)||(null==_?void 0:null===(l=_.SR)||void 0===l?void 0:null===(n=l.targetDefinition)||void 0===n?void 0:n.includes(null==w?void 0:w.definition))||(null==w?void 0:w.orgDefinition))){let e=null==y?void 0:null===(o=y.video)||void 0===o?void 0:o.duration,t=null==w?void 0:w.isH265;if(!(null==_?void 0:null===(a=_.SR)||void 0===a?void 0:a.filteredFormats)||(null==_?void 0:null===(r=_.SR)||void 0===r?void 0:r.filteredFormats)&&(null==_?void 0:null===(u=_.SR)||void 0===u?void 0:null===(s=u.filteredFormats)||void 0===s?void 0:s.includes(t))){if(null==_||null===(d=_.SR)||void 0===d||!d.videoDuration)return!!window.TTCommon;if(e<(null==_?void 0:null===(c=_.SR)||void 0===c?void 0:c.videoDuration)&&(null==_?void 0:null===(h=_.SR)||void 0===h?void 0:null===(f=h.filteredFormatsLow)||void 0===f?void 0:f.includes(t))||e>=(null==_?void 0:null===(v=_.SR)||void 0===v?void 0:v.videoDuration)&&(null==_?void 0:null===(g=_.SR)||void 0===g?void 0:null===(m=g.filteredFormatsHigh)||void 0===m?void 0:m.includes(t)))return!!window.TTCommon}}if(S&&(null==p?void 0:null===(t=p.curDefinition)||void 0===t?void 0:t.qualityType)>9)return!!window.TTCommon},h=e=>{var t,i,n,l,o,a,r,s,u,d,c,f,h,v,m,g,p,_,y;let{player:x,abtestData:w,awemeInfo:C,isActive:S,curDefinition:b}=e,{awemeId:N,isAds:A}=C;if((null==x?void 0:null===(t=x.curDefinition)||void 0===t?void 0:t.qualityType)>9&&!A&&((null==w?void 0:null===(i=w.SRMultiScene)||void 0===i?void 0:i.improvePictureQuality)||(null==w?void 0:null===(o=w.SRMultiScene)||void 0===o?void 0:null===(l=o.targetDefinition)||void 0===l?void 0:l.includes(null==x?void 0:null===(n=x.curDefinition)||void 0===n?void 0:n.definition))||(null===(a=x.curDefinition)||void 0===a?void 0:a.orgDefinition))){let e=null==C?void 0:null===(r=C.video)||void 0===r?void 0:r.duration,t=null==x?void 0:null===(s=x.curDefinition)||void 0===s?void 0:s.isH265;if(!(null==w?void 0:null===(u=w.SRMultiScene)||void 0===u?void 0:u.filteredFormats)||(null==w?void 0:null===(d=w.SRMultiScene)||void 0===d?void 0:d.filteredFormats)&&(null==w?void 0:null===(f=w.SRMultiScene)||void 0===f?void 0:null===(c=f.filteredFormats)||void 0===c?void 0:c.includes(t))){if(null==w||null===(h=w.SRMultiScene)||void 0===h||!h.videoDuration)return!!window.TTCommon;if(e<(null==w?void 0:null===(v=w.SRMultiScene)||void 0===v?void 0:v.videoDuration)&&(null==w?void 0:null===(g=w.SRMultiScene)||void 0===g?void 0:null===(m=g.filteredFormatsLow)||void 0===m?void 0:m.includes(t))||e>=(null==w?void 0:null===(p=w.SRMultiScene)||void 0===p?void 0:p.videoDuration)&&(null==w?void 0:null===(y=w.SRMultiScene)||void 0===y?void 0:null===(_=y.filteredFormatsHigh)||void 0===_?void 0:_.includes(t)))return!!window.TTCommon}}return!1},v=e=>(0,a.DT)()?(null==e?void 0:e.srSceneType)===r.dd.douyinClientMulti?h(e):f(e):d(e),m=e=>{let{abtestData:t,player:i,awemeInfo:n}=e,l=!0;if(null==t?void 0:t.switchUseSR){var o;let e=(null==i?void 0:i.curClarity)||r.hq.Auto;if(e===r.hq.Auto)l=!0;else{let t=r.l4[e];l=e===r.hq.Auto||t!==Number(null==i?void 0:null===(o=i.curDefinition)||void 0===o?void 0:o.definition)}}return l}},208960:function(e,t,i){i.d(t,{A:function(){return r}});var n=i(259202),l=i(611542),o=i(432097),a=i(769609);let r=e=>{let{current:t,swichStatus:i,children:r,getPopupContainer:s,visible:u}=e,d=(0,l.useRef)("");return i===a.N.SwitchFail?d.current="清晰度切换失败，请稍后再试":i===a.N.Switching?d.current=`正在切换到 ${t} ...`:i===a.N.SwitchSuccess&&(d.current=`清晰度已经切换至 ${t}`),(0,n.jsx)(o.u,{position:"top",visible:u,getPopupContainer:s,trigger:"custom",rePosKey:String(u),zIndex:10,content:(0,n.jsx)("div",{children:d.current}),children:r})}},536662:function(e,t,i){i.d(t,{EA:function(){return s},QM:function(){return d},Ts:function(){return v},YB:function(){return o},cJ:function(){return c},dd:function(){return _},g:function(){return g},hq:function(){return a},i4:function(){return u},jH:function(){return f},l4:function(){return h},rT:function(){return l},sY:function(){return m},vk:function(){return r},y8:function(){return p}});var n=i(106649),l={HD4K:7,7:"HD4K",HD2K:6,6:"HD2K",Hd:5,5:"Hd",Clear:4,4:"Clear",Smooth:3,3:"Smooth",Fast:2,2:"Fast",Auto:1,1:"Auto"},o={HD4K:6,6:"HD4K",HD2K:5,5:"HD2K",Hd:4,4:"Hd",Clear:3,3:"Clear",Smooth:2,2:"Smooth",Auto:1,1:"Auto"},a={HD4K:"20",HD2K:"10",Hd:"5",Clear:"4",Smooth:"3",Fast:"2",Auto:"0"};let r={5:"4",4:"3",3:"2"};var s={HD4K:-2,"-2":"HD4K",HD2K:-1,"-1":"HD2K",Hd:1,1:"Hd",Clear:2,2:"Clear",Smooth:3,3:"Smooth",Fast:4,4:"Fast",Auto:0,0:"Auto"};let u={1:2,2:3,3:4},d={Hd:n.a.t("hd",{},"高清"),Clear:n.a.t("clarity",{},"清晰"),Smooth:n.a.t("smooth",{},"流畅"),Fast:n.a.t("fast",{},"极速"),Auto:n.a.t("smart",{},"智能")},c={HD4K:n.a.t("ultra_4k",{},"超清 4K"),HD2K:n.a.t("ultra_2k",{},"超清 2K"),Hd:n.a.t("hd",{},"高清 1080P"),Clear:n.a.t("clarity",{},"高清 720P"),Smooth:n.a.t("smooth",{},"标清 540P"),Fast:n.a.t("fast",{},"极速"),Auto:n.a.t("smart",{},"智能")};var f={low:"当前网络较差，",high:"当前网络良好，",lowTail:"更流畅",highTail:"更清晰"};let h={5:1,4:2,3:3,2:4,0:0},v=864e5,m=158112e5,g={highTimestamp:0,highTimes:0,lowTimestamp:0},p=["volume","fullscreen","playbacksettingplugin","autoplaysettingplugin","innerautoplayplugin","immersiveswitchsettingplugin","playclaritysettingplugin","pagefullscreenplugin"];var _={douyinWeb:0,0:"douyinWeb",douyinClient:1,1:"douyinClient",douyinClientMulti:2,2:"douyinClientMulti"}},769609:function(e,t,i){i.d(t,{N:function(){return n}});var n={Off:0,0:"Off",Switching:1,1:"Switching",SwitchSuccess:2,2:"SwitchSuccess",SwitchFail:3,3:"SwitchFail"}},997266:function(e,t,i){var n=i(354795);t.Z=new n.h({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:"",enter_from_merge:"",enter_from:"",item_duration_ms:0}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}})},926879:function(e,t,i){i.d(t,{I:function(){return h}});var n=i(590921),l=i(259202),o=i(611542),a=i(895184),r=i(356789),s=i(322903),u=i(401310),d=i(935708),c=i(773627);i(353753);let f=e=>{let t=(0,u.n)(),{isActive:i,fullScreenTarget:n,loginDispatch:l,scene:d,disableHook:c,isLogin:f}=e;return(0,o.useEffect)(()=>{t&&(t.config&&t.config.fullscreenTarget!==n&&(t.config.fullscreenTarget=n,"detail"===d&&(t.config.fullscreenTarget=document.documentElement)),i&&(0,a.r)()&&(t.getFullscreen(n),"detail"===d&&t.getFullscreen(document.documentElement)))},[t,i,n]),(0,o.useEffect)(()=>{if(t&&i){let e=r.listen(r.EVENT.fullScreen,e=>{let{fullScreen:i}=e;!i&&t.exitFullscreen()});return()=>{e()}}},[t,i]),(0,o.useEffect)(()=>{t&&t.usePluginHooks("fullscreen","fullscreen_change",()=>((0,s.QD)()&&r.emit(r.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"click_fullScreen"}),!0))},[t,i,c]),(0,o.useEffect)(()=>{if(i&&t)return r.listen(r.EVENT.syncInteraction,()=>{(0,a.r)()&&t.isUserActive&&t.getFullscreen()})},[t,i]),null},h=e=>{let t=(0,d.N)();return(0,l.jsx)(c.k,{componentName:"FullScrren",Slardar:t,children:(0,l.jsx)(f,(0,n._)({},e))})}},918036:function(e,t,i){i.d(t,{_:function(){return w}}),i(612222);var n=i(259202),l=i(611542),o=i(623176),a=i(825211),r=i.n(a),s=i(845029),u=i(582099),d=i(124797),c=i(135524),f=i(775583),h=i(713017),v=i(600743),m=i(480555),g=i(401310),p=i(359913),_=i(69274),y=i(367503),x=i(351582);let w=e=>{var t,i,a,w,C,S;let{isActive:b,awemeInfo:N,className:A,imgPlaceHolderClassName:k,showImg:I=!0,isPlaying:j=!1,controlHeight:E,abtestData:P,isRenderInSSR:L}=e,T=(0,g.n)(),[R,D]=(0,l.useState)(!0),[M,B]=(0,l.useState)(!1),[F,O]=(0,l.useState)(j),[U,H]=(0,l.useState)(null),W=(0,l.useRef)(0),V=(0,h.vU)();W.current=(null==N?void 0:null===(t=N.video)||void 0===t?void 0:t.width)/(null==N?void 0:null===(i=N.video)||void 0===i?void 0:i.height);let[q,Z]=(0,l.useState)(!1);(0,s.Z)(()=>{Z(!0)},[N]);let K=(0,l.useCallback)(()=>{Z(!1),U&&W.current&&(U.offsetWidth/W.current>=U.offsetHeight-(null!=E?E:d.fp.Default)?D(!0):D(!1))},[U,E]),G=(0,l.useCallback)(()=>{M||B(!0)},[M]);(0,l.useEffect)(()=>{if(U&&K){let e=v.Z.bind(U,K);return()=>{e&&e()}}},[U,K]),(0,l.useEffect)(()=>{!b&&O(!1)},[b]);let $=(0,p.l)();return(0,l.useEffect)(()=>{var e,t,i;let n=()=>{O(!0)};if(T)return null===(e=T.on)||void 0===e||e.call(T,o.CANPLAY,n),null===(t=T.once)||void 0===t||t.call(T,o.TIME_UPDATE,n),()=>{var e,t;null===(e=T.off)||void 0===e||e.call(T,o.CANPLAY,n),null===(t=T.off)||void 0===t||t.call(T,o.TIME_UPDATE,n)};{let e=e=>{e.once(o.CANPLAY,n)};return null==$||null===(i=$.on)||void 0===i||i.call($,_.V.PlayerCreated,e),()=>{var t;null==$||null===(t=$.off)||void 0===t||t.call($,_.V.PlayerCreated,e)}}},[T]),(0,u.Z)(()=>{B(!1),O(!1)},[N]),(0,n.jsxs)("div",{className:r()(A,m.default.imgBackground,m.default.playerShowInfo,{[m.default.isFirefox]:V,hiddenImgbackgroundPlugin:b&&F&&!(0,x.GP)(N),[m.default.displayNone]:(null==N?void 0:N.awemeType)===c.e.Note&&I,inlinePlayerImgbackgroundPlugin:L},"imgBackground"),ref:H,children:[!M&&I&&(0,n.jsx)("img",{src:(null==N?void 0:null===(a=N.video)||void 0===a?void 0:a.originCover)||(null==N?void 0:null===(S=N.varietyVideo)||void 0===S?void 0:null===(C=S.cover)||void 0===C?void 0:null===(w=C.url_list)||void 0===w?void 0:w[0]),className:r()("backgroundCover",{[m.default.baseWidth]:!R,[m.default.baseHeight]:R,[m.default.isHide]:q,[m.default.splashAd]:(0,f.pb)(N)},m.default.imgPlaceHolder,k),onLoad:K,onError:G}),(0,n.jsx)(y.T3,{className:r()(m.default.backgroundImg,"background",{[m.default.backgroundImgFirefox]:V}),maskClassName:m.default.backgroundMask,awemeInfo:N,isRenderInSSR:L,abtestData:P,priorityServerBackupBg:!1})]})}},710046:function(e,t,i){i.d(t,{zf:function(){return B},iu:function(){return F},Ot:function(){return H},KM:function(){return R},zQ:function(){return D}});var n=i("7979"),l=i("590921"),o=i("874155");i("612222");var a=i("259202"),r=i("611542"),s=i("781111"),u=i("825211"),d=i.n(u),c=i("623176"),f=i("185791"),h=i("753451"),v=i("837305"),m=i("606660"),g=i("135524"),p=i("528557"),_=i("819769"),y=i("322903"),x=i("245086"),w=i("656716"),C=i("713017"),S=i("356789"),b=i("111738"),N=i("660296"),A=i("614372"),k=i("354795"),I=new k.h({autoPlayModePanelShow:{eventName:"auto_play_mode_panel_show",params:{group_id:"",enter_from_merge:"",enter_from:""}},autoPlayModePanelClick:{eventName:"auto_play_mode_panel_click",params:{group_id:"",enter_from_merge:"",enter_from:"",auto_play_mode:""}}}),j=i("614012"),E=i("401310"),P=i("699233"),L=i("797210"),T=i("77435"),R={Nomal:0,0:"Nomal",Reverse:1,1:"Reverse",Cycle:2,2:"Cycle"};let D=["顺序连播","倒序连播","循环播放"],M=["order","reverse","loop"],B=[b.Z,N.Z,A.Z],F=e=>{let{isSetLog:t,awemeInfo:i,plugin:n,aloneState:l,defaultModeRef:o}=e,[a,s]=(0,r.useState)(()=>{var e;let t=(0,p.$o)(l?v.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY:v.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY),i=null===(e=_.Le.getConfig(_.gI.InnerAutoPlay))||void 0===e?void 0:e.modeIndex;if("number"==typeof i)return i;if(Number(t))return 2===Number(t)&&l?1:0;return l===m.InnerAutoplay.DefaultEnabled&&null===t?0:2});return(0,r.useEffect)(()=>{let e=e=>{var l,a;let r=null==e?void 0:null===(l=e.target)||void 0===l?void 0:l.tagName;if("INPUT"!==r&&"TEXTAREA"!==r&&(null==e?void 0:null===(a=e.target)||void 0===a?void 0:a.contentEditable)!=="true")(null==e?void 0:e.code)==="KeyK"&&!(0,y.QD)()&&s(e=>(o&&(o.current=!1),"reverse"===M[(e+1)%3]&&(0,p.qQ)(v.LocalStorageKeys.HasUseFlashBack,!0),t&&I.sendLog("autoPlayModePanelClick",{group_id:null==i?void 0:i.awemeId,enter_from:(0,x.mo)(),enter_from_merge:(0,x.yW)(),auto_play_mode:M[e]}),n.stopFlag=0,(e+1)%3))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,r.useEffect)(()=>{l?!o.current&&(0===a?(0,p.qQ)(v.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"1"):1===a?(0,p.qQ)(v.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"2"):(0,p.qQ)(v.LocalStorageKeys.PLAYER_INNER_NEXT_AUTOPLAY,"0")):0===a||1===a?(0,p.qQ)(v.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"1"):(0,p.qQ)(v.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,"0"),_.Le.setConfig(_.gI.InnerAutoPlay,{modeIndex:a,mode:M[a]})},[a,l]),[a,s]},O=e=>{let{playPrevFunc:t,playNextFunc:i,ablePlayPrev:n,ablePlayNext:o,player:s,isActive:u,innerAutoPlayWeight:f,awemeInfo:h,onMouseLeave:m,hide:y=!1,plugin:b,aloneState:N,abtestData:A}=e,k=(0,r.useRef)(!0),[E,R]=F({isSetLog:!0,awemeInfo:h,plugin:b,aloneState:N,defaultModeRef:k}),[O,U]=(0,r.useState)(!1),H=(0,T.H)("auto_play"),W=(0,r.useRef)(null),V=(0,r.useRef)(),q=(0,r.useCallback)(()=>{if(f>=0&&0===E&&i&&o&&(null==b?void 0:b.stopFlag)===0)(0,w.i0)(w.CK.Auto),null==i||i({from:"auto"}),_.Le.setConfig(_.gI.VideoPlayMethod,"auto_play_open");else if(f>=0&&1===E&&n&&t&&(null==b?void 0:b.stopFlag)===0)(0,w.i0)(w.CK.Auto),null==t||t({from:"auto"}),_.Le.setConfig(_.gI.VideoPlayMethod,"auto_play_open");else{let e=()=>{s.replay(),s.replayed=!0,_.Le.setConfig(_.gI.VideoPlayMethod,"auto")};(0,C.G6)()?setTimeout(e,50):e()}},[s,o,n,t,i,E,f]);(0,r.useEffect)(()=>{if(s&&u&&(null==h?void 0:h.awemeType)===g.e.Note){let e=()=>{var e;return null==s?void 0:null===(e=s.replay)||void 0===e?void 0:e.call(s)};return s.on(c.ENDED,e),()=>{s.off(c.ENDED,e)}}},[s,u,h]),(0,r.useEffect)(()=>{if(s&&u&&q&&(null==h?void 0:h.awemeType)!==g.e.Note)return s.on(c.ENDED,q),()=>{s.off(c.ENDED,q)}},[s,u,q,h]),(0,r.useEffect)(()=>{if(s&&u){s.replayed=!1;let e=S.listen(S.EVENT.changeInnerAutoPlay,e=>{"reverse"===M[e]&&(0,p.qQ)(v.LocalStorageKeys.HasUseFlashBack,!0),R(e),k.current=!1});return()=>{e()}}},[u,s,E]);let Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b.stopFlag=0,null==m||m(),U(!1),I.sendLog("autoPlayModePanelClick",(0,l._)({group_id:null==h?void 0:h.awemeId,enter_from:(0,x.mo)(),enter_from_merge:(0,x.yW)(),auto_play_mode:M[e]},t)),"reverse"===M[e]&&(0,p.qQ)(v.LocalStorageKeys.HasUseFlashBack,!0),_.Le.getConfig(_.gI.IsInMixCard)&&_.Le.setConfig(_.gI.AutoPlayChanged,{changed:!0}),R(e),k.current=!1};return(0,r.useEffect)(()=>{let e=e=>{let{index:t,logParams:i}=e;Z(t,i)};if(s)return null==s||s.on(L.B.UpdateAutoPlay,e),()=>{null==s||s.off(L.B.UpdateAutoPlay,e)}},[s]),(0,a.jsxs)("div",{className:d()("xgplayer-icon",j.default.innerAutoplay,j.default.iconBox),onMouseLeave:()=>{V.current=setTimeout(()=>{U(!1)},300)},onMouseEnter:()=>{clearTimeout(V.current)},ref:H,children:[O&&(0,a.jsxs)("div",{className:d()(j.default.itemContainer,"isDark"),children:[D.map((e,t)=>(0,a.jsxs)("div",{className:d()(j.default.innerItem,{[j.default.selected]:t===E}),onClick:()=>Z(t),children:[(0,a.jsx)(P.Z,{className:"noTransform",width:24,height:24,viewBox:"0 0 24 24",src:B[t]}),(0,a.jsx)("span",{children:e})]},e)),(0,a.jsx)("div",{className:j.default.label,children:"K键快捷切换"})]}),(0,a.jsxs)("div",{className:d()("inner-autoplay-item",j.default.outerContent),onMouseEnter:()=>{var e;clearTimeout(V.current),U(!0),!O&&I.sendLog("autoPlayModePanelShow",{group_id:null==h?void 0:h.awemeId,enter_from:(0,x.mo)(),enter_from_merge:(0,x.yW)()}),null===(e=W.current)||void 0===e||e.close()},children:[(0,a.jsx)(P.Z,{className:"noTransform",width:24,height:24,viewBox:"0 0 24 24",src:B[E]}),(0,a.jsx)("div",{className:"inner-autoplay-name",children:D[E]})]})]})};class U extends f.ZP{static get pluginName(){return"InnerAutoPlayPlugin"}static get defaultConfig(){return{position:h.POSITIONS.CONTROLS_RIGHT,index:9,className:"xgplayer-inner-autplay"}}beforePlayerInit(){this.renderRoot()}updateConfig(e){this.config=(0,l._)({},this.config,e),this.renderRoot()}afterCreate(){this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseleave),this.renderRoot()}destroy(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),s.unmountComponentAtNode(this.root)}renderRoot(){this.root&&s.hydrate((0,a.jsx)(O,(0,o._)((0,l._)({onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave},this.config),{player:this.player,plugin:this})),this.root)}render(){return`
    <xg-icon class="xgplayer-inner-autoplay automatic-continuous" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,n._)(this,"stopFlag",0),(0,n._)(this,"onMouseleave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,n._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})})}}let H=e=>{let{playPrevFunc:t,playNextFunc:i,ablePlayPrev:n,ablePlayNext:a,isActive:s,hide:u,awemeInfo:d,abtestData:c}=e,f=(0,E.n)();return(0,r.useEffect)(()=>{if(f&&s)return f.registerPlugin(U,(0,o._)((0,l._)({},e),{player:f,innerAutoPlayWeight:0,aloneState:2})),()=>{f.getPlugin("InnerAutoPlayPlugin")&&f.unRegisterPlugin("InnerAutoPlayPlugin",!0)}},[f,s,u]),(0,r.useEffect)(()=>{var t;let i=null==f?void 0:null===(t=f.getPlugin)||void 0===t?void 0:t.call(f,"InnerAutoPlayPlugin");f&&s&&i&&i.updateConfig((0,l._)({},e))},[f,s,i,t,a,n,u]),(0,r.useEffect)(()=>{var e;let t=null==f?void 0:null===(e=f.getPlugin)||void 0===e?void 0:e.call(f,"InnerAutoPlayPlugin");f&&s&&t&&(t.stopFlag=0)},[d]),(0,r.useEffect)(()=>{if(f&&s){var e;let t=null==f?void 0:null===(e=f.getPlugin)||void 0===e?void 0:e.call(f,"InnerAutoPlayPlugin");if(t){let e=S.listen(S.EVENT.videoStopPlayNext,e=>{if(!1===f.isUserActive)return;let{openSideCard:i}=e||{};i?t.stopFlag+=1:t.updateConfig({innerAutoPlayWeight:t.config.innerAutoPlayWeight>-1?t.config.innerAutoPlayWeight-1:-1})}),i=S.listen(S.EVENT.videoRemoveStopPlayNext,e=>{if(!1===f.isUserActive)return;let{openSideCard:i}=e||{};i?t.stopFlag=Math.max(t.stopFlag-1,0):t.updateConfig({innerAutoPlayWeight:t.config.innerAutoPlayWeight<0?t.config.innerAutoPlayWeight+1:0})});return()=>{null==e||e(),null==i||i(),t.updateConfig({innerAutoPlayWeight:0})}}}},[f,s,u,c]),null}},58259:function(e,t,i){i.d(t,{N:function(){return v}});var n=i(590921),l=i(259202);i(611542);var o=i(825211),a=i.n(o),r=i(775583),s=i(295301),u=i(86082),d=i(773627),c=i(935708);i(778450);var f=i(90927);let h=e=>{var t;let{awemeInfo:i,hitMiniWindowOptimize:n}=e,o=null==i?void 0:i.desc,d=null==i?void 0:null===(t=i.authorInfo)||void 0===t?void 0:t.nickname,c=null==i?void 0:i.mixInfo,h=(0,r.Jt)(i),v=(0,r.Kf)(i);return(0,l.jsxs)("div",{className:a()(f.default.wrap,f.default.newWrapShow,{[f.default.miniWindowOptimize]:n}),children:[(0,l.jsx)("div",{className:f.default.clientDragArea}),(0,l.jsx)("div",{className:f.default.nickname,children:(0,l.jsx)(s.Z,{className:f.default.userText,text:`@${d}`})}),(0,l.jsxs)("div",{className:a()(f.default.title,{[f.default.isAd]:h||v}),children:[(0,l.jsx)(s.Z,{className:f.default.text,text:o,isRemoveRowspan:!0,children:(null==c?void 0:c.currentEpisode)&&(0,l.jsxs)("span",{children:["第",null==c?void 0:c.currentEpisode,"集："]})}),(h||v)&&(0,l.jsx)(u.Vp,{className:a()(f.default.adTag),presetType:"ad",children:"广告"})]})]})},v=e=>{let t=(0,c.N)();return(0,l.jsx)(d.k,{componentName:"MiniWinInfo",Slardar:t,children:(0,l.jsx)(h,(0,n._)({},e))})}},497749:function(e,t,i){i.d(t,{D:function(){return C},I:function(){return S}});var n=i(590921),l=i(259202),o=i(611542),a=i(825211),r=i.n(a),s=i(356789),u=i(713017),d=i(819769),c=i(656716),f=i(692983),h=i(762353),v=i(197741),m=i(300513),g=i(283132),p=i(327630),_=i(773627);i(752084);var y=i(401310),x=i(935708),w=i(456713);let C=e=>{let{playPrevFunc:t,playNextFunc:i,disablePrev:n,disableNext:a,className:p,style:_,playSwitchRef:x,mouseHandler:C,playSwitchCb:S}=e,b=(0,y.n)(),N=(0,o.useCallback)(e=>{if(!n){if(t&&b){var i;null===(i=b.emit)||void 0===i||i.call(b,"playSwitchPrevBefore",!1),s.emit(s.EVENT.reportPlayPrev,{clickFrom:"click_button"}),null==S||S(),t()}}},[b,t,n]),A=(0,o.useCallback)(e=>{if(!a){if(i&&b){var t;null===(t=b.emit)||void 0===t||t.call(b,"playSwitchNextBefore",!1),s.emit(s.EVENT.reportPlayNext,{clickFrom:"click_button"}),null==S||S(),i()}}},[b,i,a]),k=(0,u.G6)();return(0,l.jsx)("div",{ref:x,onMouseMove:C,onClick:C,className:r()("xgplayer-playswitch",p),"data-state":"normal",style:_,children:(0,l.jsx)("div",{className:"xgplayer-icon",children:(0,l.jsxs)("div",{className:"xgplayer-playswitch-tab",children:[(0,l.jsx)("div",{"data-e2e":"video-switch-prev-arrow",className:r()("xgplayer-playswitch-prev",{disabled:n}),onClick:e=>{(0,d.Vv)(g.PagingType.click),(0,c.i0)(c.CK.User),N(e)},children:(0,l.jsx)(w.z,{svg:k?(0,l.jsx)(f.Z,{}):(0,l.jsx)(h.Z,{}),needRenderInSSR:!0})}),(0,l.jsx)("div",{"data-e2e":"video-switch-next-arrow",className:r()("xgplayer-playswitch-next",{disabled:a}),onClick:e=>{(0,d.Vv)(g.PagingType.click),(0,c.i0)(c.CK.User),A(e)},children:(0,l.jsx)(w.z,{svg:k?(0,l.jsx)(v.Z,{}):(0,l.jsx)(m.Z,{}),needRenderInSSR:!0})})]})})})},S=e=>{let t=(0,x.N)(),{removeSlideListButton:i}=(0,o.useContext)(p.k);return i?null:(0,l.jsx)(_.k,{componentName:"PlaySwitch",Slardar:t,children:(0,l.jsx)(C,(0,n._)({},e))})}},86510:function(e,t,i){i.d(t,{r:function(){return c}});var n=i(590921),l=i(259202);i(611542);var o=i(825211),a=i.n(o),r=i(886190),s=i(935708),u=i(773627);let d=e=>{let{children:t,style:i={},className:n}=e;return(0,l.jsx)("div",{className:a()(r.default.customPluginBottomWrapNew,null==n?void 0:n.bottom),style:i,children:t})},c=e=>{let t=(0,s.N)();return(0,l.jsx)(u.k,{componentName:"PositionBoxBottom",Slardar:t,children:(0,l.jsx)(d,(0,n._)({},e))})}},289290:function(e,t,i){let n;i.d(t,{n:function(){return y}});var l=i(590921);i(612222);var o=i(259202),a=i(611542),r=i(825211),s=i.n(r),u=i(623176),d=i(124797),c=i(600743),f=i(713017),h=i(886190),v=i(401310),m=i(935708),g=i(773627);let p={isHideChangeGlobal:!1,newMiniAvatarGlobal:!1,newMiniFontSizeGlobal:!1,newMiniSpacingGlobal:!1,newMiniIconGlobal:!1,initializated:!1},_=e=>{let[t,i]=(0,a.useState)(!1),{children:r,awemeInfo:m,style:g={},className:_,isClientMiniWin:y=!1,abtestData:x,from:w,immediatelyResize:C=!1}=e,[S,b]=(0,a.useState)(null==p?void 0:p.newMiniIconGlobal),[N,A]=(0,a.useState)(null==p?void 0:p.newMiniAvatarGlobal),[k,I]=(0,a.useState)(null==p?void 0:p.newMiniFontSizeGlobal),[j,E]=(0,a.useState)(null==p?void 0:p.newMiniSpacingGlobal),[P,L]=(0,a.useState)(null==p?void 0:p.newMiniIconGlobal),T=(0,v.n)(),[R,D]=(0,a.useState)({}),M=(0,a.useRef)(),B=e=>{var t,i,n;let{contentRect:l}=(null==e?void 0:e[0])||{},o=(null==l?void 0:l.height)||(null==T?void 0:null===(t=T.root)||void 0===t?void 0:t.offsetHeight)||(null===(n=M.current)||void 0===n?void 0:null===(i=n.parentNode)||void 0===i?void 0:i.offsetHeight);if(!o)return;let{MaxHeight:r,MiniAvatar:s,MiniText:u,MiniPadding:c,MiniIocn:f,OldHideChangeVideo:h}=d.nl;D({transformOrigin:"bottom",transform:`scale(${o>r?o/2/425:1})`});let v=72,m=o<h+72,g=o<=s+72,_=o<=u+72,y=o<=c+72,x=o<=f+72;(0,a.startTransition)(()=>{b(m),A(g),I(_),E(y),L(x)}),p={isHideChangeGlobal:m,newMiniAvatarGlobal:g,newMiniFontSizeGlobal:_,newMiniSpacingGlobal:y,newMiniIconGlobal:x,initializated:!0}};return(0,a.useLayoutEffect)(()=>{var e;let t=(null==T?void 0:T.root)||(null===(e=M.current)||void 0===e?void 0:e.parentNode);if((C||!(null==p?void 0:p.initializated)&&T)&&B(t),t&&!y){let e=c.Z.bind(t,B);return()=>{e&&(null==e||e())}}},[T,y,null==x?void 0:x.feedFlowEntrance,w,C]),(0,a.useEffect)(()=>{if(void 0===n&&(n=(0,f.vU)()),n&&T)return T.on(u.FULLSCREEN_CHANGE,i),()=>{T.off(u.FULLSCREEN_CHANGE,i)}},[T]),(0,o.jsx)("div",{className:s()(h.default.customPluginRightWrap,null==_?void 0:_.right,"positionBox",{[h.default.isFireFox]:n&&!t&&(null==m?void 0:m.awemeType)!==68,hideChangeVideo:S,newMiniAvatar:N,newMiniFontSize:k,newMiniSpacing:j,newMiniIcon:P}),style:(0,l._)({},g,R),ref:M,children:r})},y=e=>{let t=(0,m.N)();return(0,o.jsx)(g.k,{componentName:"PositionBoxRight",Slardar:t,children:(0,o.jsx)(_,(0,l._)({},e))})}},143082:function(e,t,i){i.d(t,{H:function(){return F},_:function(){return O}});var n=i(590921),l=i(874155),o=i(250751);i(101060),i(347885),i(930798),i(612222),i(685680);var a=i(259202),r=i(611542),s=i(690352),u=i(275438),d=i(135524),c=i(775583),f=i(532910),h=i(260371),v=i(414692),m=i(510026),g=i(288),p=i(877653),_=i(372866),y=i(744611),x=i(979210),w=i(528557),C=i(781114),S=i(245086),b=i(40723),N=i(819769),A=i(13351),k=i(45107),I=i(718523),j=i(356789),E=i(715500),P=i(928300),L=i(837305),T=i(701007),R=i(830272),D=i(797210),M=i(682795),B=i(456713);let F=e=>{var t;return!((null!==(t=(0,w.$o)(e))&&void 0!==t?t:0)>0)&&!0},O=e=>{let{shortcut:t,emitEvent:i,position:w,showEnterDetail:F,setIsShow:O,awemeInfo:U,userInfo:H,modalEnterFrom:W,abtestData:V}=e,q=(0,r.useMemo)(()=>{if(U){var e,t;let i=U.awemeType!==d.e.Note&&U.awemeType!==d.e.XgVideo,n=null==U?void 0:null===(e=U.download)||void 0===e?void 0:e.allowDownload,l=(null===(t=U.status)||void 0===t?void 0:t.reviewStatus)===1,o=(0,c.Jt)(U);return i&&n&&!l&&!o}return!1},[U]),Z=(0,r.useMemo)(()=>{if(!U)return"";let e={},t=f.getTabName();if(null==U?void 0:U.logParams){let i=U.logParams,{enter_from:n,previous_page:l,tab_name:a}=i,r=(0,o._)(i,["enter_from","previous_page","tab_name"]);a&&(t=a),e[h.LOG_PASS_THROW_PARAMS]=JSON.stringify(r)}let i="";switch(U.awemeType){case d.e.Note:i=(0,C.Wr)(U.awemeId,(0,s.stringify)((0,n._)({tab_name:t,previous_page:(0,S.yW)()},(0,b.U)(),e)));break;case d.e.XgVideo:i=(0,C.Tl)({videoid:null==U?void 0:U.awemeId});break;default:let l="";if("search"===W)l=v.VideoDetailModeFrom.SearchResult;else if("hot"===W){l=v.VideoDetailModeFrom.HotDetail;let t=null==U?void 0:U.hotList;e.trending_topic=null==t?void 0:t.sentence,e.sentenceId=null==t?void 0:t.sentenceId,e.position=null==t?void 0:t.rank,e.hotValue=null==t?void 0:t.hotScore}if(i=(0,C.JF)(U.awemeId,(0,s.stringify)((0,n._)({tab_name:t,modeFrom:l,previous_page:(0,S.yW)()},(0,b.U)(),e))),["userLike","userPost","userCollection"].includes(W)){var a;let e=null===(a=N.Le.getConfig(N.gI.EnterDetailUrl))||void 0===a?void 0:a[U.awemeId];e&&(i=e)}}return i},[U,W]),K=(0,r.useMemo)(()=>{var e,o,a,r,s;return[{text:"清屏",key:null===(e=t.immersivePlayer)||void 0===e?void 0:e.badgeText,handler:()=>i(D.B.UpdateImmersiveSwitch,{logParams:{enter_method:"long_press"}})},{text:"评论",key:null===(o=t.comment)||void 0===o?void 0:o.badgeText,handler:()=>i("showComment")},{text:"赞",key:null===(a=t.like)||void 0===a?void 0:a.badgeText,handler:e=>i("onStar",{event:(0,l._)((0,n._)({},e),{offsetX:w.x,offsetY:w.y}),clickMethod:"mouse"})},{text:"进入作者主页",key:null===(r=t.avatar)||void 0===r?void 0:r.badgeText,handler:()=>i("onAvatar")},{text:"分享",key:null===(s=t.share)||void 0===s?void 0:s.badgeText,handler:()=>i("showShareCode",{clickMethod:"mouse"})}].filter(e=>e.key)},[i,w,t]),G=(0,r.useMemo)(()=>{var e;let t=(0,A.DT)(),i=null!==(e=(0,A.FJ)().awemePcClient)&&void 0!==e?e:"";return t&&i&&(0,k.y)(i,">=","3.7.1")&&q},[V,q]),$=(0,r.useMemo)(()=>{var e,t;let i=(0,A.DT)(),n=null!==(t=(0,A.FJ)().awemePcClient)&&void 0!==t?t:"",l=i&&n&&(0,k.y)(n,">=","4.1.0");return(null==V?void 0:null===(e=V.multitaskWindow)||void 0===e?void 0:e.enable)&&l},[V]),z=(0,r.useMemo)(()=>{var e,n;let l=[{text:"不感兴趣",key:t.dislike.badgeText,handler:()=>i(D.B.Dislike)},{text:"意见反馈",handler:()=>i("feedback")}];return(null==U?void 0:null===(e=U.authorInfo)||void 0===e?void 0:e.uid)!==(null==H?void 0:null===(n=H.info)||void 0===n?void 0:n.uid)&&!(0,c.Kf)(U)&&l.push({text:"举报",handler:()=>i("showReportModal")}),G&&l.push({text:"下载视频",handler:()=>i("downloadVideo")}),$&&l.push({text:"独立窗口显示",useRedDot:!0,redDotKey:L.LocalStorageKeys.MultiWindowMenuListRedDot,handler:()=>i("createMultitaskingWindow",Z)}),l},[i,U,t,G,H]),Q=(0,r.useMemo)(()=>{if(!U)return"";let e={},t=f.getTabName();if(null==U?void 0:U.logParams){let i=U.logParams,{enter_from:n,previous_page:l,tab_name:a}=i,r=(0,o._)(i,["enter_from","previous_page","tab_name"]);a&&(t=a),e[h.LOG_PASS_THROW_PARAMS]=JSON.stringify(r)}let i="";switch(U.awemeType){case d.e.Note:i=(0,C.Wr)(U.awemeId,(0,s.stringify)((0,n._)({tab_name:t,previous_page:(0,S.yW)()},(0,b.U)(),e)));break;case d.e.XgVideo:i=(0,C.Tl)({videoid:null==U?void 0:U.awemeId});break;default:let l="";if("search"===W)l=v.VideoDetailModeFrom.SearchResult;else if("hot"===W){l=v.VideoDetailModeFrom.HotDetail;let t=null==U?void 0:U.hotList;e.trending_topic=null==t?void 0:t.sentence,e.sentenceId=null==t?void 0:t.sentenceId,e.position=null==t?void 0:t.rank,e.hotValue=null==t?void 0:t.hotScore}if(i=(0,C.JF)(U.awemeId,(0,s.stringify)((0,n._)({tab_name:t,modeFrom:l,previous_page:(0,S.yW)()},(0,b.U)(),e))),["userLike","userPost","userCollection"].includes(W)){var a;let e=null===(a=N.Le.getConfig(N.gI.EnterDetailUrl))||void 0===a?void 0:a[U.awemeId];e&&(i=e)}}return i},[U,W]),J=(0,r.useCallback)(e=>{(0,I.$)(V)?(e.preventDefault(),j.emit(j.EVENT.changeRoute,{to:Q})):i("enterDetail")},[Q,i,V]),Y=(0,r.useMemo)(()=>[{component:(0,a.jsx)(T.a,{href:Q,target:"_blank",className:M.default.enterDetail,rel:"opener",onClick:J,children:"进入详情页"},"enterDetail"),handler:()=>i("enterDetail")}],[J,Q,i]),X=(0,r.useMemo)(()=>[...K,...z,...F?Y:[]],[K,z,F,Y]);return{menuList:X,adMenuList:(0,r.useMemo)(()=>{let e=[{text:"不感兴趣",handler:()=>i(D.B.Dislike)},{text:"喜欢该广告",handler:()=>i(D.B.AdLike)},{text:"举报",handler:()=>i(D.B.AdReport)},{text:"为什么看到广告",handler:()=>i(D.B.AdIntroduce)}];if((0,m.L)(U)||(0,g.u)(U)||(0,p.AI)(U)||(0,_.o4)(U)){let t=(0,p.rQ)(U);e.unshift({component:(0,a.jsxs)("div",{className:M.default.viewAdDetail,children:[(0,a.jsxs)("div",{className:M.default.innerContainer,onClick:e=>{j.emit(j.EVENT.openAdSideCard);let t=(0,c.Rx)(U);(0,y.E)("realtime_click",{tag:(0,E.f)(),value:null==t?void 0:t.creative_id,log_extra:null==t?void 0:t.log_extra,refer:"feedback"}),O(!1)},children:[(0,a.jsx)(R.Q,{src:(null==t?void 0:t.image_url)||x.DEFAULT_AD_IMAGE_URL,iconHeight:28,iconWidth:28,className:M.default.adIcon}),(0,a.jsxs)("div",{className:M.default.word,children:[(0,a.jsx)("span",{children:t.button_text||"查看详情"}),(0,a.jsx)(B.z,{svg:(0,a.jsx)(P.Z,{style:{fontSize:"12px",height:"12px",width:"12px"}}),className:M.default.icon})]})]}),(0,a.jsx)(u.i,{className:M.default.divider})]})})}return e},[i,U,O])}}},995232:function(e,t,i){i.d(t,{r:function(){return E},y:function(){return P}});var n=i("590921");i("632852"),i("612222");var l=i("259202"),o=i("611542"),a=i("538846"),r=i("825211"),s=i.n(r),u=i("280233"),d=i.n(u),c=i("477509"),f=i("910924"),h=i("245086"),v=i("356789"),m=i("857631"),g=i("964284"),p=i("354795"),_=new p.h({abstractClick:{eventName:"search_result_click",params:{token_type:"video",search_type:"general",is_aladdin:0,enter_from:"general_search",button_type:"click_abstract",impr_id:""}},abstractMove:{eventName:"search_result_click",params:{token_type:"video",search_type:"general",is_aladdin:0,enter_from:"general_search",button_type:"click_abstract_move",impr_id:""}}}),y=i("874155");let x=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,y._)((0,n._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("circle",{cx:10,cy:10,r:10,transform:"matrix(-1 0 0 1 20 0)",fill:"#fff",fillOpacity:".34"}),(0,l.jsx)("circle",{cx:10,cy:10,r:9.75,transform:"matrix(-1 0 0 1 20 0)",stroke:"#fff",strokeOpacity:".16",strokeWidth:".5"}),(0,l.jsx)("path",{d:"M11.14 6.162a.857.857 0 0 1 1.212 1.212L9.847 9.879l2.505 2.505a.857.857 0 0 1-1.212 1.213l-3.104-3.105-.007-.007a.857.857 0 0 1 0-1.212l3.111-3.111z",fill:"#fff",fillOpacity:".75"})]}))),w=(0,o.forwardRef)((e,t)=>(0,l.jsxs)("svg",(0,y._)((0,n._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,l.jsx)("circle",{cx:10,cy:10,r:10,fill:"#fff",fillOpacity:".34"}),(0,l.jsx)("circle",{cx:10,cy:10,r:9.75,stroke:"#fff",strokeOpacity:".16",strokeWidth:".5"}),(0,l.jsx)("path",{d:"M9.241 6.162A.857.857 0 1 0 8.03 7.374l2.505 2.505-2.505 2.505a.857.857 0 0 0 1.212 1.213l3.104-3.105a.857.857 0 0 0 .007-1.22l-3.11-3.11z",fill:"#fff",fillOpacity:".75"})]}))),C=(0,o.forwardRef)((e,t)=>(0,l.jsx)("svg",(0,y._)((0,n._)({width:16,height:16,fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,l.jsx)("path",{d:"M4 8c0-1.598.096-2.742.206-3.529.125-.885.924-1.324 1.738-.956.655.296 1.572.76 2.82 1.485a31.73 31.73 0 0 1 2.865 1.85c.821.605.821 1.695 0 2.3A31.743 31.743 0 0 1 8.765 11c-1.25.726-2.166 1.19-2.82 1.485-.815.368-1.614-.071-1.739-.956C4.096 10.742 4 9.598 4 8z"})})));var S=i("487272"),b=i("991615"),N=i("600743"),A=i("401310");let k=(0,a.ZP)(()=>Promise.resolve().then(i.bind(i,8138)),{ssr:!1}),I=(e,t)=>{let{videoAbstract:i}=t||{};if(!i||!i.sections)return -1;let{sections:n}=i;return d()(n,t=>t.jumpTime<=e&&t.endTime>=e)},j=e=>{let{text:t,active:i,onClick:a,index:r,logParams:u}=e,d=(0,o.useRef)(!1);return(0,o.useEffect)(()=>{if(!d.current)d.current=!0,c.i.sendLog("videoAbstractShow",(0,n._)({enter_from:(0,h.vM)(),abstract_rank:r},null==u?void 0:u.search_params))},[u,r]),(0,l.jsxs)("div",{className:s()(g.default.horizontalItem,{[g.default.activeItem]:i}),onClick:a,children:[i?(0,l.jsx)(k,{data:m,hidden:!1,loop:!0,autoplay:!0,className:s()("mr-2",g.default.lottie)}):(0,l.jsx)(C,{className:"mr-2"}),(0,l.jsx)("p",{className:"line-clamp-1",children:t})]})},E=e=>{let{awemeInfo:t,player:i,isActive:a,logParams:r,isInnerFeed:u,isModal:d,openSpecificTab:m}=e,[p,y]=(0,o.useState)(-1),C=(0,o.useRef)(null);C.current=i;let{scrollRef:k,btnGroupState:E,onLocalItemClick:P,onLeftButtonClick:L,onRightButtonClick:T}=function(e){let{awemeInfo:t}=e,i=(0,o.useRef)(null),n=(0,A.n)(),[l,a]=(0,o.useState)({shouldButtonGroupShow:!1,shouldLeftButtonDisabled:!1,shouldRightButtonDisabled:!1}),r=(0,o.useCallback)(()=>{if(!i.current)return;let{scrollLeft:e,clientWidth:t,scrollWidth:n}=i.current;a(()=>({shouldButtonGroupShow:n>t,shouldLeftButtonDisabled:e<=0,shouldRightButtonDisabled:Math.ceil(e+t)>=n}))},[]),s=(0,o.useCallback)(e=>{if(!e||!i.current)return;let t=e.offsetLeft>=i.current.scrollLeft,n=e.offsetLeft+e.clientWidth-i.current.scrollLeft<i.current.clientWidth-60;return t&&n},[]),u=(0,o.useCallback)(e=>{if(i.current&&(l.shouldButtonGroupShow||i.current.scrollWidth>i.current.clientWidth)){let t=e.offsetLeft,n=t+e.clientWidth,l=i.current.scrollLeft,o=l+i.current.clientWidth-90;n>o?(0,S.y)({left:n-o+26,behavior:"smooth"},i.current):t<l&&(0,S.y)({left:t-l-26,behavior:"smooth"},i.current)}},[l,t]),d=(0,o.useCallback)(()=>{if(!i.current||l.shouldRightButtonDisabled)return;let e=null,{childNodes:t,scrollWidth:n}=i.current;for(let i=0;i<t.length-1;i++){let n=t[i],l=t[i+1];s(n)&&!s(l)&&(e=l)}(0,S.X)({left:e?e.offsetLeft:n,behavior:"smooth"},i.current)},[l,s]),c=(0,o.useCallback)(()=>{if(!i.current||l.shouldLeftButtonDisabled)return;let e=null,{childNodes:t}=i.current;for(let i=t.length-1;i>0;i--){let n=t[i],l=t[i-1];s(n)&&!s(l)&&(e=l)}e&&(0,S.X)({left:e.offsetLeft+e.clientWidth-i.current.clientWidth+60,behavior:"smooth"},i.current)},[l,s]);return(0,o.useEffect)(()=>{let e=i.current;if(!e)return;r();let t=()=>{(0,b.U)(r)};return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}},[t,r]),(0,o.useEffect)(()=>{if(n){let e=N.Z.bind(n.root,r);return()=>{null==e||e()}}},[n,r]),{scrollRef:i,btnGroupState:l,onLocalItemClick:u,onRightButtonClick:d,onLeftButtonClick:c}}({awemeInfo:t}),R=(0,o.useMemo)(()=>d||u,[d,u]),D=(0,o.useCallback)((e,t)=>{if(p!==e)y(e),e>=0&&t&&P(t)},[p,P]),M=(0,o.useCallback)((e,l)=>{if(i){var o;null===(o=i.play)||void 0===o||o.call(i),R&&m(f.L.AbstractList),R||_.sendLog("abstractClick",(0,n._)({},(null==r?void 0:r.search_params)||{})),R&&c.i.sendLog("videoAbstractClick",(0,n._)({enter_from:(0,h.vM)(),abstract_rank:l,button_type:"click_abstract"},null==r?void 0:r.search_params)),i.currentTime=t.videoAbstract.sections[l].jumpTime/1e3,D(l,e.currentTarget)}},[D,i,t,R]);(0,o.useEffect)(()=>{let e=null;if(a&&(null==i?void 0:i.isUserActive)){let i=()=>{let n=I(1e3*C.current.currentTime,t);v.emit(v.EVENT.UpdateActiveAbstract,{index:n}),e=setTimeout(i,1e3)};return i(),()=>{clearTimeout(e)}}},[a,t,null==i?void 0:i.isUserActive]),(0,o.useEffect)(()=>{if(a){let e=v.listen(v.EVENT.UpdateActiveAbstract,e=>{var t,i,n;let{index:l}=e;if(null===(t=C.current)||void 0===t?void 0:t.isUserActive){let e=null===(n=k.current)||void 0===n?void 0:null===(i=n.childNodes)||void 0===i?void 0:i[l];D(l,e)}});return()=>{null==e||e()}}},[D,a]);let B=(0,o.useCallback)(e=>()=>{R&&c.i.sendLog("videoAbstractClick",(0,n._)({enter_from:(0,h.vM)(),button_type:"click_abstract_move"},null==r?void 0:r.search_params)),R||_.sendLog("abstractMove",(0,n._)({},(null==r?void 0:r.search_params)||{})),"left"===e?L():T()},[r,L,T,R]);return(0,o.useMemo)(()=>{var e;return Array.isArray(null==t?void 0:null===(e=t.videoAbstract)||void 0===e?void 0:e.sections)&&t.videoAbstract.sections.length>0},[t])?(0,l.jsxs)("div",{className:g.default.container,children:[(0,l.jsx)("div",{className:g.default.scrollContainer,ref:k,children:t.videoAbstract.sections.map((e,t)=>(0,l.jsx)(j,{index:t,text:e.playerDisplayText,active:t===p,onClick:e=>M(e,t),logParams:r},e.playerDisplayText))}),E.shouldButtonGroupShow&&(0,l.jsxs)("div",{className:s()(g.default.buttonGroup),children:[(0,l.jsx)(x,{className:s()(g.default.button,{[g.default.disabled]:E.shouldLeftButtonDisabled}),width:20,height:20,viewBox:"0 0 20 20",onClick:B("left")}),(0,l.jsx)(w,{className:s()(g.default.button,{[g.default.disabled]:E.shouldRightButtonDisabled}),width:20,height:20,viewBox:"0 0 20 20",onClick:B("right")})]})]}):(0,l.jsx)(l.Fragment,{})},P=e=>{let{showVideoInfo:t}=e;return t?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)("div",{className:g.default.wrapper,children:(0,l.jsx)(E,(0,n._)({},e))})}},933305:function(e,t,i){i.d(t,{P:function(){return y}});var n=i(590921),l=i(874155);i(724356),i(347885);var o=i(259202),a=i(611542),r=i(593270),s=i(375867),u=i(975181),d=i(351582),c=i(899349),f=i(401310),h=i(935708),v=i(773627),m=i(924764),g=i(856363),p=i(240576);let _=e=>{let{isActive:t,awemeInfo:i,abtestData:o}=e,h=(0,f.n)(),v=(0,a.useRef)(i||null);return(0,a.useEffect)(()=>{var e,a,f,_,y,x,w,C,S,b,N;if(h&&i&&v.current&&(null==i?void 0:i.awemeId)!==(null===(e=v.current)||void 0===e?void 0:e.awemeId)){!t&&h.pause();let e=Object.assign((0,p.k)({awemeInfo:i,abtestData:o}),(0,u.QF)({awemeInfo:i,abtestData:o}));(0,m.Zf)({config:e,awemeInfo:i,abtestData:o}),(0,g.LX)({config:e,awemeInfo:i,abtestData:o}),(0,d.Ni)(i)&&(e.secretKey=null==i?void 0:null===(S=i.video)||void 0===S?void 0:null===(C=S.bitRateList)||void 0===C?void 0:null===(w=C[0])||void 0===w?void 0:w.playerAccessKey),(null==e?void 0:null===(a=e.plugins)||void 0===a?void 0:a.includes(r.default))?(h.unRegisterPlugin(s.default.pluginName,!0),!(null==h?void 0:null===(b=h.plugins)||void 0===b?void 0:b.dashplugin)&&h.registerPlugin(r.default)):(null==e?void 0:null===(f=e.plugins)||void 0===f?void 0:f.includes(s.default))?(h.unRegisterPlugin(r.default.pluginName,!0),!(null==h?void 0:null===(N=h.plugins)||void 0===N?void 0:N.mp4encryptplayer)&&h.registerPlugin(s.default)):(h.unRegisterPlugin(r.default.pluginName,!0),h.unRegisterPlugin(s.default.pluginName,!0)),null===(_=h.playNext)||void 0===_||_.call(h,(0,n._)((0,l._)((0,n._)({},e),{autoplay:t}),null==e?void 0:e.mp4encryptplayer)),null===(x=h.getPlugin)||void 0===x||null===(y=x.call(h,"PlayClaritySettingPlugin"))||void 0===y||y.updateConfig({awemeInfo:i}),h.crossOrigin=(0,c.S)(i)?"use-credentials":"anonymous"}v.current=i},[h,t,i.awemeId,o]),null},y=e=>{let t=(0,h.N)();return(0,o.jsx)(v.k,{componentName:"VideoSrcChange",Slardar:t,children:(0,o.jsx)(_,(0,n._)({},e))})}},137180:function(e,t,i){i.d(t,{JI:function(){return T},kL:function(){return D},l7:function(){return j}});var n=i(7979),l=i(590921),o=i(874155);i(612222);var a=i(259202),r=i(753451),s=i(611542),u=i(773627),d=i(825211),c=i.n(d),f=i(185791);i(61971);var h=i(837305),v=i(779835),m=i(135524),g=i(305452),p=i(106649),_=i(528557),y=i(819769),x=i(245086),w=i(356789),C=i(656716),S=i(713017),b=i(401310),N=i(935708),A=i(797210),k=i(234766),I=i(77435),j={Shortcut:0,0:"Shortcut"};function E(e){let{isOn:t}=e;return(0,a.jsxs)("div",{className:c()("xgTips"),children:[t&&(0,a.jsx)("span",{children:p.a.t("autoplay_close",{},"关闭自动连播")}),!t&&(0,a.jsx)("span",{children:p.a.t("autoplay_open",{},"自动连播")}),(0,a.jsx)("span",{className:"shortcutKey",children:"K"})]})}function P(e){let{autoplay:t,xgSwitch:i,shortcutDisabled:n}=e,l=(0,I.H)("auto_play");return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:l,className:"xgplayer-icon",onClick:i,"data-e2e":"video-player-auto-play","data-e2e-state":t?"video-player-auto-playing":"video-player-no-auto-play",children:(0,a.jsxs)("div",{className:"xgplayer-setting-label",children:[(0,a.jsx)("button",{"aria-checked":"true",className:c()("xg-switch",{"xg-switch-checked":t}),"aria-labelledby":"xg-switch-pip",type:"button",children:(0,a.jsx)("span",{className:"xg-switch-inner"})}),(0,a.jsx)("span",{className:"xgplayer-setting-title",children:p.a.t("autoplay",{},"连播")})]})}),!n&&(0,a.jsx)(E,{isOn:t})]})}function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(0,_.$o)(null!=e?e:h.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return null!=i?i:t}class T extends f.ZP{static get pluginName(){return"AutoPlaySettingPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:9,className:"xgplayer-autoplay-setting"}}afterCreate(){var e,t;if(!this.config.disable)this.renderRoot(),null===(e=this.player)||void 0===e||e.on("updateIsAutoPlay",this.updateIsAutoPlay),null===(t=this.player)||void 0===t||t.on(A.B.UpdateAutoPlaySwitch,this.switchAutoPlay),this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseleave)}destroy(){var e,t;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseleave),null===(e=this.player)||void 0===e||e.off("updateIsAutoPlay",this.updateIsAutoPlay),null===(t=this.player)||void 0===t||t.off(A.B.UpdateAutoPlaySwitch,this.switchAutoPlay),(0,k.v)(this)}renderRoot(){let e=!!this.config.nextAutoPlay,t=this.onXgChange,i=(0,a.jsx)(P,{autoplay:e,xgSwitch:t,shortcutDisabled:this.config.shortcutDisabled});(0,k.s)(this,i)}render(){return`
    <xg-icon class="xgplayer-autoplay-setting automatic-continuous" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,n._)(this,"playeNextWeightNum",0),(0,n._)(this,"stopFlag",0),(0,n._)(this,"switchAutoPlay",e=>{var t;let i=null!==(t=null==e?void 0:e.isOn)&&void 0!==t?t:!this.config.nextAutoPlay;!!this.config.nextAutoPlay!==i&&this.autoPlayChangeLogic((0,o._)((0,l._)({},e),{isOn:i}))}),(0,n._)(this,"onMouseleave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,n._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,n._)(this,"updateIsAutoPlay",e=>{this.autoPlayChangeLogic((0,l._)({isOn:!!Number(L(this.config.customLocalStorage,this.config.defaultVal)),logParams:{},isInnerReset:!0,switchBy:void 0},e))}),(0,n._)(this,"autoPlayChangeLogic",e=>{let{isOn:t,logParams:i,isInnerReset:n,switchBy:l,mode:o}=e;if(!this.config.shortcutDisabled||0!==l){if("syncInteraction"!==o&&y.Le.setConfig(y.gI.InnerAutoPlay,null),!!this.config.nextAutoPlay!==t&&this.root){var a,r;this.config.nextAutoPlay=t?1:0,(0,_.qQ)(null!==(r=this.config.customLocalStorage)&&void 0!==r?r:h.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,t?"1":"0"),this.renderRoot();null===(a=this.player)||void 0===a||a.emit(A.B.AutoPlaySwitchChange,{isOn:!!t,logParams:i,isInnerReset:n}),this.root&&[...this.root.getElementsByTagName("button")].forEach(e=>e.blur()),this.stopFlag=0}}}),(0,n._)(this,"onXgChange",()=>{var e;let{author_id:t,group_id:i,log_pb:n,extraParams:o}=this.config.logInfo;(0,_.qQ)(null!==(e=this.config.customLocalStorage)&&void 0!==e?e:h.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,this.config.nextAutoPlay?"0":"1"),y.Le.getConfig(y.gI.IsInMixCard)&&y.Le.setConfig(y.gI.AutoPlayChanged,{changed:!0}),this.autoPlayChangeLogic({isOn:!this.config.nextAutoPlay,logParams:(0,l._)({enter_method:"click_bar",urlParamList:["previous_page"],author_id:t,group_id:i,log_pb:n,enter_from:(0,x.yW)(),status:this.config.nextAutoPlay?"off":"on"},o),isInnerReset:!1,switchBy:void 0})})}}let R=e=>{let{isActive:t,awemeInfo:i,playNextFunc:n,ablePlayNext:l,shortcutDisabled:o,customLocalStorage:a,defaultVal:r,scene:u}=e,d=(0,b.n)(),c=(0,s.useMemo)(()=>i,[i]),f=(0,s.useCallback)(()=>{var e;let t=d.getPlugin("AutoPlaySettingPlugin");if((null==t?void 0:t.disable)&&i.awemeId===v.X){t.disable=!1,w.emit(w.EVENT.changeLoginGuideStatus,"ShowLoginPanel");return}if(n&&(null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.nextAutoPlay)&&(null==t?void 0:t.playeNextWeightNum)===0&&(null==t?void 0:t.stopFlag)===0&&l&&i.awemeType!==m.e.Note)(0,C.i0)(C.CK.Auto),null==n||n({from:"auto"}),y.Le.setConfig(y.gI.VideoPlayMethod,"auto_play_open");else{let e=()=>{d.replay(),d.replayed=!0,y.Le.setConfig(y.gI.VideoPlayMethod,"auto")};(0,S.G6)()?setTimeout(e,50):e()}},[n,d,l,i]);return(0,s.useEffect)(()=>{if(d&&c)return(d.replayed=!1,2===d.config.reuse&&d.getPlugin("AutoPlaySettingPlugin"))?(d.getPlugin("AutoPlaySettingPlugin").playeNextWeightNum=0,d.getPlugin("AutoPlaySettingPlugin").stopFlag=0,()=>{}):(d.registerPlugin(T,{nextAutoPlay:Number(L(a,r)),logInfo:c,shortcutDisabled:o,customLocalStorage:a,defaultVal:r}),()=>{d.getPlugin("AutoPlaySettingPlugin")&&2!==d.config.reuse&&d.unRegisterPlugin("AutoPlaySettingPlugin",!0)})},[d,c,r]),(0,s.useEffect)(()=>{if(d&&t){let e,t;if(d.getPlugin("AutoPlaySettingPlugin")){let i=d.getPlugin("AutoPlaySettingPlugin");!Number.isInteger(i.playeNextWeightNum)&&(i.playeNextWeightNum=0),e=w.listen(w.EVENT.videoStopPlayNext,e=>{if(!1===d.isUserActive)return;let{openSideCard:t}=e||{},i=d.getPlugin("AutoPlaySettingPlugin"),n=t?"stopFlag":"playeNextWeightNum";i&&i[n]<1&&(i[n]+=1)}),t=w.listen(w.EVENT.videoRemoveStopPlayNext,e=>{if(!1===d.isUserActive)return;let{openSideCard:t}=e||{},i=d.getPlugin("AutoPlaySettingPlugin"),n=t?"stopFlag":"playeNextWeightNum";i&&(i[n]=Math.max(i[n]-1,0))})}return()=>{null==e||e(),null==t||t()}}},[d,t]),(0,g.o)(()=>{if(d&&t){let e=d.getPlugin("AutoPlaySettingPlugin");null==e||e.updateIsAutoPlay();let t=w.listen(w.EVENT.syncInteraction,()=>{d.registerPlugin(T,{nextAutoPlay:Number(L(a,r)),logInfo:c,shortcutDisabled:o,customLocalStorage:a,defaultVal:r})});return()=>{t()}}},[d,t,r]),(0,s.useEffect)(()=>{if(d&&t&&f)return d.on("ended",f),()=>{d.off("ended",f)}},[d,t,f,i]),null},D=e=>{let t=(0,N.N)();return(0,a.jsx)(u.k,{componentName:"AutoPlayPlugin",Slardar:t,children:(0,a.jsx)(R,(0,l._)({},e))})}},374999:function(e,t,i){i.d(t,{SD:function(){return H},Yd:function(){return O},m4:function(){return M}});var n=i("7979"),l=i("590921");i("612222"),i("347885");var o=i("259202"),a=i("611542"),r=i("753451"),s=i("825211"),u=i.n(s),d=i("185791"),c=i("661854"),f=i("623176"),h=i("732355"),v=i("549516"),m=i("106649"),g=i("356789"),p=i("819769"),_=i("432097"),y=i("688497"),x=i("245086"),w=i("744"),C=i("522394"),S=i("354795"),b=new S.h({openPureToastShow:{eventName:"open_pure_toast_show",params:{enter_from_merge:"",enter_from:""}}}),N=i("456713");let A=()=>{b.sendLog("openPureToastShow",{enter_from_merge:(0,x.yW)(),enter_from:(0,x.vM)()})},k=a.forwardRef(e=>{let{onSwitch:t,isShowTip:i,setIsShowTip:n}=e,l=(0,y.x)(A.bind(null));return(0,o.jsxs)("div",{ref:l,className:u()(C.default.tips,{[C.default.show]:i}),children:[(0,o.jsx)(N.z,{className:u()(C.default.close,"noTransform"),svg:(0,o.jsx)(w.Z,{}),onClick:()=>n(!1)}),(0,o.jsx)("div",{className:C.default.ImmersiveTipTitle,children:(0,o.jsx)("span",{children:"隐藏视频标题"})}),(0,o.jsx)("p",{className:C.default.desc,children:"开启清屏,可隐藏视频标题、作者昵称"}),(0,o.jsx)(_.zx,{theme:"solid",className:C.default.btn,onClick:()=>{null==t||t(),n(!1)},children:"立即开启"})]})});var I=i("773627");i("431791");var j=i("401310"),E=i("935708"),P=i("797210"),L=i("234766"),T=i("77435");let R="immersive-player-switch-on",D="immersive-player-switch-on-hide-video-info",M="immersive-player-switch-on-hide-interaction-area";function B(e){let{isOn:t}=e;return(0,o.jsxs)("div",{className:u()("xgTips"),children:[t&&(0,o.jsx)("span",{children:m.a.t("cancel_clear",{},"取消清屏")}),!t&&(0,o.jsx)("span",{children:m.a.t("clear",{},"清屏")}),(0,o.jsx)("span",{className:"shortcutKey",children:"J"})]})}function F(e){let{isOn:t,onSwitch:i,hide:n,player:l,updateImmersiveSwitch:r}=e,s=(0,T.H)("pure_mode"),[d,c]=(0,a.useState)(!1),{isMobile:f,isiPad:h}=(0,v.X)();return(0,a.useEffect)(()=>{(n||t)&&c(!1)},[n,t]),(0,a.useEffect)(()=>{let e=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c(e)};return l&&l.on("changeImmersiveSwitchTip",e),()=>{l&&l.off("changeImmersiveSwitchTip",e)}},[l]),(0,a.useEffect)(()=>{g.emit(g.EVENT.ImmersiveSwitchMount);let e=g.listen(g.EVENT.closeOtherTip,e=>{"ImmersiveSwitchTip"!==e&&c(!1)});return()=>e()},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"xgplayer-icon",ref:s,children:[d&&(0,o.jsx)(k,{isShowTip:d,setIsShowTip:c,onSwitch:()=>{r({isOn:!t,logParams:{enter_method:"toast",click_method:"toast"}})}}),(0,o.jsxs)("div",{className:"xgplayer-setting-label",onClick:i,children:[(0,o.jsx)("button",{"aria-checked":"true",className:u()("xg-switch",{"xg-switch-checked":t}),"aria-labelledby":"xg-switch-pip",type:"button",children:(0,o.jsx)("span",{className:"xg-switch-inner"})}),(0,o.jsx)("span",{className:"xgplayer-setting-title",children:m.a.t("clear",{},"清屏")})]})]}),!f&&!h&&!d&&(0,o.jsx)(B,{isOn:t})]})}class O extends d.ZP{static get pluginName(){return"ImmersiveSwitchSettingPlugin"}static get defaultConfig(){return{position:r.POSITIONS.CONTROLS_RIGHT,index:8,className:"xgplayer-immersive-switch-setting"}}afterCreate(){var e;if(!this.config.disable)this.renderRoot(),this.updateTargetsVisiblity(),null===(e=this.player)||void 0===e||e.on(P.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch),this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseLeave)}destroy(){var e;this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseLeave),(0,L.v)(this),null===(e=this.player)||void 0===e||e.off(P.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch)}hideTargets(){let e=this.root.closest(".basePlayerContainer");e&&(c.ZP.addClass(e,R),c.ZP.addClass(e,D))}showTargets(){let e=this.root.closest(".basePlayerContainer");e&&(c.ZP.removeClass(e,R),c.ZP.removeClass(e,D))}updateTargetsVisiblity(){this.config.isOn&&this.hideTargets(),this.config.isOn||this.showTargets()}renderRoot(){let e=(0,o.jsx)(F,{isOn:!!this.config.isOn,onSwitch:()=>{this.updateImmersiveSwitch({isOn:!this.config.isOn,logParams:{enter_method:"click_bar",click_method:"button"}})},updateImmersiveSwitch:this.updateImmersiveSwitch,hide:this.config.hide,player:this.player});(0,L.s)(this,e)}render(){return`
    <xg-icon class="xgplayer-immersive-switch-setting immersive-switch" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,n._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,n._)(this,"onMouseLeave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,n._)(this,"updateImmersiveSwitch",e=>{var t,i,n,l,o,a,r;let s=null!==(i=null==e?void 0:e.isOn)&&void 0!==i?i:!this.config.isOn,u=null!==(n=null==e?void 0:e.logParams)&&void 0!==n?n:{};if(null===(t=this.player)||void 0===t||t.emit(f.USER_ACTION,{action:"clean_screen",pluginName:"ImmersiveSwitchSettingPlugin",status:s?"open":"close"}),this.config.showTip=null!==(l=null==e?void 0:e.showTip)&&void 0!==l&&l,this.config.isOn!==s){this.config.isOn=s,[1,3].includes(null===(a=this.config)||void 0===a?void 0:null===(o=a.abtestData)||void 0===o?void 0:o.clearOpt)&&this.config.isInnerFeed&&p.Le.setConfig(p.gI.ImmersiveSwitchStatus,this.config.isOn),this.updateTargetsVisiblity();let t={isOn:s,logParams:u,isInnerReset:e.isInnerReset};null===(r=this.player)||void 0===r||r.emit(P.B.ImmersiveSwitchChange,t),this.renderRoot(),[...this.root.getElementsByTagName("button")].forEach(e=>e.blur())}})}}let U=e=>{let{isActive:t,awemeInfo:i,isOnByOuter:n=!1,isInnerFeed:l,abtestData:o,hide:r}=e,s=(0,h.Z)(null==i?void 0:i.awemeId),u=(0,j.n)();return(0,a.useRef)(null),(0,a.useEffect)(()=>{if(u)return 2===u.config.reuse&&u.getPlugin(O.pluginName)?()=>{}:(u.registerPlugin(O,{isOn:n,isInnerFeed:l,abtestData:o,hide:r}),()=>{u.getPlugin(O.pluginName)&&2!==u.config.reuse&&u.unRegisterPlugin(O.pluginName)})},[u,l,o,r]),(0,a.useEffect)(()=>()=>{p.Le.getConfig(p.gI.IsPauseImmersive)||p.Le.setConfig(p.gI.ImmersiveSwitchStatus,!1)},[]),(0,a.useEffect)(()=>{if(u&&t){let e=u.getPlugin(O.pluginName);null==e||e.updateImmersiveSwitch({isOn:!1})}},[t]),(0,a.useEffect)(()=>{if(!u||!t)return;let e=u.getPlugin(O.pluginName);null==e||e.updateImmersiveSwitch({isOn:n,isInnerReset:!0})},[n]),(0,a.useEffect)(()=>{if(!!u&&!!t){if((null==i?void 0:i.awemeId)!==s){u.emit("changeImmersiveSwitchTip",!1);let e=p.Le.getConfig(p.gI.ImmersiveSwitchStatus)||p.Le.getConfig(p.gI.IsPauseImmersive)||!1;p.Le.setConfig(p.gI.IsPauseImmersive,!1);let t=u.getPlugin(O.pluginName);null==t||t.updateImmersiveSwitch({isOn:!![1,3].includes(null==o?void 0:o.clearOpt)&&!!l&&e,isInnerReset:!0})}}},[u,t,null==i?void 0:i.awemeId,s,l,o]),null},H=e=>{let t=(0,E.N)();return(0,o.jsx)(I.k,{componentName:"ImmersiveSwitchPlugin",Slardar:t,children:(0,o.jsx)(U,(0,l._)({},e))})}},312750:function(e,t,i){i.r(t),i.d(t,{SELECT_LIST_MAP:function(){return T},SELECT_LIST:function(){return L},PlayBackSetting:function(){return F},PlayBackSettingInner:function(){return B}});var n=i("7979"),l=i("590921");i("612222"),i("842903");var o=i("259202"),a=i("753451"),r=i("623176"),s=i("185791"),u=i("611542"),d=i("825211"),c=i.n(d),f=i("554898"),h=i("773627");i("461040");var v=i("829833"),m=i("606660"),g=i("837305"),p=i("305452"),_=i("356789"),y=i("322903"),x=i("245086"),w=i("819769"),C=i("945363"),S=i("106649"),b=i("354795"),N=new b.h({clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:"",item_duration_ms:0,is_small_window:""}},clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}}),A=i("401310"),k=i("721027"),I=i("935708"),j=i("797210"),E=i("234766"),P=i("77435");let L=["0.75","1.0","1.25","1.5","2.0"],T={[v.$.Normal]:["0.75","1.0","1.25","1.5","1.75","2.0","3.0"],[v.$.Safari]:["0.75","1.0","1.25","1.5","1.75","2.0"]},R=!1;function D(e){let{playbackRate:t,xgCase:i,hasSelect:n,disable:l,player:s,loginBlock:d,loginDispatch:h,isActive:p,showTip:b=!1,speedType:A=v.$.Normal,abtest:k}=e,I=(0,P.H)("speed"),[E,L]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let e=e=>{let{rate:t,click_method:n}=e;i.onPlayratioClick({rate:t,click_method:n}),s.emit(r.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin"})};if(s)return null==s||s.on(j.B.UpdateRadio,e),()=>{null==s||s.off(j.B.UpdateRadio,e)}},[s,i]);let D=(0,u.useCallback)(e=>{var t,i,n;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),_.emit(_.EVENT.videoStopPlayNext),((0,y.QD)()||document.querySelector(".isMiniWindow"))&&_.emit(_.EVENT.changeMinWindows,{event:"close",isMiniWin:!1,clickMethod:"control_speed_block"}),N.sendLog("clickHoverLogin",{enter_method:"speed_up",enter_from:(0,x.yW)(),params_for_special:"uc_login"}),(0,f.default)({headerText:"登录后即可切换倍速",success:async()=>{"recommend"===(0,x.yW)()&&(null==k?void 0:k.recommendLoginResume)===m.RecommendLoginResume.V2?_.emit(_.EVENT.RecommendLoginResume):null==h||h({type:"updateUserInfo"}),_.emit(_.EVENT.videoRemoveStopPlayNext),w.Le.setConfig(w.gI.disableSpeed,!1),L(!1),(null==e?void 0:e.callback)?null==e||e.callback():R=!0},next:`https://${null===(n=window)||void 0===n?void 0:null===(i=n.location)||void 0===i?void 0:i.host}`,enterMethod:"speed_up",onClose:()=>{_.emit(_.EVENT.videoRemoveStopPlayNext)}})},[d,h,k]);return((0,u.useEffect)(()=>{b&&(R=!1,a.Util.addClass(i.root,"login-slide-show"),setTimeout(()=>{a.Util.removeClass(i.root,"login-slide-show")},3e3))},[b]),(0,u.useEffect)(()=>{if(s&&p){let e=_.listen(_.EVENT.loginBlockKeyBoard,e=>{let{speed:t,callback:i}=e;t&&s.isUserActive&&D({callback:i})});return()=>e()}},[D,s,p]),(0,u.useEffect)(()=>{s&&p&&(d?(L(!0),w.Le.setConfig(w.gI.disableSpeed,!0)):(L(!1),w.Le.setConfig(w.gI.disableSpeed,!1)))},[d,s,p]),(0,u.useEffect)(()=>{if(s&&p){let e=()=>{let e=s.playbackRate;e>3&&(e=1,s.playbackRate=e,(0,C.t_)(g.SessionStorageKeys.PlayerPlaybackratio,e))};return s.on(r.RATE_CHANGE,e),()=>{s.off(r.RATE_CHANGE,e)}}},[s,p]),(0,u.useEffect)(()=>{s&&p&&void 0===T[A].find(e=>Number(e)===Number(t))&&(s.playbackRate=1)},[t,A,s,p]),l)?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"xgplayer-setting-playbackRatio disabled",children:"倍速"}),(0,o.jsx)("div",{className:"xgTips",children:"广告视频不支持倍速功能"})]}):E?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:D,className:"xgplayer-setting-playbackRatio",children:S.a.t("double_speed",{},"倍速")}),(0,o.jsx)("div",{className:c()("xgTips",{showTip:!0}),children:(0,o.jsxs)("div",{className:c()("blockLoginText"),children:["登录后即可切换倍速",(0,o.jsx)("span",{className:"blockLoginBtn",onClick:D,children:"立即登录"})]})})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{ref:I,className:"xgplayer-setting-playbackRatio",children:i.getIconText(t,n,A)}),(0,o.jsx)("div",{className:"xgplayer-slider xgplayer-box-douyin ",children:(0,o.jsx)("div",{className:"xgplayer-setting-content",children:(0,o.jsx)("div",{className:"xgplayer-playratio-wrap",children:T[A].map(e=>(0,o.jsxs)("div",{"data-id":e,className:c()({select:Number(t)===Number(e)},"xgplayer-playratio-item"),onClick:()=>{i.onPlayratioClick({rate:e}),s.emit(r.USER_ACTION,{action:"speed_change",pluginName:"PlayBackSettingPlugin"})},children:[e,"x"]},e))})})})]})}class M extends s.ZP{static get pluginName(){return"PlayBackSettingPlugin"}static get defaultConfig(){return{position:a.POSITIONS.CONTROLS_RIGHT,index:6,className:"xgplayer-playback-setting"}}afterCreate(){if(this.config.disable){this.onPlayRatioChange(1);return}this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.player.on("updatePlayBackRatio",this.updatePlayBackRatio),this.updatePlayBackRatio()}onPlayratioClick(e){var t,i;let{rate:n,click_method:l,notStorage:o}=e;if(Number(n)===Number(this.player.playbackRate))return!1;null===(t=(i=this.config).onRatioClick)||void 0===t||t.call(i,{rate:n,click_method:l,notStorage:o}),this.onPlayRatioChange(n)}onPlayRatioChange(e){this.player&&(this.player.config.defaultPlaybackRate=Number(e),this.player.playbackRate=Number(e)),this.config.playBackRatio=Number(e),this.renderRoot(),a.Util.removeClass(this.root,"slide-show")}getIconText(e,t,i){let n=T[i].find(t=>Number(t)===Number(e));return t&&void 0!==n?`${n}x`:S.a.t("double_speed",{},"倍速")}destroy(){this.player.playbackRate=1,this.player.config.defaultPlaybackRate=1,this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.player.off("updatePlayBackRatio",this.updatePlayBackRatio),(0,E.v)(this)}updateConfig(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,l._)({},this.config,e),this.renderRoot()}renderRoot(){var e;let t=this.config.playBackRatio||1,{disable:i,loginBlock:n,loginDispatch:l,isActive:a,speedType:r,abtest:s}=this.config,{playerPermanentlyShowInfo:u}=(null===(e=this.player)||void 0===e?void 0:e.config)||{};if(this.root){let e=(0,o.jsx)(D,{hasSelect:null!==(0,C.G)(g.SessionStorageKeys.PlayerPlaybackratio),playbackRate:t,playerPermanentlyShowInfo:u,onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave,xgCase:this,disable:i,player:this.player,loginBlock:n,loginDispatch:l,isActive:a,showTip:R,speedType:r,abtest:s});(0,E.s)(this,e)}}render(){return`
    <xg-icon class="xgplayer-playback-setting" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,n._)(this,"timeoutId",void 0),(0,n._)(this,"updatePlayBackRatio",()=>{var e;if(this.config.disable)return;let t=(0,C.G)(g.SessionStorageKeys.PlayerPlaybackratio)||1;null===this||void 0===this||null===(e=this.onPlayRatioChange)||void 0===e||e.call(this,t)}),(0,n._)(this,"onMouseleave",()=>{a.Util.removeClass(this.root,"slide-show"),this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,n._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName}),this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),a.Util.addClass(this.root,"slide-show"),this.player.emit("playRatioPanelShow",this.player.playbackRate)})}}let B=e=>{let{awemeInfo:t,logParams:i,isActive:n,disable:o,loginBlock:a,loginDispatch:r,speedType:s,abtest:d}=e,c=(0,A.n)(),f=(0,u.useRef)(null);return f.current=(0,u.useCallback)(e=>{var n,o;let{rate:a,click_method:r,notStorage:s}=e;"longPress"!==r&&N.sendLog("clickVideoSpeed",(0,l._)({urlParamList:["previous_page"],author_id:null==t?void 0:null===(n=t.authorInfo)||void 0===n?void 0:n.uid,group_id:null==t?void 0:t.awemeId,log_pb:null==t?void 0:t.logPb,item_duration_ms:(null==t?void 0:null===(o=t.video)||void 0===o?void 0:o.duration)||0,enter_from:(0,x.yW)(),speed:Number(a).toFixed(2),is_small_window:(0,y.QD)()?"1":"0",click_method:r},i)),!s&&(0,C.t_)(g.SessionStorageKeys.PlayerPlaybackratio,Number(a))},[i,t]),(0,p.o)(()=>{if(c&&(null==t?void 0:t.awemeType)!==68)return 2===c.config.reuse&&c.getPlugin("PlayBackSettingPlugin")?()=>{}:(c.registerPlugin(M,{abtest:d,onRatioClick:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];f.current(...t)},disable:o,loginBlock:a,loginDispatch:r,isActive:n,speedType:s}),()=>{c.getPlugin("PlayBackSettingPlugin")&&2!==c.config.reuse&&c.unRegisterPlugin("PlayBackSettingPlugin",!0)})},[c,t,o,d]),(0,p.o)(()=>{c&&2===c.config.reuse&&(null==t?void 0:t.awemeType)===68&&c.getPlugin("PlayBackSettingPlugin")&&c.unRegisterPlugin("PlayBackSettingPlugin",!0)},[c,t,d]),(0,p.o)(()=>{let e=null==c?void 0:c.getPlugin("PlayBackSettingPlugin");e&&e.updateConfig({isActive:n,disable:o,loginBlock:a,loginDispatch:r,abtest:d})},[c,n,o,d,a,r]),(0,u.useEffect)(()=>{if(c&&n){let e=c.getPlugin("PlayBackSettingPlugin");e&&!o&&!a&&(null==e||e.updatePlayBackRatio());let t=_.listen(_.EVENT.syncInteraction,()=>{e&&(null==e||e.updatePlayBackRatio())});return()=>{t()}}},[n,c,o,a]),(0,k.u)(c,j.B.ChangePlayRate,e=>{let{rate:t,notStorage:i,click_method:l}=e;if(c&&n){let e=c.getPlugin("PlayBackSettingPlugin");e&&(null==e||e.onPlayratioClick({rate:t,notStorage:i,click_method:l}))}}),null},F=e=>{let t=(0,I.N)();return(0,o.jsx)(h.k,{componentName:"PlayBackSetting",Slardar:t,children:(0,o.jsx)(B,(0,l._)({},e))})}},459576:function(e,t,i){var n=i(354795);t.Z=new n.h({progressPreview:{eventName:"progress_preview",params:{enter_from:"",enter_method:"",video_time:0,enter_from_merge:"",tab_name:"",group_id:"",chapter_index:0,is_chapter_bar:0}},progressClick:{eventName:"progress_click",params:{position:0,enter_from:"",enter_from_merge:"",tab_name:"",group_id:"",author_id:"",click_method:"hot_key",rate:-1,action:"",is_small_window:"0",chapter_index:0,is_chapter_bar:0,vduration:0,before_rate:0,if_continued_play:"",before_position:0}},chapterContentShow:{eventName:"chapter_content_show",params:{enter_from_merge:"",enter_from:"",group_id:"",author_id:"",chapter_num:0,is_with_video_summary:0,panel_has_chapter_summary:0,is_author:0}},chapterContentSlide:{eventName:"chapter_content_slide",params:{enter_from_merge:"",enter_from:"",group_id:"",author_id:"",chapter_num:0,is_with_video_summary:0,panel_has_chapter_summary:0,is_author:0}},chapterContentClick:{eventName:"chapter_content_click",params:{enter_from_merge:"",enter_from:"",group_id:"",author_id:"",chapter_num:0,is_with_video_summary:0,panel_has_chapter_summary:0,is_author:0,chapter_index_click:0}},chapterContentExit:{eventName:"chapter_content_exit",params:{enter_from_merge:"",enter_from:"",group_id:"",author_id:"",chapter_num:0,is_with_video_summary:0,panel_has_chapter_summary:0,is_author:0,duration:0}},showChapterProgressBar:{eventName:"show_chapter_progress_bar",params:{enter_from_merge:"",enter_from:"",group_id:"",author_id:"",chapter_cnt:0}}})},982913:function(e,t,i){i.d(t,{Y:function(){return u},c:function(){return d}}),i(612222),i(613518);var n=i(67108),l=i.n(n),o=i(611542),a=i(819769);let r=e=>e<=1440?22:e>=1920?26:.015277777777777777*e,s=()=>{let[e,t]=(0,o.useState)(()=>window.innerWidth);return(0,o.useEffect)(()=>{let e=l()(()=>{t(window.innerWidth)},100,{trailing:!0});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),e},u=(e,t)=>{var i;let n=(null==t?void 0:t.root)||(null===(i=window.player)||void 0===i?void 0:i.root);return Math.floor(((n&&parseInt(window.getComputedStyle(n,null).height,10)||800)-45-16)/e)},d=e=>{let t=s(),i=r(t),[n,l]=(0,o.useState)(500),u=Math.floor((n-45-16)/i),d=t>=1920?1:2;return(0,o.useEffect)(()=>{a.Le.getConfig(a.gI.AbtestData);let t=window.setTimeout(()=>{var t;let i=(null==e?void 0:e.root)||(null===(t=window.player)||void 0===t?void 0:t.root);l(i&&parseInt(window.getComputedStyle(i,null).height,10)||800)},200);return()=>{window.clearTimeout(t)}},[]),{lineHeight:i,maxLine:u,videoLineCamp:d}}},716255:function(e,t,i){i.d(t,{H:function(){return n}});let n=e=>{var t;let i=null===(t=e.root)||void 0===t?void 0:t.closest(".basePlayerContainer");return(null==i?void 0:i.querySelector(".focusPanel"))||null}},946313:function(e,t,i){i.d(t,{A:function(){return l}});var n=i(804929);let l=e=>{let{count:t,displayWord:i}=e;return 0===Number(t)?i:(0,n.qe)(Number(t))}},390030:function(e,t,i){var n=i(354795);t.Z=new n.h({hover_related_video_icon:{eventName:"hover_related_video_icon",params:{enter_from:""}},h265DownInfo:{eventName:"h265_down_info",params:{type:""}},relatedVideoClick:{eventName:"related_video_click",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:0}},bottomBarShow:{eventName:"bottom_bar_show",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:""}},bottomBarClick:{eventName:"bottom_bar_click",params:{playlet_id:"",compilation_id:"",group_id:"",enter_from:"recommend",enter_from_merge:"",bar_type:"",entrance_cnt:0,is_update:0,item_duration_ms:0,bar_tag_name:"",action:"open"}},videoSwitchUrl:{eventName:"video_switch_url",params:{aweme_id:"",vduration:0,current_position:0,vtype:"",buffer:0,is_visible:0,host:""}},refreshNoMatchVid:{eventName:"refresh_no_match_vid",params:{vid:""}}})},155797:function(e,t,i){function n(e){return 2}i.d(t,{_:function(){return l}});let l={isHideSiderLoading:e=>{var t;return 0!=(t=0,2)},isRenderOnActive:e=>{var t;return 0!=(t=0,2)},isInViewLoading:e=>{var t;return 0!=(t=0,2)},isLowerDowngrade:e=>{var t;return 2==(t=0,2)},isOptmizeInvisibleLive:e=>{var t;return 2==(t=0,2)}}},656716:function(e,t,i){i.d(t,{CK:function(){return n},i0:function(){return o},sb:function(){return a}});var n={Auto:"auto",User:"user"};let l="user";function o(e){l=e}function a(){return l}},426852:function(e,t,i){i.d(t,{Y3:function(){return r},hB:function(){return u},z5:function(){return s}}),i(347885);var n=i(528557),l=i(837305),o=i(356789);let a=0;function r(e){if("keyboard"===e){a=0,(0,n.qQ)(l.LocalStorageKeys.useKeyboardSwitch,!0),o.emit(o.EVENT.changeShortcutTip);return}(a+=1)>=6&&(0,n.qQ)(l.LocalStorageKeys.useKeyboardSwitch,!1),o.emit(o.EVENT.changeShortcutTip)}function s(){var e;let t=new Date().toDateString(),i=null!==(e=(0,n.$o)(l.LocalStorageKeys.useShortcut2))&&void 0!==e?e:{};void 0===i[t]&&(i[t]=!1),(0,n.qQ)(l.LocalStorageKeys.useShortcut2,i)}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(["like","comment","avatar"].includes(e)){let t=(0,n.$o)(l.LocalStorageKeys.useShortcut1);!t&&(t={like:0,comment:0,avatar:0}),Object.values(t).some(e=>e<3)&&(t[e]+=1,(0,n.qQ)(l.LocalStorageKeys.useShortcut1,t),Object.values(t).every(e=>e>=3)&&o.emit(o.EVENT.changeShortcutTip))}let t=new Date().toDateString(),i=(0,n.$o)(l.LocalStorageKeys.useShortcut2)||{};Object.values(i).filter(e=>!e).length<2&&(i[t]=!0,(0,n.qQ)(l.LocalStorageKeys.useShortcut2,i))}},991615:function(e,t,i){i.d(t,{U:function(){return n}});function n(e){window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,50)}},127593:function(e,t,i){i.d(t,{b:function(){return l}});var n=i("611542");function l(e,t,i){let l="function"==typeof t,o=function(){let e=(0,n.useRef)(!0);return(0,n.useEffect)(()=>(e.current=!0,()=>{e.current=!1})),e}();(0,n.useEffect)(()=>{let i;return(async()=>{i=await e(o)})(),()=>{l&&t(i)}},l?i:t)}},770193:function(e,t,i){i.d(t,{FF:function(){return _},HN:function(){return y},Lz:function(){return A},MQ:function(){return b},Zl:function(){return N},iv:function(){return w},nQ:function(){return x},vf:function(){return S}});var n=i(590921),l=i(874155);i(101060),i(632852);var o=i(135524),a=i(781114),r=i(245086),s=i(158077),u=i(877910),d=i(877435);let{COMMON_SEARCH_PARAMS:c,CHANNEL_PC_WEB:f}=s||{};function h(e){let{aweme_list:t,has_more:i,status_code:n,cursor:l,log_pb:o}=e;return{logPb:o&&JSON.stringify(o),statusCode:n||0,hasMore:i,cursor:l,data:(0,u.TN)({awemeList:t||[],logPb:o&&JSON.stringify(o)})||[]}}function v(e){let{aweme_list:t,has_more:i,status_code:n,max_cursor:l,log_pb:o}=e;return{logPb:o&&JSON.stringify(o),statusCode:n||0,hasMore:i,cursor:l,data:(0,u.TN)({awemeList:t||[],logPb:o&&JSON.stringify(o)})||[]}}function m(e){let{mix_infos:t,has_more:i,status_code:n,cursor:l,total:o,log_pb:a}=e;return{statusCode:n,hasMore:i,cursor:l,total:o,logPb:a&&JSON.stringify(a),data:(0,u.NR)(t||[])}}function g(e){let{extra:t,logId:i,log_pb:n,status_code:l,status_msg:o}=e,a="";try{a=JSON.stringify(n)}catch(e){}return{extra:t,logId:i,logPb:a,statusCode:l,statusMsg:o}}function p(e){let{extra:t,logId:i,log_pb:n,status_code:l,status_msg:o}=e,a="";try{a=JSON.stringify(n)}catch(e){}return{extra:t,logId:i,logPb:a,statusCode:l,statusMsg:o}}async function _(e){let{mixId:t,cursor:i,count:o=12}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=await (0,d.U2)("/aweme/v1/web/mix/aweme/",(0,l._)((0,n._)({},c),{mix_id:t,cursor:Math.max(i,0),count:o}),{errorTags:{mixId:t}},void 0,a,{}),s=(0,u.RL)(r,h);return(null==s?void 0:s.data)&&s.data.forEach(e=>{e.logPb=s.logPb}),s}async function y(e){let{uid:t,cursor:i=0,count:o=12}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=await (0,d.U2)("/aweme/v1/web/mix/list/",(0,l._)((0,n._)({},c),{sec_user_id:t,req_from:f,cursor:i,count:o}),{errorTags:{uid:t}},void 0,a,{});return(0,u.RL)(r,m)}function x(e,t,i){var n,l,s,u;let{currentEpisode:d}=(null==i?void 0:null===(n=i.seriesInfo)||void 0===n?void 0:n.seriesId)?null==i?void 0:i.seriesInfo:(null==i?void 0:i.mixInfo)||{},{data:c,currentEpisode:f}=(null==i?void 0:null===(l=i.seriesInfo)||void 0===l?void 0:l.seriesId)?t:e||{};if(f!==d)return!1;if(null==c?void 0:c.length){for(let e=0;e<c.length;e++)if((null===(s=c[e])||void 0===s?void 0:s.mixInfo.currentEpisode)===f&&(null==c?void 0:null===(u=c[e+1])||void 0===u?void 0:u.awemeId)){let t=null==c?void 0:c[e+1];return{awemeId:null==t?void 0:t.awemeId,url:(null==t?void 0:t.awemeType)===o.e.Note?(0,a.Wr)(null==t?void 0:t.awemeId,`previous_page=${(0,r.yW)()||""}`):(0,a.$N)(null==t?void 0:t.awemeId,`previous_page=${(0,r.yW)()||""}`),img:null==t?void 0:t.video.cover,desc:`第${null==t?void 0:t.mixInfo.currentEpisode}集 | ${null==t?void 0:t.desc}`}}}return!1}async function w(e){let{mixId:t,totalEpisode:i,currentEpisode:n,count:l}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Math.max(Math.min(n-1,i-l),0),{statusCode:r,data:s,hasMore:u,cursor:d,logPb:c}=await _({mixId:t,cursor:a,count:l},o);return{mixId:t,statusCode:r,data:s,currentEpisode:n,hasMore:u,cursor:0===r?d:a,logPb:c}}function C(e){let{mix_info:t,status_code:i,log_pb:n}=e;return{mixInfo:(0,u.BH)(t),statusCode:i,logPb:n}}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i}=e,o=await (0,d.U2)("/aweme/v1/web/mix/detail/",(0,l._)((0,n._)({},c),{mix_id:i,req_from:f}),{},void 0,t,{});return(0,u.RL)(o,C)}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i,action:o}=e,a=await (0,d.U2)("/aweme/v1/web/mix/collect/",(0,l._)((0,n._)({},c),{mix_id:i,action:o}),{},void 0,t,{});return(0,u.RL)(a,g)}async function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{mixId:i,episode:o,awemeId:a,scene:r}=e,s=await (0,d.U2)("/aweme/v1/web/mix/watch/record/",(0,l._)((0,n._)({},c),{mix_id:i,episode:o,item_id:a,scene:r}),{},void 0,t,{});return(0,u.RL)(s,p)}async function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{albumId:i,cursor:o,count:a=12,pullType:r=2}=e,s=await (0,d.U2)("/aweme/v1/web/minor/album/items/",(0,l._)((0,n._)({},c),{album_id:i,count:a,pull_type:r,cursor:o}),{},void 0,t,{});return(0,u.RL)(s,v)}},529866:function(e,t,i){i.d(t,{WW:function(){return f},bJ:function(){return c}});var n=i(590921),l=i(874155);i(101060),i(632852),i(612222),i(526789);var o=i(158077),a=i(877910),r=i(877435),s=i(498608);let{COMMON_SEARCH_PARAMS:u}=o;function d(e){let{aweme_list:t=[],status_code:i,has_more:n,log_pb:l}=e;return{logPb:l&&JSON.stringify(l),statusCode:i,hasMore:n,awemeList:(0,a.TN)({awemeList:t,logPb:l&&JSON.stringify(l)})}}async function c(e){let{awemeId:t,count:i=6,filterGids:o="",seoFlag:c=0,subChannelId:f=0,refreshIndex:h}=e,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=await (0,r.U2)("/aweme/v1/web/aweme/related/",(0,l._)((0,n._)({},u),{aweme_id:t,count:i,filterGids:o,awemePcRecRawData:(0,s.P5)(v),sub_channel_id:f,"Seo-Flag":c,refresh_index:h}),{errorTags:{awemeId:t}},void 0,v,{}),g=(0,a.RL)(m,d);return g.awemeList&&g.awemeList.forEach(e=>{e.logPb=g.logPb}),g}async function f(e){let{awemeId:t,count:i=1}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{status_code:a,aweme_id:d,desc:c,duration:f,cover:[h],extra:v}=await (0,r.U2)("/aweme/v1/web/related/video/lite",(0,l._)((0,n._)({},u),{aweme_id:t,count:i,awemePcRecRawData:(0,s.P5)(o,{is_related_hover:1}),channel:"channel_pc_web"}),{errorTags:{awemeId:t}},void 0,o,{});if(a)throw Error();return{awemeId:d,title:c,duration:f,cover:h,debugInfo:JSON.parse(v||"null")}}},35294:function(e,t,i){i.d(t,{Ab:function(){return y},Ee:function(){return N},Kl:function(){return x},MG:function(){return A},SK:function(){return M},Tj:function(){return I},Zd:function(){return S},cl:function(){return _},kH:function(){return D},l3:function(){return C},lS:function(){return E},q4:function(){return L},qj:function(){return P},tJ:function(){return j},tb:function(){return k},v0:function(){return T},w8:function(){return b}});var n=i(590921),l=i(874155);i(101060),i(632852);var o=i(158077),a=i(877910),r=i(877435);let{COMMON_SEARCH_PARAMS:s,CHANNEL_PC_WEB:u}=o||{},d="aweme.series.api",c="default";function f(e){let{aweme_list:t,has_more:i,status_code:n,max_cursor:l,log_pb:o}=e;return{logPb:o&&JSON.stringify(o),statusCode:n||0,hasMore:i,cursor:l,data:(0,a.TN)({awemeList:t||[],logPb:o&&JSON.stringify(o)})||[]}}function h(e){let{series_infos:t,has_more:i,status_code:n,cursor:l,total:o,log_pb:r}=e;return{statusCode:n,hasMore:i,cursor:l,total:o,logPb:r&&JSON.stringify(r),data:(0,a.K5)(t||[])}}function v(e){let{extra:t,logId:i,log_pb:n,status_code:l,status_msg:o}=e,a="";try{a=JSON.stringify(n)}catch(e){}return{extra:t,logId:i,logPb:a,statusCode:l,statusMsg:o}}function m(e){let{data:t,log_pb:i,status_code:n,status_msg:l}=e;return{statusCode:n,statusMsg:l,logPb:i&&JSON.stringify(i),data:(0,a.vx)((null==t?void 0:t.all_replay)||[])}}function g(e){let{data:t,log_pb:i,status_code:n,status_msg:l}=e;return{statusCode:n,statusMsg:l,logPb:i&&JSON.stringify(i),data:(null==t?void 0:t.info_list)?null==t?void 0:t.info_list.map(a.LW):[],cursor:t.cursor,hasMore:t.has_more}}function p(e){let{data:t,logId:i,log_pb:n,status_code:l,status_msg:o}=e;return{statusCode:l,statusMsg:o,logPb:n&&JSON.stringify(n),data:(0,a.LW)((null==t?void 0:t.episode)||{}),prompts:(null==t?void 0:t.prompts)||""}}async function _(e){let{seriesId:t,totalEpisode:i,currentEpisode:n,count:l}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Math.max(Math.min(n-1,i-l),0),{statusCode:r,data:s,hasMore:u,cursor:d,logPb:c}=await y({seriesId:t,cursor:a,count:l},o);return{seriesId:t,statusCode:r,data:s,currentEpisode:n,hasMore:u,cursor:0===r?d:a,logPb:c}}async function y(e){let{seriesId:t,cursor:i,count:o=12,pullType:u=2}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=await (0,r.U2)("/aweme/v1/web/series/aweme/",(0,l._)((0,n._)({},s),{series_id:t,pull_type:u,cursor:Math.max(i,0),count:o}),{errorTags:{seriesId:t}},void 0,d,{}),h=(0,a.RL)(c,f);return(null==h?void 0:h.data)&&h.data.forEach(e=>{e.logPb=h.logPb}),h}async function x(e){let{uid:t,cursor:i=0,count:o=12}=e,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=await (0,r.U2)("/aweme/v1/web/series/list/",(0,l._)((0,n._)({},s),{sec_user_id:t,req_from:u,cursor:i,count:o}),{errorTags:{uid:t}},void 0,d,{});return(0,a.RL)(c,h)}function w(e){let{series_info:t,status_code:i,log_pb:n}=e;return{seriesInfo:(0,a.vg)(t),statusCode:i,logPb:n}}async function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{seriesId:i}=e,o=await (0,r.U2)("/aweme/v1/web/series/detail/",(0,l._)((0,n._)({},s),{series_id:i,req_from:u}),{},void 0,t,{});return(0,a.RL)(o,w)}async function S(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{watchedSeriesCount:i=10,hotSeriesCount:o=10}=e,u=await (0,r.U2)("/aweme/v1/web/series/tab/window/",(0,l._)((0,n._)({},s),{watched_series_count:i,hot_series_count:o}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(u,a._E)}async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{cursor:i=0,count:o=10}=e,u=await (0,r.U2)("/aweme/v1/web/series/watched/list/",(0,l._)((0,n._)({},s),{cursor:i,count:o}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(u,a.gN)}async function N(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{cursor:i=0,count:o=10}=e,u=await (0,r.U2)("/aweme/v1/web/user/paid_content/get/",(0,l._)((0,n._)({},s),{cursor:i,count:o,content_type:2}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(u,a.dw)}async function A(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{cursor:i=0,count:o=10,uid:u}=e,f=await (0,r.U2)("/aweme/v1/web/series/collections/",(0,l._)((0,n._)({},s),{cursor:i,count:o,sec_user_id:u}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(f,a.gN)}async function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{count:i=10}=e,o=await (0,r.U2)("/aweme/v1/web/series/hot/list/",(0,l._)((0,n._)({},s),{count:i}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(o,a.gN)}async function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{offset:i=0,count:o=10,contentType:u,insertSeriesId:f}=e,h=await (0,r.U2)("/aweme/v1/web/series/card/feed/",(0,l._)((0,n._)({},s),{offset:i,count:o,content_type:u,insert_series_id_list:f}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(h,a.Zi)}async function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{episode:i=0,seriesId:o,awemeId:u}=e,f=await (0,r.U2)("/aweme/v1/web/series/watch/record/",(0,l._)((0,n._)({},s),{episode:i,series_id:o,item_id:u}),{},void 0,t,{psm:d,cluster:c});return(0,a.RL)(f,a.pO)}async function E(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{seriesId:i,action:o}=e,u=await (0,r.U2)("/aweme/v1/web/series/collect/",(0,l._)((0,n._)({},s),{series_id:i,action:o}),{},void 0,t,{});return(0,a.RL)(u,v)}async function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{episodeId:i}=e,o=await (0,r.U2)("/aweme/v1/web/show/episode/enter/",(0,l._)((0,n._)({},s),{episode_id:i,channel:""}),{},void 0,t,{}),{data:u,prompts:d,statusCode:c}=(0,a.RL)(o,p);return(0,l._)((0,n._)({},u),{prompts:d,statusCode:c})}async function L(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{episodeId:i,roomId:o}=e,u=await (0,r.U2)("/aweme/v1/web/show/episode/replay_list/",(0,l._)((0,n._)({},s),{episode_id:i,room_id:o,channel:""}),{},void 0,t,{});return(0,a.RL)(u,m)}async function T(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{episodeId:i,seasonType:o,episodeSubType:u,seasonId:d,roomId:c,uid:f,cursor:h=0,pageSize:v=10}=e,m=await (0,r.U2)("/aweme/v1/web/show/episode/more_replay/",(0,l._)((0,n._)({},s),{episode_id:i,cursor:h,page_size:v,relation_type:3===u?1:2,season_type:o,season_id:d,room_id:c,uid:f,reverse:!1,channel:""}),{},void 0,t,{});return(0,a.RL)(m,g)}let R=e=>{var t,i,n;let{status_code:l,data:o,logId:a}=e;return{statusCode:l,logId:a,data:{url:null==o?void 0:null===(n=o.PicDetail)||void 0===n?void 0:null===(i=n.QrcodeInfo)||void 0===i?void 0:null===(t=i.url_list)||void 0===t?void 0:t[0]}}};async function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{jsonParams:i="{}"}=e,o=await (0,r.U2)("/aweme/v1/web/share/carrier/",(0,l._)((0,n._)({},s),{share_scene:"aweme_pc_video_pay",json_params:i}),{},void 0,t,{});return(0,a.RL)(o,R)}async function M(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{itemId:i,skuId:o,bizType:a,spuId:u}=e;return await (0,r.U2)("/entertainment/paid/delivery_report/",(0,l._)((0,n._)({},s),{item_id:i,sku_id:o,biz_type:a,spu_id:u}),{},void 0,t,{})}},51811:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#arrow-right-2_svg__filter0_d_2327_94150)",clipPath:"url(#arrow-right-2_svg__clip0_2327_94150)",children:(0,o.jsx)("path",{d:"M4 1l5 5-5 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"arrow-right-2_svg__filter0_d_2327_94150",x:2.25,y:"-.75",width:8.5,height:13.5,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_2327_94150"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_2327_94150",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"arrow-right-2_svg__clip0_2327_94150",children:(0,o.jsx)("path",{fill:"currentColor",d:"M0 0h12v12H0z"})})]})]})));t.Z=r},111738:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("rect",{x:5,y:6,width:8,height:2,rx:1,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{d:"M5 12a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z",fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("rect",{x:5,y:16,width:7,height:2,rx:1,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.293 17.793a1 1 0 0 0 1.414 0l2.586-2.586c.63-.63.184-1.707-.707-1.707H18V7a1 1 0 1 0-2 0v6.5h-1.586c-.89 0-1.337 1.077-.707 1.707l2.586 2.586z",fill:"#fff",fillOpacity:".9"})]})));t.Z=r},660296:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("rect",{x:5,y:6,width:7,height:2,rx:1,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{d:"M5 12a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2H6a1 1 0 0 1-1-1z",fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("rect",{x:5,y:16,width:8.125,height:2,rx:1,fill:"#fff",fillOpacity:".9"}),(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.707 6.207a1 1 0 0 0-1.414 0l-2.586 2.586c-.63.63-.184 1.707.707 1.707H16V17a1 1 0 1 0 2 0v-6.5h1.586c.89 0 1.337-1.077.707-1.707l-2.586-2.586z",fill:"#fff",fillOpacity:".9"})]})));t.Z=r},614372:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,n._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.476 6.22a1 1 0 0 0 0 1.561l2.4 1.92A1 1 0 0 0 9.5 8.918V8H14a4 4 0 0 1 4 4v1a1 1 0 1 0 2 0v-1a6 6 0 0 0-6-6H9.5v-.92a1 1 0 0 0-1.625-.78L5.476 6.22zm12.548 10l-2.4-1.92a1 1 0 0 0-1.624.78V16h-4a4 4 0 0 1-4-4v-1a1 1 0 1 0-2 0v1a6 6 0 0 0 6 6h4v.92a1 1 0 0 0 1.625.78l2.399-1.919a1 1 0 0 0 0-1.562z",fill:"#fff",fillOpacity:".9"})})));t.Z=r},188732:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsx)("svg",(0,l._)((0,n._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,o.jsx)("path",{d:"M16.292 9.364a1.929 1.929 0 1 0-2.727 2.727l5.637 5.637-5.637 5.637a1.928 1.928 0 1 0 2.727 2.727l6.985-6.985.016-.015a1.929 1.929 0 0 0 0-2.728l-7-7z",fill:"#0A0C20"})})));t.Z=r},255958:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M1.455 0C.65 0 0 .651 0 1.455V8c0 .803.651 1.455 1.455 1.455H8c.803 0 1.455-.652 1.455-1.455V1.455C9.455.65 8.803 0 8 0H1.455z",fill:"#fff"}),(0,o.jsx)("path",{d:"M4 12a1.455 1.455 0 0 1-1.455-1.454h5.819a2.182 2.182 0 0 0 2.181-2.182V2.545C11.35 2.545 12 3.197 12 4v5.09A2.909 2.909 0 0 1 9.09 12H4z",fill:"#fff"})]})));t.Z=r},555761:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{d:"M.678 3.845a.778.778 0 0 1 0-1.367L4.662.22a1.707 1.707 0 0 1 1.676 0l3.984 2.258a.778.778 0 0 1 0 1.367L6.338 6.103a1.707 1.707 0 0 1-1.676 0L.678 3.845z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.076 5.273a.562.562 0 0 1 .753-.188l4.112 2.331c.345.195.773.195 1.118 0l4.112-2.33a.562.562 0 0 1 .753.187.518.518 0 0 1-.195.724l-4.112 2.33c-.69.39-1.545.39-2.234 0L.27 5.997a.518.518 0 0 1-.195-.724z",fill:"#fff"}),(0,o.jsx)("path",{d:"M.83 7.465a.562.562 0 0 0-.754.187.518.518 0 0 0 .195.724l4.112 2.331c.69.39 1.545.39 2.234 0l4.112-2.33a.518.518 0 0 0 .195-.725.562.562 0 0 0-.753-.187l-4.112 2.33a1.138 1.138 0 0 1-1.118 0L.83 7.466z",fill:"#fff"})]})));t.Z=r},863749:function(e,t,i){var n=i(590921),l=i(874155),o=i(259202),a=i(611542);let r=(0,a.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,l._)((0,n._)({width:14,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("g",{filter:"url(#series_svg__filter0_d_1599_82712)",children:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.09 2.49l9.505 5.515A5.2 5.2 0 0 0 6.457 2h-3.58c-.344 0-.643.2-.787.49zm9.165 6.719L9.077 7.945l-6.95 4.033a.877.877 0 0 0 .75.422h3.58a5.201 5.201 0 0 0 4.798-3.191zM2 10.65l3.066-1.78V5.618L2 3.838v6.813z",fill:"#fff"})}),(0,o.jsx)("defs",{children:(0,o.jsxs)("filter",{id:"series_svg__filter0_d_1599_82712",x:1,y:1,width:11.657,height:12.4,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,o.jsx)("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{}),(0,o.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0"}),(0,o.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1599_82712"}),(0,o.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1599_82712",result:"shape"})]})})]})));t.Z=r},857631:function(e){e.exports=JSON.parse('{"v":"5.6.10","fr":25,"ip":0,"op":24,"w":48,"h":48,"nm":"live_search","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"3","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[36,26.781,0],"ix":2},"a":{"a":0,"k":[0.625,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":12,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}]},{"t":24}],"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":24,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[24,26.781,0],"ix":2},"a":{"a":0,"k":[0.625,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-6,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":6,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":18,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}]},{"t":30}],"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":-6,"op":25,"st":-6,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[12,26.781,0],"ix":2},"a":{"a":0,"k":[0.625,2.781,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":0,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":12,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,8.531],[0.625,15]],"c":false}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[0.625,-8.969],[0.625,15]],"c":false}]},{"t":24}],"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":24,"st":0,"bm":0}],"markers":[]}')}}]);