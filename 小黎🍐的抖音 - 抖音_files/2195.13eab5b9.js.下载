"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["2195"],{760278:function(e,t,l){l(612222);var r=l(611542),n=l(536070),i=l(311610);t.Z=e=>{let{abtestData:t,tab:l,url:a,data:o,default_qulity:s}=e,[u,c]=r.useState(!1),{isFeedH265:d,addH265ErrorNum:v,resetH265ErrorNum:_}=(0,i.Z)({abtestData:t,tab:l});return{playerUrl:r.useMemo(()=>{if(d&&o&&!u){var e,t;let l=(0,n.i4)(null==o?void 0:null===(e=o.live_core_sdk_data)||void 0===e?void 0:e.pull_data,s)||(0,n.i4)(null==o?void 0:null===(t=o.live_core_sdk_data)||void 0===t?void 0:t.pull_data);if(l)return l}return a},[a,d,o,u]),isH265Err:u,isFeedH265:d,setIsH265Err:c,addH265ErrorNum:v,resetH265ErrorNum:_}}},517381:function(e,t,l){l.d(t,{K6:function(){return e9},O1:function(){return e8}});var r=l("590921"),n=l("874155");l("632852"),l("612222"),l("586529"),l("227470"),l("347885"),l("101060");var i=l("259202"),a=l("825211"),o=l.n(a),s=l("344814"),u=l.n(s),c=l("611542"),d=l("538846"),v=l("896668"),_=l("558696"),f=l("39587"),m=l("84930"),p=l("586423"),h=l("879852"),g=l("937913"),y=l("738526"),w=l("295037"),E=l("469871"),k=l("51202"),b=l("504200"),x=l("933654"),N=l("324041"),I=l("23238"),L=l("945108"),T=l("25822"),C=l("192189"),S=l("468924"),P=l("678972"),j=l("347966"),R=l("833131"),M=l("250751"),V=l("422829"),A=l("682987"),D=l("354795"),O=new D.h({userAction:{eventName:"search_result_click",params:{impr_id:"",rank:0,search_id:"",search_keyword:"",search_result_id:"",is_aladdin:0,token_type:"",button_type:"",from_video_id:"",enter_from:"general_search"}}}),F=l("766229"),G=l("219303");l("41873");var Z=l("295301"),U=l("398927");let W=e=>{let{title:t,authorInfo:l,className:r,style:n}=e;return(0,i.jsxs)("div",{className:o()(U.default.liveInfo,r),style:n,children:[!!(null==l?void 0:l.nickname)&&(0,i.jsx)("div",{className:U.default.userInfo,children:(0,i.jsx)("div",{className:U.default.userName,children:(0,i.jsx)(Z.Z,{text:`@${l.nickname}`})})}),!!t&&(0,i.jsx)("div",{className:U.default.description,children:(0,i.jsx)(Z.Z,{text:"string"==typeof t?t:(null==t?void 0:t.text)||""})})]})};var z=l("895081"),H=l("836423"),$=l("688918"),q=l("356789"),B=l("884215"),Y=l("801002"),K=l("13351"),J=l("819769"),Q=l("318086"),X=l("810437"),ee=l("55917"),et=l("951297"),el=l("346689"),er=l("132715"),en=l("377914"),ei=l("372413"),ea=l("92801"),eo=l("267438"),es=l("690464"),eu=l("577210"),ec=e=>{let{roomId:t,anchorId:l,hasPlay:n,program:i,enterLogParams:a,shopParams:o,nowTime:s,isActive:u,isPause:d,isVisibleRef:v,isPaidLive:_,isFollow:f,isModal:m=!1}=e,{setIntervalWarp:p,clearIntervalWarp:h}=eu.Z,g=(0,c.useRef)(null),y=(0,c.useRef)(null);(0,c.useEffect)(()=>(u&&!d&&n?g.current=p(()=>{w("interval")},1e4):h(g.current),()=>{h(g.current)}),[d,u,n]),(0,c.useEffect)(()=>{let e=e=>{(0,R.Y5)((0,r._)({duration:Date.now()-y.current,has_play:n?1:0,anchor_id:l,room_id:t,is_paidlive:Number(_),is_visible:v.current,follow_status:f},(0,R.Ne)(i),a,o)),y.current=null};return u&&(d&&y.current&&m?e(1):!d&&m&&(y.current=Date.now())),()=>{y.current&&m&&e(3)}},[u,d,m]);let w=(0,c.useCallback)(e=>{(0,R.UH)((0,r._)({duration:Date.now()-s.current,has_play:n?1:0,anchor_id:l,room_id:t,is_paidlive:Number(_),is_visible:v.current,from_type:e,follow_status:f},(0,R.Ne)(i),a,o)),s.current=Date.now()},[s,n,l,t,d,v]);return{liveDuration:w}},ed=l("231054");let ev=e=>{let{isActive:t,player:l}=e;return(0,c.useEffect)(()=>{if(l&&t){let e=q.listen(q.EVENT.searchWaterfallFullCardPause,()=>{l.pause()}),t=q.listen(q.EVENT.searchWaterfallFullCardUnmute,()=>{l.muted=!1});return()=>{null==e||e(),null==t||t()}}},[l,t]),null},e_=e=>{let{player:t}=(0,ed.n)();return(0,i.jsx)(ev,(0,n._)((0,r._)({},e),{player:t}))};var ef=l("635968"),em=l("690352"),ep=l("386410"),eh=l("753202"),eg=l("36492"),ey=l("448454"),ew=l("606660"),eE=l("45107"),ek=l("512849"),eb=l("646283"),ex=l("944995"),eN=l("16221"),eI=l.n(eN),eL=l("519796"),eT=l("320664"),eC=l("939602");let eS=e=>{let{logOptions:t,secretKey:l,isPaidLive:i,bitrate:a,baseConfig:o}=e,{keepalivetime:s=0}=(0,eT.D)(o.url),u=9999;return l&&i&&0!==Number(s)&&(u=Number(s)-Math.floor(Date.now()/1e3)),(0,c.useMemo)(()=>{var e,o,s,c,d,v;let{device_id:_,user_id:f,ext:m={}}=null!=t?t:{};return(0,n._)((0,r._)({},t),{aid:eL.xo.aid,project_key:eL.xo.project_key,app_name:eL.xo.app_name,user_unique_id:_,device_id:_,user_id:f,ext:(0,r._)({isSupportedH265:(0,eC.iz)()?1:0,isSupportedH266:(0,eC.ue)()?1:0,isSupportedAvx2:(0,eC.ws)()?1:0,arch:null!==(s=null===(o=window)||void 0===o?void 0:null===(e=o.TTE_ENV)||void 0===e?void 0:e.arch)&&void 0!==s?s:"",scm_version:null!==(c=window.version)&&void 0!==c?c:"unknown",tce_cluster:null!==(d=window.tce_cluster)&&void 0!==d?d:"unknown",mediaType:"video",aes_flv_stream:l&&i?1:0,aes_flv_keepAliveTime:l&&i?u:0,abvids:null!==(v=J.Le.getConfig(J.gI.AbtestVids))&&void 0!==v?v:"",bitrate:a},m)})},[])},eP=e=>{let{onEnd:t,onError:l,onPlay:r,onPause:n,onLoadStart:i,onLoadedData:a,onPlayerCreated:o}=e,s=(0,ey.Z)(t),u=(0,ey.Z)(l),c=(0,ey.Z)(r),d=(0,ey.Z)(n),v=(0,ey.Z)(i),_=(0,ey.Z)(a);return(0,ey.Z)(e=>{e.on("ended",s),e.on("error",u),e.on("loadeddata",_),e.on("loadstart",v),e.on("play",c),e.on("pause",d),null==o||o(e)})};function ej(e){return e.toString().padStart(2,"0")}l("238658"),l("510766"),l("312602");let eR=()=>{let e=new Date;return`${Math.random().toString().slice(-3)}-${e.getFullYear()}${ej(e.getMonth()+1)}${ej(e.getDate())}${ej(e.getHours())}${ej(e.getMinutes())}${ej(e.getSeconds())}${e.getMilliseconds()}${Math.random().toString().slice(-7)}${Math.random().toString(16).toUpperCase().slice(-10)}`},eM=(e,t)=>{if(!e)return e;try{let l=new URL(e);return l.searchParams.set("_session_id",function(e){let t=e||eR();return`${t}.${Date.now()}.${Math.random().toString().slice(-5)}`}(t)),l.searchParams.set("rsi",t?"1":"0"),l.searchParams.set("abr_pts","-800"),l.href}catch(t){return e}};var eV=l("543492");let eA=(0,c.forwardRef)((e,t)=>{let{children:l,baseConfig:a,pluginsConfig:o,className:s,sessionId:u}=e,{onLoadStart:d,onEnd:_,onPause:f,onError:m}=(0,eV.V)(),p=eP((0,n._)((0,r._)({},e),{onLoadStart:()=>{var t;d(),null===(t=e.onLoadStart)||void 0===t||t.call(e)},onEnd:()=>{var t;_(),null===(t=e.onEnd)||void 0===t||t.call(e)},onError:()=>{var t;m(),null===(t=e.onError)||void 0===t||t.call(e)},onPause:()=>{var t;f(),null===(t=e.onPause)||void 0===t||t.call(e)}})),h=(0,c.useMemo)(()=>({plugins:[ek.Gz,ek.l1,ek.Zh],pluginsConfig:eI()({play:{position:v.PZ.CONTROL_LEFT},controls:{autoHide:!0},loading:{text:!1}},o)}),[]),g=eS(e),y=(0,c.useMemo)(()=>(0,n._)((0,r._)({},a),{preProcessUrl:e=>eM(e=a.preProcessUrl?a.preProcessUrl(e):e,u)}),[a]);return(0,i.jsxs)(v.v7,{ref:t,className:s,baseConfig:y,preset:h,logOptions:g,Logger:ex.Z,onPlayerCreated:p,children:[(0,i.jsx)(ek.ig,{}),l]})}),eD=e=>{let{playerRef:t}=(0,c.useContext)(v.ET),l=(0,c.useRef)(!0);return(0,c.useEffect)(()=>{let e=t.current,r=()=>{q.emit(q.EVENT.videoPlay)},n=()=>{var t,r;null!==(r=(t=window).__INVISIBLE_QUERY__)&&void 0!==r||(t.__INVISIBLE_QUERY__={}),window.__INVISIBLE_QUERY__.if_browser_limited=1,(0,R.MR)(),q.emit(q.EVENT.videoPlayPrevent),l.current&&setTimeout(()=>{e.muted=!0,e.play(),l.current=!1},10)};return t.current.on("autoplay_was_prevented",n),t.current.on("autoplay_started",r),()=>{var e,l;null===(e=t.current)||void 0===e||e.off("autoplay_was_prevented",n),null===(l=t.current)||void 0===l||l.off("autoplay_started",r)}},[]),null},eO=()=>{let{playerRef:e}=(0,c.useContext)(v.ET);return(0,c.useEffect)(()=>{let t=q.listen(q.EVENT.livePause,()=>{var t;null===(t=e.current)||void 0===t||t.pause()});return()=>{t()}},[]),null},eF=V.G,eG=()=>{let{playerRef:e}=(0,c.useContext)(v.ET);return(0,c.useEffect)(()=>{e.current.muted=(0,T.rC)();let t=(0,b.B)(e.current);return e.current.on("volumechange",t),()=>{var l;null===(l=e.current)||void 0===l||l.off("volumechange",t)}},[]),null},eZ=e=>{let{playerRef:t}=(0,c.useContext)(v.ET);return(0,i.jsx)(w.QS,(0,n._)((0,r._)({},e),{player:null==t?void 0:t.current}))},eU=e=>{let{playerRef:t}=(0,c.useContext)(v.ET);return(0,i.jsx)(E.lW,(0,n._)((0,r._)({},e),{player:t.current}))},eW=e=>{let{ext:t}=e,{loggerRef:l}=(0,c.useContext)(v.ET);return(0,c.useEffect)(()=>{l.current&&t&&l.current.updateExt(t)},[l.current,t]),null};var ez=l("261045");let eH=e=>{let{playerRef:t}=(0,c.useContext)(v.ET);return(0,i.jsx)(ev,(0,n._)((0,r._)({},e),{player:t.current}))};var e$=l("760278"),eq={ENDED:0,0:"ENDED",ERROR:1,1:"ERROR",LIVING:2,2:"LIVING"},eB=l("898506"),eY=l.n(eB);let eK=(e,t)=>{let{ref:l,playerTeaEvtSubmit:i}=t,{gameName:a}=e,o=(0,c.useMemo)(()=>{var t,l,i,o;let{logParams:s={}}=e;return(0,n._)((0,r._)({},s),{enter_method:s.enter_method||"web_card",enter_from_merge:s.enter_from_merge,game_name:a,search_params:JSON.stringify(s.search_params),search_tab:`aweme_${null===(t=s.search_params)||void 0===t?void 0:t.search_type}`,previous_page:"",live_type:"game",function_type:"",seat_fit_status:"off",request_id:s.request_id,column_type:(null===(l=s.search_params)||void 0===l?void 0:l.colum_type)||"single",search_id:null===(i=s.search_params)||void 0===i?void 0:i.search_id,search_result_id:null===(o=s.search_params)||void 0===o?void 0:o.search_result_id})},[e.logParams,a]),s=(0,ey.Z)(t=>{var n,a,s,u;(0,R.bi)((0,r._)({anchor_id:e.anchorId,room_id:e.roomId,video_id:e.roomId,is_aweme_tied:null===(n=e.logParams)||void 0===n?void 0:n.is_aweme_tied},(0,R.Ne)(e.program),o)),null===(a=l.current.player)||void 0===a||a.pause(),null===(s=e.onEnterDetail)||void 0===s||s.call(e),null==t||null===(u=t.callback)||void 0===u||u.call(t),null==i||i(2)});return{enterLogParams:o,onEnterRoom:s}},eJ=(e,t)=>{let{ecomData:l,roomCart:i,logParams:a}=e,{roomUrl:o,onEnterRoom:s,enterLogParams:u}=t,d=(0,c.useMemo)(()=>{var e,t;return 1===Number(null!==(t=null==l?void 0:null===(e=l.room_cart_v2)||void 0===e?void 0:e.show_cart)&&void 0!==t?t:null==i?void 0:i.show_cart)},[l,i]),{onCartClick:v,onPromotionPopClick:_,onShopLoginSuccess:f}=(0,ee.L)({onEnterRoom:s,propsOnLoginSuccess:e.onLoginSuccess,href:o,enterLogParams:(0,n._)((0,r._)({},u),{enter_method:(null==a?void 0:a.shop_car_method)?null==a?void 0:a.shop_car_method:"web_live_card_popup_card"})}),m=(0,c.useMemo)(()=>d?{EVENT_ORIGIN_FEATURE:"TEMAI",_param_live_platform:"live"}:{},[d]);return{isShowCart:d,onCartClick:v,onPromotionPopClick:_,onShopLoginSuccess:f,shopParams:m}},eQ=(e,t)=>{var l;let{roomId:r,anchorId:n,program:i,isActive:a,isModal:o}=e,{isPaidLive:s,isFollow:u,enterLogParams:d,shopParams:v,liveStatus:_,ref:f}=t,[m,p]=(0,c.useState)(!1),[h,g]=(0,c.useState)(!a);(0,c.useEffect)(()=>{g(!a),J.Le.setConfig(J.gI.HasLiveContent,a)},[a]);let y=(0,c.useRef)(Date.now()),w=(0,c.useRef)(1),{liveDuration:E}=ec({roomId:r,anchorId:n,hasPlay:m,program:i,enterLogParams:d,shopParams:v,nowTime:y,isActive:a,isPause:h,isVisibleRef:w,isPaidLive:s,isFollow:u,isModal:o}),k=(0,ey.Z)(()=>{w.current="hidden"===document.visibilityState?0:1,_===eq.LIVING&&!h&&E("visibilitychange")});(0,c.useEffect)(()=>(document.addEventListener("visibilitychange",k),()=>{document.removeEventListener("visibilitychange",k)}),[]),(0,c.useEffect)(()=>{a&&h&&m&&E("pause"),a&&!h&&(y.current=Date.now())},[a,h,m]);let b=(0,ey.Z)(()=>{g(!1),a&&_===eq.LIVING&&!m&&E("success"),p(!0)}),x=(0,ey.Z)(()=>{var t;null===(t=e.onDestroy)||void 0===t||t.call(e),!h&&_===eq.LIVING&&E("play_destroy"),p(!1)});(0,c.useEffect)(()=>{var e;if(!(null===(e=f.current)||void 0===e?void 0:e.player))return;let{player:t}=f.current;t.on("play",b),t.on("pause",()=>{g(!0)}),t.once("destroy",x)},[null===(l=f.current)||void 0===l?void 0:l.player])},eX=e=>{let[t,l]=(0,c.useState)(!1),[r,n]=(0,c.useState)({});(0,c.useEffect)(()=>{(0,z.ZP)({service_name:"webcast.douyin.live_pc",key:"entrance"}).then(e=>{l(!0),"object"==typeof e&&n(e)},()=>{l(!0)})},[]);let{webRid:i,detailUrl:a,cameraId:o}=e;return{remoteURLResolved:t,roomUrl:(0,c.useMemo)(()=>{var e,t;if((null===(t=r[i])||void 0===t?void 0:null===(e=t.scopes)||void 0===e?void 0:e.indexOf("FEED"))>-1&&r[i].url)return r[i].url;if(a)return a;let l={};return"string"==typeof o&&"0"!==o&&(l.camera_id=o),(0,P.h)(i,l)},[i,a,o,r])}},e0=e=>{let{roomId:t,isActive:l}=e,{setMessageInstance:r,destroy:n,messageInstance:i}=(0,er.f)(eY());return(0,c.useEffect)(()=>(r(new et.v0C),()=>{n&&n()}),[]),(0,en.q)({message:i}),(0,c.useEffect)(()=>{if(!!l&&!!i)try{return i.setImRequestPath("/webcast/im/fetch/preview/"),i.start(t),()=>{var e;return null==i?void 0:null===(e=i.destroy)||void 0===e?void 0:e.call(i)}}catch(e){}},[t,l]),{messageInstance:i}},e1=(e,t)=>{let{ref:l}=t,{anchorId:r,sceneId:n,needAutoCheckRoomStatus:i}=e,[a,o]=(0,c.useState)(eq.LIVING),s=(0,ey.Z)(()=>(0,j.Y)(r,n).then(e=>{let{status_code:t,data:r=[]}=e.data;if(0===t){var n,i;if(r.some(e=>{let t=u()(e,"user_live",[])[0];return 1===u()(t,"live_status")}))return o(eq.LIVING),eq.LIVING;return null===(i=l.current)||void 0===i||null===(n=i.player)||void 0===n||n.pause(),o(eq.ENDED),eq.ENDED}return o(eq.ERROR),eq.ERROR}));return(0,c.useEffect)(()=>{if(i&&a===eq.LIVING){let e=setInterval(s,6e4);return()=>clearInterval(e)}},[i,a]),{liveStatus:a,setLiveStatus:o,checkRoomStatus:s}};var e2=l("386770");let e5=(0,d.ZP)(()=>Promise.all([l.e("6435"),l.e("5072")]).then(l.bind(l,714921)),{ssr:!1}),e4={play:{dbClick:!0}},e3=e=>{var t,l,a,s,d;let{flvSrc:v,anchorId:_,webRid:f,liveRoomMode:m,roomId:p,logParams:h,className:g,program:y,children:w,onError:E,authorInfo:k,abTestData:b,isActive:x,userCount:N,enableLiveInfo:I,title:L,showTitle:S,appointment:P,userInfo:j,paidLiveData:M={},assistLabel:V,dynamicLabel:A,isShow:D,onPlay:O,onPause:Z,sessionId:U,__rawdata:z}=e,Q=(0,c.useRef)({}),{syncVolume:X}=(0,el.j)(),{liveStatus:ee,setLiveStatus:et,checkRoomStatus:er}=e1(e,{ref:Q}),en=u()(j,"isLogin",!1),[ei,ea]=(0,c.useState)(I),eo=(0,$.F)(null==k?void 0:k.followStatus)?1:0,{isVip:es,isVipLive:eu}=(0,eh.Rk)(M,b),{remoteURLResolved:ec,roomUrl:ed}=eX(e),[ev,e_]=(0,c.useState)({}),em=(0,c.useMemo)(()=>{if(!(0,K.DT)())return!0;let e=(0,K.FJ)().awemePcClient||"0.0.0";return(0,eE.y)(e,">=","4.7.0")},[]),{playerUrl:ep}=(0,e$.Z)({abtestData:b,tab:em?"search":"",url:v,data:null==z?void 0:null===(l=z.others)||void 0===l?void 0:null===(t=l.web_data)||void 0===t?void 0:t.additional_stream_url}),eg=c.useRef(!1),ex=(0,ey.Z)(e=>{er().then(t=>{t!==eq.ENDED&&((0,B.T)(e),null==E||E())})}),eN=(0,ey.Z)(()=>{er().then(e=>{var t;if(!!(null===(t=Q.current)||void 0===t?void 0:t.player))e===eq.LIVING&&Q.current.player.refresh()})}),eI=H.ku.BAN,{playerTeaEvtSubmit:eL}=(0,e2.Z)({from:"searchPlayer",player:null===(a=Q.current)||void 0===a?void 0:a.player,isRoomEnd:ee===eq.ENDED,eventParams:ev,isH265:!1,isActive:x}),{enterLogParams:eT,onEnterRoom:eC}=eK(e,{ref:Q,playerTeaEvtSubmit:eL}),{isShowCart:eS,onCartClick:eP,onPromotionPopClick:ej,onShopLoginSuccess:eR,shopParams:eV}=eJ(e,{enterLogParams:eT,onEnterRoom:eC,roomUrl:ed});eQ(e,{isPaidLive:!1,isFollow:eo,enterLogParams:eT,shopParams:eV,liveStatus:ee,ref:Q}),(0,c.useEffect)(()=>{e_(eT)},[eT]);let eB=(0,c.useMemo)(()=>({autoplay:!0,volume:(0,T.T1)()}),[]),eY=(0,c.useRef)(),e3=(0,c.useRef)();if(!x&&!e3.current&&(e3.current={},fetch(eM(ep,U),{method:"HEAD"}).then(e=>{e.ok&&(e3.current.url=e.url)})),x&&!eY.current){let e=new AbortController,t=setTimeout(()=>{e.abort()},3e3);eY.current={fetch:fetch((null===(d=e3.current)||void 0===d?void 0:d.url)||eM(ep,U),{signal:e.signal}),abortController:e,abortTimer:t}}let e7=(0,ey.Z)(e=>{let t=!1;e.on("destroy",()=>{t=!0,eY.current.abortController.abort(),eY.current=null}),eY.current.fetch.then(l=>{var r;if(!t)clearTimeout(null===(r=eY.current)||void 0===r?void 0:r.abortTimer),l.ok?e.playStream(l.body,eM(ep,U)):e.src=eM(ep,U),e.play()},()=>{e.src=eM(ep,U),e.play()})}),e6=(0,c.useMemo)(()=>{let e=null==b?void 0:b.previewLabel;return null!=e&&e!==ew.PreviewLabel.Default},[b]),e8=(0,c.useMemo)(()=>({ignoreEmptyUrlUpload:ee===eq.ENDED||void 0===ee?1:0,isNewAce:!0,roomMode:m,roomId:p,webRid:f,enter_from_merge:null==h?void 0:h.enter_from_merge,enter_method:"web_live_cell",is_preview:0,act_code:null==h?void 0:h.act_code}),[ee,m,p,f,null==h?void 0:h.enter_from_merge,null==h?void 0:h.act_code]);(0,c.useEffect)(()=>{!x&&eg.current&&(eL(1),eg.current=!1)},[x]),(0,c.useEffect)(()=>{var e;if(!!D)(0,R.JW)((0,n._)((0,r._)({anchor_id:_,room_id:p,is_paidlive:Number(!1),is_aweme_tied:null==h?void 0:h.is_aweme_tied,search_type:(null==h?void 0:null===(e=h.search_params)||void 0===e?void 0:e.search_type)||"",follow_status:eo,if_live_close:ee===eq.ENDED?1:0},(0,R.Ne)(y),eT,eV),{is_viplive:eu?1:0}))},[D,p]),(0,c.useEffect)(()=>{var e;let t=null===(e=Q.current)||void 0===e?void 0:e.player;t&&(null==t||t.on("flverror",ex))},[Q.current]);let{isElectron:e9,isMac:te}=(0,c.useMemo)(()=>({isElectron:(0,K.DT)(),isMac:"Mac"===(0,Y.fV)().os}),[]),tt=(0,c.useCallback)(()=>{et(eq.LIVING)},[]),tl=(0,ey.Z)(()=>{q.emit(q.EVENT.searchMusicPause),null==O||O(),window.__LIVE_PLAYER__=Q.current,!eg.current&&(eg.current=!0)}),tr=(0,ey.Z)(()=>{q.emit(q.EVENT.searchVideoLoadStart,{playerType:"live"})}),tn=(0,ey.Z)(()=>{q.emit(q.EVENT.searchVideoLoaded,{playerType:"live"}),q.emit(q.EVENT.searchPageHydrate)}),{messageInstance:ti}=e0(e);if(!x)return(0,i.jsxs)("div",{className:o()(F.default.player,g),style:e.style,children:[(0,i.jsx)("img",{src:e.cover,className:F.default.poster}),(0,i.jsx)(G.j,{count:N,program:y,title:L,showTitle:S,appointment:P,className:F.default.userCount,paidLiveData:M,isLogin:en,viewType:eI})]});if(ee===eq.ENDED)return(0,i.jsx)(eZ,{cover:e.cover,className:e.endCoverClassName});let ta=(0,i.jsx)(eF,{target:"_blank",href:ed,onClick:eC,passParams:eT,className:F.default.linkArea,children:(0,i.jsx)("div",{className:F.default.divide,children:!e.hideEnterText&&ec&&(0,i.jsx)(ef.Z,{isActive:!0,abTestData:b,isLiving:ee===eq.LIVING,onEnterRoom:eC,href:ed,roomIdStr:p,useF:!0,size:"small",scene:"douyin_pc_search"})})}),to=ee===eq.ERROR&&(0,i.jsx)(eU,{className:e.errorCoverClassName,onRetry:tt}),ts=!e6&&(0,i.jsx)(G.j,{count:N,program:y,title:L,showTitle:S,appointment:P,className:F.default.userCount,paidLiveData:M,isLogin:en,viewType:eI}),tu=I&&!e6&&(0,i.jsx)(W,{title:L,authorInfo:k,className:F.default.liveInfo,style:{opacity:ei?1:0}}),tc=e6&&(0,i.jsx)(ez.Z,{className:o()(F.default.info),isLogin:en,userName:null==k?void 0:k.nickname,secUid:null==k?void 0:k.secUid,anchorId:_,userParams:{enter_method:"web_live_cell",enter_from_merge:null==h?void 0:h.enter_from_merge,event_page:"live",tab_name:"search"},isFollow:eo,userCount:N,isPaidLive:!1,abTestData:b,tagInfo:{assistLabel:V,dynamicLabel:A},useUserName:I,paidLiveInfo:M,viewType:eI}),td=(0,i.jsx)("div",{className:F.default.toolbarContainer,children:(0,i.jsx)(e5,{type:"mini",scene:"preview",headerUserInfo:j,defaultCartVisible:eS,onLoginSuccess:eR,onPopClick:ej,onCartClick:eP,isLiveShopPopVisibel:null==j?void 0:j.isLogin,roomId:p,authorId:_,getLiveShoppingLogParams:()=>({enter_from_merge:null==h?void 0:h.enter_from_merge,enter_method:"web_live_cell",request_id:null==h?void 0:h.request_id}),messageInstance:ti})});return(0,i.jsxs)(eA,{ref:Q,baseConfig:eB,pluginsConfig:e4,className:o()(F.default.player,eb.default.liveSearchPlayer,"liveSearchPlayer",g,{electron:e9,mac:te}),logOptions:{user_id:(0,J.sq)(),device_id:null===(s=(0,J.Es)())||void 0===s?void 0:s.user_unique_id,scene:C.C.liveSearch},onError:ex,onEnd:eN,onPlay:tl,onPause:Z,onLoadStart:tr,onLoadedData:tn,onPlayerCreated:e7,sessionId:U,children:[(0,i.jsx)(ek.GI,{}),w,(0,i.jsx)(ek.gu,{}),(0,i.jsx)(eG,{}),ta,to,ts,tu,tc,td,(0,i.jsx)(eO,{}),(0,i.jsx)(eH,{isActive:!0}),(0,i.jsx)(eW,{ext:e8}),(0,i.jsx)(eD,{})]})};(0,_.r)(e=>{var{text:t}=e,l=(0,M._)(e,["text"]);return(0,i.jsxs)(V.G,(0,n._)((0,r._)({},l),{className:o()(A.default.enterRoom,A.default.liveLink,l.className),children:[(0,i.jsx)("span",{className:A.default.desc,children:null!=t?t:"进入详情"}),(0,i.jsx)("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{opacity:"0.7",fillRule:"evenodd",clipRule:"evenodd",d:"M0.689396 8.12382C0.396503 7.83093 0.396503 7.35605 0.689396 7.06316L3.51782 4.23473L0.689396 1.40631C0.396503 1.11341 0.396503 0.63854 0.689396 0.345646C0.98229 0.0527533 1.45716 0.0527533 1.75006 0.345646L5.10881 3.7044C5.40171 3.9973 5.40171 4.47217 5.10881 4.76506L1.75006 8.12382C1.45716 8.41671 0.98229 8.41671 0.689396 8.12382Z",fill:"black"})})]}))});let e7=(0,d.ZP)(()=>Promise.all([l.e("6435"),l.e("5072")]).then(l.bind(l,714921)),{ssr:!1}),e6=c.forwardRef((e,t)=>{var l,a,s,d,v,_,M,A,D,Z;let{hlsSrc:U,flvSrc:H,cover:ei,hideEnterText:eu,anchorId:ed,userCount:ev,webRid:ey,roomId:ew,cameraId:eE,gameName:ek,detailUrl:eb,logParams:ex,appointment:eN,isShow:eI,linkerDetail:eL={},linkerMap:eT={},liveRoomMode:eC,program:eS,onFocus:eP,onBlur:ej,onPlay:eR=()=>null,onPause:eM=()=>null,onReady:eV,onDestroy:eA=()=>null,onEnterDetail:eD=()=>null,onFullScreen:eO,className:eF,style:eG,sceneId:eZ=394,isActive:eU=!1,title:eW,showTitle:ez=!1,enableLiveInfo:eH=!1,disableEnterButton:eq=!1,disableFullScreen:eB=!0,needSwitchLiveRoom:eY=!1,needAutoCheckRoomStatus:eK=!1,fullScreenTarget:eJ,endCoverClassName:eQ="",errorCoverClassName:eX="",children:e0,sessionId:e1,ecomData:e5,roomCart:e4,authorInfo:e3,secretKey:e6,userInfo:e8={},abTestData:e9={},paidLiveData:te={},onLoginSuccess:tt,onPaidLiveTryWatch:tl,onPaidLiveBuyTicket:tr,assistLabel:tn,dynamicLabel:ti,isModal:ta,docId:to,isShowGuide:ts,useNewUserSoundGuide:tu,__rawdata:tc}=e,td=c.useRef(null),[tv,t_]=c.useState(2),[tf,tm]=c.useState(eH),tp=c.useMemo(()=>(null==eL?void 0:eL.linker_play_modes)||[],[eL]),[th,tg]=c.useState({os:"",version:""}),[ty,tw]=c.useState(!1),[tE,tk]=c.useState(!eU),tb=c.useRef(Date.now()),[tx,tN]=c.useState(!1),tI=c.useRef(!0),tL=c.useRef(1),tT=c.useRef(0),{syncVolume:tC}=(0,el.j)(),[tS,tP]=c.useState({}),[tj,tR]=c.useState(!1),tM=c.useRef(!1),tV=c.useMemo(()=>{var e,t;return(null===(t=tS[ey])||void 0===t?void 0:null===(e=t.scopes)||void 0===e?void 0:e.indexOf("FEED"))>-1?tS[ey]:null},[tS,ey]),tA=(null==tV?void 0:tV.url)||(0,P.h)(ey),tD=c.useMemo(()=>{let[e,t]=tA.split("?"),l=em.parse(t||"");return`${e}?${em.stringify(l)}`},[tA,e]),tO=(0,$.F)(null==e3?void 0:e3.followStatus)?1:0;c.useImperativeHandle(t,()=>{var e;return{getPlayer:null===(e=td.current)||void 0===e?void 0:e.getPlayer}});let tF=c.useMemo(()=>{var e,t;return 1===Number(null!==(t=null==e5?void 0:null===(e=e5.room_cart_v2)||void 0===e?void 0:e.show_cart)&&void 0!==t?t:null==e4?void 0:e4.show_cart)},[e5,e4]),tG=u()(e8,"isLogin",!1),tZ=c.useMemo(()=>tF?{EVENT_ORIGIN_FEATURE:"TEMAI",_param_live_platform:"live"}:{},[tF]),{inActive:tU}=(0,eg.Z)({isFullScreen:(null==ex?void 0:null===(l=ex.search_params)||void 0===l?void 0:l.search_type)!=="live",isActive:eU}),{viewType:tW,setViewType:tz,retType:tH,setRetType:t$,paidLiveData:tq,setPaidLiveData:tB,isPaidLive:tY,hideLinkMicPreview:tK}=(0,X.M)(te,tG),{playerUrl:tJ,isH265Err:tQ,isFeedH265:tX,setIsH265Err:t0,addH265ErrorNum:t1,resetH265ErrorNum:t2}=(0,e$.Z)({abtestData:e9,tab:"search",url:H,data:null==tc?void 0:null===(s=tc.others)||void 0===s?void 0:null===(a=s.web_data)||void 0===a?void 0:a.additional_stream_url}),t5=c.useMemo(()=>(0,I.tq)()?U:tJ,[tJ,U]),t4=c.useMemo(()=>{var e,t,l,i;let a="",o="off",s="game";return eT[8]?a="radio":eT[12]?a="party":eT[5]&&(tp.includes(24)?a="radio":tp.includes(26)&&(a="party")),(null==tp?void 0:tp.includes(4))&&(o="on"),eT[8]||eT[12]?s="video":eT[5]&&(s="voice"),(0,n._)((0,r._)({},ex),{enter_method:(null==ex?void 0:ex.enter_method)||"web_card",enter_from_merge:null==ex?void 0:ex.enter_from_merge,game_name:ek,search_params:JSON.stringify((null==ex?void 0:ex.search_params)||"{}"),search_tab:`aweme_${null==ex?void 0:null===(e=ex.search_params)||void 0===e?void 0:e.search_type}`,previous_page:"",live_type:s,function_type:a,seat_fit_status:o,request_id:null==ex?void 0:ex.request_id,column_type:(null==ex?void 0:null===(t=ex.search_params)||void 0===t?void 0:t.colum_type)||"single",search_id:null==ex?void 0:null===(l=ex.search_params)||void 0===l?void 0:l.search_id,search_result_id:null==ex?void 0:null===(i=ex.search_params)||void 0===i?void 0:i.search_result_id})},[ex,ek,eT,tp]),{playerTeaEvtSubmit:t3}=(0,e2.Z)({from:"searchPlayer",player:null===(d=td.current)||void 0===d?void 0:d.getPlayer(),isRoomEnd:0===tv,eventParams:t4,isH265:!1,isActive:eU}),t7=c.useMemo(()=>{let e={};return"string"==typeof eE&&"0"!==eE&&(e.camera_id=eE),e},[eE]),t6=eb||(0,P.h)(ey,t7),t8=(0,er.f)(e=>e.setMessageInstance),t9=(0,er.f)(e=>e.destroy);c.useEffect(()=>(t8(new et.v0C),()=>{t9&&t9()}),[]);let le=(0,er.f)(e=>e.messageInstance),[lt,ll]=c.useState(null),{isVip:lr,isVipLive:ln}=(0,eh.Rk)(lt||te||{},e9);(0,en.q)({message:le}),c.useEffect(()=>{try{if(eU)return le.setImRequestPath("/webcast/im/fetch/preview/"),le.start(ew),()=>{var e;return null==le?void 0:null===(e=le.destroy)||void 0===e?void 0:e.call(le)}}catch(e){}},[ew,eU]);let li=c.useCallback(()=>{q.emit(q.EVENT.searchMusicPause),null==eR||eR()},[eR]),la=c.useCallback(()=>(0,j.Y)(ed,eZ).then(e=>{let{status_code:t,data:l=[]}=e.data;if(0===t){if(l.some(e=>{let t=u()(e,"user_live",[])[0];return 1===u()(t,"live_status")}))return t_(2),2;{var r;let e=null===(r=td.current)||void 0===r?void 0:r.getPlayer();return null==e||e.pause(),t_(0),0}}return t_(1),1}),[ed,eZ]),lo=c.useCallback(e=>{la().then(t=>{0!==t&&((0,B.T)(e),t_(1),tX&&!tQ&&(t0(!0),t1()))})},[la,tX,tQ]),ls=c.useCallback(()=>{la().then(e=>{if(!td.current)return;let t=td.current.getPlayer();2===e&&t.retry()})},[la]),lu=c.useCallback(()=>{li(),tk(!1),t_(2),tX&&!tQ&&eU&&t2(),window.__LIVE_PLAYER__=td.current,!tM.current&&(tM.current=!0)},[li,tX,tQ,eU]),lc=c.useCallback(()=>{eM(),tk(!0)},[eM]),ld=c.useCallback(()=>{eH&&tm(!1),null==eP||eP()},[eH,eP]),lv=c.useCallback(()=>{eH&&2===tv&&tm(!0),null==ej||ej()},[eH,tv,ej]),l_=c.useCallback(e=>{let{action:t,paused:l}=e,i="";switch(t){case"switch_play_pause":i=l?"click_play_button":"click_pause_button";break;case"switch_fullscreen":i="click_full_screen";break;case"change_muted":i="click_volume"}i&&O.sendLog("userAction",(0,n._)((0,r._)({},null==ex?void 0:ex.search_params),{button_type:i}))},[ex]),lf=c.useCallback(()=>{O.sendLog("userAction",(0,n._)((0,r._)({},null==ex?void 0:ex.search_params),{button_type:"click_refresh"}))},[ex]),lm=c.useCallback(()=>{q.emit(q.EVENT.searchVideoLoadStart,{playerType:"live"})},[]),lp=c.useCallback(()=>{q.emit(q.EVENT.searchVideoLoaded,{playerType:"live"}),q.emit(q.EVENT.searchPageHydrate)},[]);c.useEffect(()=>{if(eI){var e;(0,R.JW)((0,n._)((0,r._)({anchor_id:ed,room_id:ew,is_paidlive:Number(tY),is_aweme_tied:null==ex?void 0:ex.is_aweme_tied,search_type:(null==ex?void 0:null===(e=ex.search_params)||void 0===e?void 0:e.search_type)||"",follow_status:tO,if_live_close:0===tv?1:0},(0,R.Ne)(eS),t4,tZ),{is_viplive:ln?1:0}))}},[eI,ew]),c.useEffect(()=>{tg((0,Y.fV)())},[]),c.useEffect(()=>{tw((0,K.DT)())},[]),c.useEffect(()=>{eY&&ls()},[eY,ls,ed]),c.useEffect(()=>{if(eK&&2===tv){let e=setInterval(()=>la(),6e4);return()=>clearInterval(e)}},[eK,la,tv]);let lh=c.useCallback(e=>{var t,l;(0,R.bi)((0,r._)({anchor_id:ed,room_id:ew,video_id:ew,is_aweme_tied:null==ex?void 0:ex.is_aweme_tied},(0,R.Ne)(eS),t4)),t3(2),O.sendLog("userAction",(0,n._)((0,r._)({},null==ex?void 0:ex.search_params),{from_video_id:J.Le.getConfig(J.gI.PageEnterFromVideoID)||"",button_type:"click_into_live"})),tk(!0),eD();let i=null===(t=td.current)||void 0===t?void 0:t.getPlayer();null==i||i.pause(),null==e||null===(l=e.callback)||void 0===l||l.call(e)},[ex,t4,ed,ew]),{onCartClick:lg,onPromotionPopClick:ly,onShopLoginSuccess:lw}=(0,ee.L)({onEnterRoom:lh,propsOnLoginSuccess:tt,href:t6,enterLogParams:(0,n._)((0,r._)({},t4),{enter_method:(null==ex?void 0:ex.shop_car_method)?null==ex?void 0:ex.shop_car_method:"web_live_card_popup_card"})}),{liveDuration:lE}=ec({roomId:ew,anchorId:ed,hasPlay:tx,program:eS,enterLogParams:t4,shopParams:tZ,nowTime:tb,isActive:eU,isPause:tE,isVisibleRef:tL,isPaidLive:tY,isFollow:tO,isModal:ta});c.useEffect(()=>{var e;let t=null===(e=td.current)||void 0===e?void 0:e.getPlayer();if(!!t)0===tv&&(t.plugins.play.hide(),t.plugins.volume.hide())},[tv]),c.useEffect(()=>{tk(!eU),J.Le.setConfig(J.gI.HasLiveContent,eU)},[eU]),c.useEffect(()=>{let e=()=>{tL.current="hidden"===document.visibilityState?0:1,2===tv&&!tE&&!tT.current&&lE("visibilitychange")};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[tv,tE,tT,lE]),c.useEffect(()=>{eU&&tE&&tx&&(tT.current=Date.now(),lE("pause")),eU&&!tE&&(tb.current=Date.now(),tT.current=0),!eU&&tM.current&&t3(1)},[eU,tE,tx]);let lk=u()(e8,"info.shortId","");c.useEffect(()=>{var e;let t=null===(e=td.current)||void 0===e?void 0:e.getPlayer();if(!t)return;let l=()=>{tk(!1),tN(!0),eU&&tI.current&&2===tv&&(lE("success"),tb.current=Date.now())},r=()=>{tk(!0)},n=()=>{null==eA||eA(),!tT.current&&2===tv&&(lE("play_destroy"),tN(!1))};return null==t||t.on("autoplay_started",l),null==t||t.once("destroy",n),null==t||t.on("autoplay_was_prevented",r),()=>{null==t||t.off("autoplay_started",l),null==t||t.off("autoplay_was_prevented",r),null==t||t.off("destroy",n)}},[td.current,eU,tb.current,tI,tk,tN,ew,ed,tL,tT.current,eA]),c.useEffect(()=>{(async()=>{try{let e=await (0,z.ZP)({service_name:"webcast.douyin.live_pc",key:"entrance"});tR(!0),"object"==typeof e&&tP(e)}catch(e){tR(!1)}})()},[]);let lb=c.useCallback(()=>{t_(2)},[]),lx=(null==eS?void 0:null===(v=eS.mod)||void 0===v?void 0:v.episode_stage)===es.j.FIRST_LIVE,lN=c.useMemo(()=>({is_paidlive:Number(tY),watch_paidlive_status:(0,L.oD)(tW),entrance_form:""}),[tY,tW]),lI=c.useMemo(()=>(0,r._)({},tZ,lN,t4),[lN,lN,t4]);return c.useEffect(()=>{var e,t;let l=null==td?void 0:null===(t=td.current)||void 0===t?void 0:null===(e=t.getPlayer)||void 0===e?void 0:e.call(t);l&&eY&&(l.src=t5)},[t5,eY]),c.useEffect(()=>{let e;let t=e=>{null==e||e.stopPropagation()};return td.current&&(null==(e=td.current.getPlayer().getPlugin("volume").root)||e.addEventListener("pointerdown",t),null==e||e.addEventListener("touchstart",t)),()=>{null==e||e.removeEventListener("pointerdown",t),null==e||e.removeEventListener("touchstart",t)}},[tx]),eU?(0,i.jsxs)(f.Nu,{url:t5,ref:td,onReplay:lf,onFocus:ld,onBlur:lv,onEnd:ls,onError:lo,onPause:lc,onPlay:lu,onReady:eV,onFullScreen:eO,onUserAction:l_,onLoadStart:lm,onLoadedData:lp,fullscreenTarget:eJ,volume:(0,T.T1)(),className:o()(F.default.player,"liveSearchPlayer","xgplayer-inactive",eF,{electron:ty,mac:"Mac"===th.os,[F.default.inActive]:tU}),style:eG,closeVideoDblclick:!0,closeFocusVideoFocus:!0,closePauseVideoFocus:!0,closePlayVideoFocus:!0,disableFullScreen:eB,sessionId:e1,loggerOptions:{user_id:(0,J.sq)(),device_id:null===(_=(0,J.Es)())||void 0===_?void 0:_.user_unique_id,scene:C.C.liveSearch},isPaidLive:tY,isVipLive:ln,isVip:lr,secretKey:e6,autoHide:!0,children:[(0,i.jsx)("div",{children:(0,i.jsx)(V.G,{target:(null==tV?void 0:tV.html_target)||"_blank",href:tD,onClick:lh,passParams:t4,className:F.default.linkArea})}),0!==tv&&!tK&&(0,i.jsx)(S.LinkMicPreviewPlugin,{className:F.default.preview,linkerMap:eT,anchorId:ed,roomId:ew,functionType2:"new_audience"}),(0,i.jsx)(ep.default,{onShowVipLiveBoundary:e=>{e&&ll({privilege_info_map:{101:{paid_live_type:101,paid_live_info:{view_right:0}}}})},onBtnClick:()=>{window.open(`${tA}?${em.stringify((0,n._)((0,r._)({},t4),{open_vip_panel:1}))}`,Q.f?"_self":"_blank")},roomId:ew,roomStatus:tv,paidLiveData:lt||te,messageInstance:le,abTestData:e9}),(0,i.jsx)(m.b,{isActive:eU,currentPlayer:null===(M=td.current)||void 0===M?void 0:M.getPlayer()}),(0,i.jsx)(g.n,{position:"controlsLeft"}),(0,i.jsx)(y.G5,{}),0===tv&&(0,i.jsx)(w.Cx,{cover:ei,className:eQ}),!tY&&1===tv&&!tY&&(0,i.jsx)(E.JJ,{className:eX,onRetry:lb}),(0,i.jsx)(G.j,{count:ev,program:eS,title:eW,showTitle:ez,appointment:eN,className:F.default.userCount,paidLiveData:tq,isLogin:tG,viewType:tW}),(0,i.jsx)(k.p,{ext:{ignoreEmptyUrlUpload:0===tv||void 0===tv?1:0,isNewAce:!0,roomMode:eC,roomId:ew,webRid:ey,enter_from_merge:null==ex?void 0:ex.enter_from_merge,enter_method:"web_live_cell",is_preview:0,act_code:null==ex?void 0:ex.act_code}}),!eu&&(0,i.jsx)(V.G,{target:(null==tV?void 0:tV.html_target)||"_blank",href:tD,onClick:lh,passParams:t4,className:o()(F.default.divide,{[F.default.inActive]:tU}),children:tj&&(0,i.jsx)(ef.Z,{enterText:(null==eS?void 0:null===(A=eS.mod)||void 0===A?void 0:A.episode_stage)===es.j.FIRST_LIVE?"点击进入首播":null==tV?void 0:tV.enter_text,divideAb:!0,isActive:eU,abTestData:e9,isLiving:2===tv,onEnterRoom:lh,href:tD,roomIdStr:ew,useF:!0,size:"small",scene:"douyin_pc_search"})}),eH&&(0,i.jsx)(W,{title:eW,authorInfo:e3,className:F.default.liveInfo,style:{opacity:tf?1:0}}),(0,i.jsx)("div",{className:F.default.toolbarContainer,children:(0,i.jsx)(e7,{type:"mini",scene:"preview",headerUserInfo:e8,defaultCartVisible:tF,onLoginSuccess:lw,onPopClick:ly,onCartClick:lg,isLiveShopPopVisibel:null==e8?void 0:e8.isLogin,roomId:ew,authorId:ed,getLiveShoppingLogParams:()=>({enter_from_merge:null==ex?void 0:ex.enter_from_merge,enter_method:"web_live_cell",request_id:ex.request_id}),messageInstance:le})}),(0,i.jsx)(b.l,{}),(0,i.jsx)(x.b,{isActive:eU,isShowGuide:ts,useNewUserSoundGuide:tu}),tY&&0!==tv&&(0,i.jsx)(ea.default,{paidLiveData:tq,isLogin:tG,display_id:lk,webRid:ey,roomId:ew,viewType:tW,setViewType:tz,setRetType:t$,scene:eo.W.LIVING_SEARCH,retType:tH,setPaidLiveData:tB,isFirstLive:lx,logParams:lI,onPaidLiveTryWatch:tl,onPaidLiveBuyTicket:tr,isActive:eU}),(0,i.jsx)(N.g,{}),(0,i.jsx)(e_,{isActive:eU}),(0,i.jsx)(p.l,{from:"search_player",isActive:eU,hackFullScreenDom:!0,videoAreaClickActive:!1,logParams:ex,enableInteractionPlugin:!1,searchListType:"single",isUpperFeed:!1,livePlayer:null==td?void 0:null===(Z=td.current)||void 0===Z?void 0:null===(D=Z.getPlayer)||void 0===D?void 0:D.call(Z),liveDocId:to}),(0,i.jsx)(h.t,{logParams:ex}),e0]}):(0,i.jsxs)("div",{className:o()(F.default.player,eF),style:eG,children:[(0,i.jsx)("img",{src:ei,className:F.default.poster}),(0,i.jsx)(G.j,{count:ev,program:eS,title:eW,showTitle:ez,appointment:eN,className:F.default.userCount,paidLiveData:tq})]})}),e8=e=>{let{className:t,style:l,cover:r,userCount:n,program:a,title:s,showTitle:u,paidLiveData:c,appointment:d}=e;return(0,i.jsxs)("div",{className:o()(F.default.player,t),style:l,children:[(0,i.jsx)("img",{src:r,className:F.default.poster}),(0,i.jsx)(G.j,{count:n,program:a,title:s,showTitle:u,appointment:d,className:F.default.userCount,paidLiveData:c})]})},e9=c.forwardRef((e,t)=>{var l,a,o,s;let d;let _=c.useMemo(()=>{var t;return(0,ei.Lj)(null!==(t=null==e?void 0:e.webRid)&&void 0!==t?t:"-1")()},[null==e?void 0:e.webRid]),f="_douyin_player_search_error",[m,p]=c.useState(()=>Number(localStorage.getItem(f)||"0")>3),h=c.useCallback(()=>{p(!0);let e=Number(localStorage.getItem(f)||"0");localStorage.setItem(f,String(e+1))},[]),g=Number(u()(e.paidLiveData,"paid_type",0))===H.xc.PAID_LIVE,y=101===u()(e.paidLiveData,"privilege_info_map[101].paid_live_type"),{ecomData:w,roomCart:E}=e,k=c.useRef(1===Number(null!==(a=null==w?void 0:null===(l=w.room_cart_v2)||void 0===l?void 0:l.show_cart)&&void 0!==a?a:null==E?void 0:E.show_cart));return d=!(!(null==e?void 0:e.disableNewPlayer)&&(0,v.Eo)())||(0,I.tq)()||m||g||y||k.current||0!==Object.keys(null!==(o=e.linkerMap)&&void 0!==o?o:{}).length?(0,i.jsx)(e6,(0,n._)((0,r._)({},e),{ref:t})):(0,i.jsx)(e3,(0,n._)((0,r._)({},e),{onError:h})),(0,i.jsx)(ei.qd.Provider,{value:_,children:d},null!==(s=null==e?void 0:e.webRid)&&void 0!==s?s:"-1")})},515591:function(e,t,l){l.d(t,{W:function(){return p}}),l(632852),l(586529),l(227470);var r=l(259202),n=l(611542),i=l(825211),a=l.n(i),o=l(781111),s=l(912496),u=l(258946),c=l(96244),d=l(528386);let v=null,_=!1;function f(e){let{text:t,style:l}=e;async function n(){(0,s.J)(null==v?void 0:v.innerText),d.F.info({text:"已复制",duration:1e3})}return(0,r.jsx)("div",{className:c.default.panel,style:{height:l.height,width:l.width},onDoubleClick:n,children:t})}function m(e){let{name:t,text:l,showPanelRightside:n}=e;return(0,r.jsx)("div",{className:c.default.button,onClick:function(e){_?(v.style="display: none;",_=!1):(!function(e,t){if(v){let e=`top:${t.top}px; left:${t.left}px;`;0===t.right&&(e=`top:${t.top}px; right:0px;`),v.style=e}else{let e=`top:${t.top}px; left:${t.left}px;`;0===t.right&&(e=`top:${t.top}px; right:0px;`),(v=document.createElement("div")).className=c.default.panelWrapper,v.id="panelContainer",v.style=e,document.body.appendChild(v)}o.render((0,r.jsx)(f,{text:e,style:t}),v)}(l,function(e,t){let l={width:300,height:600,top:0,left:0,right:""},r=t.target.getBoundingClientRect(),n=document.documentElement.scrollTop,i=document.documentElement.clientWidth;return l.right=r.right+4+300>i?0:"unset",l.top=r.bottom+4+n,e?l.left=r.right+4:l.left=r.left-l.width-4,l}(n,e)),_=!0),e.stopPropagation(),e.preventDefault()},children:t})}function p(e){let{req:t=null,video:l,isLeft:i=!0,showPanelRightside:o=!1,size:s=null,gear:d}=e;return(0,n.useEffect)(()=>()=>void(v&&(document.body.removeChild(v),v=null,_=!1)),[]),(0,r.jsxs)("div",{className:a()(c.default.buttonWraper,c.default.opacityAnimation,{[c.default.right]:!i}),children:[t&&(0,r.jsx)(m,{name:"请求",text:t,showPanelRightside:o}),l&&(0,r.jsx)(m,{name:"视频",text:function(e,t,l){if("String"!==(0,u.tQ)(e))return"";let r=e.split("\r\n");if(t){let e=`播放分辨率: ${t.height},${t.width}`;r.splice(2,0,e)}if(l){let e=`播放档位: ${l}`;r.splice(2,0,e)}return r.join("\r\n")}(l,s,d),showPanelRightside:o})]})}},412547:function(e,t,l){l.d(t,{g:function(){return f}});var r=l(590921);l(612222),l(347885);var n=l(611542),i=l(135524),a=l(305452),o=l(124797),s=l(819769),u=l(356789),c=l(895184),d=l(375456),v=l(302774);let _=[i.e.LiveCard,i.e.WordCupCard],f=e=>{let{swiper:t,setAwemeInfoList:l,awemeInfoList:f,awemeInfo:m,refMixPlayer:p,liveCardDisable:h=!0,abTestData:g}=e,y=(0,v.Z)({refMixPlayer:p,from:"sideList"}),[w,E]=(0,n.useState)(!1),k=(0,n.useRef)({}),b=(0,n.useRef)([]),x=(0,n.useRef)(0);return b.current=f,(0,n.useEffect)(()=>{var e;let r=null===(e=s.Le.getConfig(s.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;if(y&&(!r||!w)&&t&&f){for(let e=0;e<f.length;e++){let t=f[e];_.includes(t.awemeType)&&(k.current[e]=t)}let e=0;for(let l=0;l<Object.keys(k.current).length;l++)Number(Object.keys(k.current)[l])<t.activeIndex&&e++,f.splice(Number(Object.keys(k.current)[l])-l,1);return l([...f]),t.slideTo(t.activeIndex-e,0),()=>{let e=0,r=[...b.current];for(let l=0;l<Object.keys(k.current).length;l++)Number(Object.keys(k.current)[l])<=t.activeIndex+e&&e++,r.splice(Number(Object.keys(k.current)[l]),0,k.current[Object.keys(k.current)[l]]);k.current={},l(r),setTimeout(()=>t.slideTo(t.activeIndex+e,0))}}},[y,w,t]),(0,a.o)(()=>{let e=u.listen(u.EVENT.changeMinWindows,e=>{var l,r;let{event:n,clickMethod:a,source:v}=e,_=null==p?void 0:null===(l=p.current)||void 0===l?void 0:l.getPlayer(),g=(null==f?void 0:null===(r=f[null==t?void 0:t.activeIndex])||void 0===r?void 0:r.awemeType)===i.e.LiveCard&&h&&"small_window_widget"!==v,y=d.s.getPlayersByScene(o.lT.Modal).length>0&&_&&d.s.getPlayerScene(null==_?void 0:_.playerId)!==o.lT.Modal;if(!g&&!y)"check"===n&&setTimeout(()=>{if(!s.Le.getConfig(s.gI.IsMiniWin))((null==f?void 0:f.length)>0||m)&&((0,c.r)()&&(null==_||_.exitFullscreen()),u.emit(u.EVENT.changeMinWindows,{event:"open",isMiniWin:!0,clickMethod:a,source:v}))},50)});return()=>e()},[f,m,p,t,h]),(0,n.useEffect)(()=>{var e;let t=null===(e=s.Le.getConfig(s.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal;if(y&&(!t||!w)&&f&&f.length!==x.current){let e=Object.keys(k.current).length,t={};for(let l=0;l<f.length;l++){let r=f[l];_.includes(r.awemeType)&&(t[e+l]=r)}for(let l=0;l<Object.keys(t).length;l++)f.splice(Number(Object.keys(t)[l])-l-e,1);k.current=(0,r._)({},k.current,t),l([...f]),x.current=f.length}},[f,y,w]),(0,a.o)(()=>{let e=u.listen(u.EVENT.changeVideoSideBar,e=>{let{isShowRelatedCard:t,isAuthorCardShow:l}=e;E(!!(t||l))});return()=>e()},[]),null}},77435:function(e,t,l){l.d(t,{H:function(){return o}});var r=l(688497),n=l(245086),i=l(826292);let a=e=>{i.Z.sendLog("playSettingIconShow",{enter_from_merge:(0,n.yW)(),enter_from:(0,n.vM)(),icon:e})},o=e=>(0,r.x)(a.bind(null,e))},165793:function(e,t,l){l.d(t,{g:function(){return a}}),l(526789);var r=l(611542),n=l(623176),i=l(35294);let a=e=>{let{player:t,awemeInfo:l}=e,a=(0,r.useRef)(0);(0,r.useEffect)(()=>{if(t&&l){let{seriesInfo:r,awemeId:o}=l||{},{seriesId:s,currentEpisode:u}=r||{},c=!1,d=async e=>{let{currentTime:l}=e;if(!c&&s&&o&&a.current<5&&l>=5){c=!0;try{let e=await (0,i.tJ)({episode:u,seriesId:s,awemeId:o});if((null==e?void 0:e.statusCode)===0){var r;null==t||null===(r=t.off)||void 0===r||r.call(t,n.TIME_UPDATE,d)}else throw Error(null==e?void 0:e.statusMessage)}catch(e){a.current++}c=!1}};if(s){var e;return null==t||null===(e=t.on)||void 0===e||e.call(t,n.TIME_UPDATE,d),()=>{var e;null==t||null===(e=t.off)||void 0===e||e.call(t,n.TIME_UPDATE,d),a.current=0}}}},[t,l])}},371442:function(e,t,l){l.d(t,{V:function(){return o}}),l(347885);var r=l(611542),n=l(721778),i=l(309854),a=l(245086);let o=e=>{let{awemeInfo:t}=e;(0,r.useEffect)(()=>{var e,l,r,o,s,u,c,d,v;(null==t?void 0:null===(e=t.anchorInfo)||void 0===e?void 0:e.type)===n.as.AnchorShop&&!(null==t?void 0:null===(o=t.anchorInfo)||void 0===o?void 0:null===(r=o.extra)||void 0===r?void 0:null===(l=r[0])||void 0===l?void 0:l.product_detail_schema)&&[1,4].includes(Number(null==t?void 0:null===(c=t.anchorInfo)||void 0===c?void 0:null===(u=c.extra)||void 0===u?void 0:null===(s=u[0])||void 0===s?void 0:s.platform))&&i.oe.event.error({name:i.Mo.ShopAnchorDataError,report:{logId:t.logPb,erroData:null==t?void 0:null===(v=t.anchorInfo)||void 0===v?void 0:null===(d=v.extra)||void 0===d?void 0:d[0],enterFromMerge:(0,a.yW)()}})},[t])}},234766:function(e,t,l){l.d(t,{s:function(){return i},v:function(){return a}});var r=l(781111);let n=l(909413).createRoot,i=(e,t)=>{if(e.clientRoot){e.clientRoot.render(t);return}e.root&&(e.clientRoot=n(e.root),e.clientRoot.render(t))},a=e=>{if(e.clientRoot){let t=e.clientRoot;e.clientRoot=void 0,setTimeout(()=>{t.unmount()},0)}else r.unmountComponentAtNode(e.root)}},223842:function(e,t,l){l.d(t,{V:function(){return d}});var r=l(611542),n=l(623176),i=l(681433),a=l.n(i),o=l(135524),s=l(356789),u=l(401310);let c=!1,d=e=>{let{awemeInfo:t,isFirst:l,isActive:i,timeout:d=2e3}=e,v=(0,u.n)();return(0,r.useEffect)(()=>{if(!i)return;let e=a()(e=>{let{isDown:r=!1}=e||{};c=!0,s.emit(s.EVENT.firstFrameReady,{firstFrameReadyPlayer:v,vid:null==t?void 0:t.awemeId,playerId:null==v?void 0:v.playerId,isFirst:l,isDown:!!r,isActive:i})});if((null==t?void 0:t.awemeType)!==o.e.Normal){setTimeout(()=>{e({isDown:!0})},0);return}if((null==t?void 0:t.awemeType)===o.e.Normal&&v){if(!1===l&&!c||v.isPlaying||v.currentTime>0){setTimeout(()=>{e({isDown:!0})},0);return}v.on(n.AUTOPLAY_STARTED,e),v.on(n.AUTOPLAY_PREVENTED,e);let t=setTimeout(()=>{e({isDown:!0})},d);return()=>{v.off(n.AUTOPLAY_STARTED,e),v.off(n.AUTOPLAY_PREVENTED,e),clearTimeout(t)}}},[v,t,l,i,d]),null}},322859:function(e,t,l){l.d(t,{r:function(){return i}});var r=l(611542),n=l(401310);let i=e=>{let t=(0,n.n)();return(0,r.useEffect)(()=>{if(t){let e=()=>{t.replay(),t.replayed=!0};return t.on("ended",e),()=>{t.off("ended",e)}}},[t]),null}},879852:function(e,t,l){l.d(t,{t:function(){return d}});var r=l("590921"),n=l("874155"),i=l("611542"),a=l("623176"),o=l("819769"),s=l("354795"),u=new s.h({userAction:{eventName:"search_result_click",params:{impr_id:"",rank:0,search_id:"",search_keyword:"",search_result_id:"",from_video_id:"",is_aladdin:0,token_type:"",button_type:"",enter_from:"general_search"}}}),c=l("401310");let d=e=>{let{logParams:t}=e,l=(0,c.n)(),s=(0,i.useCallback)(e=>{let{action:l,pluginName:i,paused:a,status:s}=e,c="";switch(l){case"switch_play_pause":c=a?"click_play_button":"click_pause_button";break;case"switch_fullscreen":c="click_full_screen";break;case"click":case"dragend":"progress"===i&&(c="click_progress");break;case"change_muted":c="click_volume";break;case"speed_change":c="click_speed_change";break;case"clean_screen":c="open"===s?"click_bullet_clean":"click_bullet_close";break;case"switch_clarity":c="click_quality_change";break;case"page_fullscreen_change":c="click_full_window";break;case"fake_screen_change":c="open"===s?"click_intelligence_size":"click_formal_size";break;case"danmaku_switch":c="open"===s?"click_bullet_open":"click_bullet_close";break;case"danmaku_emoji_click":c="click_bullet_emo";break;case"danmaku_setting":c="click_bullet_setting";break;case"danmaku_input_focus":c="click_bullet_enter";break;case"digg":c="open"===s?"click_good":"click_good_cancel";break;case"open_comment":c="click_comment";break;case"click_share":c="click_forward";break;case"collect":c="on"===s?"click_collect":"click_collect_cancel";break;case"dislike":c="click_dislike";break;case"phone_resume":c="click_phone_continue";break;case"report":c="click_report";break;case"show_short_cut_list":c="click_shortcut_list";break;case"click_view_later":c="click_view_later";break;case"collect_music":c="click_collect_music";break;case"shop_anchor_click":c="click_shop_anchor";break;case"click_compilation":c="click_compilation";break;case"click_hot":c="click_hotboard";break;case"click_related_search":c="click_related_search_anchor_v2";break;case"click_series":c="click_short_video";break;case"click_video_area":c="click_video_area";break;case"click_small_window":c="click_small_window";break;case"click_window_close":c="click_window_close";break;case"click_window_zoom":c="click_window_zoom";break;case"click_window_cancel_pin":c="click_window_cancel_pin";break;case"click_window_pin":c="click_window_pin";break;case"click_window_minimize":c="click_window_minimize"}c&&u.sendLog("userAction",(0,n._)((0,r._)({},null==t?void 0:t.search_params),{button_type:c,button_type_v2:c,from_video_id:o.Le.getConfig(o.gI.PageEnterFromVideoID)}))},[t]);return(0,i.useEffect)(()=>{var e;if(!!l)return null==l||null===(e=l.on)||void 0===e||e.call(l,a.USER_ACTION,s),()=>{var e;null==l||null===(e=l.off)||void 0===e||e.call(l,a.USER_ACTION,s)}},[l,s]),null}},586423:function(e,t,l){l.d(t,{l:function(){return h}});var r=l(611542),n=l(896668),i=l(344814),a=l.n(i),o=l(51877),s=l.n(o),u=l(135524),c=l(951620),d=l(319808),v=l(819769),_=l(356789),f=l(280648),m=l(583128),p=l(401310);let h=e=>{let{awemeInfo:t,from:l,isActive:i,hackFullScreenDom:o=!1,videoAreaClickActive:h=!1,logParams:g,enableInteractionPlugin:y=!0,searchListType:w,isUpperFeed:E=!1,syncInMulti:k=!1,livePlayer:b,liveDocId:x}=e,N=(0,p.n)(),I=b||N,{openGeneralSearchModalSlide:L}=(0,r.useContext)(f.j)||{},{docId:T}=(0,r.useContext)(m.C)||{},C=b&&x?x:T,S=v.Le.getConfig(v.gI.SearchModalCurrentActiveProgress);return(0,r.useEffect)(()=>{if(I&&i&&t){v.Le.getConfig(v.gI.SearchModalEnterFullScreenAfterCreate)&&"modal_player"===l&&(v.Le.setConfig(v.gI.SearchModalEnterFullScreenAfterCreate,!1),I.getFullscreen());let{awemeId:e}=t,r=()=>{S[0]=e,S[1]=I.currentTime};return I.on("timeupdate",r),()=>{I.off("timeupdate",r),"search_player"===l&&S[0]===(null==t?void 0:t.awemeId)&&(S[0]="",S[1]=0)}}},[I,t,i]),(0,r.useEffect)(()=>{if(I&&t&&(null==t?void 0:t.awemeType)!==u.e.Note&&(null==t?void 0:t.awemeId)===S[0]){let e=S[1];I.once(n.FP.CANPLAY,()=>{I.seek(e)})}},[I]),(0,r.useEffect)(()=>{if(I&&"search_player"===l&&i)return _.listen(_.EVENT.generalSearchVideoPlay,()=>{(null==t?void 0:t.awemeType)!==u.e.Note&&((null==t?void 0:t.awemeId)===S[0]&&I.seek(S[1]),v.Le.setConfig(v.gI.IsSearchOuterAsync,!0)),I.play()})},[I,i,t]),(0,r.useEffect)(()=>{let e=a()(I,"plugins.fullscreen.root"),t=()=>{var e;null==I||null===(e=I.openGeneralSearchModalSlide)||void 0===e||e.call(I,{from:"fullscreen"})};return I&&i&&"search_player"===l&&o&&(k||w!==c.qs)&&!E&&(s()(I,"plugins.fullscreen.config.disable",!0),null==e||e.addEventListener("click",t)),()=>{s()(I,"plugins.fullscreen.config.disable",!1),null==e||e.removeEventListener("click",t)}},[I,i,o,w,t,E,k]),(0,r.useEffect)(()=>{if(I&&i&&"search_player"===l&&!y&&h){let e=e=>{if(e.target===I.root||e.target===I.video||e.target===I.innerContainer||e.target===I.video.__canvas){var t;null==I||null===(t=I.openGeneralSearchModalSlide)||void 0===t||t.call(I,{from:"pause"}),I.emit(n.FP.USER_ACTION,{action:"click_video_area"});return}};I.config.closeVideoClick=!0;let t=I.root;return t.addEventListener("click",e,!1),()=>{t.removeEventListener("click",e,!1),s()(I,"config.closeVideoClick",!1)}}},[I,i,o,h]),(0,r.useEffect)(()=>{if(I&&"search_player"===l&&i&&!E)return I.openGeneralSearchModalSlide=e=>{let{from:l}=e||{};if("fullscreen"===l&&v.Le.setConfig(v.gI.SearchModalEnterFullScreenAfterCreate,!0),"pause"===l&&!h)return!1;let r=L({docId:C,awemeId:null==t?void 0:t.awemeId,from:l});return r&&(0,d.h)("feed_enter",g),r},()=>{I.openGeneralSearchModalSlide=()=>!1}},[I,t,i,C,L,h,b,E]),(0,r.useEffect)(()=>{if(I&&"search_player"===l){let e=!1,t=_.listen(_.EVENT.pageFullScreen,t=>{let{fullScreen:l}=t;e=l});return()=>{t(),e&&_.emit(_.EVENT.pageFullScreen,{fullScreen:!1,playerId:null==I?void 0:I.playerId,clickMethod:"player_destroy"})}}},[I]),null}},227879:function(e,t,l){l.d(t,{n:function(){return b}});var r=l("590921"),n=l("874155"),i=l("259202"),a=l("611542"),o=l("825211"),s=l.n(o),u=l("623176"),c=l("688497"),d=l("477509"),v=l("244307"),_=l("270275"),f=l("917993");l("612222");var m=l("797210"),p=l("401310"),h=l("721027"),g={SingleLine:0,0:"SingleLine",TowLine:1,1:"TowLine"},y=l("935708"),w=l("699233"),E=l("773627");let k=e=>{var t,l,o;let{awemeInfo:y,onClick:E,isActive:k,className:b,onMouseEnter:x,onMouseLeave:N}=e,{displayState:I}=function(e){let{awemeInfo:t,isActive:l}=e,r=(0,p.n)(),n=(0,a.useRef)(!0),i=(0,a.useRef)(!1),[o,s]=(0,a.useState)(0),c=(0,a.useCallback)(()=>{if(!i.current){var e,t;null==r||null===(e=r.on)||void 0===e||e.call(r,m.B.TimeUpdate,_),null==r||null===(t=r.on)||void 0===t||t.call(r,u.SEEKING,f)}i.current=!0},[r]),d=(0,a.useCallback)(()=>{if(i.current){var e,t;null==r||null===(e=r.off)||void 0===e||e.call(r,m.B.TimeUpdate,_),null==r||null===(t=r.off)||void 0===t||t.call(r,u.SEEKING,f)}i.current=!1},[r]),v=(0,a.useCallback)(()=>{n.current=!0},[]),_=(0,a.useCallback)(e=>{let{currentTime:t}=e||{};t>=16&&(n.current=!1,s(1),d())},[r,t,d]),f=(0,a.useCallback)(e=>{let{currentTime:t}=e;t>=16&&(s(1),d()),n.current=!1},[d]),g=(0,a.useCallback)(()=>{s(1),v(),c()},[c,v]);return(0,h.u)(r,m.B.Ended,g),(0,a.useEffect)(()=>{v()},[l,v]),(0,a.useEffect)(()=>{s(0),v()},[t.awemeId,v]),(0,a.useEffect)(()=>{if(!!l){if(r&&n.current)return c(),()=>{d()}}},[r,t,l,c,d]),(0,a.useEffect)(()=>{(null==r?void 0:r.currentTime)&&_({currentTime:r.currentTime})},[r]),{displayState:o}}({isActive:k,awemeInfo:y}),L=(null==y?void 0:null===(l=y.anchorInfo)||void 0===l?void 0:null===(t=l.extra)||void 0===t?void 0:t[0])||{},T=(0,p.n)(),C=(0,c.x)(()=>{d.i.sendLog("productEntranceShow",(0,n._)((0,r._)({},(0,v.R)(y)),{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))}),S=(null==L?void 0:L.tags)||[],P=I===g.TowLine&&S.length>0;return(0,i.jsx)("div",{className:s()("xgplayer-shop-anchor",f.default.container,f.default.shopAnchor,{[f.default.more]:P},b),onClick:()=>{null==E||E(),null==T||T.emit(u.USER_ACTION,{action:"shop_anchor_click"}),d.i.sendLog("productEntranceClick",(0,n._)((0,r._)({},(0,v.R)(y)),{ecom_entrance_form:"video_cart_tag",if_qianchuan_ad:0}))},onMouseEnter:()=>{null==x||x()},onMouseLeave:()=>{null==N||N()},ref:C,children:(0,i.jsxs)("div",{className:f.default.subContainer,children:[(0,i.jsx)(w.Z,{src:_.Z,className:f.default.icon,width:20,height:20,viewBox:"0 0 20 20"}),(0,i.jsxs)("div",{className:f.default.desc,children:[(0,i.jsxs)("div",{className:f.default.firstLine,children:[null==y?void 0:null===(o=y.anchorInfo)||void 0===o?void 0:o.titleTag,(null==L?void 0:L.elastic_title)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:f.default.delimiter,children:" | "})," ",null==L?void 0:L.elastic_title]})]}),P&&(0,i.jsx)("div",{className:f.default.secondLine,children:S.map((e,t)=>(0,i.jsxs)("span",{className:f.default.towLineItem,children:[e," ",t<S.length-1&&(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)("span",{className:f.default.delimiter,children:" | "})]})]},e))})]})]})})},b=e=>{let t=(0,y.N)();return(0,i.jsx)(E.k,{componentName:"ShopAnchor",Slardar:t,children:(0,i.jsx)(k,(0,r._)({},e))})}},52090:function(e,t,l){l.d(t,{zm:function(){return O}});var r=l("7979"),n=l("590921");l("612222");var i=l("259202"),a=l("611542"),o=l("753451"),s=l("825211"),u=l.n(s),c=l("623176"),d=l("185791"),v=l("208349"),_=l("660781"),f=l("421967"),m=l("837305"),p=l("356789"),h=l("442183"),g=l("528557"),y=l("819769"),w=l("432097"),E=l("744"),k=l("155104"),b=l("354795"),x=new b.h({openPureToastShow:{eventName:"small_window_toast_show",params:{}}}),N=l("456713");let I=a.forwardRef(e=>{let{onDone:t,isShowGuideTip:l,setIsShowGuideTip:r,setIsGuideTipActive:n}=e;return(0,a.useEffect)(()=>{l&&x.sendLog("openPureToastShow",{})},[l]),(0,i.jsxs)("div",{className:u()(k.default.tips,{[k.default.show]:l}),onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)},children:[(0,i.jsx)(N.z,{svg:(0,i.jsx)(E.Z,{}),className:u()(k.default.close,"noTransform"),onClick:()=>{n(!1),r(!1)}}),(0,i.jsx)("div",{className:k.default.title,children:(0,i.jsx)("span",{children:"小窗模式播放"})}),(0,i.jsx)("p",{className:k.default.desc,children:"右上角「小窗功能」移到此处，推荐/主页都能使用"}),(0,i.jsx)(w.zx,{theme:"solid",className:k.default.btn,onClick:()=>{null==t||t(),n(!1),r(!1)},children:"立即开启"})]})});var L=l("773627"),T=l("401310"),C=l("935708"),S=l("234766"),P="PictureInPictureSettingPlugin";let j={[d.kd.CONTROLS_RIGHT]:{PictureInPictureSettingPlugin:5.5}};l("839347");let R={vvCount:0,currentVideoId:"",resetVVInfo:()=>{R.vvCount=0,R.currentVideoId=""}};function M(){return(0,i.jsxs)("div",{className:u()("xgTips"),children:[(0,i.jsx)("span",{children:"小窗模式"}),(0,i.jsx)("span",{className:"shortcutKey",children:"U"})]})}function V(e){let{isShowGuideTip:t,resizeMiniWindowGuideShow:l,setIsShowGuideTip:r,player:n,noTransform:o,abtestData:s}=e,[d,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=p.listen(p.EVENT.closeOtherTip,e=>{"PictureInPictureTip"!==e&&(null==r||r(!1))});return()=>e()},[]);let m=(0,a.useCallback)(e=>{p.emit(p.EVENT.changeMinWindows,{event:"check",isMiniWin:!1,clickMethod:e}),null==n||n.emit(c.USER_ACTION,{action:"click_small_window"})},[n]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{isShowGuideTip:t||d,setIsShowGuideTip:r,setIsGuideTipActive:v,onDone:()=>m("toast")}),(0,i.jsx)("div",{className:"xgplayer-icon xgplayer-icon-picture-in-picture",onClick:()=>m("button"),children:(0,i.jsx)(N.z,{svg:(0,i.jsx)(_.Z,{className:u()(o&&"noTransform")}),style:{fontSize:"32px"}})}),l&&(0,i.jsxs)("div",{className:"picture-in-picture-resize-guide-tips",children:["点击或快捷键",(0,i.jsx)("span",{className:"shortcutKey",children:"U"})," ，启用小窗模式播放",(0,i.jsx)(N.z,{className:"picture-in-picture-resize-guide-tips-icon",svg:(0,i.jsx)(f.Z,{})})]}),!t&&!d&&!l&&(0,i.jsx)(M,{})]})}class A extends d.ZP{static get pluginName(){return P}static get defaultConfig(){return{position:o.POSITIONS.CONTROLS_RIGHT,index:j[o.POSITIONS.CONTROLS_RIGHT][P],className:"xgplayer-picture-in-picture-setting"}}afterCreate(){if(!this.config.disable)this.renderRoot()}destroy(){(0,S.v)(this)}renderRoot(){let e=(0,i.jsx)(V,{player:this.player,isShowGuideTip:this.config.isShowGuideTip,setIsShowGuideTip:this.config.setShowGuideTip,resizeMiniWindowGuideShow:this.config.resizeMiniWindowGuideShow,noTransform:this.config.noTransform,abtestData:this.config.abtestData});(0,S.s)(this,e)}render(){return`
    <xg-icon class="xgplayer-picture-in-picture-setting picture-in-picture" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,r._)(this,"updatePictureInPicture",e=>{var t,l,r;this.config.isShowGuideTip!==(null==e?void 0:e.isShowGuideTip)&&(this.config.isShowGuideTip=null!==(t=null==e?void 0:e.isShowGuideTip)&&void 0!==t&&t,this.renderRoot()),this.config.resizeMiniWindowGuideShow!==(null==e?void 0:e.resizeMiniWindowGuideShow)&&(this.config.resizeMiniWindowGuideShow=null!==(l=null==e?void 0:e.resizeMiniWindowGuideShow)&&void 0!==l&&l,this.renderRoot()),this.config.noTransform!==(null==e?void 0:e.noTransform)&&(this.config.noTransform=null!==(r=null==e?void 0:e.noTransform)&&void 0!==r&&r,this.renderRoot())})}}let D=e=>{let{isActive:t,awemeInfo:l,isInnerFeed:r,resizeMiniWindowGuideShow:n,enableGuide:i=!0,noTransform:o=!0,abtestData:s}=e,[u,c]=(0,a.useState)(!1),d=(0,T.n)(),_=(0,a.useRef)(null),f=(0,v.k)(),w=!!(0,h.J)();return(0,a.useEffect)(()=>{let e=f.listen(()=>{R.resetVVInfo()});return()=>{e()}},[]),(0,a.useEffect)(()=>d?2===d.config.reuse&&d.getPlugin(A.pluginName)?()=>{}:(d.registerPlugin(A,{isShowGuideTip:u,setShowGuideTip:c,resizeMiniWindowGuideShow:n,noTransform:o,abtestData:s}),()=>{d.getPlugin(A.pluginName)&&2!==d.config.reuse&&d.unRegisterPlugin(A.pluginName)}):void 0,[d]),(0,a.useEffect)(()=>{if(!d||!t)return;let e=d.getPlugin(A.pluginName);null==e||e.updatePictureInPicture({isShowGuideTip:u,resizeMiniWindowGuideShow:n,noTransform:o})},[u,n,o]),(0,a.useEffect)(()=>{let e=p.listen(p.EVENT.changeMinWindows,e=>{let{event:t}=e,l=(0,g.$o)(m.LocalStorageKeys.PictureInPictureGuide);"open"===t&&!l&&(0,g.qQ)(m.LocalStorageKeys.PictureInPictureGuide,!0)});return()=>null==e?void 0:e()},[]),(0,a.useEffect)(()=>{let e=(0,g.$o)(m.LocalStorageKeys.PictureInPictureGuide);if(!i||e||w)return;let n=()=>{var e;if((null===(e=y.Le.getConfig(y.gI.IsInLookMiniModal))||void 0===e?void 0:e.isInMiniModal)&&!r)return;let l=window.innerWidth<970||window.innerHeight<600;R.vvCount>5&&l&&t&&((0,g.qQ)(m.LocalStorageKeys.PictureInPictureGuide,!0),R.resetVVInfo(),p.emit(p.EVENT.closeOtherTip,"PictureInPictureTip"),c(!0),_.current=setTimeout(()=>{c(!1)},5e3))};return t&&(null==l?void 0:l.awemeId)!==R.currentVideoId&&(R.vvCount++,R.currentVideoId=null==l?void 0:l.awemeId,n()),window.addEventListener("resize",n),()=>{c(!1),clearTimeout(_.current),window.removeEventListener("resize",n)}},[t,null==l?void 0:l.awemeId,i,r]),null},O=e=>{let t=(0,C.N)();return(0,i.jsx)(L.k,{componentName:"PictureInPicturePlugin",Slardar:t,children:(0,i.jsx)(D,(0,n._)({},e))})}},91404:function(e,t,l){l.d(t,{vq:function(){return B},nf:function(){return H}});var r=l("7979"),n=l("590921"),i=l("874155");l("612222"),l("586529"),l("227470"),l("347885");var a=l("259202"),o=l("753451"),s=l("623176"),u=l("185791"),c=l("611542"),d=l("825211"),v=l.n(d),_=l("432097"),f=l("532910"),m=l("549516"),p=l("606660"),h=l("697878"),g=l("106649"),y=l("245086"),w=l("898263"),E=l("819769"),k=l("356789"),b=l("421794"),x=l("484321");let N=(0,c.forwardRef)((e,t)=>(0,a.jsxs)("svg",(0,i._)((0,n._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.97 7.73C7.882 7.73 7 8.72 7 9.94v10.58c0 1.22.882 2.21 1.97 2.21h7.287a3 3 0 0 1 4.01-4.186l.308.169 1.564-2.485c.23-.365.525-.663.861-.89V9.94c0-1.22-.882-2.21-1.97-2.21H8.97zm4.723 10.464l3.822-2.451a1.025 1.025 0 0 0 0-1.743l-3.822-2.451c-.724-.464-1.693.035-1.693.871v4.902c0 .837.97 1.336 1.693.872z",fill:"#fff",fillOpacity:".9"}),(0,a.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.946 20.69a1 1 0 0 1 1.358-.394l1.96 1.078 2.567-4.08a1 1 0 1 1 1.693 1.065l-3.07 4.878a1 1 0 0 1-1.328.343L18.34 22.05a1 1 0 0 1-.394-1.358z",fill:"#fff",fillOpacity:".9"})]})));var I=l("171488"),L=l("556728"),T=l("898253"),C=l("995798"),S=l("528386"),P=l("554898"),j=l("699233"),R=l("773627");l("419716");var M=l("401310"),V=l("935708"),A=l("994476"),D=l("234766"),O=l("77435"),F=l("354795"),G=new F.h({watchLaterAdd:{eventName:"watch_later_add",params:{enter_from:"",enter_from_merge:"",group_id:"",author_id:"",tab_name:"",search_params:{search_id:"",search_result_id:""},status:0,failure_reason:"",click_method:"",if_first_big_card:0}},clickHoverLogin:{eventName:"click_hover_login",params:{enter_method:"",enter_from:"",params_for_special:""}}});function Z(e){let{disableShortcut:t=!1}=e;return(0,a.jsxs)("div",{className:"xgTips",children:[(0,a.jsx)("span",{children:g.a.t("see_you_later",{},"稍后再看")}),!t&&(0,a.jsx)("span",{className:"shortcutKey",children:null==h?void 0:h.SHORTCUT_KEY.watchLater.badgeText})]})}let U=e=>{var t,l,r;return{group_id:null!==(l=null==e?void 0:e.awemeId)&&void 0!==l?l:"",author_id:null!==(r=null==e?void 0:null===(t=e.authorInfo)||void 0===t?void 0:t.uid)&&void 0!==r?r:""}},W=e=>({enter_from_merge:(null==e?void 0:e.enter_from_merge)||"",enter_from:(null==e?void 0:e.enter_from)||(0,y.mo)()||"",tab_name:(null==e?void 0:e.tab_name)||f.getTabName()||(0,w.Rs)("tab_name")||"",search_params:(null==e?void 0:e.search_params)||{}}),z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.useRef)(e);return(0,c.useEffect)(()=>{t.current=e},[e]),t};function H(e){let{player:t,isLogin:l,loginDispatch:r,isActive:o,awemeInfo:u,isMini:d,isPreview:f,toast:h,disableShortcut:w,logParams:b,isBigCard:R,abtest:M,canCancleWatchLaterOnPreview:V=!1}=e,D=(0,O.H)("watch_later"),F=(0,c.useRef)(null),H=(0,c.useRef)(null),{isMobile:$,isiPad:q}=(0,m.X)(),B=(0,c.useCallback)(e=>"function"==typeof h?h(e):S.F.info(e),[h]),Y=z(b),[K,J]=(0,c.useState)(!1),Q=e=>{var t,l;let r=null!==(t=E.Le.getConfig(E.gI.WatchLater))&&void 0!==t?t:{},a=null!==(l=r.list)&&void 0!==l?l:"",o=Array.from(new Set([...a?a.split(","):[],e]));E.Le.setConfig(E.gI.WatchLater,(0,i._)((0,n._)({},r),{list:o.join(",")}))},X=e=>{var t,l,r;let a=null!==(l=E.Le.getConfig(E.gI.WatchLater))&&void 0!==l?l:{},o=null!==(r=a.list)&&void 0!==r?r:"",s=o?o.split(","):[],u=null==s?void 0:null===(t=s.filter)||void 0===t?void 0:t.call(s,t=>t!==e);E.Le.setConfig(E.gI.WatchLater,(0,i._)((0,n._)({},a),{list:u.join(",")}))};(0,c.useEffect)(()=>{if(V){var e;let{list:t=""}=null!==(e=E.Le.getConfig(E.gI.WatchLater))&&void 0!==e?e:{};J(t&&t.includes(u.awemeId))}},[V,u]);let ee=(0,c.useCallback)(async e=>{var t,l,r;let a={DUPLICATE:"已添加过该视频",SUCCESS:"添加成功，可在“我的-稍后再看”中查看",FAIL:"添加失败，请稍后再试",OFFLINE:"网络异常，请稍后再试",MAX_LIMIT:"已达上限"},{list:o=""}=null!==(l=E.Le.getConfig(E.gI.WatchLater))&&void 0!==l?l:{};if(u.watchLaterInfo||o.includes(u.awemeId)){B(a.DUPLICATE),J(!0),Q(null==u?void 0:u.awemeId),G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},U(u),W(Y.current)),{click_method:e,if_first_big_card:Number(R)||0,status:0}));return}if(!navigator.onLine){B(a.OFFLINE),G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},W(Y.current),U(u)),{if_first_big_card:Number(R)||0,click_method:e,status:0}));return}let{statusCode:s=-1}=await (0,L.ih)({actionType:1,itemToPlayinfo:{[u.awemeId]:{play_duration:0,loop_status:null!==(r=null==u?void 0:null===(t=u.playProgress)||void 0===t?void 0:t.watch_times)&&void 0!==r?r:0}}});if(0===s){B(a.SUCCESS),J(!0),Q(null==u?void 0:u.awemeId),G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},W(Y.current),U(u)),{if_first_big_card:Number(R)||0,click_method:e,status:1}));return}if(4===s){B(a.MAX_LIMIT),G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},U(u),W(Y.current)),{if_first_big_card:Number(R)||0,failure_reason:"overlimit",click_method:e,status:0}));return}B(a.FAIL),G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},W(Y.current),U(u)),{if_first_big_card:Number(R)||0,click_method:e,status:0}))},[u,R]),et=(0,c.useCallback)(async()=>{let{isSuccess:e}=await (0,L.iH)({awemeIds:[null==u?void 0:u.awemeId],remove_type:L.L7.selectItems});if(!e){B("服务异常，请稍后再试");return}X(null==u?void 0:u.awemeId),J(!1),B("已移除添加视频")},[u]),el=(0,c.useRef)(!1),er=(0,c.useCallback)(async e=>{el.current=!1,(0,P.default)({headerText:"登录后可添加稍后再看",success:async()=>{el.current=!0,"recommend"===(0,y.yW)()&&(null==M?void 0:M.recommendLoginResume)===p.RecommendLoginResume.V2?k.emit(k.EVENT.RecommendLoginResume):null==r||r({type:"updateUserInfo"}),ee(e)},enterMethod:"watch_later_add",onClose:()=>{k.emit(k.EVENT.videoRemoveStopPlayNext),!el.current&&(el.current=!0,G.sendLog("watchLaterAdd",(0,i._)((0,n._)({},W(Y.current),U(u)),{if_first_big_card:Number(R)||0,failure_reason:"not_login",click_method:e,status:0})))}})},[ee,r,u,R,M]),en=(0,c.useCallback)(async e=>{let{clickMethod:n="icon"}=e||{};if(!!o&&!!u&&!F.current&&(!!(null==t?void 0:t.isUserActive)||!!f))null==t||t.emit(s.USER_ACTION,{action:"click_view_later"}),F.current=setTimeout(()=>{F.current&&(F.current=null)},3e3),l?ee(n):(null==r||r({type:"updateUserInfo"}),er(n))},[r,er,ee,l,o,u,t]);(0,c.useEffect)(()=>()=>{clearTimeout(F.current)},[]),(0,c.useEffect)(()=>o&&t&&!w?(null==t||t.on("onWatchLater",en),()=>{null==t||t.off("onWatchLater",en)}):()=>{},[t,o,en,w]);let[ei,ea]=(0,c.useState)(!1);if(f){let e=V&&K;return(0,a.jsx)("div",{className:T.default.preview,onClick:t=>{t.stopPropagation(),t.preventDefault(),e?et():en({clickMethod:`${(0,y.yW)()}_preview`})},children:(0,a.jsx)(_.u,{position:"bottomRight",content:(0,a.jsx)("div",{className:T.default.text,children:e?"已添加稍后再看":"添加到稍后再看"}),getPopupContainer:()=>H.current||document.body,children:(0,a.jsx)("div",{ref:H,style:{position:"relative"},children:e?(0,a.jsx)(j.Z,{className:v()(T.default.cancleIcon),src:N,width:24,height:24,viewBox:"2 2 26 26"}):(0,a.jsx)(j.Z,{className:v()(T.default.previewIcon,{[T.default.isHover]:ei}),src:x.Z,width:24,height:24,viewBox:"2 2 26 26"})})})})}return d?(0,a.jsxs)("div",{className:C.default.switchBox,onClick:e=>en({clickMethod:"icon"}),children:[(0,a.jsx)("div",{className:C.default.switchLabel,children:g.a.t("see_you_later",{},"稍后再看")}),(0,a.jsxs)("div",{className:v()(C.default.select,C.default.textSelect),children:["添加",(0,a.jsx)(I.Z,{className:"noTransform"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{ref:D,className:"xgplayer-watch-later-item xgplayer-icon",onClick:e=>en({clickMethod:"icon"}),children:(0,a.jsx)(A.Z,{width:32,height:32,className:T.default.newIcon})}),!$&&!q&&(0,a.jsx)(Z,{disableShortcut:w})]})}class $ extends u.ZP{static get pluginName(){return"WatchLaterPlugin"}static get defaultConfig(){return{position:o.POSITIONS.CONTROLS_RIGHT,index:5.6,className:"xgplayer-watch-later"}}afterCreate(){if(!this.config.disable)this.renderRoot(),this.bind("mouseenter",this.onMouseenter),this.bind("mouseleave",this.onMouseleave)}destroy(){this.unbind("mouseenter",this.onMouseenter),this.unbind("mouseleave",this.onMouseleave),(0,D.v)(this)}renderRoot(){var e;let t=null!==(e=this.config)&&void 0!==e?e:{};this.root&&(0,D.s)(this,(0,a.jsx)(H,(0,n._)({},t)))}update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config=(0,n._)({},this.config,e),this.renderRoot()}render(){return`
    <xg-icon class="xgplayer-watch-later" data-state="normal">
    </xg-icon>`}constructor(...e){super(...e),(0,r._)(this,"onMouseleave",()=>{this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,r._)(this,"onMouseenter",()=>{this.emit("icon_mouseenter",{pluginName:this.pluginName})})}}let q=e=>{let{awemeInfo:t,isActive:l,disable:r,loginDispatch:n,isLogin:i,toast:a,disableShortcut:o,logParams:s,abtest:u}=e,d=(0,M.n)(),v=z(s);return(0,c.useEffect)(()=>{if(d&&(0,b.D)(t))return 2===d.config.reuse&&d.getPlugin("WatchLaterPlugin")?()=>{}:(d.registerPlugin($,{disable:r,loginDispatch:n,isActive:l,awemeInfo:t,isLogin:i,player:d,toast:a,disableShortcut:o,logParams:v.current,abtest:u}),()=>{d.getPlugin("WatchLaterPlugin")&&2!==d.config.reuse&&d.unRegisterPlugin("WatchLaterPlugin",!0)})},[d,t,u]),(0,c.useEffect)(()=>{var e;let s=null==d?void 0:null===(e=d.getPlugin)||void 0===e?void 0:e.call(d,"WatchLaterPlugin");s&&s.update({isActive:l,awemeInfo:t,loginDispatch:n,disable:r,isLogin:i,toast:a,disableShortcut:o,abtest:u})},[d,l,t,n,r,i,a,o,u]),null},B=e=>{let t=(0,V.N)();return(0,a.jsx)(R.k,{componentName:"WatchLater",Slardar:t,children:(0,a.jsx)(q,(0,n._)({},e))})}},886276:function(e,t,l){l.d(t,{x:function(){return r}});let r=e=>(null==e?void 0:e.sections)?e.sections.map((e,t)=>({id:t,time:e.jumpTime/1e3,text:"",duration:2,style:{backgroundColor:"#fff",width:"2px",height:"2px"}})):[]},421794:function(e,t,l){l.d(t,{b:function(){return u},D:function(){return s}});var r=l("775583"),n=l("135524");let i=e=>(null==e?void 0:e.awemeType)===n.e.Note,a=e=>(null==e?void 0:e.awemeType)===n.e.XgVideo,o=e=>(null==e?void 0:e.awemeType)===n.e.Playback,s=e=>{var t,l;return!i(e)&&!a(e)&&!(0,r.Kf)(e)&&!(0,r.Jt)(e)&&!o(e)&&(null==e?void 0:null===(t=e.searchLogParams)||void 0===t?void 0:t.token_type)!=="ky_album_info_card"&&(null==e?void 0:null===(l=e.searchLogParams)||void 0===l?void 0:l.is_aladdin)!=="1"},u=(e,t)=>s(e)},584713:function(e,t,l){l.d(t,{$I:function(){return f},Fp:function(){return m},M3:function(){return v},yr:function(){return _}}),l(347885),l(612222);var r=l(611542),n=l(305452),i=l(732515),a=l(954884),o=l(703774),s=l(354795),u=l(819769),c=l(245086);let d=new s.h({recommendFirstVideoPlay:{eventName:"recommend_first_video_play",params:{cost:0,from_cache:0,path:"",is_live:0,is_first:0,enter_from:""}},pageMountedToAvailable:{eventName:"page_mounted_to_available",params:{cost:0,path:""}}}),v=()=>{let{pathname:e}=(0,a.a)(),t=(0,r.useRef)(!0),l=(0,r.useRef)(e),s=(0,o.Nr)(e),u=(0,r.useRef)(!1);(0,n.o)(()=>{if(u.current){u.current=!1;return}performance.mark("recommend_mounted"),t.current&&(t.current=!1)},[e]),(0,r.useEffect)(()=>{if(!!s)return()=>{location.pathname===l.current&&(u.current=!0)}},[s]),(0,i.w)(()=>{performance.getEntriesByName("recommend_mounted").length>0&&performance.clearMarks("recommend_mounted")},[])},_=e=>{try{if(performance.getEntriesByName("recommend_mounted").length>0){var t,l,r,n;performance.mark("recommend_video_play"),performance.measure("recommendMountedToPlay","recommend_mounted","recommend_video_play");let i=null===(t=performance.getEntriesByName("recommendMountedToPlay")[0])||void 0===t?void 0:t.duration,a=null!==(l=u.Le.getConfig(u.gI.PageEntered))&&void 0!==l?l:[],o=!a.includes(location.pathname);o&&u.Le.setConfig(u.gI.PageEntered,[...a,location.pathname]),!isNaN(i)&&d.sendLog("recommendFirstVideoPlay",{cost:Math.floor(i),from_cache:null!==(r=null==e?void 0:e.fromCache)&&void 0!==r?r:0,is_first:o?1:0,path:location.pathname,enter_from:(0,c.yW)(),is_live:null!==(n=null==e?void 0:e.isLive)&&void 0!==n?n:0}),performance.clearMarks("recommend_mounted"),performance.clearMarks("recommend_video_play"),performance.clearMeasures("recommendMountedToPlay")}}catch(e){}},f=e=>{(0,r.useEffect)(()=>(performance.mark("multi_page_mounted"),()=>{performance.getEntriesByName("multi_page_mounted").length>0&&performance.clearMarks("multi_page_mounted")}),[e])},m=()=>{try{if(performance.getEntriesByName("multi_page_mounted").length>0){var e;performance.mark("page_available"),performance.measure("mountedToAvailable","multi_page_mounted","page_available");let t=null===(e=performance.getEntriesByName("mountedToAvailable")[0])||void 0===e?void 0:e.duration;!isNaN(t)&&d.sendLog("pageMountedToAvailable",{cost:Math.floor(t),path:location.pathname}),performance.clearMarks("multi_page_mounted"),performance.clearMarks("page_available"),performance.clearMeasures("mountedToAvailable")}}catch(e){}}},718523:function(e,t,l){l.d(t,{$:function(){return u},I:function(){return s}});var r=l(606660),n=l(135524),i=l(819769),a=l(445659),o=l(452300);let s=()=>"PUSH"===i.Le.getConfig(i.gI.History).action,u=(e,t)=>{let l=a.SM(),i=(0,o.DX)(),s=(null==e?void 0:e.clientSpaV2)===r.CommonSwitch.On;return(null==t?void 0:t.awemeType)!==n.e.XgVideo&&s&&l&&i}},405050:function(e,t,l){l.d(t,{d:function(){return n}});var r=l(611542);function n(e){let t=(0,r.useRef)(e);return t.current=e,t}},106834:function(e,t,l){l.d(t,{U:function(){return a}}),l(612222);var r=l(611542),n=l(928470),i=l(634048);let a=()=>{let e=(0,r.useContext)(n.I),[t,l]=(0,r.useState)(!0);return((0,i.m)(e=>l(e)),e)?e.isActive:t}},732515:function(e,t,l){l.d(t,{w:function(){return r}});let r=(0,l(644035).A)(!1)},280648:function(e,t,l){l.d(t,{j:function(){return r}});let r=(0,l(611542).createContext)({openGeneralSearchModalSlide:()=>void 0,updateInnerScrollRef:()=>void 0})},171488:function(e,t,l){var r=l(590921),n=l(874155),i=l(259202),a=l(611542);let o=(0,a.forwardRef)((e,t)=>(0,i.jsx)("svg",(0,n._)((0,r._)({width:12,height:12,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,i.jsx)("path",{d:"M13 4a1 1 0 1 0-2 0v7H4a1 1 0 1 0 0 2h7v7a1 1 0 1 0 2 0v-7h7a1 1 0 1 0 0-2h-7V4z",fill:"#000"})})));t.Z=o},270275:function(e,t,l){var r=l(590921),n=l(874155),i=l(259202),a=l(611542);let o=(0,a.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,n._)((0,r._)({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("rect",{width:20,height:20,rx:2,fill:"#FF851D"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.158 5.41a1 1 0 0 1-.985-.828L5.97 3.414A.5.5 0 0 0 5.476 3H3a.5.5 0 0 0-.5.5v1A.5.5 0 0 0 3 5h.934a.5.5 0 0 1 .5.475l.359 7.076a1 1 0 0 0 .998.949H14.5a.5.5 0 0 0 .5-.5v-.5a.5.5 0 0 0-.5-.5H7a.5.5 0 0 1-.5-.5V11a.5.5 0 0 1 .5-.5h8.111a.5.5 0 0 0 .485-.377l1.04-4.09a.5.5 0 0 0-.484-.624H7.158zM6.25 17a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zm7.25-1.25a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0z",fill:"#fff"})]})));t.Z=o},484321:function(e,t,l){var r=l(590921),n=l(874155),i=l(259202),a=l(611542);let o=(0,a.forwardRef)((e,t)=>(0,i.jsxs)("svg",(0,n._)((0,r._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.97 8.73C7.882 8.73 7 9.72 7 10.94v10.58c0 1.22.882 2.21 1.97 2.21h8.254A5.5 5.5 0 0 1 23 15.59v-4.65c0-1.22-.882-2.21-1.97-2.21H8.97zm4.723 10.464l3.822-2.451a1.025 1.025 0 0 0 0-1.743l-3.822-2.451c-.724-.464-1.693.035-1.693.871v4.902c0 .837.97 1.336 1.693.872z",fill:"#fff",fillOpacity:".9"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 25a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm.4-6a.9.9 0 1 0-1.8 0v2.5a.9.9 0 0 0 .9.9H24a.9.9 0 1 0 0-1.8h-1.6V19z",fill:"#fff",fillOpacity:".9"})]})));t.Z=o}}]);