"use strict";(self.webpackChunkdouyin_web=self.webpackChunkdouyin_web||[]).push([["4869"],{495384:function(e,t,l){l.r(t),l.d(t,{Helmet:function(){return n}});let n=l(744644).Head},412665:function(e,t,l){l.d(t,{A:function(){return f}}),l("612222");var n=l("611542"),o=l("590921"),r=l("874155");l("347885"),l("632852");var i=l("158077"),a=l("425793"),s=l("464769");let{COMMON_SEARCH_PARAMS:d,DISABLE_SECRET_VIDEO_PARAMS:u,WHALE_CUT_HEADER:c}=i,{ERROR_CODE:v}=a;async function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{result:l}=await (0,s.g8)("/aweme/v1/web/user/dashboard",(0,r._)((0,o._)({},d,u),{UserId:e}),t,e=>!!(null==e?void 0:e.HaveDashBoard));return l}function f(e,t){let[l,o]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!e||!t)return;let l=!1;return(async()=>{try{await m(t)&&!l&&o(!0)}catch(e){}})(),()=>{l=!0}},[e,t]),l}},443882:function(e,t,l){l.d(t,{m:function(){return r}}),l(612222);var n=l(611542),o=l(42233);let r=()=>{let[e,t]=(0,n.useState)();return(0,n.useEffect)(()=>{(0,o.s)()&&t((0,o.s)())},[]),e}},42233:function(e,t,l){l.d(t,{V:function(){return o},s:function(){return r}});var n=l(488171);let o=()=>document.querySelector(`.${n.tt}`)||document.documentElement,r=()=>document.querySelector(`.${n.tt}`)||window},626594:function(e,t,l){var n=l(259202);l(611542);var o=l(910190),r=l(233374);t.Z=e=>{let{children:t,mobileUrl:l,applicableDevice:i}=e,a=(0,o.Yr)();return(0,n.jsx)(r.$,{mobileUrl:l,nonce:a,applicableDevice:i,children:t})}},85076:function(e,t,l){var n=l(259202);l(611542);var o=l(582867),r=l.n(o),i=l(626594);t.Z=e=>{let{videoDetail:t,mobileUrl:l,children:o}=e,{desc:a,authorInfo:s,createTime:d=Date.now()/1e3,video:u,awemeId:c}=t||{},{nickname:v=""}=s||{},{cover:m}=u||{},f=r()(1e3*d).format("YYYYMMDD")||"",h=`${v}在抖音记录美好生活${f}`;return a&&(h=a.slice(0,35)),t?(0,n.jsxs)(i.Z,{mobileUrl:l,children:[o,(0,n.jsx)("meta",{name:"lark:url:enable",content:u?"true":"false"}),(0,n.jsx)("meta",{name:"lark:url:video_icon_url",content:"https://lf1-cdn-tos.bytegoofy.com/goofy/ies/douyin_web/public/favicon.ico"}),(0,n.jsx)("meta",{name:"lark:url:video_title",content:h}),(0,n.jsx)("meta",{name:"lark:url:video_cover_image_url",content:m}),(0,n.jsx)("meta",{name:"lark:url:video_iframe_url",content:`https://www.douyin.com/light/${c}`}),(0,n.jsx)("meta",{name:"lark:url:video_brand_name",content:"抖音"})]}):(0,n.jsx)(i.Z,{mobileUrl:l,children:o})}},431668:function(e,t,l){let n,o,r,i;l.r(t),l.d(t,{default:function(){return sJ}});var a=l("590921");l("510766"),l("312602"),l("612222"),l("238658"),l("677546"),l("227470");var s=l("259202"),d=l("611542"),u=l("690352"),c=l("954884"),v=l("591006"),m=l("825211"),f=l.n(m),h=l("181242"),p=l("810549"),g=l("549516"),_=l("579309"),x=l("819769"),w=l("969090"),C=l("478279"),y=l("852674"),b=l("623218"),j=l("412665"),k=l("425793"),N=l("169625"),I={errorModule:"EaYCO8Gg"};function E(e){let{status:t,isSpider:l,statusCode:n,isEmptyUser:o,isUserCanceled:r}=e,{ERROR_USER_FORBIDDEN:i,ERROR_USER_NOTFOUND:a,ERROR_INVALID_PARAM:d}=k.ERROR_CODE;return t>400&&l?404===t?(0,s.jsx)(N.dR,{className:I.errorModule}):(0,s.jsx)(N.nl,{className:I.errorModule}):n===i?(0,s.jsx)(N.nl,{className:I.errorModule,title:"账号被封禁",desc:" "}):0!==n&&(n===a||n===d)||r||o?(0,s.jsx)(N.dR,{className:I.errorModule,title:"用户不存在",desc:" "}):n?(0,s.jsx)(N.nl,{className:I.errorModule,desc:"请稍后重试"}):(0,s.jsx)(N.nl,{className:I.errorModule})}var S=l("93276"),L=l("85076"),M=function(e){let{userInfo:t,uid:l}=e,{nickname:n=""}=t||{},{customVerify:o,enterpriseVerifyReason:r}=t||{},{modalVideoDetail:i}=(0,d.useContext)(b.r),a=`${n}的抖音 - 抖音`,u=`${n}, ${n}的抖音`,c=r||o?`，${r||o}`:"",v=`${n}${c}。${n}的抖音主页、视频、合集以及作品的粉丝量、点赞量。来抖音，记录美好生活！`;return(0,s.jsxs)(L.Z,{videoDetail:i,mobileUrl:`https://m.douyin.com/share/user/${l}`,children:[(0,s.jsx)("title",{children:a}),(0,s.jsx)("meta",{name:"description",content:v}),(0,s.jsx)("meta",{name:"keywords",content:u}),(0,s.jsx)("script",{type:"application/ld+json",children:`{
            "@context": "https://schema.org",
            "@type": "BreadcrumbList",
            "itemListElement": [{
              "@type": "ListItem",
              "position": 1,
              "name": "抖音",
              "item": "https://www.douyin.com"
            },{
              "@type": "ListItem",
              "position": 2,
              "name": "${n}",
              "item": "${(0,S.filterXSS)(`https://www.douyin.com/user/${l}`)}"
            }]
          }`}),(0,s.jsx)("link",{rel:"canonical",href:`https://www.douyin.com/user/${l}`})]})};l("969642");var T=l("874155");l("347885");var R=l("701007"),F=l("287312"),P=l("388808"),D=l("991523"),A=l("234156"),V=l("898263"),B=l("356789");let H=(0,d.createContext)({isSelf:!1,isSpider:!1,updateFollowStatus:()=>null,haveDashBoard:!1,currentUserInfoDetail:void 0});var U=l("694366"),O=l("564096");l("586529");var z=l("582867"),W=l.n(z),Z=l("278569"),$=l("283132"),K=l("295301"),G=l("554898"),q=l("314373"),X=l("528386"),Y=l("646285"),Q=l("375222"),J=l("699233"),ee=l("574081"),et=l("140109"),el=l("197915"),en=l("652895"),eo=l("13351"),er=l("804929"),ei=l("330349"),ea=l("519915"),es=l("892155");l("101060"),l("930798");var ed=l("432097"),eu=l("130940"),ec=l("456742");l("632852");var ev=l("877435"),em=l("158077"),ef=l("877910");let{COMMON_SEARCH_PARAMS:eh}=em||{},ep=e=>{let{status_code:t,status_msg:l,toast_back:n,toast_back_info:o,user:r}=e;return{statusCode:t,statusMsg:l,toastBack:n,toastBackInfo:o,user:(0,ef.Cy)(r)}};async function eg(e){let t=await (0,ev.v_)("/aweme/v1/web/commit/user/",(0,a._)({},eh),(0,a._)({},e));return(0,ef.RL)(t,ep)}var e_=l("412020"),ex=l("623331"),ew={container:"xt87Nf_k",editor:"L0bPhbpi",textCount:"_aWpyTSV"},eC=e=>{let{userInfo:t,onChangeIntro:l}=e,n=(0,d.useRef)(null),o=(0,d.useRef)(null),[r,i]=(0,d.useState)(t.desc),[u,c]=(0,d.useState)(!1),[v,m]=(0,d.useState)(!1),f=(0,d.useRef)([]),[h,p]=(0,d.useState)({statusCode:0,hasMore:!0,hasFetchData:!1,data:[],preQueryIds:"",searchText:""}),[g,_]=(0,d.useState)({statusCode:0,cursor:0,hasMore:!0,hasFetchData:!1,data:[]}),x=(0,d.useCallback)(async e=>{if(h.hasFetchData)return;let{statusCode:t,userList:l}=await (0,e_.nf)({cursor:20,query:e,penetrateParams:(null==h?void 0:h.searchText)===e?{pre_query_ids:f.current.join()}:null}),n=[];l.forEach(e=>{n.push(e.uid)}),(null==h?void 0:h.searchText)===e?f.current.push(...n):f.current=n,p(n=>({statusCode:t,searchText:e,hasMore:(null==l?void 0:l.length)===20,hasFetchData:!1,data:(null==n?void 0:n.searchText)!==e?l:[].concat(null==n?void 0:n.data,l)}))},[h]),w=(0,d.useCallback)(async()=>{if(g.hasMore){let{statusCode:e,userList:t,cursor:l,hasMore:n}=await (0,e_.Yp)({needPage:!0,cursor:g.cursor,count:20}),o=t.map(e=>(0,T._)((0,a._)({},e),{name:e.nickname}));0===e&&_(e=>e.cursor!==g.cursor?e:{statusCode:0,cursor:l,hasMore:n,hasFetchData:!0,data:[...e.data,...o]})}},[g]);return(0,d.useEffect)(()=>{let{desc:e,descExtra:l=[]}=t,o=[...l];setTimeout(()=>{n.current.setContent(e,o)})},[]),(0,s.jsxs)("div",{className:ew.container,ref:o,onClick:()=>{var e;null===(e=n.current)||void 0===e||e.focus()},children:[(0,s.jsx)(ex.Z,{className:ew.editor,ref:n,refOuterContainer:o,placeholder:"介绍一下你自己",onChange:e=>{var t;let o=null===(t=n.current)||void 0===t?void 0:t.getCommentInfo();i(e),void 0!==e&&void 0!==o&&l(e,o.textExtra.map(e=>({start:e.start,end:e.end,type:e.type,user_id:e.user_id,sec_uid:e.sec_uid})))},atUserSearchData:h,loadSearchAtData:x,atUserDefaultData:g,loadMoreDefaultAtData:w,onEditFocus:()=>{},onEditBlur:()=>{},handlePublishClick:()=>{},isAtIconSelected:u,setIsAtIconSelected:c,isAtIconPoint:v,setIsAtIconPoint:m}),(null==r?void 0:r.length)>0&&242-(null==r?void 0:r.length)<0&&(0,s.jsx)("div",{className:ew.textCount,children:242-(null==r?void 0:r.length)})]})},ey=l("770492"),eb=l.n(ey),ej=l("575217"),ek=l("935443");let eN=()=>({touch:!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),pointerEvents:!!window.PointerEvent&&"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>=0}),eI=(()=>{let e=eN(),t=["touchstart","touchmove","touchend","touchcancel"],l=["mousedown","mousemove","mouseup"];return(null==e?void 0:e.pointerEvents)&&(l=["pointerdown","pointermove","pointerup"]),(null==e?void 0:e.touch)?{start:"touchstart",move:"touchmove",end:"touchend",cancle:"touchcancel"}:{start:l[0],move:l[1],end:l[2]}})(),eE=()=>{let[e,t]=(0,d.useState)({x:0,y:0,width:0,height:0}),[l,n]=(0,d.useState)(0),o=(0,d.useRef)(null),r=(0,d.useRef)(null),i=(0,d.useRef)({width:0,height:0}),s=(0,d.useMemo)(()=>{if(r.current){let t=282/e.width,l=282/e.height;return{width:t,height:l,transform:`translate3d(${-(t*e.x)}px, ${-(l*e.y)}px, 0)`}}return{}},[e]);return(0,d.useEffect)(()=>{if(o.current&&r.current){let e=o.current.getContext("2d");o.current.ctx=e,r.current.crossOrigin="Anonymous",r.current.onload=()=>{var e,l,a;URL.revokeObjectURL(null===(e=r.current)||void 0===e?void 0:e.src),r.current.drawable=!0;let s=null===(l=r.current)||void 0===l?void 0:l.naturalWidth,d=null===(a=r.current)||void 0===a?void 0:a.naturalHeight;if(s>d){let e=s/d;t({x:(e-1)/2/e,y:0,width:1/e,height:1}),i.current={width:1/e,height:1}}else{let e=d/s;t({x:0,y:(e-1)/2/e,width:1,height:1/e}),i.current={width:1,height:1/e}}o.current.width=1080,o.current.height=1080,n(0)},r.current.onerror=()=>{var e;URL.revokeObjectURL(null===(e=r.current)||void 0===e?void 0:e.src),r.current.drawable=!1,t({x:0,y:0,width:1,height:1})}}},[]),(0,d.useEffect)(()=>{if(o.current&&r.current){var t,l,n,i,a;if(null===(t=r.current)||void 0===t?void 0:t.drawable){let t=null===(l=r.current)||void 0===l?void 0:l.naturalWidth,s=null===(n=r.current)||void 0===n?void 0:n.naturalHeight;null===(a=o.current)||void 0===a||null===(i=a.ctx)||void 0===i||i.drawImage(r.current,e.x*t,e.y*s,e.width*t,e.height*s,0,0,o.current.width,o.current.height)}}},[e]),(0,d.useEffect)(()=>{if(0===e.width&&0===e.height)return;let n=e.x+e.width/2,o=e.y+e.height/2,r=n-i.current.width/2,a=o-i.current.height/2,s=l/(l+1),d=i.current.width*(1-s),u=i.current.height*(1-s);t({x:Math.min(Math.max(r+(n-r)*s,0),1-d),y:Math.min(Math.max(a+(o-a)*s,0),1-u),width:d,height:u})},[l]),{canvasRef:o,imgRef:r,imgStyle:s,changeScale:e=>{n(Math.max(Math.min(e,9),0))},enlargeScale:l,imgViewBox:e,changeImgViewBox:e=>{t((0,T._)((0,a._)({},e),{x:Math.min(Math.max(e.x,0),1-e.width),y:Math.min(Math.max(e.y,0),1-e.height)}))}}},eS=e=>{let{changeScale:t,enlargeScale:l}=e,n=(0,d.useRef)(null),o=(0,d.useRef)(null),r=(0,d.useRef)(l),i=(0,d.useRef)(l),a=(0,d.useRef)(-1);return i.current=l,(0,d.useEffect)(()=>{let e=n.current,l=e.offsetWidth,s=o.current,d=n=>{if(a.current="touchstart"===n.type?n.targetTouches[0].pageX:n.pageX,l=e.offsetWidth,(null==n?void 0:n.target)!==s){let e=9*(n.offsetX/l);r.current=e,t(e)}else r.current=i.current},u=e=>{if(-1!==a.current){let n=(("touchmove"===e.type?e.targetTouches[0].pageX:e.pageX)-a.current)/l;t(r.current+9*n)}},c=()=>{a.current=-1};return e.addEventListener(eI.start,d),document.addEventListener(eI.move,u),document.addEventListener(eI.end,c),eI.cancle&&document.addEventListener(eI.cancle,c),()=>{e.removeEventListener(eI.start,d),document.removeEventListener(eI.start,u),document.removeEventListener(eI.start,c),eI.cancle&&document.removeEventListener(eI.cancle,c)}},[]),{sliderProgressRef:n,sliderButtonRef:o}},eL=e=>{let{imgRef:t,imgViewBox:l,changeImgViewBox:n,enlargeScale:o,changeScale:r}=e,i=(0,d.useRef)(l),s=(0,d.useRef)(l),u=(0,d.useRef)({x:-1,y:-1}),c=(0,d.useRef)(o);return i.current=l,c.current=o,(0,d.useEffect)(()=>{let e=t.current,l=e=>{u.current={x:"touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,y:"touchstart"===e.type?e.targetTouches[0].pageY:e.pageY},s.current=i.current},o=t=>{if(!(-1===u.current.x||-1===u.current.y)){let l=e.offsetWidth,o=e.offsetHeight,r={x:"touchmove"===t.type?t.targetTouches[0].pageX:t.pageX,y:"touchmove"===t.type?t.targetTouches[0].pageY:t.pageY};n((0,T._)((0,a._)({},i.current),{x:s.current.x+-((r.x-u.current.x)/l),y:s.current.y+-((r.y-u.current.y)/o)}))}},r=e=>{u.current.x=-1,u.current.y=-1};return e.addEventListener(eI.start,l),document.addEventListener(eI.move,o),document.addEventListener(eI.end,r),eI.cancle&&document.addEventListener(eI.cancle,r),()=>{e.removeEventListener(eI.start,l),document.removeEventListener(eI.move,o),document.removeEventListener(eI.end,r),eI.cancle&&document.addEventListener(eI.cancle,r)}},[]),(0,d.useEffect)(()=>{let e=t.current,l=e=>{let t=Math.max(-1,Math.min(1,e.wheelDelta||-e.deltaY||-e.detail)),l=void 0!==e.wheelDeltaX||void 0!==e.deltaX;(Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!l)&&(t<0?r(c.current-.3):r(c.current+.3))};return e.addEventListener("wheel",l),()=>{e.removeEventListener("wheel",l)}},[]),null};var eM={container:"mpE8xieI",close:"Bi_oifAI",title:"wwLqqCuC",avatarEditorContainer:"N6kIWsFf",leftContainer:"EX0GJeT5",mainEditor:"p0_ugtjj",loading:"eZLeRQQM",img:"BaaPRKw4",slideContainer:"sp8jIuzA",pointer:"ULwo5tgv",disabled:"AK3T_WAX",slider:"RTz7ku8n",progressContainer:"QPhYfE18",progress:"uQbyBF3T",progressButton:"cbtq_fEt",rightContainer:"yxImy6Pl",topContainer:"MDLmMj_7",avatarPreview:"XRtGZcZz",avatarPreviewWord:"BraEaKnK",checkWord:"TxbVdqf4",bottomContainer:"XQQmdVMZ",buttonContainer:"vdXtXSmO"};let eT=(0,d.forwardRef)((e,t)=>(0,s.jsxs)("svg",(0,T._)((0,a._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,s.jsxs)("g",{clipPath:"url(#increaseGlass_svg__clip0_1612_33738)",children:[(0,s.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,s.jsx)("path",{clipRule:"evenodd",d:"M15 8.667a6.333 6.333 0 1 0 3.982 11.258l2.449 2.449a.667.667 0 1 0 .943-.943l-2.449-2.449A6.333 6.333 0 0 0 15 8.666zM10 15a5 5 0 1 1 10 0 5 5 0 0 1-10 0zm5.667-2a.667.667 0 1 0-1.334 0v1.337l-1.329.002a.667.667 0 0 0 .002 1.333l1.327-.002V17a.667.667 0 0 0 1.334 0v-1.332L17 15.667a.667.667 0 0 0-.002-1.334l-1.332.002V13z"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"increaseGlass_svg__clip0_1612_33738",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]}))),eR=(0,d.forwardRef)((e,t)=>(0,s.jsxs)("svg",(0,T._)((0,a._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,s.jsxs)("g",{clipPath:"url(#reduceGlass_svg__clip0_1628_36241)",children:[(0,s.jsx)("circle",{cx:16,cy:16,r:15.5}),(0,s.jsx)("path",{clipRule:"evenodd",d:"M8.667 15a6.333 6.333 0 1 1 11.258 3.982l2.449 2.449a.667.667 0 0 1-.943.943l-2.449-2.449A6.333 6.333 0 0 1 8.666 15zM15 10a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm-2.667 5c0-.368.299-.667.667-.667h4a.667.667 0 0 1 0 1.334h-4a.667.667 0 0 1-.667-.667z"})]}),(0,s.jsx)("defs",{children:(0,s.jsx)("clipPath",{id:"reduceGlass_svg__clip0_1628_36241",children:(0,s.jsx)("path",{fill:"#fff",d:"M0 0h32v32H0z"})})})]})));var eF=l("354795"),eP=new eF.h({clickEditProfile:{eventName:"click_edit_profile",params:{}},clickSaveProfile:{eventName:"click_save_profile",params:{action:""}}});let eD=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M24.601 24.6a1.362 1.362 0 0 1-1.927 0L18.5 20.427l-4.174 4.175a1.362 1.362 0 0 1-1.927-1.927l4.174-4.174-4.174-4.175a1.362 1.362 0 0 1 1.927-1.926l4.174 4.174 4.174-4.174a1.362 1.362 0 1 1 1.927 1.927L20.427 18.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#fff",fillOpacity:".8"})}))),eA=e=>{var t;let{avatarUrl:l,onCloseAvatarEditor:n,onSaveAvatar:o,openFileSelector:r,onClose:i}=e,[a,u]=(0,d.useState)(!1),{dispatch:c,userInfo:v}=null!==(t=(0,d.useContext)(O.Context))&&void 0!==t?t:{},m=(0,d.useRef)(a);m.current=a;let{canvasRef:p,imgRef:g,imgStyle:_,changeScale:x,enlargeScale:w,imgViewBox:C,changeImgViewBox:y}=eE(),{sliderProgressRef:b,sliderButtonRef:j}=eS({changeScale:x,enlargeScale:w});return eL({imgRef:g,imgViewBox:C,changeImgViewBox:y,enlargeScale:w,changeScale:x}),(0,s.jsxs)("div",{className:eM.container,children:[(0,s.jsx)(J.Z,{className:eM.close,width:36,height:36,onClick:()=>{!m.current&&n()},src:eD}),(0,s.jsx)("div",{className:eM.title,children:"修改头像"}),(0,s.jsxs)("div",{className:eM.avatarEditorContainer,children:[(0,s.jsxs)("div",{className:eM.leftContainer,children:[(0,s.jsxs)("div",{className:eM.mainEditor,children:[(0,s.jsx)("img",{className:eM.img,style:_,src:l,ref:g,draggable:!1}),a&&(0,s.jsx)(h.gb,{className:eM.loading})]}),(0,s.jsxs)("div",{className:eM.slideContainer,children:[(0,s.jsx)(J.Z,{width:32,height:32,viewBox:"0 0 32 32",src:eR,className:f()(eM.pointer,{[eM.disabled]:0===w}),onClick:()=>x(w-1)}),(0,s.jsx)("div",{className:eM.slider,children:(0,s.jsx)("div",{className:eM.progressContainer,ref:b,children:(0,s.jsx)("div",{className:eM.progress,style:{width:`${w/9*100}%`},children:(0,s.jsx)("div",{className:eM.progressButton,ref:j})})})}),(0,s.jsx)(J.Z,{width:32,height:32,viewBox:"0 0 32 32",src:eT,className:f()(eM.pointer,{[eM.disabled]:9===w}),onClick:()=>x(w+1)})]})]}),(0,s.jsxs)("div",{className:eM.rightContainer,children:[(0,s.jsxs)("div",{className:eM.topContainer,children:[(0,s.jsx)("canvas",{className:eM.avatarPreview,ref:p}),(0,s.jsx)("div",{className:eM.avatarPreviewWord,children:"头像预览"}),(0,s.jsx)("div",{className:eM.checkWord,children:"审核通过后展示"})]}),(0,s.jsx)("div",{className:eM.bottomContainer,onClick:()=>{r()},children:"重新上传"})]})]}),(0,s.jsxs)("div",{className:eM.buttonContainer,children:[(0,s.jsx)(ed.zx,{theme:"solid",onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.toBlob(async e=>{if(null!==e&&!m.current){u(!0),m.current=!0;let l=new(eb())({userId:v.info.uid,appId:ej.APP_ID,imageConfig:{serviceId:ej.IMAGEX_AVATAR_SERVER_ID}}),{stsToken:n,statusCode:r}=await (0,ek.$)()||{};if(0===r){var t;let r=null==l?void 0:null===(t=l.addFile)||void 0===t?void 0:t.call(l,{file:e,stsToken:n,type:"image"});l.on("complete",async t=>{var l;let n=await eg({avatar_uri:t.uploadResult.Uri});[0,1].includes(null==n?void 0:null===(l=n.toastBackInfo)||void 0===l?void 0:l.commit_status)?(o(window.URL.createObjectURL(e)),setTimeout(()=>{null==c||c({type:"updateUserInfo"})},2e3),eP.sendLog("clickSaveProfile",{action:"photo"})):(X.F.info(n.toastBackInfo.toast_msg||n.statusMsg),u(!1))}),l.on("error",e=>{u(!1),X.F.info("保存失败")}),l.on("progress",e=>{}),l.start(r)}else u(!1),X.F.info("保存失败")}})},children:"保存"}),(0,s.jsx)(ed.zx,{theme:"solid",onClick:()=>{!m.current&&n()},type:"secondary",children:"取消"})]})]})};var eV="VGHnRRkD",eB="_v8TSFNd",eH="JxyrH4Bj",eU="E5Kttfdb",eO="aAKMPmpf",ez="WLKRKnEu",eW="AVU55egZ",eZ="dZZAjsht",e$="X5_rG6AQ",eK="xaD5UzWs",eG="B1W3yvBj",eq="Liagy5Cv",eX="iHAmO_SE",eY="HZHmbnTC",eQ="fYMKKomo",eJ="XVsv4_zN",e0="pkDSgddx",e1="N45aXPpd",e2="sLHBygsG",e5="c6gzhebx",e3="gBRRW3b_";l("482392");let e6=e=>{let{changeImgUrl:t,avatarSrcChange:l}=e,[n,o]=(0,d.useState)(!1),r=(0,d.useRef)(),i=(0,d.useRef)();return(0,d.useEffect)(()=>{if(i.current){let e=i.current,t=()=>{window.URL.revokeObjectURL(e.src)};return e.addEventListener("load",t),()=>{e.removeEventListener("load",t)}}},[]),(0,d.useEffect)(()=>{let e=r.current;if(e){let l="",n=()=>{if(null==e?void 0:e.files[0]){var n;window.URL.revokeObjectURL(l),(null==e?void 0:null===(n=e.files[0].type)||void 0===n?void 0:n.startsWith("image"))?(t(l=window.URL.createObjectURL(null==e?void 0:e.files[0])),o(!0),e.value=""):X.F.info("格式错误")}};return null==e||e.addEventListener("change",n),()=>{null==e||e.removeEventListener("change",n),window.URL.revokeObjectURL(l)}}},[]),{inputRef:r,imgRef:i,showAvatarEditor:n,onCloseAvatarEditor:()=>{o(!1),t("")},onSaveAvatar:e=>{l(),o(!1),t(e)},openFileSelector:()=>{var e,t;null===(t=r.current)||void 0===t||null===(e=t.click)||void 0===e||e.call(t)}}},e4=e=>{var t;let{userInfo:l,onClose:n}=e,{avatarUrl:o,nickname:r,desc:i}=null!=l?l:{},{dispatch:u}=null!==(t=(0,d.useContext)(O.Context))&&void 0!==t?t:{},[c,v]=(0,d.useState)(o),[m,h]=(0,d.useState)(r),[p,g]=(0,d.useState)(i),_=(0,d.useRef)(i),x=(0,d.useRef)(),w=(0,d.useRef)(!1),C=(0,d.useRef)(!1),y=(0,d.useMemo)(()=>{let e=0===m.trim().length,t=m===r,l=p===i;return(e||t&&l)&&!w.current},[r,p,m,i,w.current]),b=async()=>{if(C.current)return;let e={},t=!1;if(m!==r&&(e.nickname=m,t=!0),_.current!==i){if(t=!0,""===_.current)e.signature="",e.signature_extra=void 0;else{if(_.current.length>242){X.F.info("字数已超出最大限制");return}if(_.current.split("\n").length>11){X.F.info("已超出最大行数");return}let t=_.current.trim();if(e.signature=t,x.current){e.signature_extra=JSON.stringify(x.current),0===x.current.length&&(e.signature_extra=void 0);let t=/^\s+/.exec(_.current);if(t){let l=t[0].length,n=x.current.map(e=>(0,T._)((0,a._)({},e),{start:e.start-l,end:e.end-l}));e.signature_extra=JSON.stringify(n)}}}}if(t){var l,o,s;n();let t=[];void 0!==e.nickname&&t.push("name"),void 0!==e.signature&&t.push("signature"),eP.sendLog("clickSaveProfile",{action:t.join(",")}),C.current=!0;let r=await eg(e);if(C.current=!1,(null==r?void 0:null===(l=r.toastBackInfo)||void 0===l?void 0:l.back)&&setTimeout(()=>{null==u||u({type:"updateUserInfo"})},2e3),null==r?void 0:null===(o=r.toastBackInfo)||void 0===o?void 0:o.toast_msg){X.F.info(null==r?void 0:null===(s=r.toastBackInfo)||void 0===s?void 0:s.toast_msg);return}if(null==r?void 0:r.statusMsg){X.F.info(null==r?void 0:r.statusMsg);return}}else{n();return}},j=()=>{n()},{inputRef:k,imgRef:N,showAvatarEditor:I,onCloseAvatarEditor:E,onSaveAvatar:S,openFileSelector:L}=e6({changeImgUrl:e=>{v(e)},avatarSrcChange:()=>w.current=!0});return(0,s.jsxs)(ec.T6,{className:eB,children:[(0,s.jsx)("input",{type:"file",accept:".png,.webp,.jpeg,.pjpeg,.bmp,.jpg",style:{display:"none"},ref:k}),(0,s.jsxs)("div",{"data-bytereplay-mask":"strict",className:f()(eH,{[e3]:I}),children:[(0,s.jsxs)("div",{className:eU,children:[(0,s.jsx)("span",{className:eO,children:"编辑资料"}),(0,s.jsx)("div",{className:ez,onClick:j,children:(0,s.jsx)(J.Z,{width:36,height:36,src:eD})})]}),(0,s.jsxs)("div",{className:eW,children:[(0,s.jsxs)("div",{className:eZ,onClick:()=>{var e;null===(e=k.current)||void 0===e||e.click()},children:[(0,s.jsx)("img",{src:c||o,alt:"avatar",ref:N}),(0,s.jsx)("span",{className:e$})]}),(0,s.jsx)("div",{className:eK,children:"点击修改头像"})]}),(0,s.jsxs)("div",{className:eG,children:[(0,s.jsx)("div",{className:eq,children:"名字"}),(0,s.jsxs)("div",{className:eX,children:[(0,s.jsx)("input",{type:"text",placeholder:"记得填写昵称",maxLength:20,onChange:e=>{h(e.target.value)},value:m}),(0,s.jsxs)("span",{className:eY,children:[m.length,"/20"]})]})]}),(0,s.jsxs)("div",{className:eQ,children:[(0,s.jsx)("div",{className:eJ,children:"简介"}),(0,s.jsx)("div",{className:e0,children:(0,s.jsx)(eC,{userInfo:l,onChangeIntro:(e,t)=>{_.current=e,x.current=t,g(e)}})})]}),(0,s.jsxs)("div",{className:e1,children:[(0,s.jsx)(ed.zx,{className:e5,onClick:j,type:"secondary",theme:"solid",children:"取消"}),(0,s.jsx)(ed.zx,{className:e2,disabled:y,onClick:b,theme:"solid",children:"保存"})]})]}),I&&(0,s.jsx)(eA,{avatarUrl:c,onCloseAvatarEditor:E,onSaveAvatar:S,openFileSelector:L,onClose:n})]})};var e7=e=>{let{userInfo:t,className:l}=e,[n,o]=(0,d.useState)(!1),r=(0,d.useCallback)(()=>{o(!1)},[]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.zx,{className:f()(eV,l),onClick:()=>{eP.sendLog("clickEditProfile"),o(!0)},theme:"solid",children:"编辑资料"}),n&&(0,s.jsx)(eu.h,{children:(0,s.jsx)(e4,{userInfo:t,onClose:r})})]})},e8=l("943810"),e9=l.n(e8),te=l("606660"),tt=l("660326"),tl=l("684028"),tn=l("781114"),to=l("553876"),tr=l("34639"),ti={avatarWrap:"BhdsqJgJ",avatar:"wUu6gJP3",pointer:"JqB23NsS",avatarDefault:"bV21Fr7Y",auditing:"K7r20gDw",screenMask:"iwFcqpdU"};let ta=new ec._z,ts=e=>{let{src:t}=e;ta.render({children:(0,s.jsx)("img",{src:t,style:{width:280,height:280}}),className:ti.screenMask,onMaskClick:()=>ta.destroy()})};var td=e=>{var t,l,n,o,r,i,u,c;let{userInfo:v,logId:m}=e,{uid:h,nickname:p,avatarUrl:g,avatar300Url:_,followStatus:x,roomId:w,secret:C,roomData:y}=null!=v?v:{},b=null!==(i=(0,d.useContext)(U.C))&&void 0!==i?i:{},{isSelf:j}=null!==(u=(0,d.useContext)(H))&&void 0!==u?u:{},{userInfo:{isLogin:k,info:N,isSpider:I}}=null!==(c=(0,d.useContext)(O.Context))&&void 0!==c?c:{},E=(0,d.useMemo)(()=>{var e;return(j||!C||C&&k&&!j&&[1,2].includes(x))&&!!w&&(null==y?void 0:null===(e=y.owner)||void 0===e?void 0:e.web_rid)},[y,C,k,j,x,w]),S=(0,d.useMemo)(()=>{var e;return{web_rid:null==y?void 0:null===(e=y.owner)||void 0===e?void 0:e.web_rid,enter_from_merge:j?"personal_homepage":"web_others_homepage",enter_method:j?"web_video_head":"web_homepage_head",enter_method_temai:"web_video_head",action_type:"click",room_id:w}},[null==y?void 0:null===(t=y.owner)||void 0===t?void 0:t.web_rid,w,j]),L=(0,d.useMemo)(()=>{var e;return null==y?void 0:null===(e=y.paid_live_data)||void 0===e?void 0:e.paid_type},[y]),{seasonIds:M}=(0,tr.b)(),T=(0,d.useMemo)(()=>{var e,t;return null==M?void 0:null===(t=M.includes)||void 0===t?void 0:t.call(M,(null==y?void 0:null===(e=y.episode_extra)||void 0===e?void 0:e.season_id_str)||"")},[y,M]),R=(0,d.useMemo)(()=>v?{authorInfo:{roomData:(0,a._)({},(null==v?void 0:v.roomData)||{}),roomId:null==v?void 0:v.roomIdStr,nickname:null==v?void 0:v.nickname,title:null==v?void 0:v.nickname,secUid:null==v?void 0:v.secUid,desc:null==v?void 0:v.desc,uid:null==v?void 0:v.uid},desc:null==v?void 0:v.desc}:{},[v]);return(0,s.jsx)("div",{className:ti.avatarWrap,children:E?(0,s.jsx)(tt.nh,{type:"extra-large",src:I?_:g,alt:`${p}头像`,uid:h,liveRoomUrl:(0,tn.cc)(S),onClick:e=>{if(!T&&j&&!L&&((null==b?void 0:b.liveModalFullplayer)===te.LiveModalFullplayer.WithoutAction||(null==b?void 0:b.liveModalFullplayer)===te.LiveModalFullplayer.DynamicBg||(null==b?void 0:b.liveModalFullplayer)===te.LiveModalFullplayer.EntranceStrengthen||(null==b?void 0:b.liveModalFullplayer)===te.LiveModalFullplayer.Normal)){var t,l;e.preventDefault(),B.emit(B.EVENT.liveModalShow,{type:"follow",data:{webRid:null!==(l=null==y?void 0:null===(t=y.owner)||void 0===t?void 0:t.web_rid)&&void 0!==l?l:"",anchorId:e9().stringify(null==v?void 0:v.uid),roomId:e9().stringify(w)},enterMethod:to.a.VIDEO_HEAD,teaLogParams:(0,a._)({},S)})}},logParams:{enter_from_merge:j?"personal_homepage":"web_others_homepage",small_window_enter_method:j?"personal_homepage_fast_live_hover":"web_homepage_head_hover"},liveRoomParam:{logId:m},isNeedSendLog:!0,isFirstLive:(null==y?void 0:null===(n=y.episode_extra)||void 0===n?void 0:null===(l=n.mod)||void 0===l?void 0:l.episode_stage)===2,isEcomLive:(null==y?void 0:null===(r=y.ecom_data)||void 0===r?void 0:null===(o=r.room_cart_v2)||void 0===o?void 0:o.show_cart)===1,awemeInfo:R,position:"right",fixTop:10,from:"follow",scene:"pc_profile_struct"}):(0,s.jsx)(tl.q,{className:f()(ti.avatar,{[ti.pointer]:null==b?void 0:b.hasUserEdit}),defaultClassName:ti.avatarDefault,src:_,alt:`${p}头像`,isSpider:I,isSelf:j,onClick:()=>{ts({src:_})},children:(null==v?void 0:v.avatarAuditing)&&(null==b?void 0:b.hasUserEdit)?(0,s.jsx)("div",{className:ti.auditing,children:"审核中"}):null})})},tu=l("532910"),tc=l("673919"),tv=l("404264"),tm=l("277931"),tf=l("245086"),th=l("895184"),tp=l("688918"),tg="ajC8cNxV",t_="EE_LhMCF",tx=e=>{var t;let{userInfo:l,type:n,className:o}=e,{uid:r,followStatus:i,followerStatus:a}=l,{userInfo:{isLogin:u,info:c},dispatch:v}=null!==(t=(0,d.useContext)(O.Context))&&void 0!==t?t:{},{follow:m,unFollow:h}=(0,tv.OM)({selfUid:null==c?void 0:c.uid,actionUid:r,defaultFollowerStatus:a,defaultFollowStatus:i,isLogin:!!u,onLoginSuccess:()=>null==v?void 0:v({type:"updateUserInfo"}),logExtraParams:{to_user_id:r,enter_from:(0,tf.yW)(),is_full_screen:(0,th.r)()?"1":"0",tab_name:tu.getTabName()||(0,V.Rs)("tab_name")||""},fail:tv.GH}),{text:p,buttonType:g,followStatus:_}=(0,tm.r)({selfUid:null==c?void 0:c.uid,actionUid:r,defaultFollowerStatus:a,defaultFollowStatus:i});return(0,s.jsx)(ed.zx,{"data-e2e":"user-info-follow-btn",className:f()(tg,o,{[t_]:g!==tc.TT.Active&&"user"===n}),onClick:()=>{(0,tp.V)(_)?h():m()},type:g!==tc.TT.Active?"secondary":"primary",theme:"solid",children:p})},tw=l("169910"),tC={im:"z0c5Gipx",chat:"RH8TCnaE"},ty=e=>{var t,l;let{userInfo:n,className:o}=e,{userInfo:{isLogin:r},dispatch:i}=null!==(l=(0,d.useContext)(O.Context))&&void 0!==l?l:{};return!(null==n?void 0:null===(t=n.im_role_ids)||void 0===t?void 0:t.includes(tw.L.AiChatBotRole))&&(0,s.jsx)(ed.zx,{theme:"solid",type:"secondary",className:f()(tC.chat,tC.im,o),onClick:()=>{if(!r){(0,G.default)({headerText:"登录后即可私信对方",enterMethod:"im_private",success:()=>{i({type:"updateUserInfo"})}});return}B.emit(B.EVENT.sendImUserMsg,{uid:n.uid,enterMethod:"im_private"})},children:"私信"})},tb=l("71880"),tj=l("326026"),tk=l("725925");let tN=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:12,height:4,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M2.667 2.187a1.333 1.333 0 1 1-2.667 0 1.333 1.333 0 0 1 2.667 0zM7.333 2.187a1.333 1.333 0 1 1-2.666 0 1.333 1.333 0 0 1 2.666 0zM10.667 3.52a1.333 1.333 0 1 0 0-2.667 1.333 1.333 0 0 0 0 2.667z",fill:"currentColor"})})));var tI=new eF.h({blockUser:{eventName:"block_user",params:{action:"",enter_from:"",to_user_id:""}}}),tE={container:"PVEKQEpy",more:"myp2Kfaf",box:"poy0NP2r",report:"ULnjX6e9",modalBackground:"JsGmXpJo",modal:"pOWPTyVV",dropdown:"Io13lkH0",content:"KEcrPPSm",header:"ZPgAOZH6",footer:"I4hblRRe",cancelBtn:"QWQiKg8g",confirmBtn:"L83tOaIa"},tS=e=>{let{userInfo:t,dispatch:l,currentUserInfo:n,isLogin:o,className:r}=e,[i,a]=(0,d.useState)(!1),{isBlock:u}=t,c=(0,d.useRef)(t);c.current=t;let v=async()=>{tI.sendLog("blockUser",{action:"confirm",enter_from:(0,tf.vM)(),to_user_id:null==t?void 0:t.uid});let{status_code:e,block_status:l}=await (0,tk.Ox)(null==t?void 0:t.uid,null==t?void 0:t.secUid,u?tk.bF.unblock:tk.bF.block,tk.NE.block);0===e&&(l===tk.bF.unblock||l===tk.bF.block)?(B.emit(B.EVENT.userBlockEvent,{uid:null==t?void 0:t.uid,isBlock:l===tk.bF.block,action:"block"}),X.F.info(l===tk.bF.unblock?"已解除拉黑":"已拉黑"),a(!1)):X.F.info("操作失败，稍后重试")};(0,d.useEffect)(()=>{let e=B.listen(B.EVENT.userBlockEvent,e=>{var t;let{uid:l,isBlock:n,action:o}=e;l===(null===(t=c.current)||void 0===t?void 0:t.uid)&&("block"===o||c.current.isBlock&&"follow"===o)&&location.reload()});return()=>{e()}},[]);let m=(0,s.jsxs)(ed.Lt.Menu,{className:tE.box,children:[(0,s.jsx)(ed.Lt.Item,{className:tE.report,onClick:()=>{(0,tb.mJ)({title:"举报账号",type:"user",object_id:t.uid,owner_id:null==t?void 0:t.uid,owner_sec_id:null==t?void 0:t.secUid,userInfo:n,loginDispatch:l,enter_from:(0,tf.yW)(),pipeline_id:"156"})},children:"举报账号"}),(0,s.jsx)(ed.Lt.Item,{className:tE.report,onClick:()=>{if(tI.sendLog("blockUser",{action:"click",enter_from:(0,tf.vM)(),to_user_id:null==t?void 0:t.uid}),o)a(!0);else{var e,n;(0,G.default)({headerText:"登录后可以拉黑",enterMethod:"",next:`https://${null===(n=window)||void 0===n?void 0:null===(e=n.location)||void 0===e?void 0:e.host}`,success:async()=>{l({type:"updateUserInfo"})}})}},children:t.isBlock?"解除拉黑":"拉黑"})]});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ed.Lt,{className:tE.dropdown,render:m,position:"bottom",children:(0,s.jsx)("div",{id:"tooltip",className:tE.container,children:(0,s.jsx)(ed.zx,{className:f()(tE.more,r),theme:"solid",children:(0,s.jsx)(J.Z,{src:tN,width:12,height:4,viewBox:"0, 0, 12, 4"})})})}),i&&(0,s.jsx)(tj.u,{className:tE.modal,modalClassName:tE.modalBackground,type:"custom",onCancel:()=>a(!1),isHide:!i,children:(0,s.jsxs)("div",{className:f()(tE.content),children:[(0,s.jsx)("div",{className:tE.header,children:u?"解除拉黑后，对方可以搜索到你，可以给你发私信":"拉黑后，对方将无法搜索到你，也不能给你发私信"}),(0,s.jsxs)("div",{className:tE.footer,children:[(0,s.jsx)(ed.zx,{theme:"solid",type:"secondary",className:tE.cancelBtn,onClick:()=>{a(!1),tI.sendLog("blockUser",{action:"cancel",enter_from:(0,tf.vM)(),to_user_id:null==t?void 0:t.uid})},children:"取消"}),(0,s.jsx)(ed.zx,{className:tE.confirmBtn,onClick:v,theme:"solid",children:u?"解除拉黑":"确认拉黑"})]})]})})]})},tL=l("807567"),tM=l("848284"),tT=l("720820"),tR={share:"lQYO2KK8",btn:"q_gybyVo",text:"RH7o02et",box:"CoEhK3no",code:"mJHc_Ktg"},tF=e=>{var t,l;let{userInfo:n,isTextType:o,className:r}=e,{uid:i,secret:a}=n,u=null!==(t=(0,d.useContext)(U.C))&&void 0!==t?t:{},{userInfo:c,dispatch:v}=null!==(l=(0,d.useContext)(O.Context))&&void 0!==l?l:{},{type:m,changeType:h}=(0,tL.P)({delayDisappear:50,delayShow:50}),p=(0,d.useRef)(!1);return 0===a?(0,s.jsxs)(ed.zx,{theme:"borderless",type:"secondary",className:f()(tR.share,tR.btn,r),onMouseEnter:()=>h("share_btn"),onMouseLeave:()=>!p.current&&h(""),id:"frame-user-info-share-button",children:[o?(0,s.jsx)("span",{className:tR.text,children:"分享主页"}):(0,s.jsx)(tT.Z,{type:"fit",ableMiniType:!0,scene:"user"}),(0,s.jsx)(tM.ZP,{className:f()(tR.box,tR.code),toast:e=>X.F.info(e),shareShowMethod:"icon",uid:i,userInfo:n,shareType:tM.yw.User,inanyPage:tM.vA.UserPage,loginUserInfo:c,hidden:"share_btn"!==m,abtestData:u,handleClose:()=>h(""),loginDispatch:v,onMouseEnter:()=>{},onMouseLeave:()=>{},onFriendSearching:e=>{p.current=e}})]}):null},tP={infoContainer:"o1w0tvbC",videoPerf:"W41XVmRl",newUi:"InbPGkRv",marginTop:"yGHzjsaH",trustLoginSwitch:"vtnKOfB6",btns:"SwoeMAEU",moreShare:"eCnDXTNw",shareClass:"r9voWhax",moreStyle:"Xmc7XHJD",moreGab:"hMhOKEXk",otherShowDownload:"nWLhWdOv",btnContainer:"e5v3_cjW",follwImEdit:"hLIm2dFu",midBtnContainer:"ty_H89Vr",editorClass:"al341NBr",btnBgColor:"I4tJiW0Q",moreGap:"ybyido2a",downloadBarText:"uA8yfyWi",downloadBar:"pSGzKt_7",baseInfoContainer:"mZmVWLzR",nameInfo:"ds1zWG9C",nickname:"a34DMvQe",badge:"D95lkyiX",otherInfo:"cOO9eQ6W",uniqueId:"TVGQz3SI",location:"W5BoFrmn",tag:"ZsWSQtbs",lastdate:"R1Cthd0C",descInfo:"X45g5WK0",more:"GQkG8IKl",login:"e_F4PVM8",moreDesc:"d8RXrciP",countInfo:"lAAqxPDf",item:"WetwxGAE",title:"hTGkLGxm",count:"sCnO6dhe",clickable:"GQQEtJnJ",descContainer:"DtlymgqL",moreContainer:"XX4hM3FI",hasNav:"F3jJ1P9_",frameContainer:"dt8ti5z1",topBackground:"IChTRFvi"},tD=l("991065"),tA=l("688497"),tV=l("8138"),tB=JSON.parse('{"v":"5.9.0","fr":30,"ip":0,"op":28,"w":16,"h":16,"nm":"合成 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"形状图层 6","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[4.969,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.75],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[91]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":12,"s":[0]},{"t":28,"s":[91]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"形状图层 5","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.438],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[60]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":15,"s":[0]},{"t":28,"s":[60]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"形状图层 4","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[8,10.188,0],"ix":2,"l":2},"a":{"a":0,"k":[-5.312,2.625,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-5.312,-3.625],[-5.312,2.594]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"tm","s":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[28]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":12,"s":[74]},{"t":28,"s":[28]}],"ix":1},"e":{"a":0,"k":100,"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1.5,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"形状 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"形状图层 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[8,8,0],"ix":2,"l":2},"a":{"a":0,"k":[0,0,0],"ix":1,"l":2},"s":{"a":0,"k":[100,100,100],"ix":6,"l":2}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[16,16],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996078431373,0.172549019608,0.333333333333,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0}],"markers":[]}'),tH=l("801002"),tU={live:"qp7Gjbf3",ohosLive:"KgqAhp99",icon:"r9j0qAsh",text:"ynMy0rZg",liveWindow:"bYMn8KcA"};let tO=l("35319").s;var tz=new eF.h(tO),tW=e=>{let{liveList:t,onHover:l,loading:n,abTestData:o,requestId:r}=e,{type:i,changeType:a}=(0,tL.P)({delayDisappear:100}),d=(0,tH.O)(),u=(0,tA.x)(()=>{let e=null==t?void 0:t[0];tz.sendLog("fastLiveHeadShow",{entrance_type:"personal_homepage",anchor_id:null==e?void 0:e.anchorId,room_id:null==e?void 0:e.roomId,show_type:"default"})});return(0,s.jsxs)("div",{className:f()(tU.live,{[tU.ohosLive]:d}),onClick:e=>{null==e||e.stopPropagation()},onMouseEnter:()=>{a(!0),i||null==l||l(),tz.sendLog("fastLiveHeadHover",{entrance_type:"personal_homepage",hover_show_cnt:t.length})},onMouseLeave:()=>{a(!1)},ref:u,children:[(0,s.jsx)(tV.default,{autoplay:!0,loop:!0,data:tB,className:tU.icon}),(0,s.jsxs)("div",{className:tU.text,children:[t.length,"人正在直播"]}),i&&(0,s.jsx)("div",{className:tU.liveWindow,children:(0,s.jsx)(tD.Z,{abTestData:o,liveList:t,loading:n,hasLimit:!1,logParams:{enter_method:"personal_homepage_fast_live_head",enter_from_merge:(0,tf.yW)(),entrance_type:"personal_homepage",small_window_enter_method:"personal_homepage_fast_live_hover",request_id:r},onItemClick:()=>{a(!1)}})})]})};let tZ=e=>!e.hideLocation&&!e.isNotShowBaseTag&&!e.isGovMediaVip&&!e.enterpriseVerifyReason&&!e.isStar&&!0,t$=e=>{let{country:t,province:l,city:n,district:o}=e;if(!tZ(e))return"";if(!t)return n;if("中国"!==t)return t;if("台湾"===l)return l;if(!l&&("香港"===n||"澳门"===n))return n;let r=[];return l&&r.push(l),n&&n!==l&&r.push(n),o&&r.push(o),r.slice(0,2).join("\xb7")},tK=(e,t)=>e.map(e=>{var l,n,o;let r=null==e?void 0:null===(l=e.tag)||void 0===l?void 0:l.hotList,i=!(t.length<3)||(null==e?void 0:null===(n=e.tag)||void 0===n?void 0:n.isTop)?void 0:null==r?void 0:r.rank;return i&&!t.includes(null==e?void 0:e.awemeId)&&(null===(o=JSON.parse((null==r?void 0:r.extra)||"{}"))||void 0===o?void 0:o.entrance_relativity)==="100"&&t.push(null==e?void 0:e.awemeId),(null==r?void 0:r.rank)&&(r.rank=i),e}),tG=(e,t)=>{if(!e)return{padding:"0"};let{left:l}=t,n=document.body.clientWidth-t.left-t.width;return{padding:`0 ${n}px 0 ${l}px`}},{CREATOR_DOMAIN:tq,HOME_DOMAIN:tX}=l("36003"),tY={NO:0,REQUEST:4},tQ={VIDEO:"video",VS:"vs",USER:"user",Live:"live"},tJ={FAVORITE_FOLDER:"favorite_folder",VIDEO:"video",MUSIC:"music",COMPILATION:"compilation",SERIES:"playlet"},t0=[{tab:tJ.FAVORITE_FOLDER,title:"收藏夹"},{tab:tJ.VIDEO,title:"视频"},{tab:tJ.MUSIC,title:"音乐"},{tab:tJ.COMPILATION,title:"合集"},{tab:tJ.SERIES,title:"短剧"}],t1=`//${tq}/creator-micro/content/manage?enter_from=personal_page`,t2=`//${tq}/creator-micro/content/collection/manage?enter_from=personal_page`,t5=`//${tq}/creator-micro/content/playlet/manage`,t3=`//${tX}/rule/policy?activeId=self_decipline&enter_from=pc_douyin_user_service_agreement`,t6={COMPILATION:"compilation",SERIES:"playlet"},t4=[{tab:tJ.COMPILATION,title:"合集",setLink:t2,total:0},{tab:tJ.SERIES,title:"短剧",setLink:t5,total:0}],t7=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.25a.75.75 0 0 0 0 1.5h1.09L7.54 4.298a.757.757 0 0 0-.058.066 4 4 0 1 0 .968 1.112.752.752 0 0 0 .15-.117L10.25 3.71V5a.75.75 0 0 0 1.5 0V2a.75.75 0 0 0-.75-.75H8zM5 10a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z",fill:"#168EF9"})}))),t8=(0,d.forwardRef)((e,t)=>(0,s.jsxs)("svg",(0,T._)((0,a._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,s.jsx)("mask",{id:"woman_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:-2,y:-2,width:16,height:16,children:(0,s.jsx)("path",{fill:"#C4C4C4",d:"M-2-2h16v16H-2z"})}),(0,s.jsxs)("g",{mask:"url(#woman_svg__a)",stroke:"#F5588E",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,s.jsx)("circle",{cx:7.2,cy:4.896,r:3.25}),(0,s.jsx)("path",{d:"M1.617 10.511l3.115-3.115M1.904 7.396l2.828 2.829"})]})]})));var t9=new eF.h({changeProfileTab:{eventName:"change_profile_tab",params:{enter_from:"",to_user_id:"",tab_name:""}},livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"web_others_homepage",enter_method:"web_live_btn",anchor_id:"",room_id:"",user_id:"",request_id:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_live_btn",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",request_id:""}},clickFollowCnt:{eventName:"click_follow_cnt",params:{enter_from:""}},clickFansCnt:{eventName:"click_fans_cnt",params:{enter_from:""}},topknotSettingShow:{eventName:"topknot_setting_show",params:{}},clickTopknotSetting:{eventName:"click_topknot_setting",params:{}},creatorManageEntranceShow:{eventName:"creator_manage_entrance_show",params:{type:"compilation"}},creatorManageEntranceClick:{eventName:"creator_manage_entrance_click",params:{type:"compilation"}},collectionCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},collectionCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0}},postVideoCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},videoCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:0,tab_name:"",enter_method:"click_tab",is_co_publish:0,co_publish_author_list:void 0}},clickFavoriteCollection:{eventName:"click_favorite_collection",params:{author_id:"",group_id:"",content:"video"}},recordCardShow:{eventName:"record_card_show",params:{enter_from:"personal_homepage",record_tab:""}},closeRecordShow:{eventName:"close_record_show",params:{}},closeRecordClick:{eventName:"close_record_click",params:{}},clearAllRecord:{eventName:"clear_all_record",params:{}},clearAllRecordShow:{eventName:"clear_all_record_show",params:{}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",sub_tab_type:"",action_type:"click",is_vs:1,vs_season_id:0,vs_episode_id:0,room_id:0,vs_ep_group_id:"",author_id:0,vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",recommend_rank_num:0}},vsVideoSeasonCoverShowV2:{eventName:"vs_video_season_cover_show_v2",params:{enter_from_merge:"",enter_method:"",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",action_type:"click",is_vs:1,author_id:0,vs_season_id:0,to_vs_episode_id:0,to_vs_ep_group_id:0,to_room_id:0,recommend_rank_num:0}},vsVideoSeasonCoverClickV2:{eventName:"vs_video_season_cover_click_v2",params:{enter_from_merge:"",enter_method:"",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",action_type:"click",is_vs:1,author_id:0,vs_season_id:0,to_vs_episode_id:0,to_vs_ep_group_id:0,to_room_id:0,recommend_rank_num:0,vs_click_position:"cover_click"}},openRecordShow:{eventName:"open_record_show",params:{}},openRecordClick:{eventName:"open_record_click",params:{}},clickMoreRecord:{eventName:"click_more_record",params:{}},search:{eventName:"search",params:{impr_id:"",enter_from:"",search_type:"general",enter_method:"normal_search",search_keyword:"",duration:0,is_success:0,anti_id:"",tab_name:""}},enterSearch:{eventName:"enter_search",params:{enter_from:"",tab_name:""}},clickLikeTab:{eventName:"click_like_tab",params:{enter_method:""}},noLikeToast:{eventName:"no_like_toast",params:{enter_method:""}},manageEntranceClick:{eventName:"manage_entrance_click",params:{tab_name:"",sub_tab_name:""}},manageExitClick:{eventName:"manage_exit_click",params:{tab_name:"",sub_tab_name:""}},userPageDataFetched:{eventName:"user_page_data_fetched",params:{cost:0,from_cache:0}},manageDeleteClick:{eventName:"manage_delete_click",params:{tab_name:"",sub_tab_name:"",item_cnt:0,icon_name:""}},recordTabClick:{eventName:"record_tab_click",params:{tab_name:""}},recordFilterTabClick:{eventName:"record_filter_tab_click",params:{sub_tab_name:""}},recordFilterConfirm:{eventName:"record_filter_confirm",params:{sub_tab_name:"",click_type:"",click_sub_type:""}},reserveLiveCardShow:{eventName:"reserve_live_card_show",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}},reserveLiveCardClick:{eventName:"reserve_live_card_click",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}},reserveLiveCardCancel:{eventName:"reserve_live_card_cancel",params:{enter_from:"personal_homepage",anchor_id:"",room_id:""}}});let le=e=>{var t,l;return[1,18,19].includes(null!==(l=null==e?void 0:null===(t=e.punishRemindInfo)||void 0===t?void 0:t.ban_type)&&void 0!==l?l:0)},lt=e=>{let{ban_type:t,prompt_bar:l,punish_content:n}=(null==e?void 0:e.punishRemindInfo)||{},{link_length:o}=l||{},{link_length:r,link_url:i}=n||{};return 2===t&&!!l&&!!n&&(!(o>0)||!(r>0)||!!decodeURIComponent(i).includes("aweme.snssdk.com/magic/eco/runtime/release/6086d26dbe98180570886317"))&&!0};var ll={notice:"uT0BENh4",noticeText:"kBunKptX",detailButton:"_rDGhq55",content:"utClVq4_",yellow:"zzt4vzpl"},ln=l("530147");let lo=e=>{let{isSelf:t}=e;return(0,s.jsxs)("p",{className:ll.content,children:["由于违反",(0,s.jsx)("a",{className:ll.yellow,href:`${t3}`,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),"的相关规定，该账号已被封禁"]})},lr=e=>{let{isSelf:t}=e;return(0,s.jsxs)("p",{className:ll.content,children:[t?"您":"该用户","违反",(0,s.jsx)("a",{className:ll.yellow,href:`${t3}`,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),"的相关规定被禁止发布作品"]})},li=e=>{let{content:t,link_index:l,link_length:n}=e.content||{},o=t.slice(0,l),r=t.slice(l,l+n),i=t.slice(l+n);return(0,s.jsxs)("p",{className:ll.content,children:[(0,s.jsx)("span",{children:o}),(0,s.jsx)("a",{className:ll.yellow,href:`${t3}`,target:"_blank",rel:"noopener noreferrer",children:r}),(0,s.jsx)("span",{children:i})]})},la=e=>{let{isAccountBan:t=!1,isSelf:l=!1}=e;(0,ln.Z)({title:t?"账号已被封禁":"违规处罚说明",confirmBtnText:"知道了",otherProps:{onlyConfirmButton:!0,renderContent:()=>t?(0,s.jsx)(lo,{isSelf:l}):(0,s.jsx)(lr,{isSelf:l})}})},ls=e=>{let{title:t,content:l}=e;(0,ln.Z)({title:t,confirmBtnText:"知道了",otherProps:{onlyConfirmButton:!0,renderContent:()=>(0,s.jsx)(li,{content:l})}})};var ld=new eF.h({personalRiskRemindBarShow:{eventName:"personal_risk_remind_bar_show",params:{enter_from:"",remind_type:"",is_skip:!1,warning_text:"",author_id:""}},personalRiskRemindBarClick:{eventName:"personal_risk_remind_bar_click",params:{enter_from:"",remind_type:"",warning_text:"",author_id:""}}});let lu=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M14.667 8A6.667 6.667 0 1 1 1.334 8a6.667 6.667 0 0 1 13.333 0zM8 4.667c-.366 0-.662.3-.657.666l.05 3.401a.608.608 0 0 0 1.215 0l.05-3.4A.657.657 0 0 0 8 4.666zm.734 6.066a.733.733 0 1 0-1.467 0 .733.733 0 0 0 1.467 0z",fill:"#FE2C55"})}))),lc=e=>{let{punishRemindInfo:t,uid:l}=e,{prompt_bar:n,punish_content:o,punish_title:r,ban_type:i}=t,{content:a,link_index:d,link_length:u}=n||{},c=d>0?a.slice(0,d):a,v=d>0?a.slice(d,d+u):"",m=(0,tA.x)((()=>{ld.sendLog("personalRiskRemindBarShow",{enter_from:(0,tf.vM)(),remind_type:String(i),warning_text:null==n?void 0:n.content,is_skip:!!(d>0&&v),author_id:l})}).bind(null));return(0,s.jsxs)("div",{className:ll.notice,ref:m,children:[(0,s.jsx)(lu,{}),(0,s.jsx)("span",{className:ll.noticeText,children:c}),!!(d>0&&v)&&(0,s.jsx)("span",{className:ll.detailButton,onClick:()=>{ld.sendLog("personalRiskRemindBarClick",{enter_from:(0,tf.vM)(),remind_type:String(i),warning_text:null==n?void 0:n.content,author_id:l}),ls({title:r,content:o})},children:v})]})},lv=e=>{let{desc:t,isFuzzyAuthor:l=!1,descExtra:n}=e,[o,r]=(0,d.useState)(!1),i=null==t?void 0:t.split("\n");if(1===i.length&&i[0].length<=30)return(0,s.jsx)(K.Z,{text:t,textExtra:n,enterMethod:"signature"});let u=(0,en.i)(i.join(" "),30);return u.length<=30?(0,s.jsx)(K.Z,{text:u,textExtra:n,enterMethod:"signature"}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:tP.descContainer,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[(0,s.jsx)(K.Z,{text:u,textExtra:null==n?void 0:n.filter(e=>e.start<=40).map(e=>(0,T._)((0,a._)({},e),{end:31<=(null==e?void 0:e.end)&&(null==e?void 0:e.end)<=33?33:null==e?void 0:e.end})),enterMethod:"signature"}),(0,s.jsx)("div",{className:tP.moreContainer,children:l?(0,s.jsx)("span",{onClick:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,G.default)({success:async()=>{window.location.reload()},enterMethod:"",headerText:"登录后查看全部简介",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},className:tP.login,children:"登录后查看更多"}):(0,s.jsx)("span",{className:tP.more,children:"更多"})}),!l&&o&&(0,s.jsx)("p",{className:tP.moreDesc,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:(0,s.jsx)(K.Z,{text:t,textExtra:n})})]})})},lm=e=>{var t,l,n,o;let{lastdate:r,isHideImpInfo:i}=e,{nickname:a,desc:u,descExtra:c,followingCount:v,mplatformFollowersCount:m,mplatformFollowersCountStr:h,totalFavorited:p,totalFavoritedStr:g,hideTotalFavorited:_,followStatus:x,customVerify:w,enterpriseVerifyReason:C,uniqueId:y,secret:b,isBlock:j,isBlocked:k,isBan:N,ipLocation:I,generalPermission:E,punishRemindInfo:S,gender:L,age:M,school:T,schoolVisible:R,uid:F,isOverFollower:P,accountCertInfo:D}=null!==(l=e.userInfo)&&void 0!==l?l:{},A=lt(e.userInfo),V=null!==(n=(0,d.useContext)(U.C))&&void 0!==n?n:{},{isSelf:z,updateFollowStatus:Z}=(0,d.useContext)(H),{userInfo:ee,dispatch:et}=null!==(o=(0,d.useContext)(O.Context))&&void 0!==o?o:{},el=(0,eo._Q)(),{isLogin:en,info:ei}=null!=ee?ee:{},[ed,eu]=(0,d.useState)(m),[ec,ev]=(0,d.useState)(v),[em,ef]=(0,d.useState)(!!(((null==V?void 0:null===(t=V.fuzzyAuthor)||void 0===t?void 0:t.whale_cut_fuzzy_author)||el)&&!en)),[eh,ep]=(0,d.useState)(i),{liveList:eg,updateData:e_,loading:ex,requestId:ew}=(0,q.Z)();(0,d.useEffect)(()=>{en&&z&&e_()},[en,z,V]),(0,d.useEffect)(()=>{var e;ef(!!(((null==V?void 0:null===(e=V.fuzzyAuthor)||void 0===e?void 0:e.whale_cut_fuzzy_author)||el)&&!en)),ep(!1)},[V,en]);let eC=t=>{let l=t===es.OK.follower,n=l?"粉丝":"关注";if(!en){(0,G.default)({headerText:`登录后查看${n}列表`,enterMethod:l?"fans_list":"follow_list",success:()=>{et({type:"updateUserInfo"})}});return}if(t9.sendLog(l?"clickFansCnt":"clickFollowCnt",{enter_from:z?"personal_homepage":"others_homepage"}),k||!z&&(null==E?void 0:E.following_follower_list_toast)===1||!z&&1===b&&[tY.NO,tY.REQUEST].includes(x)){X.F.info(`由于该用户隐私设置，${n}列表不可见`);return}if(j){X.F.info(`由于你已经拉黑对方，${n}列表不可见`);return}if(!z&&le(e.userInfo)){X.F.info(`账号违反社区规定，${n}列表不可见`);return}(0,ea.h)({title:t,followerCount:ed,followersCountStr:h,setFollowerCount:eu,followingCount:ec,setFollowingCount:ev,dispatch:et,isSelf:z,isLogin:en,currentUserUid:null==ei?void 0:ei.uid,currentUserInfo:e.userInfo,abtestData:V,selfInfo:ee,enterPosition:es.Hs.HomePage,logParams:{enter_from_merge:"personal_homepage",small_window_enter_method:"web_video_head_hover"}})};(0,d.useEffect)(()=>{let e=Y.a.addCb(e=>{if(z)return;let{action:t}=e;"follow"===t&&(1!==b&&eu(e=>e+1),null==Z||Z()),"unFollow"===t&&(4!==x&&eu(e=>Math.max(0,e-1)),null==Z||Z())});return()=>{e()}},[b,Z,x,z]);let ey=t$(e.userInfo),eb=T&&R!==$.SchoolVisible.Self;return(0,d.useEffect)(()=>B.listen(B.EVENT.UpdateSelfPageFollowCount,e=>{let{action:t}=e;"unFollow"===t?ev(e=>e>0?e-1:e):(t="follow",ev(e=>e+1))}),[]),(0,s.jsxs)("div",{className:tP.baseInfoContainer,"data-e2e":"user-info",children:[(0,s.jsxs)("div",{className:tP.nameInfo,children:[(0,s.jsx)("h1",{className:tP.nickname,children:(0,s.jsx)(K.Z,{text:a})}),(0,s.jsx)(Q.C,{className:tP.badge,accountCertInfo:D})]}),(0,s.jsxs)("div",{className:tP.countInfo,children:[(0,s.jsxs)("div",{className:f()(tP.item,tP.clickable),"data-e2e":"user-info-follow",onClick:()=>eC(es.OK.following),children:[(0,s.jsx)("div",{className:tP.title,children:"关注"}),(0,s.jsx)("div",{className:tP.count,children:eh?"":(0,er.qe)(ec,em)}),z&&(null==eg?void 0:eg.length)>0&&(0,s.jsx)(tW,{liveList:eg,loading:ex,onHover:e_,abTestData:V,requestId:ew})]}),(0,s.jsxs)("div",{className:f()(tP.item,tP.clickable),"data-e2e":"user-info-fans",onClick:()=>eC(es.OK.follower),children:[(0,s.jsx)("div",{className:tP.title,children:"粉丝"}),(0,s.jsx)("div",{className:tP.count,children:eh?"":!z&&h?h:(0,er.lN)({number:ed,isOver:P,uid:F,isSlice:em})})]}),(z||1!==_)&&(0,s.jsxs)("div",{className:f()(tP.item),"data-e2e":"user-info-like",children:[(0,s.jsx)("div",{className:tP.title,children:"获赞"}),(0,s.jsx)("div",{className:tP.count,children:eh?"":!z&&g?g:(0,er.qe)(p,em)})]})]}),(0,s.jsxs)("p",{className:tP.otherInfo,children:[(0,s.jsxs)("span",{className:tP.uniqueId,children:["抖音号：",y]}),I&&(0,s.jsx)("span",{className:tP.location,children:I}),("number"==typeof L&&0!==L||"number"==typeof M&&-1!==M)&&(0,s.jsxs)("span",{className:tP.tag,children:[0!==L&&(0,s.jsx)(J.Z,{src:1===L?t7:t8,width:12,height:12,viewBox:"0 0 12 12",style:{marginRight:"4px"}}),-1!==M?(0,s.jsxs)("span",{children:[M,"岁"]}):(0,s.jsx)("span",{children:1===L?"男":"女"})]}),ey&&(0,s.jsx)("span",{className:tP.tag,children:ey}),eb&&(0,s.jsx)("span",{className:tP.tag,children:T})]}),r&&(0,s.jsxs)("p",{className:tP.lastdate,children:["最新作品发布时间：",W()(1e3*r).format("YYYY-MM-DD HH:mm")]}),u&&(0,s.jsx)("div",{className:tP.descInfo,children:(0,s.jsx)(lv,{desc:u,isFuzzyAuthor:em,descExtra:(null==V?void 0:V.hasUserEdit)?c:void 0})}),A&&(0,s.jsx)(lc,{punishRemindInfo:e.userInfo.punishRemindInfo,uid:F})]})};var lf=e=>{var t,l,n;let{userInfo:o,logId:r,lastdate:i,isHideImpInfo:a,hideMarginTop:u}=e,{isSelf:c}=null!==(t=(0,d.useContext)(H))&&void 0!==t?t:{},{dispatch:v,userInfo:m}=null!==(l=(0,d.useContext)(O.Context))&&void 0!==l?l:{},h=null!==(n=(0,d.useContext)(U.C))&&void 0!==n?n:{},[p,g]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{g((0,ei.Jo)()||(0,ei.G1)())},[]),(0,s.jsxs)("div",{className:f()(tP.infoContainer,tP.hasNav,tP.newUi,tP.videoPerf,{[tP.marginTop]:u}),children:[(0,s.jsx)(td,{userInfo:o,logId:r}),(0,s.jsx)(lm,{userInfo:o,lastdate:i,isHideImpInfo:a,abtestData:h}),(0,s.jsx)("div",{className:f()(tP.btns,{[tP.otherShowDownload]:p&&!c}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:tP.moreShare,children:[!c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tS,{userInfo:o,dispatch:v,currentUserInfo:null==m?void 0:m.info,isLogin:null==m?void 0:m.isLogin,className:f()(tP.moreStyle,{[tP.moreGap]:0===o.secret})}),(0,s.jsx)(Z.NoSSR,{children:(0,s.jsx)(tF,{userInfo:o,isTextType:!0,className:tP.shareClass})})]}),c?(0,s.jsx)(Z.NoSSR,{children:(0,s.jsx)(ee.Z,{pageIndex:"personal_homepage",classname:tP.trustLoginSwitch,iconPosition:"left",showHoverInfo:!0})}):null]}),(0,s.jsxs)("div",{className:tP.midBtnContainer,children:[c&&(null==h?void 0:h.hasUserEdit)?(0,s.jsx)(e7,{userInfo:o,className:tP.editorClass}):null,!c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ty,{userInfo:o,className:tP.btnBgColor}),(0,s.jsx)(tx,{userInfo:o,className:tP.btnBgColor,type:"user"})]})]}),(0,s.jsxs)("div",{className:tP.btnContainer,children:[(0,s.jsxs)("div",{className:tP.follwImEdit,children:[c&&(null==h?void 0:h.hasUserEdit)?(0,s.jsx)(e7,{userInfo:o,className:tP.editorClass}):null,!c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tx,{userInfo:o,className:tP.btnBgColor,type:"user"}),(0,s.jsx)(ty,{userInfo:o,className:tP.btnBgColor})]})]}),m.isLogin&&p&&(0,s.jsx)(et.eD,{hintText:"下载电脑客户端，桌面快捷访问",log:{enterFrom:"personal_homepage",type:"personal_homepage_button",channelId:el.g.PersonalHomepage},isLogin:!0,className:tP.downloadBar,textContainerClassName:tP.downloadBarText,downloadHintClassName:tP.downloadHintClassName,downloadButtonClassNmae:tP.downloadButtonClassNmae,defaultShow:!1})]})]})})]})},lh=l("848800"),lp=l("839965");let lg=()=>{var e;return n=null!=n?n:null===(e=document.getElementById("douyin-header"))||void 0===e?void 0:e.offsetHeight};var l_=l("657536");let lx=(0,d.createContext)({});var lw=l("42233"),lC={tabBarContainer:"Pw3CDvJg",sticky:"nCzLCfjg",inner:"N22Vlhia",tipContainer:"y5xKqbiA",tipText:"fQfGTaqg",tabListContainer:"VY99MKHS",tab:"JzsZWCbL",title:"o6Nh4ZXh",count:"PCbKMDUa",icon:"S5jSBDPn",active:"FMZAE2IV",postContainer:"wIvaVmr6"};let ly=()=>(0,d.useContext)(U.C),lb=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.714 16.714a1.286 1.286 0 0 0 2.572 0v-3.428h3.428a1.286 1.286 0 1 0 0-2.572h-3.428V7.286a1.286 1.286 0 0 0-2.572 0v3.428H7.286a1.286 1.286 0 1 0 0 2.572h3.428v3.428z",fill:"#FE2C55"})})));var lj={midInfoContainer:"hWi4et1X",unfollow:"ovbAsT2X",avatar:"FbIP_BVN",follow:"ynj0IZIY",chat:"it6BltA7"},lk=e=>{var t,l,n;let{userInfo:o}=e,{uid:r,followStatus:i,followerStatus:a}=o;ly();let{isSelf:u}=(0,d.useContext)(H),{userInfo:c,dispatch:v}=null!==(n=(0,d.useContext)(O.Context))&&void 0!==n?n:{},{isLogin:m}=null!=c?c:{},{follow:h,unFollow:p}=(0,tv.OM)({selfUid:null==c?void 0:null===(t=c.info)||void 0===t?void 0:t.uid,actionUid:r,defaultFollowerStatus:a,defaultFollowStatus:i,isLogin:!!m,onLoginSuccess:()=>null==v?void 0:v({type:"updateUserInfo"}),logExtraParams:{to_user_id:r,enter_from:(0,tf.mo)(),is_full_screen:(0,th.r)()?"1":"0"}}),{followStatus:g,buttonType:_}=(0,tm.r)({selfUid:null==c?void 0:null===(l=c.info)||void 0===l?void 0:l.uid,actionUid:r,defaultFollowerStatus:a,defaultFollowStatus:i}),x=_===tc.TT.Active;return u?null:(0,s.jsxs)("div",{className:f()(lj.midInfoContainer,{[lj.unfollow]:x}),onClick:x?()=>{(0,tp.V)(g)?p():h()}:()=>{B.emit(B.EVENT.sendImUserMsg,{uid:o.uid,enterMethod:"im_private"})},children:[(0,s.jsx)("img",{className:lj.avatar,src:o.avatarUrl,alt:o.nickname}),x?(0,s.jsxs)("div",{className:lj.follow,children:[(0,s.jsx)(lb,{}),(0,s.jsx)("span",{children:"关注"})]}):(0,s.jsx)("span",{className:lj.chat,children:"私信"})]})};let lN=e=>{let{text:t=""}=e;return(0,s.jsx)(ed.u,{className:lC.tipContainer,position:"bottom",content:(0,s.jsx)("span",{className:lC.tipText,children:t}),children:(0,s.jsx)(l_.Z,{})})},lI=e=>{var t,l;let n=null!==(l=(0,d.useContext)(U.C))&&void 0!==l?l:{},{userInfo:{isLogin:o=!1}={}}=(0,d.useContext)(O.Context)||{},{userAwemeCount:r=-1,userFavoriteCount:i=-1}=(0,d.useContext)(lx),a=!!(((null==n?void 0:null===(t=n.fuzzyAuthor)||void 0===t?void 0:t.whale_cut_fuzzy_author)||(0,eo._Q)())&&!o),{userInfo:u,currentTab:c,setCurrentTab:v}=e,{showFavoriteList:m,favoritePermission:h}=u,{isSelf:p}=(0,d.useContext)(H),g=!p&&!m||p&&1===h,_=new Map([["post","user-work-tab"],["like","user-like-tab"],["favorite_collection","user-favorite-tab"],["user-history-tab","user-history-tab"],["watch_later","user-watchlater-tab"]]),x=[{title:"作品",key:"post",modeFrom:"userPost",count:r},{title:"喜欢",key:"like",modeFrom:"userLike",count:i,lock:g},{title:"收藏",key:"favorite_collection",modeFrom:"userCollection",count:-1,lock:!0,lockText:"只能看到自己收藏的列表",hidden:!p},{title:"观看历史",key:"record",modeFrom:"userRecord",lock:!0,count:-1,hidden:!p},{title:"稍后再看",key:"watch_later",modeFrom:"watch_later",lock:!0,count:-1,hidden:!p},{title:"我的预约",key:"my_appointment",modeFrom:"my_appointment",lock:!0,count:-1,hidden:!p}];(0,d.useEffect)(()=>{if(!!p)B.emit(B.EVENT.selfPageCountUpdate,{post:r,like:i})},[r,i,p]);let w=e=>{v(e),(0,lp.d)((0,lw.V)(),0,500),t9.sendLog("changeProfileTab",{enter_from:(0,tf.yW)(),tab_name:e,to_user_id:null==u?void 0:u.uid})};return(0,s.jsx)(ed.mQ,{className:lC.tabListContainer,activeKey:c,onChange:e=>w(e),children:x.filter(e=>!e.hidden).map(e=>{let t=(0,er.qe)(Number(e.count));return(0,s.jsx)(ed.Jm,{itemKey:e.key,"data-e2e":_.get(e.key)||"",tab:(0,s.jsxs)("div",{className:f()(lC.tab,{[lC.active]:c===e.key}),children:["post"===e.key?(0,s.jsxs)("h2",{className:lC.postContainer,children:[(0,s.jsx)("span",{className:lC.title,children:e.title}),-1!==e.count&&(0,s.jsx)("span",{className:lC.count,"data-e2e":"user-tab-count",children:a&&e.count>=100?`${t}+`:t})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:lC.title,children:e.title}),-1!==e.count&&(0,s.jsx)("span",{className:lC.count,"data-e2e":"user-tab-count",children:a&&e.count>=100?`${t}+`:t})]}),e.lock&&(0,s.jsx)("div",{className:lC.icon,"data-e2e":"user-tab-icon",children:e.lockText?(0,s.jsx)(lN,{text:e.lockText}):(0,s.jsx)(l_.Z,{})})]})},e.key)})})};var lE=e=>{var t;let{userInfo:l,currentTab:n,setCurrentTab:o,children:r,topNavHeight:i=lg()}=e;return t=(0,d.useContext)(U.C),(0,s.jsx)(lh.Z,{topOffset:-i,children:e=>{let{style:t,isSticky:i}=e;return(0,s.jsx)("div",{className:f()(lC.tabBarContainer,{[lC.sticky]:i}),style:tG(i,t),id:"user-tabbar",children:(0,s.jsxs)("div",{className:lC.inner,children:[(0,s.jsx)(lI,{userInfo:l,currentTab:n,setCurrentTab:o}),i&&(0,s.jsx)(lk,{userInfo:l}),r]})})}})},lS=l("868899"),lL=l.n(lS),lM=l("891617"),lT=l("51876"),lR=l("998164"),lF=l("609389"),lP=l("140433"),lD=l("890242"),lA=l("513519");let lV=new eF.h({pageView:{eventName:"page_view",params:{url:"",url_path:"",enter_from:"",link_from:"",theme:"light",is_topknot:0,from_push:0,seo_vids:"",physical_screen_num:0,physical_screen_info:"",open_from_page:"",multi_window_order:"",multi_window_open_from:"",sidebar_status:"open"}},pageViewV2:{eventName:"page_view_v2",params:{url:"",url_path:"",enter_from:"",link_from:"",theme:"light",is_topknot:0,from_push:0,seo_vids:"",physical_screen_num:0,physical_screen_info:"",open_from_page:"",multi_window_order:"",multi_window_open_from:""}},pageStayTime:{eventName:"page_stay_time",params:{url:"",url_path:"",enter_from:"",duration:0,is_visible:1,sidebar_status:"open",link_from:""}},enterPersonalHomepage:{eventName:"enter_personal_homepage",params:{enter_method:"",enter_from:"",from_gid:"",tab_name:"",is_personal_panel_video:0}},enterPersonalDetail:{eventName:"enter_personal_detail",params:{to_user_id:"",is_private:0,enter_method:"",enter_from:"",from_gid:"",is_full_screen:"0",tab_name:"",event_page:"",enter_from_merge:"",relation:void 0}},changeProfileTab:{eventName:"change_profile_tab",params:{enter_from:"",to_user_id:"",tab_name:""}},follow:{eventName:"follow",params:{enter_from:"",to_user_id:"",item_duration_ms:0}},unfollow:{eventName:"unfollow",params:{enter_from:"",to_user_id:""}},collectionCoverShow:{eventName:"video_cover_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:""}},collectionCoverClick:{eventName:"video_cover_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",rank:0,from_xigua:0,compilation_id:"",compilation_video_cnt:0,aweme_type:""}},clickFavoriteCollection:{eventName:"click_favorite_collection",params:{author_id:"",group_id:"",content:"video"}},openRecordShow:{eventName:"open_record_show",params:{}},openRecordClick:{eventName:"open_record_click",params:{}},clickMoreRecord:{eventName:"click_more_record",params:{}},recordCardShow:{eventName:"record_card_show",params:{}},closeRecordShow:{eventName:"close_record_show",params:{}},closeRecordClick:{eventName:"close_record_click",params:{}},clearAllRecord:{eventName:"clear_all_record",params:{}},clearAllRecordShow:{eventName:"clear_all_record_show",params:{}},creatorManageEntranceShow:{eventName:"creator_manage_entrance_show",params:{type:"compilation"}},creatorManageEntranceClick:{eventName:"creator_manage_entrance_click",params:{type:"compilation"}},managePopupShow:{eventName:"manage_popup_show",params:{tab_name:"",sub_tab_name:"",item_cnt:0}},managePopupConfirm:{eventName:"manage_popup_confirm",params:{tab_name:"",sub_tab_name:"",item_cnt:0,icon_name:""}},managePopupCancel:{eventName:"manage_popup_cancel",params:{tab_name:"",sub_tab_name:"",item_cnt:0}},userCacheInvalid:{eventName:"user_cache_invalid",params:{message:""}}}),lB=e=>{let{isRetry:t=!1,needRetryCount:l=0,itemName:n="选项",operation:o="操作",count:r=0,addedDesc:i=""}=e;return t&&l?{title:`有 ${l} 个${n}未成功${o}`,cancelBtnText:`暂不${o}`,confirmBtnText:`继续${o}`}:{title:`确认${o} ${r} 个${n}, ${o}后不可恢复${i}`,cancelBtnText:`暂不${o}`,confirmBtnText:`确认${o}`}};function lH(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{maxSelectedCount:t=50,operate:l,operateDesc:n={operation:"操作",itemName:"选项"},customModalDesc:o,addDescription:r,onManageEndCallback:i,tabName:s="post",subTabName:u="video",iconName:c=""}=e,[v,m]=(0,d.useState)(!1),[f,h]=(0,d.useState)(!1),[p,g]=(0,d.useState)(0),[_,x]=(0,d.useState)([]),w=(0,d.useRef)(!1),[C,y]=(0,d.useState)(!1),[b,j]=(0,d.useState)("initial"),[k,N]=(0,d.useState)([]),I=(0,d.useRef)(()=>{}),E=(0,d.useCallback)(e=>h(e),[]);(0,d.useEffect)(()=>{h(C||!v)},[C,v]);let S=(0,d.useCallback)(e=>{m(e),!e&&(g(0),x([]),N([]),j("initial"),h(!1),y(!1),w.current=!1)},[m]),L=(0,d.useCallback)(e=>{var t;x(e),g(null!==(t=e.length)&&void 0!==t?t:0)},[]),M=(0,d.useCallback)(e=>{y(e),e&&lV.sendLog("managePopupShow",{item_cnt:p,tab_name:s,sub_tab_name:u})},[y,p,s,u]),R=(0,d.useCallback)(e=>{I.current=e},[]);(0,d.useEffect)(()=>{!C&&(j("initial"),w.current=!1)},[C]),(0,d.useEffect)(()=>{let e=()=>{S(!1)},t=B.listen(B.EVENT.openImAwemeModal,e),l=B.listen(B.EVENT.openNoticeAwemeModal,e);return()=>{null==t||t(),null==l||l()}},[S]),(0,d.useEffect)(()=>{let e=B.listen(B.EVENT.feedbackVisibleChange,e=>{h(null!=e&&e)});return()=>{e()}},[]);let F=(0,d.useCallback)(()=>{var e;null==I||null===(e=I.current)||void 0===e||e.call(I),S(!1),null==i||i({manageCount:p-k.length})},[i,S,p,null==k?void 0:k.length]),P=(0,d.useCallback)(async()=>{var e;let{isSuccess:t=!1,fatalIds:o=[],isFailForRisk:r=!1,statusCode:i=-1,statusMsg:a="操作失败, 请稍后重试"}=null!==(e=await (null==l?void 0:l(_)))&&void 0!==e?e:{},{operation:s="取消",itemName:d="视频"}=null!=n?n:{};if(t){X.F.info(`${s}成功`),S(!1),F();return}if(0!==i){X.F.info(a),j("initial"),S(!1),F();return}w.current||r?(o.length>0&&X.F.info(`有${o.length}个${d}因风险因素未能成功${s}`),S(!1),F()):(j("retry"),N(o))},[l,S,F,n,_]),D=(0,d.useCallback)(()=>{var e;if(!C)return null;let t=null!=o?o:lB;return(0,lA.renderWebConfirm)((0,T._)((0,a._)({},t((0,T._)((0,a._)({count:p,needRetryCount:k.length,isRetry:"retry"===b||w.current},n),{addedDesc:null!==(e=null==r?void 0:r(_))&&void 0!==e?e:"",items:_}))),{onCancel:()=>{if("loading"!==b)"retry"===b&&F(),"initial"===b&&lV.sendLog("managePopupCancel",{item_cnt:p,tab_name:s,sub_tab_name:u}),y(!1)},onConfirm:async()=>{if("loading"!==b)"retry"===b&&(w.current=!0),"initial"===b&&lV.sendLog("managePopupConfirm",{item_cnt:p,tab_name:s,sub_tab_name:u,icon_name:c}),j("loading"),await P()}}))},[C,p,y,P,b,F,k,_,o,r,n,s,u,c]);return{isListSelectable:v,changeListSelectable:S,selectedCount:p,maxSelectedCount:t,selectItems:_,changeSelectedItems:L,showConfirm:C,isSelectDisabled:f,renderConfirmModal:D,changeShowConfirm:M,setResetScrollList:R,updateIsSelectDisabled:E}}let lU=()=>(0,d.createContext)({}),lO=lU();var lz={post:"XjDZcrDT",header:"guymAAuI",noMarginBottom:"s6ciyuFk",tabContainer:"aIGpvXFS",title:"_tX_J93m",setIcon:"tvNWzgGO",active:"CLB6XYFj",setLink:"elGLhtXN",tool:"ul1KmTQh",tip:"_5z_aLxa",descText:"QTKb_USA",fuFang:"twIUAEAP",tipText2:"g8mQOasO",bottomTip:"b5royqDy",tipClassName:"XIxO_rAy",list:"LPv6KBIL",hasLook:"nAGzzq00",btn:"R8WwCQBh",text:"rPQzq8El",empty:"_p8WhsVs"},lW=l("250751"),lZ=l("538846"),l$=l("830320"),lK=l("233914"),lG=l("550499"),lq=l("135524"),lX=l("837305"),lY=l("697878"),lQ=l("351492"),lJ=l("718523"),l0=l("318086"),l1=l("528557"),l2=l("574868"),l5=l("477509"),l3=l("806212"),l6=l("169774"),l4=l.n(l6),l7=l("147083"),l8=l("552432"),l9=l.n(l8);let ne=(e,t,l)=>{let{scrollTop:n,scrollLeft:o,clientWidth:r,clientHeight:i}=l;return"down"===e?{x:t.x+t.width,y:i+n}:"up"===e?{x:t.x+t.width,y:n}:"left"===e?{x:o,y:t.y+t.height}:"right"===e?{x:r+o,y:t.y+t.height}:{x:t.x,y:t.y}},nt=(e,t)=>Math.abs(e.x-t.x)<=(e.width+t.width)/2&&Math.abs(e.y-t.y)<=(e.height+t.height)/2,nl=(e,t)=>{var l;let{top:n,left:o}=null===(l=t.getBoundingClientRect)||void 0===l?void 0:l.call(t);return{x:e.clientX-o,y:e.clientY-n}},nn=(e,t)=>({x:(t.x+e.x)/2,y:(t.y+e.y)/2,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),no=(e,t,l,n)=>e.map(e=>{let{clientHeight:o,clientWidth:r}=t,{scrollTop:i,scrollLeft:a}=l,s=e.y+e.height>i+n.top,d=Math.max(0,i+n.top-e.y),u=e.y<i+o-n.bottom,c=Math.max(0,e.y+e.height-i-o),v=e.x+e.width>a+n.left,m=Math.max(0,a+n.left-e.x),f=e.x<a+r-n.right,h=Math.max(0,e.x+e.width-a-r);return{item:e.item,desc:e.item.desc,isShow:s&&u&&v&&f,rect:{x:e.x+e.width/2+m/2-h/2,y:e.y+e.height/2+d/2-c/2,height:e.height-d-c,width:e.width-m-h}}});var nr=l("448454"),ni={container:"q4SagWHl",mask:"HTX6t0xr",checkBox:"DuRlkSVW",disableIcon:"asI7OxqF",descIcon:"pWfsQM94",maskDisabled:"OIHTsau7",tip:"zqffU39Z",tipText:"jdSgM4BF",coverShadowLayer:"etHy819E"};let na=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:15,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.501 1.75a6.25 6.25 0 1 0 0 12.5 6.25 6.25 0 0 0 0-12.5zm-.954 4.103c-.191.201-.296.48-.296.772a.625.625 0 0 1-1.25 0c0-.583.208-1.18.641-1.634.441-.463 1.079-.741 1.859-.741s1.418.278 1.859.74c.433.456.641 1.052.641 1.635 0 .995-.642 1.587-1.077 1.988l-.06.056c-.482.447-.738.726-.738 1.206h-1.25c0-1.067.663-1.682 1.119-2.105l.018-.017c.504-.468.738-.712.738-1.128 0-.292-.105-.57-.296-.772C8.27 5.66 7.97 5.5 7.5 5.5s-.77.16-.954.353zm1.735 5.428a.781.781 0 1 1-1.562 0 .781.781 0 0 1 1.562 0z",fill:"#fff",fillOpacity:".34"})}))),ns=e=>{let{maskShadowStyle:t={},maskClassName:l="",isSelected:n=!1,onClickCard:o,info:r,disabled:i=!1,disabledDesc:a=""}=e,u=(0,d.useRef)(null);return(0,s.jsx)("div",{className:ni.container,children:(0,s.jsx)("div",{className:f()(ni.mask,{[ni.maskDisabled]:i&&!n}),onClick:e=>{r&&(null==o||o(e,r))},children:(0,s.jsxs)("div",{className:f()(ni.coverShadowLayer,l),style:t,children:[i&&!n&&a&&(0,s.jsx)("div",{className:ni.disableIcon,children:(0,s.jsx)(ed.u,{position:"bottomRight",content:(0,s.jsx)("span",{className:ni.tipText,children:a}),getPopupContainer:()=>u.current||document.body,children:(0,s.jsx)("div",{className:ni.tip,ref:u,children:(0,s.jsx)(J.Z,{src:na,className:ni.descIcon,viewBox:"0 0 16 16",height:16,width:16})})})}),(0,s.jsx)(ed.XZ,{disabled:i&&!n,checked:n,className:ni.checkBox})]})})})},nd=e=>(0,s.jsx)(ns,(0,a._)({},e)),nu=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{containerEl:t,scrollEl:l}=e,n=(0,d.useRef)(t),o=(0,d.useRef)(l);return(0,d.useEffect)(()=>{n.current=null!=t?t:document.querySelector("#user_detail_element"),o.current=null!=l?l:(0,lw.V)()},[t,l]),{containerEleRef:n,scrollEleRef:o}};function nc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lO,{getItemId:l,dataList:n=[],containerEleRef:o,scrollEleRef:r,stickyArea:i,getColumnCount:a,firstItem:s,itemMargin:u,isSupportMulti:c=!0,getItemSelectedDisabled:v,maskShadowStyle:m}=e,{isListSelectable:f,maxSelectedCount:h=0,selectedCount:p=0,changeSelectedItems:g,selectItems:_=[]}=(0,d.useContext)(t),x=(0,d.useRef)({}),[w,C]=(0,d.useState)(""),y=(0,d.useRef)(!1),b=(0,d.useRef)(!1);(0,d.useEffect)(()=>{!f&&(y.current=!1,b.current=!1,C(""))},[f]),(0,d.useEffect)(()=>{if(!y.current&&l){let e={};null==_||_.forEach(t=>e[l(t)]=!0),x.current=e}},[_,l]);let j=(0,d.useCallback)(function(){var e,t;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l?null!==(t=null==n?void 0:null===(e=n.filter)||void 0===e?void 0:e.call(n,e=>{var t;return null==o?void 0:null===(t=o.includes)||void 0===t?void 0:t.call(o,null==l?void 0:l(e))}))&&void 0!==t?t:[]:[]},[n,l]),k=(0,d.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];y.current=!t;let l=l4()(x.current),n=[];e.forEach(e=>{l[e]?delete l[e]:n.push(e)});let o=Object.keys(l);(null==o?void 0:o.length)+(null==n?void 0:n.length)>h&&!b.current&&(l7.F.info("单次批量操作已达50个上限哦～"),b.current=!0,setTimeout(()=>{b.current=!1},3e3));let r=j([...o,...n.slice(0,h-o.length)]);r=r.filter(e=>{var t;return!(null==v?void 0:null===(t=v(e))||void 0===t?void 0:t.disabled)}),null==g||g(r)},[g,h,j,v]),N=(0,d.useCallback)(e=>{var t,n;return(null===(n=_.filter)||void 0===n?void 0:null===(t=n.call(_,t=>(null==l?void 0:l(t))===e))||void 0===t?void 0:t.length)>0},[_,l]),I=(0,d.useCallback)(e=>{var t,n;let o=null==l?void 0:l(e);if(!f||!nd||!o)return null;let{disabled:r=!1,disabledDesc:i=""}=null!==(t=null==v?void 0:v(e))&&void 0!==t?t:{};return nd({info:e,isSelected:null!==(n=null==N?void 0:N(o))&&void 0!==n&&n,onClickCard:(e,t)=>{c?C(o):null==k||k([o],!0)},disabled:r||p>=h,disabledDesc:i,maskShadowStyle:m})},[f,N,p,h,l,v,m,c,k]),{getItemPosList:E}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{dataList:t=[],firstItem:l,getColumnCount:n,itemMargin:o={top:0,bottom:0,left:0,right:0},containerEleRef:r}=e;return{getItemPosList:(0,nr.Z)(()=>{var e,i,a,s,d,u;if(!(null==r?void 0:null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect)||!l)return[];let c=null!==(s=null==n?void 0:n())&&void 0!==s?s:0;if(0===c)return[];let{height:v=0,width:m=0,top:f,left:h}=null!==(d=null==l?void 0:null===(i=l.getBoundingClientRect)||void 0===i?void 0:i.call(l))&&void 0!==d?d:{},{top:p,left:g}=null==r?void 0:null===(a=r.current)||void 0===a?void 0:a.getBoundingClientRect(),_=h-g,x=f-p;return null!==(u=null==t?void 0:t.map((e,t)=>{let l=Math.floor(t/c),n=Math.floor(t%c);return{item:e,x:_+(c+1)*o.left+n*(m+o.left+o.right),y:x+(l+1)*o.top+l*(v+o.top+o.bottom),height:v,width:m}}))&&void 0!==u?u:[]})}}({getColumnCount:a,dataList:n,firstItem:s,containerEleRef:o,itemMargin:u});return!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lO,{containerEleRef:l,scrollEleRef:n,getItemPosList:o,stickyArea:r={top:0,bottom:0,left:0,right:0},updateSelectedList:i,latestClickedCardId:a,getItemId:s,isDisabledMultiSelected:u=!1}=e,c=(0,d.useRef)(!1),v=(0,d.useRef)(!1),m=(0,d.useRef)({x:-1,y:-1}),f=(0,d.useRef)({x:-1,y:-1}),{isListSelectable:h,isSelectDisabled:p}=(0,d.useContext)(t),[g,_]=(0,d.useState)([]),x=(0,d.useRef)([]),w=(0,d.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!o)return;let t=no(o(),null==l?void 0:l.current,null==n?void 0:n.current,C.current.stickyArea),r=nn(m.current,f.current),i=null==t?void 0:t.filter(e=>e.isShow);return null==i||i.forEach(t=>{var l,n,o,i,a,s;let d=t.item,u=null===(l=(n=C.current).getItemId)||void 0===l?void 0:l.call(n,d);if(!u||e.includes(u))return;let c=nt(r,t.rect),v=null!==(i=null===(o=x.current)||void 0===o?void 0:o.indexOf(u))&&void 0!==i?i:-1,m=-1!==v;c&&!m&&(null===(a=x.current)||void 0===a||a.push(u)),!c&&m&&(null===(s=x.current)||void 0===s||s.splice(v,1))}),_(x.current),x.current},[l]),C=(0,d.useRef)({stickyArea:r,updateSelectedList:i,getItemId:s,updateRectCrossSelected:w});C.current={stickyArea:r,updateSelectedList:i,getItemId:s,updateRectCrossSelected:w},(0,d.useEffect)(()=>{let e=e=>{if(!c.current&&!p&&!!(null==l?void 0:l.current))c.current=!0,v.current=!0,m.current=nl(e,l.current)},t=e=>{var t,n;if(!!v.current&&!!(null==l?void 0:l.current))f.current=nl(e,l.current),w(),null===(t=(n=C.current).updateSelectedList)||void 0===t||t.call(n,x.current,!0),v.current=!1,c.current=!1,x.current=[],_([])},n=e=>{var t,n;if(!!v.current&&!!(null==l?void 0:l.current))f.current=nl(e,l.current),w(),null===(t=(n=C.current).updateSelectedList)||void 0===t||t.call(n,x.current)};if(u||!(null==l?void 0:l.current)||!h)return;let o=l.current;return null==o||o.addEventListener("mousedown",e),null==o||o.addEventListener("mouseup",t),null==o||o.addEventListener("mousemove",n),null==o||o.addEventListener("mouseover",n),()=>{null==o||o.removeEventListener("mousedown",e),null==o||o.removeEventListener("mouseup",t),null==o||o.removeEventListener("mousemove",n),null==o||o.removeEventListener("mouseover",n)}},[l,h,p,u,w]);let y=(0,d.useRef)(!1);(0,d.useEffect)(()=>{let e=e=>{var t,l,n;return null===(n=o())||void 0===n?void 0:null===(l=n.filter)||void 0===l?void 0:null===(t=l.call(n,t=>{var l,n;return(null===(l=(n=C.current).getItemId)||void 0===l?void 0:l.call(n,null==t?void 0:t.item))===e}))||void 0===t?void 0:t[0]},t=t=>{var l,r;if(!(null==n?void 0:n.current)||!a||!o)return;let i=e(a);m.current={x:i.x,y:i.y},x.current=[],f.current=ne(t,i,n.current),w([a]),null===(l=(r=C.current).updateSelectedList)||void 0===l||l.call(r,x.current)},r=e=>{if(v.current)return;if("ShiftLeft"===e.code||"ShiftRight"===e.code){c.current=!0,y.current=!0,document.body.style.overflow="hidden";return}if(!e.shiftKey)return;if(e.stopPropagation(),e.preventDefault(),!!["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.code))"ArrowDown"===e.code?t("down"):"ArrowUp"===e.code?t("up"):"ArrowLeft"===e.code?t("left"):"ArrowRight"===e.code&&t("right")},i=e=>{if(!e.shiftKey&&y.current){var t,l;null===(t=(l=C.current).updateSelectedList)||void 0===t||t.call(l,x.current,!0),c.current=!1,y.current=!1,document.body.style.overflow="",x.current=[],_([])}},s=l9()(e=>{y.current&&(e.preventDefault(),e.deltaY<0?t("down"):e.deltaY>0?t("up"):e.deltaX<0?t("left"):e.deltaX>0&&t("right"))},500,{leading:!0});if(!u&&!!(null==l?void 0:l.current)&&!v.current&&!!a&&!p)return document.addEventListener("keydown",r,!0),document.addEventListener("keyup",i,!0),document.addEventListener("wheel",s),()=>{document.removeEventListener("keydown",r,!0),document.removeEventListener("keyup",i,!0),document.removeEventListener("wheel",s)}},[l,w,p,u,a]),c.current}({containerEleRef:o,scrollEleRef:r,getItemPosList:E,stickyArea:i,updateSelectedList:k,latestClickedCardId:w,getItemId:l,isDisabledMultiSelected:!c},t),{updateSelectedList:k,withMask:I,latestClickedCardId:w}}var nv=e=>{let{resetStatusFunc:t,scrollListRef:l,scrollElementRef:n,topOffset:o=0}=e,{setResetScrollList:r,isListSelectable:i}=(0,d.useContext)(lO);(0,d.useEffect)(()=>{i&&(null==r||r(()=>{var e,r,i,a,s;null==l||null===(r=l.current)||void 0===r||null===(e=r.reset)||void 0===e||e.call(r),null==t||t(),null===(i=n.current)||void 0===i||i.scrollTo({top:o}),null==l||null===(s=l.current)||void 0===s||null===(a=s.reload)||void 0===a||a.call(s)}))},[i,r,t,n,l,o])},nm=l("66959");let nf=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:o,userAwemeList:r,scrollRef:i,modalVideoIndex:a,additionalDistance:s=-60,notSeenItemList:u=[]}=e,[c,v]=(0,d.useState)(!1),m=(0,d.useRef)(t),f=(0,d.useRef)(-1),h=(0,d.useRef)(!1),p=(0,d.useRef)(a);return(0,d.useEffect)(()=>{p.current=a},[a]),(0,d.useEffect)(()=>()=>{var e;if(p.current===m.current)return;let t=window.innerWidth<=l3.I?3:6,l=e=>Math.floor(e/t);if(l(p.current)!==l(m.current))null===(e=i.current)||void 0===e||e.locateSelectVideo(m.current<=f.current?m.current:f.current,s)},[]),(0,d.useEffect)(()=>{(null==n?void 0:n.length)>a&&-1===t&&l(a||0)},[n]),(0,d.useEffect)(()=>{o(()=>(f.current=(null==r?void 0:r.length)-1,r))},[r]),(0,d.useEffect)(()=>{-1!==m.current&&-1!==t&&t>m.current&&t>f.current&&m.current===f.current&&X.F.info("暂无更多作品, 已为你播放推荐视频"),m.current<f.current?v(!1):v(!0),m.current=t},[t]),(0,d.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!h.current&&(async()=>{var e,l,r,a;if(null===(l=i.current)||void 0===l?void 0:null===(e=l.getHasMore)||void 0===e?void 0:e.call(l))h.current=!0,await (null===(r=i.current)||void 0===r?void 0:r.loadMoreData()),h.current=!1;else{h.current=!0;let e=await (0,nm.b)({awemeId:null===(a=n[t])||void 0===a?void 0:a.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});h.current=!1,o(t=>[...t,...(null==e?void 0:e.awemeList)||[]])}})()},[t,n]),(0,d.useEffect)(()=>{let e=null==n?void 0:n[t],l=null==u?void 0:u.indexOf(null==e?void 0:e.awemeId);(null==e?void 0:e.awemeId)&&-1!==l&&(0,e_.qA)({item_id_list:null==e?void 0:e.awemeId,type:1})},[n,t]),{isTabFeed:c}};var nh={container:"e6wsjNLL",item:"niBfRBgX",hasLookPos:"yk7KyCyT"},np=l("443882");let ng=!1,n_=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];ng=e},nx=()=>ng,nw=(0,lZ.ZP)(()=>Promise.all([l.e("6102"),l.e("9448"),l.e("920"),l.e("5968"),l.e("9107"),l.e("7016"),l.e("7726"),l.e("2758"),l.e("805"),l.e("8633"),l.e("3263"),l.e("2161"),l.e("1551"),l.e("2268"),l.e("2195"),l.e("3690"),l.e("597")]).then(l.bind(l,613470)),{ssr:!1}),nC={post:"userPost",like:"userLike",favorite_collection:"userCollection",record:"userRecord",watch_later:"userWatchLater"},ny=e=>{var t,l,n;let{info:o,isSelf:r,tab:i,uid:a,rank:c,keyword:v,onClick:m,isInSearch:f,isSpider:h,className:p,id:g,children:_,logParams:w,onNicknameClick:C}=e,[y,b]=(0,l$.Z)(),[j,k]=(0,d.useState)(!1),N=(0,d.useRef)(!1),I={};r&&"post"===i?I.playCount=null==o?void 0:null===(l=o.stats)||void 0===l?void 0:l.playCount:I.likeCount=null==o?void 0:null===(n=o.stats)||void 0===n?void 0:n.diggCount;let E=(0,tn.Wg)(o,u.stringify({previous_page:r?"personal_homepage":"others_homepage",modeFrom:nC[i],cursor:null==o?void 0:o.cursor,count:10,secUid:a,enter_method:i}));x.Le.setConfig(x.gI.EnterDetailUrl,{[null==o?void 0:o.awemeId]:E});let S=()=>{var e,t,l,n,r,a,s,d,u,m;f?t9.sendLog("search_result_click",{enter_from:(0,tf.yW)(),enter_from_merge:(0,tf.yW)(),author_id:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.uid,group_id:null==o?void 0:o.awemeId,search_type:"general",from_xigua:(null==o?void 0:o.awemeType)===lq.e.XgVideo?1:0,aweme_type:null==o?void 0:o.awemeType,tab_name:i,rank:c,search_keyword:v,enter_method:f?"search_post":"click_tab",is_co_publish:Number(null==o?void 0:null===(l=o.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)>1?1:0,co_publish_author_list:null===(r=o.cooperationInfo)||void 0===r?void 0:null===(n=r.cooperationCreators)||void 0===n?void 0:n.filter(e=>e.roleId!==$.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)}):t9.sendLog("videoCoverClick",{enter_from:(0,tf.yW)(),author_id:null==o?void 0:null===(a=o.authorInfo)||void 0===a?void 0:a.uid,group_id:null==o?void 0:o.awemeId,from_xigua:(null==o?void 0:o.awemeType)===lq.e.XgVideo?1:0,aweme_type:null==o?void 0:o.awemeType,tab_name:i,rank:c,enter_method:"click_tab",is_co_publish:Number(null==o?void 0:null===(d=o.cooperationInfo)||void 0===d?void 0:null===(s=d.cooperationCreators)||void 0===s?void 0:s.length)>1?1:0,co_publish_author_list:null===(m=o.cooperationInfo)||void 0===m?void 0:null===(u=m.cooperationCreators)||void 0===u?void 0:u.filter(e=>e.roleId!==$.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)})};return(0,d.useEffect)(()=>{let e=(0,V.Rs)("vid"),{isUsed:t}=x.Le.getConfig(x.gI.HasInUserSearch)||{};(null==o?void 0:o.awemeId)===e&&"post"===i&&!t&&k(!0)},[]),(0,d.useEffect)(()=>{if(j&&!N.current){var e;B.emit(B.EVENT.userHasLook,{isInView:b,position:null===(e=y.current)||void 0===e?void 0:e.offsetTop,rank:c}),N.current=b}},[j,b,c]),(0,s.jsxs)("div",{className:p,id:g,children:[(0,s.jsx)(lK.J,{awemeInfo:o,isSpider:h||(0,eo._Q)(),src:null==o?void 0:null===(t=o.video)||void 0===t?void 0:t.cover,playCount:I.playCount,likeCount:I.likeCount,isSelf:r,videoHref:E,onClick:e=>{S(),E.startsWith("/lvdetail/")?(e.preventDefault(),window.open(E,(0,l0.f)()?"_self":"_blank","noopener")):null==m||m(e)},onNicknameClick:()=>{!E.startsWith("/lvdetail/")&&(null==C||C())},uid:a,onShow:()=>{var e,t,l,n,r,a,s,d,u,c;f?t9.sendLog("search_result_show",{enter_from:(0,tf.yW)(),enter_from_merge:(0,tf.yW)(),search_type:"general",author_id:null==o?void 0:null===(e=o.authorInfo)||void 0===e?void 0:e.uid,group_id:null==o?void 0:o.awemeId,from_xigua:(null==o?void 0:o.awemeType)===lq.e.XgVideo?1:0,aweme_type:null==o?void 0:o.awemeType,tab_name:i,enter_method:"click_tab",search_keyword:v,is_co_publish:Number(null==o?void 0:null===(l=o.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)>1?1:0,co_publish_author_list:null===(r=o.cooperationInfo)||void 0===r?void 0:null===(n=r.cooperationCreators)||void 0===n?void 0:n.filter(e=>e.roleId!==$.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)}):t9.sendLog("collectionCoverShow",{enter_from:(0,tf.yW)(),author_id:null==o?void 0:null===(a=o.authorInfo)||void 0===a?void 0:a.uid,group_id:null==o?void 0:o.awemeId,from_xigua:(null==o?void 0:o.awemeType)===lq.e.XgVideo?1:0,aweme_type:null==o?void 0:o.awemeType,tab_name:i,enter_method:"click_tab",is_co_publish:Number(null==o?void 0:null===(d=o.cooperationInfo)||void 0===d?void 0:null===(s=d.cooperationCreators)||void 0===s?void 0:s.length)>1?1:0,co_publish_author_list:null===(c=o.cooperationInfo)||void 0===c?void 0:null===(u=c.cooperationCreators)||void 0===u?void 0:u.filter(e=>e.roleId!==$.CooperationRoleId.Author).map(e=>`${e.uid}_${null==e?void 0:e.roleId}`)})},showTitle:!0,showHasLook:!r&&j,scene:i,from:"user",logParams:w,onLoad:()=>{if(!nx()){var e;let t;n_(),(0,lQ.B1)({tag:l2.w3.moment.first_img_render_time});let l=(t=l2.w3.moment.first_img_render_time,(0,lJ.I)()?(0,lQ.J1)(t)-(0,lQ.J1)(l2.w3.page.page_init_time):(0,lQ.J1)(t)),n=(0,lQ.J1)(l2.w3.fetchers.fetcher_user_start),o=(0,lQ.J1)(l2.w3.fetchers.fetcher_user_end);l5.i.sendLog("webPerfTiming",{enter_from:(0,tf.yW)(),from:(null===(e=document.getElementById("sw-tag"))||void 0===e?void 0:e.innerHTML)==="1"?"cache":(0,lJ.I)()?"route":"url",[l2.w3.moment.first_img_render_time]:l,[l2.w3.fetchers.fetcher_user_start]:n,[l2.w3.fetchers.fetcher_user_end]:o,[l2.w3.fetchers.fetcher_user_duration]:o-n})}},userTabKey:i}),(0,s.jsx)("div",{className:nh.hasLookPos,ref:y}),_]})},nb=e=>{var t,l,n,o,r,i,u;let{uid:c,tab:v,currentTab:m,awemeInfo:f,userAwemeList:h,scrollRef:p,modalIndex:g=-1,setModalIndex:_,currentUserInfoDetail:x,modeFrom:w,showModal:C=!1,customMadeHook:y,onClose:b,logParams:j,modalInnerFeedCard:k}=e,N=(0,lW._)(e,["uid","tab","currentTab","awemeInfo","userAwemeList","scrollRef","modalIndex","setModalIndex","currentUserInfoDetail","modeFrom","showModal","customMadeHook","onClose","logParams","modalInnerFeedCard"]),{list:I=[],uid:E}=(0,l1.$o)(lX.LocalStorageKeys.NotSeenItemList)||{},S=(null==x?void 0:x.uid)===E?I:[],{isSelf:L,updateFollowStatus:M,haveDashBoard:T}=null!==(r=(0,d.useContext)(H))&&void 0!==r?r:{},R=null!==(i=(0,d.useContext)(U.C))&&void 0!==i?i:{},F=null!==(u=(0,d.useContext)(O.Context))&&void 0!==u?u:{},P=null==F?void 0:null===(l=F.userInfo)||void 0===l?void 0:null===(t=l.info)||void 0===t?void 0:t.uid,D=(0,d.useMemo)(()=>L&&T&&"post"===m,[T,L,m]),{reloadForPostDelete:A}=(0,d.useContext)(lx);return -1!==g||C?(0,s.jsx)(nw,(0,a._)({modalInnerFeedCard:k,modalEnterFrom:w,uid:c,userContext:F,abtestData:R,isSelf:L,anyHooks:null!=y?y:nf,originAwemeInfo:f,userAwemeList:h,scrollRef:p,modalVideoIndex:g,additionalDistance:-150,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:(null==f?void 0:null===(n=f.authorInfo)||void 0===n?void 0:n.uid)!==P,dataAnalysis:D,deleteSelfPost:L},logParams:(0,a._)({enter_from:L?"personal_homepage":"others_homepage",enter_from_merge:L?"personal_homepage":"others_homepage",enter_method:(0,V.Rs)("enter_method"),is_personal_panel_video:Number((0,V.Rs)("is_personal_panel_video"))||0,tab_name:v,sub_tab_name:"video"},j),close:()=>{null==b||b(),null==_||_(-1),M(),null==A||A()},shortCutFilteredList:[null===(o=lY.getShortcut().dislike)||void 0===o?void 0:o.key],notSeenItemList:S,scene:v},N)):null},nj=e=>null==e?void 0:e.awemeId,nk=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return{top:e+58+44,bottom:0,left:0,right:0}},nN=function(){let{panelNoData:e,handleLoadEnd:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return((0,d.useEffect)(()=>{null==t||t(),n_()},[]),e)?(0,s.jsx)(s.Fragment,{children:e}):(0,s.jsx)(P.H,{title:"暂无内容",icon:(0,s.jsx)(lM.Z,{})})};var nI=d.memo(d.forwardRef((e,t)=>{var l,n,o,r;let{modalInnerFeedCard:i="",defaultRes:u,currentTab:c,tab:v,uid:m,itemClassName:f,fetchMoreData:h,panelNoMoreData:p,panelNoData:g,pause:_,isInSearch:w,retryTimes:C,setUserPostList:y,updateAwemeList:b,getItemSelectedDisabled:j,resetStatusFunc:k,topNavHeight:N=60,topOffset:I=0,handleLoadEnd:E,listSelectContext:S,columnCount:L,containerRef:M,scrollRef:R,keyword:F,customStickyArea:P,logParams:D,collectionFolderInfo:A,modalEnterFrom:U,scrollContainerEl:O,onClose:z,highLightAwemeId:W}=e,{isSelf:Z,currentUserInfoDetail:$,isSpider:K}=(0,d.useContext)(H)||{},[G,q]=(0,d.useState)([]),[X,Y]=(0,d.useState)(-1),Q=(0,d.useRef)(),J=(0,d.useRef)(),ee=(0,d.useRef)();ee.current=D;let et=(0,d.useRef)(i);w&&x.Le.setConfig(x.gI.HasInUserSearch,{isUsed:w});let el=(0,d.useCallback)(e=>{q(e),null==y||y(e),null==b||b(e)},[y,b]),en=(0,d.useCallback)((e,t)=>(0,s.jsx)(ny,{info:e,isSelf:Z,logParams:ee.current,tab:v,uid:m,keyword:F,isSpider:K,rank:t,onClick:l=>{null==l||l.preventDefault(),et.current=i,Y(t),J.current=e},isInSearch:w,onNicknameClick:()=>{et.current="author_card",Y(t),J.current=e}}),[]),eo=null===(n=Q.current)||void 0===n?void 0:null===(l=n.getDataList)||void 0===l?void 0:l.call(n),[er,ei]=(0,d.useState)(null!=P?P:nk(N));(0,d.useEffect)(()=>{ei(null!=P?P:nk(N))},[N,P]);let ea=nu({scrollEl:null==R?void 0:R.current,containerEl:null==M?void 0:M.current}),{withMask:es}=nc((0,T._)((0,a._)({maskShadowStyle:{height:"auto",paddingBottom:"133%",borderRadius:"4px"},getItemId:nj,dataList:eo,isSupportMulti:!0},ea),{firstItem:null===(r=Q.current)||void 0===r?void 0:null===(o=r.getTargetNode)||void 0===o?void 0:o.call(r,0),getColumnCount:()=>L||(window.innerWidth>l3.I?6:3),stickyArea:er,itemMargin:{top:0,bottom:16,left:0,right:16},getItemSelectedDisabled:j}),S);nv({resetStatusFunc:k,scrollListRef:Q,scrollElementRef:ea.scrollEleRef}),(0,d.useImperativeHandle)(t,()=>{var e,t,l,n,o,r,i,a;return{loadMoreData:null===(e=Q.current)||void 0===e?void 0:e.loadMoreData,locateSelectVideo:null===(t=Q.current)||void 0===t?void 0:t.locateSelectVideo,reset:null===(l=Q.current)||void 0===l?void 0:l.reset,reload:null===(n=Q.current)||void 0===n?void 0:n.reload,getTotal:null===(o=Q.current)||void 0===o?void 0:o.getTotal,resetRes:null===(r=Q.current)||void 0===r?void 0:r.resetRes,setScrollData:null===(i=Q.current)||void 0===i?void 0:i.setScrollData,getDataList:null===(a=Q.current)||void 0===a?void 0:a.getDataList}});let ed=(0,np.m)();return(0,d.useEffect)(()=>{let e=(0,V.Rs)("aweme_id");if(e&&G&&(null==G?void 0:G.length)>0){var t;let l=null==G?void 0:null===(t=G.findIndex)||void 0===t?void 0:t.call(G,t=>(null==t?void 0:t.awemeId)===e);e&&-1!==l&&Y(l),(0,V.U$)("aweme_id")}},[G]),(0,d.useEffect)(()=>B.listen(B.EVENT.openUserModal,e=>{let{awemeId:t}=e,l=(0,V.Rs)("aweme_id");if(l&&t===l&&G&&(null==G?void 0:G.length)>0){var n;let e=null==G?void 0:null===(n=G.findIndex)||void 0===n?void 0:n.call(G,e=>(null==e?void 0:e.awemeId)===l);-1!==e&&Y(e),(0,V.U$)("aweme_id")}}),[G]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(lG.Z,{ref:Q,highLightAwemeId:W,handleLoadEnd:E,defaultDataList:(null==u?void 0:u.data)||[],defaultHasMoreFlag:(null==u?void 0:u.hasMore)||1,defaultStatusCode:(null==u?void 0:u.statusCode)||0,defaultWhaleDecisionCustom:null==u?void 0:u.whaleDecisionCustom,containerClassName:nh.container,itemClassName:null!=f?f:nh.item,panelNoData:(0,s.jsx)(nN,{panelNoData:g,handleLoadEnd:E}),panelNoMoreData:p,scrollContainerEl:ed,skeletonNum:0,renderItem:en,withMask:es,fetchMoreData:async()=>{(0,lQ.B1)({tag:l2.w3.fetchers.fetcher_user_start,once:!0});let e=await h();return(0,lQ.B1)({tag:l2.w3.fetchers.fetcher_user_end,once:!0}),e},setDataList:el,pause:null!=_?_:c!==v,retryTimes:C,blockType:"post"===v||"like"===v,listFilterFn:(e,t)=>{let l=e.map(e=>null==e?void 0:e.awemeId),n=(t||[]).filter(e=>!l.includes(null==e?void 0:e.awemeId));return e.concat(n||[])}}),(0,s.jsx)(nb,{modalInnerFeedCard:et.current,uid:m,tab:v,modeFrom:U||nC[v],currentTab:c,awemeInfo:J.current,userAwemeList:G,scrollRef:Q,modalIndex:X,setModalIndex:Y,currentUserInfoDetail:$,logParams:D,collectionFolderInfo:A,onClose:()=>{(0,V.U$)("aweme_id"),(0,V.U$)("is_personal_panel_video"),null==z||z()}})]})}));let nE=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M1.95 6.5L6 10.1l4.05-3.6M1.95 2L6 5.6 10.05 2",stroke:"#2F3035",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),nS=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.167 2.833c.368 0 .667.299.667.667v4a.667.667 0 0 1-1.334 0V6.167H2a.667.667 0 0 1 0-1.333h6.5V3.5c0-.368.299-.667.667-.667zm2.833 2a.667.667 0 1 0 0 1.334h2a.667.667 0 0 0 0-1.333h-2zm-8 6a.667.667 0 0 1 0 1.334H2a.667.667 0 1 1 0-1.333h2zM6.167 9.5a.667.667 0 0 1 1.333 0v1.334H14a.667.667 0 0 1 0 1.333H7.5V13.5a.667.667 0 0 1-1.333 0v-4z",fill:"#fff",fillOpacity:".9"})})));var nL=l("998251"),nM={container:"ya4kP0ZE",buttonContainer:"CW8Pw9tE",operateButton:"Sv20jUdC",desc:"y_gxZhMW",actionText:"kwu7dQfZ",exitIcon:"K0JrS7pe",manageIcon:"SEPdKOjJ",trashcanIcon:"Rzl6J1AT",disabled:"bjN5A9Mo"};let nT=(0,d.forwardRef)((e,t)=>(0,s.jsxs)("svg",(0,T._)((0,a._)({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.87 8.876a.5.5 0 0 0 0-.753L10.13 4.85a.5.5 0 0 0-.83.377V6.5H5.8a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3.5v1.273a.5.5 0 0 0 .83.376l3.74-3.273z",fill:"#fff",fillOpacity:".75"}),(0,s.jsx)("path",{d:"M7.75 4h-3a1.5 1.5 0 0 0-1.5 1.5v6a1.5 1.5 0 0 0 1.5 1.5h3",stroke:"#fff",strokeOpacity:".75",strokeWidth:1.5,strokeLinecap:"round"})]}))),nR=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:11,height:11,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 .5a.5.5 0 0 1 .5-.5h4A2.5 2.5 0 0 1 11 2.5v5a.5.5 0 0 1-1 0v-5A1.5 1.5 0 0 0 8.5 1h-4A.5.5 0 0 1 4 .5zm-4 3A1.5 1.5 0 0 1 1.5 2h6A1.5 1.5 0 0 1 9 3.5v6A1.5 1.5 0 0 1 7.5 11h-6A1.5 1.5 0 0 1 0 9.5v-6zm7.104 2.354a.5.5 0 1 0-.708-.708L3.75 7.793 2.604 6.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z",fill:"#fff",fillOpacity:".34"})}))),nF=(0,d.forwardRef)((e,t)=>(0,s.jsxs)("svg",(0,T._)((0,a._)({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.251 6.25a1 1 0 0 1 1-1h7.498a1 1 0 0 1 1 1v6.5a1.5 1.5 0 0 1-1.5 1.5H4.75a1.5 1.5 0 0 1-1.5-1.5l.001-6.5zM6 7.4a.6.6 0 0 1 .6.6v3a.6.6 0 0 1-1.2 0v-3a.6.6 0 0 1 .6-.6zm4.6.6a.6.6 0 1 0-1.2 0v3a.6.6 0 0 0 1.2 0v-3z",fill:"#FE2C55",fillOpacity:".34"}),(0,s.jsx)("path",{d:"M2.75 3.6a.6.6 0 0 1 .6-.6h9.3a.6.6 0 0 1 0 1.201h-9.3a.6.6 0 0 1-.6-.6zM6.8 3c0-.603.49-1.092 1.093-1.092h.218c.604 0 1.092.489 1.092 1.092H6.801z",fill:"#FE2C55",fillOpacity:".34"})]}))),nP=e=>{let{icon:t,text:l,textClass:n,onClick:o,disabled:r=!1,className:i,disabledToast:a}=e,{run:u}=(0,nL.Z)(e=>X.F.info(e),500),c=(0,d.useCallback)(()=>{if(r){a&&u(a);return}null==o||o()},[r,o,a,u]);return(0,s.jsxs)("div",{className:f()(nM.buttonContainer,i,{[nM.disabled]:r}),onClick:c,children:[t,(0,s.jsx)("span",{className:f()(nM.desc,n),children:l})]})};var nD=e=>{let{operateBtns:t=[],className:l,tabName:n="",subTabName:o="",onRef:r,disabled:i}=e,{isListSelectable:a,selectedCount:u=0,changeListSelectable:c,maxSelectedCount:v}=(0,d.useContext)(lO);return(0,s.jsxs)("div",{className:f()(nM.container,l),ref:e=>null==r?void 0:r(e),children:[a&&t.map((e,t)=>{var l;return(0,s.jsx)(nP,{className:nM.operateButton,icon:null!==(l=e.icon)&&void 0!==l?l:(0,s.jsx)(J.Z,{src:nF,width:16,height:16,viewBox:"0 0 16 16",className:nM.trashcanIcon}),text:`${e.actionText}(${u})`,textClass:nM.actionText,onClick:u>0?e.onClick:void 0,disabled:0===u},e.key||`key_${t}`)}),(0,s.jsx)(nP,{disabled:i,disabledToast:"暂无内容可批量管理",onClick:()=>{t9.sendLog(a?"manageExitClick":"manageEntranceClick",{tab_name:n,sub_tab_name:o}),null==c||c(!a)},icon:a?(0,s.jsx)(J.Z,{src:nT,width:16,height:16,viewBox:"0 0 16 16",className:nM.exitIcon}):(0,s.jsx)(J.Z,{src:nR,width:11,height:11,viewBox:"0 0 11 11",className:nM.manageIcon}),text:a?"退出批量管理":"批量管理"})]})};let nA=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 3a.5.5 0 0 0-1 0v.5H4A1.5 1.5 0 0 0 2.5 5v7.5A1.5 1.5 0 0 0 4 14h8a1.5 1.5 0 0 0 1.5-1.5V5A1.5 1.5 0 0 0 12 3.5h-1.5V3a.5.5 0 0 0-1 0v.5h-3V3zm-1 1.5V5a.5.5 0 0 0 1 0v-.5h3V5a.5.5 0 0 0 1 0v-.5H12a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H4a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5h1.5zm5.354 3.646a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708 0z",fill:"#C5C5C8"})})));var nV={container:"_MJ51sfA",selected:"ZtmnU6X4",text:"aHDCpqiD",date:"uoYnE8pH",arrow:"QYbxztXg",TimeListSelector:"F5MCNGBL",item:"OFaXSwae",hover:"hclvre8e",itemContainer:"Lgl8Xm1f",vertialLine:"kqQJICnr",noVisibility:"mBd7WqCW"},nB=new eF.h({timelinePanelShow:{eventName:"timeline_panel_show",params:{enter_from:"",tab_name:""}},timelinePanelClick:{eventName:"timeline_panel_click",params:{enter_from:"",tab_name:"",year_month:""}}});let nH=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M12 6l-4 4-4-4",stroke:"#2F3035",strokeOpacity:".4",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})}))),nU=e=>{var t,l;let{postTimeList:n,onRef:o,onTimeClick:r,setShowSelector:i,currentScrollTime:u,logParams:c,onMouseEnter:v,onMouseLeave:m,style:h}=e,[p,g]=(0,d.useState)(null==u?void 0:null===(t=u.split("-"))||void 0===t?void 0:t[0]),_=(0,d.useRef)(),x=(0,d.useMemo)(()=>{let e={};for(let t=0;t<n.length;t++){let l=n[t].split("\xb7")[0],o=n[t].split("\xb7")[1];e[l]?e[l].push(o):e[l]=[o]}return e},[n]);return(0,d.useEffect)(()=>{var e,t;null===(t=_.current)||void 0===t||null===(e=t.scroll)||void 0===e||e.call(t,0,0)},[p]),(0,d.useEffect)(()=>{nB.sendLog("timelinePanelShow",(0,a._)({},c))},[]),(0,s.jsxs)("div",{className:nV.TimeListSelector,ref:e=>null==o?void 0:o(e),onClick:e=>e.nativeEvent.stopImmediatePropagation(),onMouseEnter:v,onMouseLeave:m,style:h,children:[(0,s.jsxs)("div",{className:nV.itemContainer,children:[(0,s.jsx)("div",{onMouseEnter:()=>g("all"),className:f()(nV.item,{[nV.selected]:"all"===u}),onClick:()=>{r("all"),i(!1)},children:"全部"}),Object.keys(x).sort((e,t)=>t-e).map((e,t)=>{var l;return(0,s.jsx)("div",{onMouseEnter:()=>g(e),className:f()(nV.item,{[nV.hover]:p===e,[nV.selected]:Number(null==u?void 0:null===(l=u.split("-"))||void 0===l?void 0:l[0])===Number(e)}),onClick:()=>{r(`${p}-${x[e][0]}`),i(!1),nB.sendLog("timelinePanelClick",(0,T._)((0,a._)({},c),{year_month:`${p}${String(x[e][0]).padStart(2,"0")}`}))},children:`${e}年`},t)})]}),(0,s.jsx)("div",{className:f()(nV.vertialLine,{[nV.noVisibility]:"all"===p})}),(0,s.jsx)("div",{className:nV.itemContainer,ref:_,children:"all"!==p&&(0,s.jsx)(s.Fragment,{children:null===(l=x[p])||void 0===l?void 0:l.map((e,t)=>{var l,n;return(0,s.jsx)("div",{className:f()(nV.item,{[nV.selected]:Number(null==u?void 0:null===(l=u.split("-"))||void 0===l?void 0:l[1])===Number(e)&&Number(p)===Number(null==u?void 0:null===(n=u.split("-"))||void 0===n?void 0:n[0])}),onClick:()=>{r(`${p}-${e}`),i(!1),nB.sendLog("timelinePanelClick",(0,T._)((0,a._)({},c),{year_month:`${p}${String(e).padStart(2,"0")}`}))},children:`${e}月`},t)})})})]})},nO=e=>{let{postTimeList:t,onTimeClick:l,currentScrollTime:n,logParams:o,isSelf:r}=e,[i,a]=(0,d.useState)(!1),u=(0,d.useRef)(),{updateIsSelectDisabled:c}=(0,d.useContext)(lO);return(0,d.useEffect)(()=>{null==c||c(i)},[i,c]),(0,d.useEffect)(()=>{let e=()=>{a(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:f()(nV.container,{[nV.selected]:i}),onMouseEnter:()=>{a(!0),clearTimeout(u.current)},onMouseLeave:()=>{u.current=setTimeout(()=>{a(!1)},500)},children:[(0,s.jsx)(J.Z,{src:nA,className:nV.date,viewBox:"0 0 16 16",width:16,height:16}),(0,s.jsx)("div",{className:nV.text,children:"all"===n?"日期筛选":n.split("-").map((e,t)=>`${e}${0===t?"年":"月"}`).join("")}),(0,s.jsx)(J.Z,{src:nH,className:nV.arrow,viewBox:"0 0 16 16",width:16,height:16}),i&&(0,s.jsx)(nU,{postTimeList:t,onTimeClick:l,setShowSelector:a,currentScrollTime:n,logParams:o,onMouseEnter:()=>{a(!0),clearTimeout(u.current)},onMouseLeave:()=>{u.current=setTimeout(()=>{a(!1)},500)},style:{right:r?-44:0}})]})})};var nz=l("222397");let nW=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:o,userAwemeList:r,notSeenItemList:i=[],originAwemeInfo:a,fetchBackWard:s,fetchForward:u,swiper:c,hasMore:v,scrollToTarget:m}=e,[f,h]=(0,d.useState)(!1),p=(0,d.useRef)(t),g=(0,d.useRef)(-1),_=(0,d.useRef)(!1),x=(0,d.useRef)();return x.current=()=>{let e=n[t];m({target:document.getElementById(`videocard-${null==e?void 0:e.awemeId}`),speed:100})},(0,d.useEffect)(()=>()=>{x.current()},[]),(0,d.useEffect)(()=>{let e=null==n?void 0:n.findIndex(e=>(null==e?void 0:e.awemeId)===(null==a?void 0:a.awemeId));-1!==e&&-1===t&&l(e)},[n]),(0,d.useEffect)(()=>{let e=n[t];o(()=>(g.current=(null==r?void 0:r.length)-1,r));let i=null==r?void 0:r.findIndex(t=>(null==t?void 0:t.awemeId)===(null==e?void 0:e.awemeId));if(i!==t&&-1!==t){if(c){var a;null==c||null===(a=c.slideToSync)||void 0===a||a.call(c,i),setTimeout(()=>{l(i)})}else l(i)}},[r]),(0,d.useEffect)(()=>{-1!==p.current&&-1!==t&&t>p.current&&t>g.current&&p.current===g.current&&X.F.info("暂无更多作品, 已为你播放推荐视频"),p.current<g.current?h(!1):h(!0),p.current=t},[t]),(0,d.useEffect)(()=>{-1!==t&&(5>Math.abs(Number(null==n?void 0:n.length)-t)?v?null==s||s():!_.current&&(async()=>{var e;_.current=!0;let l=await (0,nm.b)({awemeId:null===(e=n[t])||void 0===e?void 0:e.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});_.current=!1,o(e=>[...e,...(null==l?void 0:l.awemeList)||[]])})():t<4&&(null==u||u()))},[t,n]),(0,d.useEffect)(()=>{let e=null==n?void 0:n[t],l=null==i?void 0:i.indexOf(null==e?void 0:e.awemeId);(null==e?void 0:e.awemeId)&&-1!==l&&(0,e_.qA)({item_id_list:null==e?void 0:e.awemeId,type:1})},[n,t]),{isTabFeed:f}};var nZ={documentOverFlowAnchorDisable:"qiQdLgZX",container:"aimHLFdr",noMoreText:"rU4RJsuc",opBtn:"aV4nFmKU"};let n$=()=>{var e,t,l;return o=null!=o?o:null===(e=document.getElementById("douyin-header"))||void 0===e?void 0:e.offsetHeight,r=null!=r?r:null===(t=document.getElementById("user-tabbar"))||void 0===t?void 0:t.offsetHeight,i=null!=i?i:null===(l=document.getElementById("user-tabbar-2"))||void 0===l?void 0:l.offsetHeight,o+r+i},nK=e=>{let t=W()(e),l=t.year(),n=t.month()+1;return`${l}-${n}`},nG=e=>{var t;let{container:l,index:n,speed:o=0,target:r}=e,i=null!=r?r:null==l?void 0:null===(t=l.childNodes)||void 0===t?void 0:t[n];if(!i)return;let a=null==i?void 0:i.offsetParent,s=null==i?void 0:i.offsetTop;for(;a!==document.body;)s+=a.offsetTop,a=a.offsetParent;(0,lp.d)((0,lw.V)(),s-(n$()-1),o)};var nq=l("562221"),nX="gdOTKEvm",nY="jQQbFoGg",nQ="a9MbcIAr",nJ="TUuTZndR",n0="t4eBHHQ7";let n1=e=>{let{awemeList:t,setCurrentScrollTime:l,onItemClick:n,withMask:o,uid:r,isSelf:i}=e,a=(0,d.useRef)(0),u=(0,d.useMemo)(()=>{var e;return(null==t?void 0:null===(e=t[t.length-1])||void 0===e?void 0:e.createTime)*1e3},[t]);(0,d.useEffect)(()=>{let e=()=>{let e=document.getElementById(`${nK(u)}-monthvideobox`);e&&(a.current=null==e?void 0:e.offsetHeight)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[t]);let c=(0,np.m)(),[v,m]=(0,d.useState)(!1);return(0,nq.D)((e,t)=>{m(e>-4&&e<a.current-100)},200,{trailing:!0}),(0,d.useEffect)(()=>{v&&l(nK(u))},[v]),(0,s.jsxs)("div",{id:`${nK(u)}-monthvideobox`,children:[(0,s.jsx)("div",{className:f()(nQ),children:(0,s.jsx)("div",{className:f()(nJ),children:(0,s.jsx)("div",{className:n0,children:`${nK(u).split("-")[0]}年${nK(u).split("-")[1]}月`})})}),(0,s.jsx)(F.W,{scrollListener:c,className:nX,children:t.map((e,t)=>(0,s.jsx)(ny,{info:e,isSelf:i,tab:"post",uid:r,className:nY,rank:t,onClick:t=>{null==t||t.preventDefault(),null==n||n(e)},id:`videocard-${null==e?void 0:e.awemeId}`,children:o(e)},null==e?void 0:e.awemeId))})]})};function n2(e){let{reload:t}=e;return(0,s.jsxs)("div",{className:nZ.noMoreText,children:["服务异常，重新",(0,s.jsx)("span",{onClick:t,className:nZ.opBtn,children:"刷新"}),"拉取数据"]})}let n5=e=>{var t;let{userInfo:l,selectPartilarTime:n,scrollEl:o,setCurrentScrollTime:r,defaultUserPostList:i,defaultHasMore:a,setUserPostList:u,uid:c,tab:v,isSelf:m,currentTab:f,setSelectPartilarTime:p,setHideUserInfo:g,resetStatusFunc:_,getItemSelectedDisabled:x,onBan:w,rebackParamRef:C}=e,[y,b]=(0,d.useState)([]),[j,k]=(0,d.useState)(),[N,I]=(0,d.useState)([0,0,0]),{setResetScrollList:E}=(0,d.useContext)(lO);null==E||E(()=>{p("all"),r("all"),g(!1),(0,lw.V)().scrollTo(0,0),u([]),null==_||_()});let S=(0,d.useRef)(!0),L=(0,d.useRef)(a?0:1e3*i[i.length-1].createTime),M=(0,d.useRef)(!1),T=(0,d.useRef)(!1),R=(0,d.useRef)(),F=(0,d.useRef)(0),P=(0,d.useRef)([i]),D=(0,d.useRef)(0),A=(0,d.useRef)(!1),V=(0,nr.Z)(async()=>{var e,t,l,o;let[r,i]=n.split("-");r=Number(r),r+=Math.floor(((i=Number(i))+1)/12),i=(i+1)%12;let a=1e3*W()(`${r}-${String(i).padStart(2,"0")}-01`).unix(),s=P.current[Math.max(D.current-1,0)],d=1e3*s[s.length-1].createTime,u=await (0,nz.eG)({userId:c,maxCursor:a,timeListQuery:!0,forwardEndCursor:d,whaleCutToken:null===(e=C.current)||void 0===e?void 0:e.whaleCutToken});(null===(t=u.whaleInfo)||void 0===t?void 0:t.whaleBlockTimeSelect)==="1"&&w(),C.current={whaleCutToken:null===(l=u.whaleInfo)||void 0===l?void 0:l.whaleCutToken},0===u.statusCode&&u.data?(P.current[D.current]=u.data,0===u.forwardHasMore&&D.current>0&&(P.current[D.current-1]=[...P.current[D.current-1],...P.current[D.current]],P.current.splice(D.current,1),D.current-=1),b(P.current[D.current])):I(e=>[e[0],u.statusCode,e[2]]),S.current=null!==(o=S.current)&&void 0!==o?o:1===u.hasMore,0===u.hasMore&&u.data&&(L.current=1e3*u.data[u.data.length-1].createTime)}),H=(0,nr.Z)(async e=>{var t,l,n,o,r,i,a;let{from:s}=e,d=P.current[D.current];if(T.current||(null===(t=d[d.length-1])||void 0===t?void 0:t.createTime)*1e3===L.current||0!==N[2]&&"reload"!==s)return;T.current=!0;let u=1e3*d[d.length-1].createTime,v=await (0,nz.eG)({userId:c,maxCursor:u,count:30,whaleCutToken:null===(l=C.current)||void 0===l?void 0:l.whaleCutToken});if((null===(n=v.whaleInfo)||void 0===n?void 0:n.whaleBlockTimeSelect)==="1"&&w(),C.current={whaleCutToken:null===(o=v.whaleInfo)||void 0===o?void 0:o.whaleCutToken},S.current=null!==(r=S.current)&&void 0!==r?r:1===v.hasMore,0===v.statusCode&&v.data){let e=[...P.current[D.current],...v.data||[]],t=P.current[D.current+1];if(t){let l=-1;for(let n=0;n<e.length;n++)if((null==t?void 0:null===(i=t[0])||void 0===i?void 0:i.awemeId)===(null==e?void 0:null===(a=e[n])||void 0===a?void 0:a.awemeId)){l=n;break}-1!==l?(P.current[D.current]=[...e.slice(0,l),...t],P.current.splice(D.current+1,1)):P.current[D.current]=e,b(P.current[D.current])}else P.current[D.current]=e,b(P.current[D.current])}else I(e=>[e[0],e[1],v.statusCode]);0===v.hasMore&&v.data&&(L.current=1e3*v.data[v.data.length-1].createTime),T.current=!1}),U=(0,nr.Z)(async e=>{var t,l,n,o,r;let{from:i}=e;if(M.current||0===D.current||0!==N[0]&&"reload"!==i)return;M.current=!0,F.current=(0,lw.V)().scrollHeight;let a=P.current[D.current-1],s=P.current[D.current],d=await (0,nz.eG)({userId:c,forwardEndCursor:(null==a?void 0:null===(t=a[(null==a?void 0:a.length)-1])||void 0===t?void 0:t.createTime)*1e3,forwardAnchorCursor:(null==s?void 0:null===(l=s[0])||void 0===l?void 0:l.createTime)*1e3,count:30,whaleCutToken:null===(n=C.current)||void 0===n?void 0:n.whaleCutToken});(null===(o=d.whaleInfo)||void 0===o?void 0:o.whaleBlockTimeSelect)==="1"&&w(),C.current={whaleCutToken:null===(r=d.whaleInfo)||void 0===r?void 0:r.whaleCutToken},0===d.statusCode&&d.data?(P.current[D.current]=[...d.data||[],...P.current[D.current]],0===d.forwardHasMore&&(P.current[D.current-1]=[...P.current[D.current-1],...P.current[D.current]],P.current.splice(D.current,1),D.current-=1),b(P.current[D.current])):I(e=>[d.statusCode,e[1],e[2]]),M.current=!1}),O=(0,d.useMemo)(()=>{let e=[];for(let a=0;a<(null==y?void 0:y.length);a++){var t,l,n,o,r,i;let s=e[e.length-1],d=W()((null==s?void 0:null===(t=s[s.length-1])||void 0===t?void 0:t.createTime)*1e3),u=d.year(),c=d.month()+1,v=W()((null===(l=y[a])||void 0===l?void 0:l.createTime)*1e3),m=v.year(),f=v.month()+1;(m===u&&f===c||(null===(o=y[a])||void 0===o?void 0:null===(n=o.tag)||void 0===n?void 0:n.isTop)||(null==s?void 0:null===(i=s[(null==s?void 0:s.length)-1])||void 0===i?void 0:null===(r=i.tag)||void 0===r?void 0:r.isTop))&&e[e.length-1]?e[e.length-1].push(y[a]):e.push([y[a]])}return e},[y]),{withMask:z}=nc({getItemId:e=>null==e?void 0:e.awemeId,dataList:y,isSupportMulti:!1,maskShadowStyle:{height:"auto",paddingBottom:"133%",borderRadius:"4px"},getItemSelectedDisabled:x}),Z=e=>{let{direction:t}=e;return"forward"===t&&0!==N[0]||"backward"===t&&0!==N[2]?(0,s.jsx)(n2,{reload:()=>{I(e=>[0,0,0]),"forward"===t?U({from:"reload"}):H({from:"reload"})}}):(0,s.jsx)(h.gb,{})};(0,d.useEffect)(()=>{let e=(0,lw.s)(),t=o||e,l=e=>{var t;if(0===P.current[D.current].length)return;let l=0,n=null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect();if(o){let e=o.getBoundingClientRect();l=n.bottom-e.bottom}else l=n.bottom-window.innerHeight;l<48&&S.current&&H({from:"normal"}),n.top>120&&0!==D.current&&U({from:"normal"})};return t.addEventListener("scroll",l),()=>{t.removeEventListener("scroll",l)}},[]),(0,d.useEffect)(()=>{if(0!==y.length&&0!==F.current){let e=(0,lw.V)();e.scrollTo(0,e.scrollHeight-F.current+e.scrollTop),F.current=0}else if(A.current&&0!==y.length){A.current=!1;let e=O.findIndex(e=>{var t;let l=W()((null===(t=e[e.length-1])||void 0===t?void 0:t.createTime)*1e3),o=String(l.year()),r=String(l.month()+1).padStart(2,"0");return n.split("-").every((e,t)=>0===t?e===o:e===r)});-1!==e&&nG({container:R.current,index:e+(y.length&&0!==D.current?1:0),speed:0})}else 0===y.length&&(0,lw.V)().scrollTo(0,0);0===D.current&&0!==y.length&&(null==u||u(y))},[y]),(0,d.useEffect)(()=>{let[e,t]=n.split("-"),l=W()(`${e}-${t}-01`),o=l.add(1,"month"),r=1e3*l.unix(),i=1e3*o.unix(),a=-1,s=!1;for(let e=0;e<P.current.length;e++){for(let t=0;t<P.current[e].length;t++){var d,u;let l=1e3*P.current[e][t].createTime;if(null===(u=P.current[e][t])||void 0===u?!void 0:null===(d=u.tag)||void 0===d?!void 0:!d.isTop){if(l<=i&&l>=r){a=e,s=!0;break}if(l<r){D.current=e,P.current.splice(D.current,-1,[]),s=!0;break}else e===P.current.length-1&&t===P.current[e].length-1&&(D.current=P.current.length,P.current.splice(D.current,-1,[]),s=!0)}}if(s)break}if(-1!==a){let e=O.findIndex(e=>{var t;let l=W()((null===(t=e[e.length-1])||void 0===t?void 0:t.createTime)*1e3),o=String(l.year()),r=String(l.month()+1).padStart(2,"0");return n.split("-").every((e,t)=>0===t?e===o:e===r)});if(-1!==e)nG({container:R.current,index:e+(y.length&&0!==D.current?1:0),speed:100});else{let e=P.current[a];D.current=a,b(e),A.current=!0}}else b([]),V(),A.current=!0},[n]),(0,d.useEffect)(()=>{if(0!==D.current)return g(!0),document.body.classList.add(nZ.documentOverFlowAnchorDisable),B.emit(B.EVENT.headerAbleTransparent,!1),()=>{g(!1),document.body.classList.remove(nZ.documentOverFlowAnchorDisable),B.emit(B.EVENT.headerAbleTransparent,!0)}},[D.current]);let $=(null===(t=y[y.length-1])||void 0===t?void 0:t.createTime)*1e3!==L.current;return 0!==N[1]?(0,s.jsx)(n2,{reload:()=>{I(e=>[0,0,0]),V()}}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:nZ.container,ref:R,children:[!!y.length&&0!==D.current&&Z({direction:"forward"}),O.map((e,t)=>{var l;return e.length>0&&(0,s.jsx)(n1,{index:t,awemeList:e,setCurrentScrollTime:r,onItemClick:e=>k(e),withMask:z,uid:c,isSelf:m},nK((null===(l=e[e.length-1])||void 0===l?void 0:l.createTime)*1e3))}),$&&Z({direction:"backward"})]}),(0,s.jsx)(nb,{uid:c,tab:v,modeFrom:nC[v],currentTab:f,awemeInfo:j,userAwemeList:y,showModal:!!j,onClose:()=>k(void 0),customMadeHook:nW,fetchBackWard:H,fetchForward:U,hasMore:$,scrollToTarget:nG})]})};var n3=l("67108"),n6=l.n(n3),n4=l("533796"),n7=l("487272"),n8={header:"X5syc51M",sticky:"yWR42jR6",noBgImage:"BnPcTLFE"},n9=e=>{var t;let{children:l,topOffset:n=0,needSticky:o=!0,headerHeight:r,topNavHeight:i=60,noBgImage:u}=e,{isSelf:c}=null!==(t=(0,d.useContext)(H))&&void 0!==t?t:{};(0,d.useContext)(U.C);let v=null!=r?r:44;return(0,d.useEffect)(()=>{let e=n6()(()=>{let e=(0,lw.s)(),{x:t=0,y:l=0}=(0,n4.F)(e)||{};(0,n7.X)({top:l+1,left:t},e),(0,n7.X)({top:l,left:t},e)},100);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),o?(0,s.jsx)(lh.Z,{topOffset:n-v-20,children:e=>{let{style:t,isSticky:n}=e;return(0,s.jsx)("div",{className:f()(n8.header,{[n8.sticky]:n,subTabSticky:n,[n8.noBgImage]:u}),style:(0,a._)({height:`${v}px`},tG(n,t),n?{top:`${i+58}px`}:{}),children:l})}}):l};let oe=e=>{let t={},l={},n=0,o=0,r=0;if(e.forEach(e=>{var i,a,s,d,u,c,v;(null===(i=e.seriesInfo)||void 0===i?void 0:i.seriesId)?(o++,l[null===(u=e.seriesInfo)||void 0===u?void 0:u.seriesId]=1):(null===(a=e.mixInfo)||void 0===a?void 0:a.mixId)&&(n++,t[null===(c=e.mixInfo)||void 0===c?void 0:c.mixId]=1),(null!==(v=null==e?void 0:null===(d=e.cooperationInfo)||void 0===d?void 0:null===(s=d.cooperationCreators)||void 0===s?void 0:s.length)&&void 0!==v?v:0)>1&&r++}),!o&&!n&&!r)return"";let i=Object.keys(l).length,a=Object.keys(t).length,s=n&&a?`${n}个作品在${a}个合集中`:"",d=o&&i?`${o}个作品在${i}个短剧中`:"",u=r?`${r}个作品为共创视频`:"";return`（其中${d}${d&&(s||u)?",":""}${s}${s&&u?",":""}${u},会被同时删除）`};var ot=e=>{var t,l,n;let{userInfo:o,currentTab:r,defaultPostRes:i,topOffset:u=0,topNavHeight:c=60,setHideUserInfo:v,hideUserInfo:m,abTestData:h}=e,[p,g]=(0,d.useState)([]),[_,w]=(0,d.useState)([]),[C,y]=(0,d.useState)("all"),[b,j]=(0,d.useState)("all"),[k,N]=(0,d.useState)(),[I,E]=(0,d.useState)(!1),[S,L]=(0,d.useState)(),M=(0,lD.o)(null==o?void 0:o.secUid),{isSelf:F}=null!==(n=(0,d.useContext)(H))&&void 0!==n?n:{},[D,A]=(0,d.useState)(!1),U=(0,d.useRef)(),O=(0,d.useRef)(0),z=(0,d.useRef)((null==i?void 0:i.cursor)||0),W=(0,d.useRef)({}),Z=(0,d.useRef)(1),$=(0,d.useRef)(-1),K=(0,d.useRef)(!0);(0,d.useEffect)(()=>{F&&o.awemeCount&&t9.sendLog("creatorManageEntranceShow",{type:"post"})},[F,o.awemeCount]);let G=(0,d.useRef)(null==i?void 0:i.hasLocateItem),q=(0,d.useRef)([]),X=(0,d.useRef)([]),Y=(0,d.useCallback)(async()=>{var e,t,l,n;let o=(0,V.Rs)("vid"),r=!(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.find(e=>e.awemeId===o))&&G.current;G.current=!1;let a=F&&(null==K?void 0:K.current)&&0===z.current&&lF.dP.hasCache,{data:s=[],maxCursor:d=0,hasMore:u,statusCode:c,whaleInfo:v,timeList:m}=await lF.dP.request({cached:a,consume:!0,params:{userId:M,maxCursor:z.current,count:r?120:18,locateItemId:o,locateQuery:r,needTimeList:0===z.current,whaleCutToken:null===(t=W.current)||void 0===t?void 0:t.whaleCutToken},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});if((null==v?void 0:v.whaleBlockTimeSelect)==="1"&&E(!0),performance.getEntriesByName("user_page_init").length>0){performance.mark("user_post_fetched"),performance.measure("userMountedToFetched","user_page_init","user_post_fetched");let e=null===(l=performance.getEntriesByName("userMountedToFetched")[0])||void 0===l?void 0:l.duration,t=(null===(n=document.getElementById("sw-tag"))||void 0===n?void 0:n.innerHTML)==="1";if(!isNaN(e)&&t9.sendLog("userPageDataFetched",{cost:Math.floor(e),from_cache:t?0:1}),performance.clearMarks("user_page_init"),performance.clearMarks("user_post_fetched"),performance.clearMeasures("userMountedToFetched"),t&&0===z.current&&0===c&&s.length>0){let e=s.map(e=>({item_id:e.awemeId,dy_q:e.dyQ,tag:e.isAds?2:0,potential_risk_level:0,authentication_token:""}));(0,lR.Y)(e,"others_homepage").then(e=>{var t,l,n,o;if(0===e.statusCode&&(null===(t=e.result)||void 0===t?void 0:t.length)>0){let t=null===(l=U.current)||void 0===l?void 0:l.getDataList();X.current=e.result.map(e=>e.item_id),lL()(t)&&lL()(X.current)&&(null===(o=U.current)||void 0===o||null===(n=o.setScrollData)||void 0===n||n.call(o,{dataList:e=>e.filter(e=>!X.current.includes(null==e?void 0:e.awemeId))}))}})}}let f=s;f=await (0,lP.x)(f),m&&w(m);let h=f.length<6?O.current:z.current;return f.map(e=>(e.cursor=h,e)),Z.current=a?1:u,!c&&(a?setTimeout(()=>{var e,t;null===(t=U.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(O.current=z.current,z.current=d),W.current={whaleCutToken:null==v?void 0:v.whaleCutToken}),K.current=!1,{data:tK(f,q.current).filter(e=>!X.current.includes(e.awemeId)),maxCursor:a?0:d,hasMore:a?1:u,statusCode:a?0:c,whaleDecisionCustom:null==v?void 0:v.whaleDecisionCustom,clearBefore:!a&&0===O.current}},[M,h,F]);(0,d.useEffect)(()=>{var e,t;let l=(0,V.Rs)("vid");!(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.find(e=>e.awemeId===l))&&G.current&&(null===(t=U.current)||void 0===t||t.loadMoreData());let n=B.listen(B.EVENT.userHasLook,e=>{var t;A(!e.isInView),$.current=null!==(t=e.rank)&&void 0!==t?t:-1});return()=>{n()}},[]),(0,d.useEffect)(()=>{var e;(null==h?void 0:null===(e=h.AuthorBlock)||void 0===e?void 0:e.type)?E(!0):E(!1)},[h]);let Q=(0,d.useMemo)(()=>{var e;let t=tK(null!==(e=null==i?void 0:i.data)&&void 0!==e?e:[],q.current);return(0,T._)((0,a._)({},i),{data:t})},[i]),J=(0,d.useMemo)(()=>{var e;return{statusCode:0,data:p,maxCursor:(null===(e=p[p.length-1])||void 0===e?void 0:e.createTime)*1e3,hasMore:1,cursor:0}},[p]),[ee,et]=(0,d.useState)((null==p?void 0:p.length)>0||(null==Q?void 0:null===(t=Q.data)||void 0===t?void 0:t.length)>0);(0,d.useEffect)(()=>{var e;et((null==p?void 0:p.length)>0||(null==Q?void 0:null===(e=Q.data)||void 0===e?void 0:e.length)>0)},[p,null==Q?void 0:Q.data]);let el=(0,d.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,lT.FD)({awemeIds:e.map(e=>e.awemeId).join(",")})},[]),en=(0,d.useCallback)(()=>{z.current=0,W.current={}},[]),{updateAwemeCount:eo,isPostDelete:er,reloadForPostDelete:ei}=(0,d.useContext)(lx);(0,d.useEffect)(()=>{if(er){var e,t,l,n;null==U||null===(t=U.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),en(),null==U||null===(n=U.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n),y("all"),j("all"),v(!1),g([])}},[er,en,v]);let ea=lH({maxSelectedCount:50,operate:el,operateDesc:{operation:"删除",itemName:"作品"},addDescription:oe,onManageEndCallback:(0,d.useCallback)(e=>{let{manageCount:t=0}=e;x.Le.setConfig(x.gI.DeletePostList,Array(t).fill("")),null==ei||ei()},[ei]),tabName:"post",subTabName:"video"}),{changeShowConfirm:es,renderConfirmModal:eu,selectedCount:ec}=ea,ev=(0,d.useCallback)(e=>{var t,l,n,o;let r=((null==e?void 0:null===(l=e.cooperationInfo)||void 0===l?void 0:null===(t=l.cooperationCreators)||void 0===t?void 0:t.length)||0)>1,i=!1;r&&(null==e||null===(o=e.cooperationInfo)||void 0===o||null===(n=o.cooperationCreators)||void 0===n||n.forEach(e=>{"作者"===e.roleTitle&&e.secUid===M&&(i=!0)}));let a=r&&!i;return{disabled:a,disabledDesc:a?"共创视频无删除权限":""}},[M]),em=(0,d.useMemo)(()=>(0,s.jsxs)("div",{className:f()(lz.descText,lz.fuFang),children:[(0,s.jsx)("p",{children:"找不到内容？"}),(0,s.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,s.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]),ef=(0,d.useCallback)(()=>{p.length<50&&(null==eo||eo(p.length,!1))},[eo,p.length]);return(0,d.useEffect)(()=>{let e=(0,V.Rs)("high_light_aweme_id");e&&(L(e),(0,V.U$)(["high_light_aweme_id"]))},[]),(0,s.jsxs)(lO.Provider,{value:(0,a._)({},ea),children:[(0,s.jsxs)("div",{className:lz.post,children:[(0,s.jsx)(n9,{topNavHeight:c,topOffset:m?-200:u,children:(0,s.jsxs)("div",{className:f()(lz.header,{[lz.noMarginBottom]:F}),id:"user-tabbar-2",children:[(0,s.jsx)("div",{className:lz.tabContainer,children:(0,s.jsxs)("div",{className:f()(lz.title,lz.active),children:[(0,s.jsx)("span",{children:"视频"}),F&&(0,s.jsx)(R.a,{className:lz.setLink,href:t1,target:"_blank",children:(null==h?void 0:null===(l=h.userUiUpdate)||void 0===l?void 0:l.type)?(0,s.jsx)(ed.u,{className:lz.tip,position:"right",content:(0,s.jsx)("span",{className:lz.tipText2,children:"点击前往创作服务平台管理视频"}),children:(0,s.jsx)(nS,{className:lz.setIcon})}):(0,s.jsx)(nS,{className:lz.setIcon})})]})}),(0,s.jsxs)("div",{className:lz.tool,ref:N,children:[ee&&(0,s.jsxs)(s.Fragment,{children:[F&&(0,s.jsx)(nD,{actionText:"删除作品",clickOperateButton:()=>{es(!0)},tabName:"post",subTabName:"video",operateBtns:[{key:"cancel_post",actionText:"删除作品",onClick:()=>{es(!0),t9.sendLog("manageDeleteClick",{tab_name:"post",sub_tab_name:"video",item_cnt:ec})}}]}),!I&&(0,s.jsx)(nO,{postTimeList:_,onTimeClick:e=>{y(e),j(e),"all"===e&&(0,lw.V)().scrollTo(0,0)},isSelf:F,currentScrollTime:b,logParams:{enter_from:F?"personal_homepage":"others_homepage",tab_name:"post"}})]}),F&&(0,s.jsx)(ed.u,{position:"bottomRight",className:lz.tipClassName,content:em,children:(0,s.jsx)("div",{className:f()(lz.tip,lz.bottomTip,lz.fuFang),children:(0,s.jsx)(na,{})})})]})]})}),(0,s.jsxs)("div",{className:lz.list,"data-e2e":"user-post-list",children:["all"===C||I?(0,s.jsx)(nI,{ref:U,resetStatusFunc:en,handleLoadEnd:ef,uid:M,highLightAwemeId:S,tab:"post",currentTab:r,defaultRes:p.length>0?J:Q,fetchMoreData:Y,setUserPostList:g,retryTimes:5,getItemSelectedDisabled:ev,topNavHeight:c,topOffset:u,panelNoData:(0,s.jsx)(P.H,{className:lz.empty,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:"该账号还未发布过作品哦～"})}):(0,s.jsx)(n5,{userInfo:o,selectPartilarTime:C,setCurrentScrollTime:j,defaultUserPostList:p,defaultHasMore:Z.current,setUserPostList:g,uid:M,isSelf:F,tab:"post",currentTab:r,setSelectPartilarTime:y,setHideUserInfo:v,resetStatusFunc:en,getItemSelectedDisabled:ev,onBan:()=>E(!0),rebackParamRef:W}),!F&&D&&"all"===C&&(0,s.jsx)("div",{className:lz.hasLook,onClick:()=>{var e;null===(e=U.current)||void 0===e||e.locateSelectVideo($.current,-150)},children:(0,s.jsxs)("div",{className:lz.btn,children:[(0,s.jsx)("span",{className:lz.text,children:"刚刚看过"}),(0,s.jsx)(nE,{})]})})]})]}),null==eu?void 0:eu()]})},ol=l("203138"),on=l("449142"),oo=l("55035");let or=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16.5,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M7.158 11.693c-.41.41-1.073.41-1.482 0l-4.81-4.81a1.248 1.248 0 0 1 0-1.765L5.676.307a1.048 1.048 0 1 1 1.482 1.482L3.995 4.953h11.982a1.048 1.048 0 0 1 0 2.095H3.996l3.162 3.163c.41.41.41 1.073 0 1.482z",fill:"#000"})})));var oi=l("574749");let oa=e=>{let{width:t=16.5,height:l=12,className:n}=e;return(0,s.jsx)(oi.A,(0,T._)((0,a._)({},e),{width:t,height:l,src:or,id:"svg_arrow_right",viewBox:"0 0 16.5 12",defaultWidth:16.5,defaultHeight:12,className:n}))};var os=l("387683"),od=l("974432"),ou="vTGGaCEj",oc="_E6wXAs8",ov="TMefEfyJ",om=e=>{let{title:t="暂无喜欢的视频",desc:l="快在推荐中寻找更多视频吧",className:n,type:o="like"}=e,r=(0,d.useCallback)(()=>{l5.i.sendLog("clickBackRecommend",{enter_from:(0,tf.vM)()})},[]),i=new Map([["like",(0,s.jsx)(os.Z,{},"like")],["collect",(0,s.jsx)(od.Z,{},"collect")]]).get(o||"like");return(0,s.jsx)(P.H,{className:f()(ou,n),icon:i,title:t,desc:l,children:(0,s.jsxs)(oo.a,{href:"/?enter=guide",className:oc,target:"_self",onClick:r,children:[(0,s.jsx)(oa,{}),(0,s.jsx)("p",{className:ov,children:"去推荐页"})]})})},of={header:"kCYotMZF",like:"gsbxl0vx",likeNoMarginTop:"p3QFKjD3",errorContent:"Tkws3Lvb",bottomTip:"sERLBNUL",tipSvg:"wJRf6Tel",fuFang:"MA7TBB72",empty:"A_dk5RPH",descText:"X1rtkjZ8"};async function oh(e,t){let l,n=t;for(let t=0;t<10;t++){var o;if(n=(l=await e(n)).cursor,!l.hasMore||!!(null===(o=l.data)||void 0===o?void 0:o.length))break}return l}var op=e=>{var t,l;let{userInfo:n,currentTab:o,topNavHeight:r=60,abTestData:i}=e,u={statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:0},c=(0,lD.o)(null==n?void 0:n.secUid),{isSelf:v}=null!==(l=(0,d.useContext)(H))&&void 0!==l?l:{},m=(0,d.useRef)(0),h=(0,d.useRef)(0),p=(0,d.useRef)({}),g=(0,d.useRef)([]),[_,x]=(0,d.useState)([]),[w,C]=(0,d.useState)(),y=(0,d.useRef)(!0),b=(0,d.useCallback)(async()=>{let e=v&&(null==y?void 0:y.current)&&lF.$w.hasCache,{data:t=[],maxCursor:l=0,hasMore:n,statusCode:o,logPb:r,whaleInfo:i}=await oh(t=>{var l;return lF.$w.request({cached:e,consume:!0,params:{userId:c,maxCursor:t,count:18,whaleCutToken:null===(l=p.current)||void 0===l?void 0:l.whaleCutToken},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}})},h.current),a=t.length<6?m.current:h.current;return t.map(e=>(e.cursor=a,e)),!o&&(e?setTimeout(()=>{var e,t;null===(t=E.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(m.current=h.current,h.current=l),p.current={whaleCutToken:null==i?void 0:i.whaleCutToken}),y.current=!1,{data:tK(t,g.current),maxCursor:e?0:l,hasMore:e?1:n,statusCode:e?0:o,whaleDecisionCustom:null==i?void 0:i.whaleDecisionCustom,logPb:r,clearBefore:!e&&0===m.current}},[c,i,v]),j=(0,d.useCallback)(()=>{h.current=0,p.current={}},[]),k=(0,d.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,on.I)(e.awemeType)}),(0,lT.aA)({awemeIds:l.join(","),itemTypeMap:t})},[]),{updateFavoriteCount:N,isPostDelete:I}=(0,d.useContext)(lx),E=(0,d.useRef)();(0,d.useEffect)(()=>{if(I){var e,t,l,n;null==E||null===(t=E.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),j(),null==E||null===(n=E.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[I,j]);let S=(0,d.useCallback)(e=>{let{manageCount:t=0}=e;null==N||N(-t,!0)},[N]),L=(0,d.useCallback)(()=>{_.length<50&&(null==N||N(_.length,!1))},[N,_.length]),M=lH({maxSelectedCount:50,operate:k,operateDesc:{operation:"取消",itemName:"喜欢的作品"},onManageEndCallback:S,tabName:"like",subTabName:"video"}),{changeShowConfirm:T,renderConfirmModal:R,selectedCount:F}=M,[D,A]=(0,d.useState)(!1),[V,B]=(0,d.useState)((null==_?void 0:_.length)>0||(null==u?void 0:null===(t=u.data)||void 0===t?void 0:t.length)>0),U=(0,d.useMemo)(()=>(0,s.jsxs)("div",{className:f()(of.descText,of.fuFang),children:[(0,s.jsx)("p",{children:"找不到内容？"}),(0,s.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,s.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]);return((0,d.useEffect)(()=>{var e;B((null==_?void 0:_.length)>0||(null==u?void 0:null===(e=u.data)||void 0===e?void 0:e.length)>0)},[_,null==u?void 0:u.data]),v||n.showFavoriteList)?(0,s.jsxs)(lO.Provider,{value:(0,a._)({},M),children:[(0,s.jsxs)("div",{className:f()(of.like,{[of.likeNoMarginTop]:v}),"data-e2e":"user-like-list",children:[v&&(0,s.jsx)(n9,{topNavHeight:r,children:(0,s.jsxs)("div",{className:of.header,children:[V&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(nD,{operateBtns:[{key:"cancel_like",actionText:"取消喜欢",onClick:()=>{T(!0),t9.sendLog("manageDeleteClick",{tab_name:"like",sub_tab_name:"video",item_cnt:F})}}],tabName:"like",subTabName:"video",onRef:e=>C(e)})}),(0,s.jsx)(ed.u,{className:of.bottomTip,position:"bottomRight",content:U,children:(0,s.jsx)(na,{className:f()(of.tipSvg,of.fuFang),style:{marginLeft:"20px"}})})]})}),(0,s.jsx)(nI,{ref:E,handleLoadEnd:L,resetStatusFunc:j,uid:c,tab:"like",currentTab:o,defaultRes:u,fetchMoreData:b,retryTimes:5,panelNoData:v?(0,s.jsx)(om,{className:of.empty}):void 0,updateAwemeList:x,topNavHeight:r})]}),null==R?void 0:R()]}):(0,s.jsx)(P.H,{icon:(0,s.jsx)(ol.Z,{}),title:"喜欢内容不可见",desc:"该用户已将喜欢设为私密",className:of.errorContent})},og=l("360849"),o_=l("559275"),ox=l("445659"),ow=l("584510"),oC=l("978980"),oy={header:"l0yVDkeQ",container:"rfWuXODt",item:"vFmDUkVQ",empty:"ltKG4ISH"};function ob(e){let t=W()(e);if(!t.isValid())return"";let l=x.Le.getConfig(x.gI.ServerTime),n=l?W()(l):W()(),o=t.isSame(n,"day"),r=t.isSame(n.subtract(1,"day"),"day");return o?"今天":r?"昨天":n.format("YYYY")===t.format("YYYY")?t.format("MM月DD日"):t.format("YY年MM月DD日")}let oj=(0,lZ.ZP)(()=>Promise.all([l.e("6102"),l.e("9448"),l.e("920"),l.e("5968"),l.e("9107"),l.e("7016"),l.e("7726"),l.e("2758"),l.e("805"),l.e("8633"),l.e("3263"),l.e("2161"),l.e("1551"),l.e("2268"),l.e("2195"),l.e("3690"),l.e("597")]).then(l.bind(l,613470)),{ssr:!1});var ok=d.forwardRef(function(e,t){var l,n,o;let{currentTab:r,tab:i,setHasClean:u,userInfo:c,topNavHeight:v=60}=e,m=(0,lD.o)(null==c?void 0:c.secUid),{isSelf:h}=(0,d.useContext)(H)||{},p=null!==(n=(0,d.useContext)(U.C))&&void 0!==n?n:{},g=null!==(o=(0,d.useContext)(O.Context))&&void 0!==o?o:{},[_,x]=(0,d.useState)([]),[w,C]=(0,d.useState)(-1),[y,b]=(0,d.useState)(""),j=(0,d.useRef)(),k=(0,d.useRef)(),N=(0,d.useRef)(0),I=(0,d.useRef)(),{reloadForPostDelete:E,isPostDelete:S}=(0,d.useContext)(lx),L=(0,d.useRef)({}),M=(0,d.useRef)(!0),T=(0,d.useRef)(0);(0,d.useEffect)(()=>{if(S){var e,t,l,n;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),N.current=0,null==j||null===(n=j.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[S]);let R=async()=>{var e;let t=h&&(null==M?void 0:M.current)&&0===N.current&&lF.vF.hasCache,{data:l,cursor:n,hasMore:o,statusCode:r}=await lF.vF.request({cached:t,consume:!0,params:(0,a._)({maxCursor:N.current,count:20},null!==(e=null==L?void 0:L.current)&&void 0!==e?e:{}),fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});return l.length>0&&u(!0),!r&&(t?setTimeout(()=>{var e,t;null===(t=j.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(T.current=N.current,N.current=n)),M.current=!1,{data:l,hasMore:t?1:o,statusCode:t?0:r,clearBefore:!t&&0===T.current}},F=async e=>{var t,l,n,o;N.current=0,L.current=e,null==j||null===(l=j.current)||void 0===l||null===(t=l.resetRes)||void 0===t||t.call(l,{statusCode:0,dataList:[],hasMore:!0});let{statusCode:r,data:i=[],hasMore:a}=await (null==R?void 0:R());null==j||null===(o=j.current)||void 0===o||null===(n=o.resetRes)||void 0===n||n.call(o,{statusCode:r,dataList:i,hasMore:a})},D=(0,d.useCallback)((e,t)=>(0,s.jsx)(ny,{rank:t,info:e,isSelf:h,tab:i,uid:m,onClick:l=>{null==l||l.preventDefault(),I.current="",C(t),k.current=e},onNicknameClick:()=>{I.current="author_card",C(t),k.current=e}}),[]);(0,d.useEffect)(()=>{_.length&&b(e=>{var t,l;let n=ob(null!==(l=null===(t=_[0])||void 0===t?void 0:t.historyTime)&&void 0!==l?l:0);return""!==e?e:n});let e=(0,lw.s)(),t=()=>{let t=document.querySelector(".record_card");if(t){var l,n,o;let r=(null==t?void 0:t.clientHeight)+24;if((null==t?void 0:t.offsetTop)-220>(0,n4.F)(e).y)b(ob(null!==(n=null===(l=_[0])||void 0===l?void 0:l.historyTime)&&void 0!==n?n:0));else{let t=window.innerWidth>l3.I?6:3,l=Math.floor(((0,n4.F)(e).y-220)/r);if(l>=0){let e=_[l*t];b(ob(null!==(o=null==e?void 0:e.historyTime)&&void 0!==o?o:0))}}}};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[_]);let A=(0,np.m)();return(0,d.useEffect)(()=>{let e=(0,V.Rs)("aweme_id");if(e&&_&&(null==_?void 0:_.length)>0){var t;let l=null==_?void 0:null===(t=_.findIndex)||void 0===t?void 0:t.call(_,t=>(null==t?void 0:t.awemeId)===e);e&&-1!==l&&C(l),(0,V.U$)("aweme_id")}},[_]),(0,d.useEffect)(()=>B.listen(B.EVENT.openUserModal,e=>{let{awemeId:t}=e,l=(0,V.Rs)("aweme_id");if(l&&t===l&&_&&(null==_?void 0:_.length)>0){var n;let e=null==_?void 0:null===(n=_.findIndex)||void 0===n?void 0:n.call(_,e=>(null==e?void 0:e.awemeId)===l);-1!==e&&C(e),(0,V.U$)("aweme_id")}}),[_]),(0,d.useImperativeHandle)(t,()=>({reloadList:F})),(0,s.jsxs)(s.Fragment,{children:[_.length>0&&(0,s.jsx)(n9,{headerHeight:44,topNavHeight:v+44,noBgImage:!0,children:(0,s.jsx)("div",{className:oy.header,children:y})}),(0,s.jsx)(lG.Z,{scrollContainerEl:A,ref:j,containerClassName:oy.container,itemClassName:f()(oy.item,"record_card"),panelNoData:(0,s.jsx)(P.H,{className:oy.empty,icon:(0,s.jsx)(o_.Z,{}),title:"暂无内容",desc:"暂时还没有观看历史记录哦"}),skeletonNum:0,renderItem:D,fetchMoreData:R,setDataList:x,pause:r!==i,dataFilter:(e,t)=>t?e.filter(e=>-1===t.findIndex(t=>(null==t?void 0:t.awemeId)===e.awemeId)):e}),-1!==w&&(0,s.jsx)(oj,{modalInnerFeedCard:I.current,uid:m,userContext:g,abtestData:p,isSelf:h,anyHooks:oC.a,originAwemeInfo:k.current,userAwemeList:_,scrollRef:j,modalVideoIndex:w,additionalDistance:-150,close:()=>{var e;C(-1),null==E||E(),(0,V.U$)("aweme_id"),(0,V.U$)("is_personal_panel_video"),(null==L?void 0:null===(e=L.current)||void 0===e?void 0:e.status)===$.VideoStatusFilter.Watching&&F(null==L?void 0:L.current)},moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:h},logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,V.Rs)("enter_method"),is_personal_panel_video:Number((0,V.Rs)("is_personal_panel_video"))||0,tab_name:"record_card",sub_tab_name:"video"},shortCutFilteredList:[null===(l=lY.getShortcut().dislike)||void 0===l?void 0:l.key],modalEnterFrom:"userRecord",scene:"record"})]})}),oN=l("350464"),oI=l.n(oN),oE=l("830272"),oS=l("946816"),oL=l("913233");let oM=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:20,height:21,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsxs)("g",{opacity:".9",fill:"#AEAFB3",children:[(0,s.jsx)("path",{d:"M14.873 15.507h-.45V14.21a4.28 4.28 0 0 0-2.398-3.846 4.28 4.28 0 0 0 2.398-3.845V5.22h.45c.232 0 .42-.191.42-.428a.424.424 0 0 0-.42-.429H5.42a.424.424 0 0 0-.42.429c0 .237.188.428.42.428h.442V6.52a4.28 4.28 0 0 0 2.398 3.845 4.28 4.28 0 0 0-2.398 3.846v1.297H5.42a.424.424 0 0 0-.42.429c0 .236.188.428.42.428h9.453c.232 0 .42-.192.42-.428a.424.424 0 0 0-.42-.429zM6.719 6.492v-1.27h6.872v1.27a3.436 3.436 0 0 1-6.872 0zm6.872 9.015H6.719v-1.27a3.436 3.436 0 0 1 6.872 0v1.27z"}),(0,s.jsx)("path",{d:"M10.578 8.656a.429.429 0 0 0-.43-.429c-.96 0-1.712-.752-1.712-1.712a.429.429 0 0 0-.858 0c0 1.441 1.13 2.57 2.57 2.57a.429.429 0 0 0 .43-.429z"})]})})));var oT={container:"Rob0_biX",leftWrap:"mQYG0vZk",cover:"Nioh_n3i",msec:"rOrFqcrJ",skeleton:"GDa69Sjd",rightWrap:"g5ZyDP9F",title:"NtGePu0X",updateWrap:"Flnv5ByF",updateTip:"cdlf8r7O",updateCount:"YQDyvBpX",process:"AatIzwCs",processText:"Uf82xGMb"};W().extend(oI());var oR=e=>{var t;let{info:l,rank:n,query:o}=e,[r,i]=(0,l$.Z)();(0,d.useEffect)(()=>{var e,t,o;t9.sendLog("vsVideoShow",(0,T._)((0,a._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",sub_tab_type:"",recommend_rank_num:n})),t9.sendLog("vsVideoSeasonCoverShowV2",(0,T._)((0,a._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",to_vs_episode_id:null===(e=l.eventParams)||void 0===e?void 0:e.vs_episode_id,to_vs_ep_group_id:null===(t=l.eventParams)||void 0===t?void 0:t.vs_eq_group_id,to_room_id:null===(o=l.eventParams)||void 0===o?void 0:o.room_id,recommend_rank_num:n}))},[i,n,l]);let u=(0,oL.iV)(null==l?void 0:l.albumId);return(0,s.jsx)(R.a,{href:`/${u?"vsdetail":"lvdetail"}/${l.episodeId}${o?`?${o}`:""}`,target:"_blank",rel:"noopener noreferrer",onClick:()=>{var e,t,o;t9.sendLog("vsVideoSeasonCoverClickV2",(0,T._)((0,a._)({},l.eventParams),{enter_from_merge:"personal_homepage",enter_method:"history",previous_page:"",previous_page_enter_method:"",previous_page_sub_tab:"",to_vs_episode_id:null===(e=l.eventParams)||void 0===e?void 0:e.vs_episode_id,to_vs_ep_group_id:null===(t=l.eventParams)||void 0===t?void 0:t.vs_eq_group_id,to_room_id:null===(o=l.eventParams)||void 0===o?void 0:o.room_id,recommend_rank_num:n}))},children:(0,s.jsxs)("div",{className:oT.container,ref:r,children:[(0,s.jsxs)("div",{className:oT.leftWrap,children:[(0,s.jsx)(oE.Q,{iconWidth:52,iconHeight:60,src:l.coverUrl,alt:l.title,imgClass:oT.cover,skeletonClass:oT.skeleton}),(0,s.jsx)("span",{className:oT.msec,children:(t=l.msec,W().duration(t).format("HH:mm:ss"))}),(0,s.jsx)(oS.zx,{type:{3:"primary",4:"limited",6:"default"}[l.labelV2]})]}),(0,s.jsxs)("div",{className:oT.rightWrap,children:[(0,s.jsxs)("div",{className:oT.title,children:[l.titleBefore?`${l.titleBefore} | `:"",l.titleAfter]}),(0,s.jsxs)("div",{className:oT.updateWrap,children:[l.hasUpdate&&(0,s.jsx)("span",{className:oT.updateTip,children:"有更新"}),l.hasUpdate&&(0,s.jsx)("span",{className:oT.updateCount,children:l.updatedEpisode})]}),(0,s.jsxs)("div",{className:oT.process,children:[(0,s.jsx)(J.Z,{className:oT.icon,src:oM,width:20,height:20,viewBox:"0 0 20 20"}),(0,s.jsxs)("span",{className:oT.processText,children:["观看到",l.progress,"%"]})]})]})]})})},oF={container:"KEtlwEIB",content:"vpDhMz_C",date:"nWMGY7uD",list:"kLQsHem3",card:"i3HIfbKm",bottom:"ygovZeth",noMore:"e5gebhD4",error:"ympmCRwi"};let oP=(e,t)=>(t.forEach(t=>{let l=ob(1e3*t.playTime);e[l]?e[l].push(t):e[l]=[t]}),(0,a._)({},e));var oD=e=>{let{setHasClean:t}=e,[l,n]=(0,d.useState)({}),[o,r]=(0,d.useState)(!1),i=(0,d.useRef)(o);i.current=o;let a=(0,d.useRef)(null),c=(0,d.useRef)(0),v=(0,d.useRef)(!0),m=(0,d.useCallback)(async()=>{r(!0);let{data:e,cursor:l,hasMore:o,statusCode:i}=await (0,ow.TF)({cursor:c.current,count:20});return e.length>0&&t(!0),!i&&(c.current=l,v.current=o),n(t=>oP(t,e)),r(!1),{list:e,hasMore:o,statusCode:i}},[]),f=(0,d.useCallback)(async()=>{a.current&&v.current&&!i.current&&a.current.getBoundingClientRect().bottom-window.innerHeight<=600&&await m()},[]);return((0,d.useEffect)(()=>{let e=n6()(f,50),t=(0,lw.s)();return t.addEventListener("scroll",e),()=>{t.removeEventListener("scroll",e)}},[]),(0,d.useEffect)(()=>{m()},[]),0!==Object.keys(l).length||v.current)?(0,s.jsxs)("div",{className:oF.container,ref:a,children:[(0,s.jsx)("div",{className:oF.content,children:Object.keys(l).map(e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:oF.date,children:e}),(0,s.jsx)("ul",{className:oF.list,children:l[e].map((e,t)=>(0,s.jsx)("li",{className:oF.card,children:(0,s.jsx)(oR,{info:e,rank:t,query:u.stringify({t:Math.floor((null==e?void 0:e.msec)/1e3)})})},t))})]}))}),(0,s.jsxs)("div",{className:oF.bottom,children:[o&&(0,s.jsx)(h.gb,{}),!o&&!v.current&&(0,s.jsx)("div",{className:oF.noMore,children:"暂时没有更多了"})]})]}):(0,s.jsx)("div",{className:oF.error,children:(0,s.jsx)(P.H,{icon:(0,s.jsx)(o_.Z,{}),title:"暂无内容",desc:"暂时还没有观看历史记录哦"})})};l("555266");var oA=l("613470"),oV=l("910924"),oB=l("944845"),oH=l("124797");let oU=e=>{let{awemeId:t,scene:l,countOnce:n}=e,o=x.Le.getConfig(x.gI.UnLookVideos)||{};!o[t]&&(o[t]={status:oH.Pl.UnLook,countOnce:n,scene:l}),x.Le.setConfig(x.gI.UnLookVideos,o)};var oO=l("459201");let oz=e=>{let{notSeenItemList:t=[],originAwemeInfo:l,setAwemeInfoList:n,setCurrentNumber:o,currentAwemeInfo:r}=e,i=(0,d.useRef)({});(0,d.useEffect)(()=>{l&&(n([l]),o(0))},[l]),(0,d.useEffect)(()=>{if((null==t?void 0:t.length)>0){var e;null==t||null===(e=t.forEach)||void 0===e||e.call(t,e=>{oU({awemeId:e,countOnce:1,scene:$.ModalEnterFromVal.UserCard})})}},[t]),(0,d.useEffect)(()=>{var e;(null==r?void 0:r.awemeId)&&!i.current[null==r?void 0:r.awemeId]&&(null==r?void 0:r.awemeId)&&(null==t?void 0:t.length)>0&&(null==t?void 0:null===(e=t.includes)||void 0===e?void 0:e.call(t,null==r?void 0:r.awemeId))&&(i.current[null==r?void 0:r.awemeId]=!0,(0,e_.qA)({item_id_list:null==r?void 0:r.awemeId,type:1}),(0,oO.O)({awemeInfo:r}))},[r,t])};var oW={user:"P1B3PiL5",container:"mx5D0gyt",listSortByTime:"eYi5alaQ",date:"BvO4Rcyz",hidden:"zo8mkd9l",cardList:"NuwV74Jl",cardContainer:"vaX4ld2F",loading:"C3HNpNm7",empty:"bvynnzP1"},oZ={userVisitedCard:"MnTIxRWW",avatarWrap:"P6f5bGPU",avatar:"A4RC3ZdD",info:"LGJNvUJt",desc:"Wh5ryeaQ",nameInfo:"HF3gJ_uh",nickname:"urvnjlJ0",badge:"h1VJgrlJ",badgeIcon:"GtWmJPA6",extraLine:"QjFOBbb7",extra:"cMDAGhTH",liveExtraText:"RoXiLJBN",followButton:"Si6S0m9J",contentBlock:"WLRsvsed"};let o$=function(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",l=null==t?void 0:null===(e=t.indexOf)||void 0===e?void 0:e.call(t,"\n");return l>=0?`${t.substring(0,l)}`:t};var oK={User:"user",Live:"live"};function oG(e){var t,l,n,o,r,i;let{scene:u="user",abtestData:c,logId:v="",isSelf:m,logParams:h={},selfUid:p,isLogin:g,dispatch:_,selfSecUid:x,userVisitedInfo:w,className:C,onClick:y}=e,{nickname:b,uid:j,secUid:k,avatarSrc:N,followStatus:I,followerStatus:E,notSeenItemIdList:S,roomData:L,infoStruct:M,accountCertInfo:T,desc:R,roomIdStr:F,scheduledText:P}=w||{},D=!!(null==L?void 0:null===(t=L.owner)||void 0===t?void 0:t.web_rid),A=(0,d.useRef)(v),V=(0,d.useMemo)(()=>(null==M?void 0:M.priority)===$.VerifyType.HAS_NEW_PUBLISH?(null==M?void 0:M.text)||null:"",[M]),H=(0,d.useMemo)(()=>{var e;return(0,a._)({web_rid:null==L?void 0:null===(e=L.owner)||void 0===e?void 0:e.web_rid,enter_from_merge:"personal_homepage",action_type:"click",room_id:F},h||{})},[F,null==L?void 0:null===(l=L.owner)||void 0===l?void 0:l.web_rid,h]),U=(0,d.useMemo)(()=>L?{authorInfo:{roomData:L,roomId:F,nickname:b,title:b,secUid:k,desc:R,uid:j},desc:R}:{},[L,R,F,b,j,k]),{follow:O,unFollow:z}=(0,tv.OM)({selfUid:p,actionUid:j,defaultFollowerStatus:E,defaultFollowStatus:I,isLogin:g,onLoginSuccess:()=>null==_?void 0:_({type:"updateUserInfo"}),success:e=>{let{action:t}=e;("unFollow"===t||"follow"===t)&&m&&B.emit(B.EVENT.UpdateSelfPageFollowCount,{action:t})},fail:tv.GH}),{followStatus:W,text:Z,buttonType:G}=(0,tm.r)({selfUid:p,actionUid:j,defaultFollowerStatus:E,defaultFollowStatus:I});return(0,s.jsxs)("div",{className:f()(oZ.userVisitedCard,C),onClick:e=>{var t;return null==y?void 0:y(e,{isLiving:D,actionUid:j,webRid:null==L?void 0:null===(t=L.owner)||void 0===t?void 0:t.web_rid,roomId:F,actionSecUid:k,notSeenItemIdList:S})},children:[(0,s.jsx)("div",{className:oZ.avatarWrap,children:D?(0,s.jsx)(tt.nh,{type:"large",src:N,alt:`${b}头像`,uid:j,liveRoomUrl:(0,tn.cc)(H),isNeedSendLog:!0,liveRoomParam:{logId:A.current,episodeExtra:null==L?void 0:L.episode_extra},isFirstLive:(null==L?void 0:null===(o=L.episode_extra)||void 0===o?void 0:null===(n=o.mod)||void 0===n?void 0:n.episode_stage)===2,isEcomLive:(null==L?void 0:null===(i=L.ecom_data)||void 0===i?void 0:null===(r=i.room_cart_v2)||void 0===r?void 0:r.show_cart)===1,onClick:e=>{e.preventDefault()},abtestData:c,logParams:h,awemeInfo:U,position:"right",from:"follow",scene:"pc_profile_struct",zIndex:1e4}):(0,s.jsx)(tl.q,{className:oZ.avatar,src:N,alt:`${b}头像`})}),(0,s.jsxs)("div",{className:oZ.info,children:[(0,s.jsxs)("div",{className:oZ.nameInfo,children:[(0,s.jsx)("div",{className:oZ.nickname,children:(0,s.jsx)(K.Z,{text:b})}),(0,s.jsx)(Q.C,{iconClassName:oZ.badgeIcon,accountCertInfo:T,className:oZ.badge,isRoleNameShow:!1})]}),R&&(null==R?void 0:R.length)>0?(0,s.jsx)("div",{className:oZ.desc,children:(0,s.jsx)(K.Z,{text:o$(R)})}):null,"user"===u&&!!V&&(0,s.jsx)("div",{className:oZ.extraLine,children:(0,s.jsx)("span",{className:oZ.extra,children:V})}),"live"===u&&(0,s.jsxs)(s.Fragment,{children:[!D&&!!P&&(0,s.jsx)("div",{className:oZ.liveExtraText,children:P}),D&&!!(null==L?void 0:L.title)&&(0,s.jsx)("div",{className:oZ.liveExtraText,children:null==L?void 0:L.title})]})]}),(0,s.jsx)(ed.zx,{className:oZ.followButton,type:G===tc.TT.Active?"primary":"secondary",onClick:e=>{e.stopPropagation(),(0,tp.V)(W)?z():O()},theme:"solid",children:(0,s.jsx)("div",{className:oZ.contentBlock,children:Z})})]})}var oq=e=>{var t,l,n,o;let{setHasClean:r,currentTab:i,tab:a,topNavHeight:c=60}=e,v=null!==(l=(0,d.useContext)(U.C))&&void 0!==l?l:{},m=null!==(n=(0,d.useContext)(O.Context))&&void 0!==n?n:{},{isSelf:p}=null!==(o=(0,d.useContext)(H))&&void 0!==o?o:{},{dispatch:g,userInfo:_}=m,[x,w]=(0,d.useState)(),[C,y]=(0,d.useState)([]),[b,j]=(0,d.useState)(!1),k=(0,d.useRef)(),N=(0,np.m)(),I=(0,d.useRef)(),E=(0,d.useRef)({}),[S,L]=(0,d.useState)(!1),[M,T]=(0,d.useState)(""),R=async e=>{var t;let{data:l=[],statusCode:n,whaleInfo:o}=await (0,nz.eG)({userId:e,count:10,needTimeList:!1,whaleCutToken:null===(t=E.current)||void 0===t?void 0:t.whaleCutToken});return 0===n&&(E.current={whaleCutToken:null==o?void 0:o.whaleCutToken}),{statusCode:n,data:l}},F=async(e,t)=>{var l;null==e||null===(l=e.preventDefault)||void 0===l||l.call(e);let{isLiving:n,actionSecUid:o,webRid:r,roomId:i,notSeenItemIdList:a=[]}=t||{};if(n){let e=(0,tn.cc)({web_rid:r,enter_from_merge:"personal_homepage",enter_method:"live_user_page_visit",enter_method_temai:"live_user_page_visit",action_type:"click",room_id:i});window.open(e,"_blank","noopener")}else try{if(L(!0),(null==a?void 0:a.length)>0){y(a);let e=await (0,oB.m_)({awemeId:a[0]});if(L(!1),(null==e?void 0:e.statusCode)===0){let{detail:t}=e||{};w(t),j(!0)}else X.F.info("服务异常，请重试")}else{if(!o){X.F.info("服务异常，请重试"),L(!1);return}let{statusCode:e,data:t}=await R(o);if(L(!1),0===e){if(t&&(null==t?void 0:t.length)>0){let e=t.sort((e,t)=>t.createTime-e.createTime)[0];w(e),j(!0)}else{let e=(0,tn.HC)(o,(0,u.stringify)({enter_from:"personal_homepage",is_search:0}));window.open(e,"_blank","noopener")}}else X.F.info("服务异常，请重试")}}catch(e){X.F.info("服务异常，请重试"),L(!1)}},D=async()=>{let{statusCode:e,userVisitedInfos:t,cursor:l,hasMore:n}=await (0,nz.UK)({cursor:I.current,count:20});return 0===e&&(I.current=l,(null==t?void 0:t.length)>0&&r(!0)),{statusCode:e,hasMore:n,data:t}},A=()=>{var e,t,l,n;null==k||null===(t=k.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),I.current=void 0,null==k||null===(n=k.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)};return(0,d.useEffect)(()=>{let e=(0,lw.s)(),t=()=>{let t;let l=(0,n4.F)(e).y,n=document.querySelectorAll(".user_record_date");if(l<148)t=n[0];else{var o;let e=[];null==n||null===(o=n.forEach)||void 0===o||o.call(n,t=>{(null==t?void 0:t.offsetTop)<Math.abs(l-148)&&e.push(t)}),(null==e?void 0:e.length)>0&&(t=e[e.length-1])}t&&T(null==t?void 0:t.innerText)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,s.jsxs)("div",{className:oW.user,children:[M&&(0,s.jsx)(n9,{headerHeight:44,topNavHeight:c+44,noBgImage:!0,children:(0,s.jsx)("div",{className:oW.date,children:M})}),(0,s.jsx)(lG.Z,{ref:k,scrollContainerEl:N,itemClassName:oW.cardContainer,containerClassName:oW.container,fetchMoreData:D,skeletonNum:0,pause:i!==a,panelNoData:(0,s.jsx)(P.H,{className:oW.empty,icon:(0,s.jsx)(o_.Z,{}),title:"暂无内容",desc:"暂时还没有用户历史记录哦"}),renderList:e=>{var t,l,n;let o=Object.entries(null==e?void 0:null===(t=e.reduce)||void 0===t?void 0:t.call(e,(e,t)=>{let{visitTime:l}=t,n=W().unix(l).format("YYYY-MM-DD"),o=e[n];return e[n]=[...o||[],t],e},{})).sort((e,t)=>e[0]>t[0]?-1:0).map(e=>{let[t,l]=e;return{date:ob(t),list:l}});return!M&&T(null===(n=o[0])||void 0===n?void 0:n.date),(0,s.jsx)(s.Fragment,{children:null==o?void 0:null===(l=o.map)||void 0===l?void 0:l.call(o,(e,t)=>{var l;let{date:n,list:o}=e;return(0,s.jsxs)("div",{className:oW.listSortByTime,children:[(0,s.jsx)("div",{className:f()(oW.date,"user_record_date",{[oW.hidden]:M&&0===t}),children:n}),(0,s.jsx)("div",{className:oW.cardList,children:null==o?void 0:null===(l=o.map)||void 0===l?void 0:l.call(o,e=>{var t,l;return(0,s.jsx)(oG,{scene:oK.User,className:oW.cardContainer,userVisitedInfo:e,selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,selfSecUid:null==_?void 0:null===(l=_.info)||void 0===l?void 0:l.secUid,dispatch:g,abtestData:v,isSelf:p,isLogin:null==_?void 0:_.isLogin,onClick:F,logParams:{enter_method:"live_user_page_visit",enter_method_temai:"live_user_page_visit"}},e.uid)})})]},n)})})}}),b&&(0,s.jsx)(oA.default,{modalInnerFeedCard:"author_card",defaultForceOpenTab:oV.L.Author,isActive:!0,abtestData:v,isSelf:p,uid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,anyHooks:oz,userContext:m,originAwemeInfo:x,notSeenItemList:C,modalEnterFrom:$.ModalEnterFromVal.UserCard,logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,V.Rs)("enter_method"),tab_name:"record_card",sub_tab_name:"user"},close:()=>{A(),j(!1),w(void 0)}}),S&&(0,s.jsx)(h.gb,{className:oW.loading})]})},oX={live:"mug_Be6k",container:"qQ3gVw7j",listSortByTime:"HsDmmPLn",date:"shse3qUh",hidden:"Z1aB6_gZ",cardList:"rIiXfJRf",cardContainer:"jnCJj1Aj",loading:"nbEZ_E8w",empty:"M0Z_35Ly"},oY=e=>{var t,l,n,o;let{setHasClean:r,currentTab:i,tab:a,topNavHeight:c=60}=e,v=null!==(l=(0,d.useContext)(U.C))&&void 0!==l?l:{},m=null!==(n=(0,d.useContext)(O.Context))&&void 0!==n?n:{},{isSelf:p}=null!==(o=(0,d.useContext)(H))&&void 0!==o?o:{},{dispatch:g,userInfo:_}=m,[x,w]=(0,d.useState)(),[C,y]=(0,d.useState)(!1),b=(0,d.useRef)(),j=(0,np.m)(),k=(0,d.useRef)("0"),N=(0,d.useRef)({}),[I,E]=(0,d.useState)(!1),[S,L]=(0,d.useState)(),M=async e=>{var t;let{data:l=[],statusCode:n,whaleInfo:o}=await (0,nz.eG)({userId:e,count:10,needTimeList:!1,whaleCutToken:null===(t=N.current)||void 0===t?void 0:t.whaleCutToken});return 0===n&&(N.current={whaleCutToken:null==o?void 0:o.whaleCutToken}),{statusCode:n,data:l}},T=async(e,t)=>{var l;null==e||null===(l=e.preventDefault)||void 0===l||l.call(e);let{isLiving:n,actionSecUid:o,webRid:r,roomId:i}=t||{};if(n){let e=(0,tn.cc)({web_rid:r,enter_from_merge:"personal_homepage",enter_method:"live_history_enter",enter_method_temai:"live_history_enter",action_type:"click",room_id:i});window.open(e,"_blank","noopener")}else try{if(E(!0),!o){X.F.info("服务异常，请重试"),E(!1);return}let{statusCode:e,data:t}=await M(o);if(E(!1),0===e){if(t&&(null==t?void 0:t.length)>0){let e=t.sort((e,t)=>t.createTime-e.createTime)[0];w(e),y(!0)}else{let e=(0,tn.HC)(o,(0,u.stringify)({enter_from:"personal_homepage",is_search:0}));window.open(e,"_blank","noopener")}}else X.F.info("服务异常，请重试")}catch(e){X.F.info("服务异常，请重试"),E(!1)}},R=async()=>{let{statusCode:e,userVisitedInfos:t,cursor:l,hasMore:n}=await (0,nz.FR)({cursor:k.current});if(0===e){var o;k.current=l,(null==t?void 0:null===(o=t.filter)||void 0===o?void 0:o.call(t,e=>(null==e?void 0:e.type)===12).length)>0&&r(!0)}return{statusCode:e,hasMore:n,data:t}};return(0,d.useEffect)(()=>{let e=(0,lw.s)(),t=()=>{let t;let l=(0,n4.F)(e).y,n=document.querySelectorAll(".user_record_date");if(l<148)t=n[0];else{var o;let e=[];null==n||null===(o=n.forEach)||void 0===o||o.call(n,t=>{(null==t?void 0:t.offsetTop)<Math.abs(l-148)&&e.push(t)}),(null==e?void 0:e.length)>0&&(t=e[e.length-1])}t&&L(null==t?void 0:t.innerText)};return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)},[]),(0,s.jsxs)("div",{className:oX.live,children:[S&&(0,s.jsx)(n9,{headerHeight:44,topNavHeight:c+44,noBgImage:!0,children:(0,s.jsx)("div",{className:oX.date,children:S})}),(0,s.jsx)(lG.Z,{ref:b,scrollContainerEl:j,itemClassName:oX.cardContainer,containerClassName:oX.container,fetchMoreData:R,skeletonNum:0,pause:i!==a,panelNoData:(0,s.jsx)(P.H,{className:oX.empty,icon:(0,s.jsx)(o_.Z,{}),title:"暂无内容",desc:"暂时还没有直播观看记录哦"}),renderList:e=>{var t,l,n;let o=null==e?void 0:null===(t=e.reduce)||void 0===t?void 0:t.call(e,(e,t)=>{if((null==t?void 0:t.type)===11){let l={date:null==t?void 0:t.timeTitle,list:[]};null==e||e.push(l)}else if((null==t?void 0:t.type)===12){var l,n;let o=null==e?void 0:e[(null==e?void 0:e.length)-1];null==o||null===(n=o.list)||void 0===n||null===(l=n.push)||void 0===l||l.call(n,t)}return e},[]);return!S&&L(null==o?void 0:null===(n=o[0])||void 0===n?void 0:n.date),(0,s.jsx)(s.Fragment,{children:null==o?void 0:null===(l=o.map)||void 0===l?void 0:l.call(o,(e,t)=>{var l;let{date:n,list:o}=e;return(0,s.jsxs)("div",{className:oX.listSortByTime,children:[(0,s.jsx)("div",{className:f()(oX.date,"user_record_date",{[oX.hidden]:S&&0===t}),children:n}),(0,s.jsx)("div",{className:oX.cardList,children:null==o?void 0:null===(l=o.map)||void 0===l?void 0:l.call(o,e=>{var t,l;return(0,s.jsx)(oG,{scene:oK.Live,className:oX.cardContainer,userVisitedInfo:e,selfUid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,selfSecUid:null==_?void 0:null===(l=_.info)||void 0===l?void 0:l.secUid,dispatch:g,abtestData:v,isSelf:p,isLogin:null==_?void 0:_.isLogin,onClick:T,logParams:{enter_method:"live_history_enter",enter_method_temai:"live_history_enter"}},e.uid)})})]},n)})})}}),C&&(0,s.jsx)(oA.default,{modalInnerFeedCard:"author_card",defaultForceOpenTab:oV.L.Author,isActive:!0,abtestData:v,isSelf:p,uid:null==_?void 0:null===(t=_.info)||void 0===t?void 0:t.uid,anyHooks:oz,userContext:m,originAwemeInfo:x,modalEnterFrom:$.ModalEnterFromVal.UserCard,logParams:{enter_from:"personal_homepage",enter_from_merge:"personal_homepage",enter_method:(0,V.Rs)("enter_method"),tab_name:"record_card",sub_tab_name:"live"},close:()=>{y(!1),w(void 0)}}),I&&(0,s.jsx)(h.gb,{className:oX.loading})]})},oQ={record:"my4RLVXy",header:"l0hKUlqA",tabs:"u0vjGzou",title:"Ba1k7O_m",setting:"T65JI7kk",cleanNew:"bKB9VW0f",cleanPannel:"sfXpqtvR",ohosCleanPannel:"Kb1EUMoF",button:"vn1V8dES",desc:"Nb5hPaIn",descText:"YidRgVOP",fuFang:"yKtulsqo",list:"DY42ToYp",error:"E6SxSPRa",comfirmText:"LBlGI1ye",openButton:"Uhg9Fibu",ohosFuFang:"rQeUyRHA",tipSvgNew:"TgiOUYUH",empty:"hcUHCf_N",videoFilterBtn:"udLsRSVm"};let oJ=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.75a6.25 6.25 0 1 0 0 12.5 6.25 6.25 0 0 0 0-12.5zm-.954 4.103c-.191.201-.296.48-.296.772a.625.625 0 0 1-1.25 0c0-.583.208-1.18.641-1.634C6.582 4.528 7.22 4.25 8 4.25s1.418.278 1.859.74c.433.455.641 1.052.641 1.635 0 .995-.641 1.586-1.077 1.988l-.06.056c-.482.447-.738.725-.738 1.206h-1.25c0-1.068.663-1.683 1.119-2.105l.018-.017c.504-.468.738-.712.738-1.128 0-.292-.105-.57-.296-.772C8.77 5.659 8.47 5.5 8 5.5s-.77.16-.954.353zm1.735 5.428a.781.781 0 1 1-1.562 0 .781.781 0 0 1 1.562 0z",fill:"#fff",fillOpacity:".5"})}))),o0=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.103 2A1 1 0 0 0 8.1 1h-.2a1 1 0 0 0-.997 1v1.995H3a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-.5a1 1 0 0 0-1-1H7.94l1.163-.003V2zm3.854 4.962l-9.893.006s.054 2.13-.054 3.496c-.065.824-.234 1.927-.357 2.673a.71.71 0 0 0 .697.827h1.384c.16-.417.34-.922.44-1.322.1-.401.185-.952.246-1.416a27.24 27.24 0 0 0 .086-.748l.005-.046v-.011l.001-.003a.5.5 0 0 1 .996.093l-.498-.047.498.047v.005l-.002.013-.005.049a23.283 23.283 0 0 1-.09.777c-.06.47-.152 1.069-.267 1.53-.086.34-.215.728-.342 1.08h1.052l.007-.02c.16-.418.34-.925.442-1.326.1-.402.185-.952.246-1.416a27.06 27.06 0 0 0 .086-.748l.005-.046v-.011l.001-.003a.5.5 0 0 1 .996.093l-.498-.047.498.047v.005l-.002.013-.005.049a23.186 23.186 0 0 1-.09.777c-.06.47-.152 1.069-.268 1.53-.087.347-.22.745-.35 1.102h4.748a.71.71 0 0 0 .697-.827c-.124-.746-.292-1.848-.357-2.673-.108-1.367-.053-3.502-.053-3.502z",fill:"#fff",fillOpacity:".5"})}))),o1=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.878 4.328l3.13 2.87v4.445a1 1 0 0 0 .27.684l.865.923a.5.5 0 0 0 .865-.342V7.151l3.08-2.823c.672-.616.236-1.737-.676-1.737H4.554c-.912 0-1.348 1.12-.676 1.737zm6.57 2.848a.5.5 0 1 0 0 1h1.5a.5.5 0 0 0 0-1h-1.5zm-.5 2.5a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1h-1.5a.5.5 0 0 1-.5-.5zm.5 1.5a.5.5 0 1 0 0 1h1.5a.5.5 0 0 0 0-1h-1.5z",fill:"#fff",fillOpacity:".5"})}))),o2=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M12 6l-4 4-4-4",stroke:"#fff",strokeOpacity:".5",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})));var o5={videoFilterPannel:"lv5d28N8",optionsContainer:"Q_ReUm3c",title:"ZMqe_6Mx",options:"wFWHBhEh",option:"Cj5DsS2S",active:"URig2n14",disabled:"vh4q9__M",videoFilter:"V9sWO8cu",btn:"WlH2bG78",filterIcon:"L1NCLryK",arrowIcon:"aCcPQTCC",pannel:"JY11rboe"};let o3=[{label:"不限",value:$.VideoStatusFilter.NoLimit},{label:"未看完",value:$.VideoStatusFilter.Watching},{label:"已看完",value:$.VideoStatusFilter.Watched}],o6=[{label:"不限",value:$.DirectoryFilter.NoLimit},{label:"小于1分钟",value:$.DirectoryFilter.LessThenOne},{label:"1-3分钟",value:$.DirectoryFilter.OneToThree},{label:"3-10分钟",value:$.DirectoryFilter.ThreeToTen},{label:"10分钟以上",value:$.DirectoryFilter.MoreThenTen}],o4=[{label:"不限",value:$.CategoryFilter.NoLimit},{label:"二次元",value:$.CategoryFilter.SecondDimension},{label:"音乐",value:$.CategoryFilter.Music},{label:"体育",value:$.CategoryFilter.Sports},{label:"电影",value:$.CategoryFilter.Movie},{label:"游戏",value:$.CategoryFilter.Game}],o7=e=>{let{label:t,value:l,isActive:n,onClick:o,disabled:r}=e;return(0,s.jsx)("div",{className:f()(o5.option,{[o5.active]:n,[o5.disabled]:r}),onClick:e=>!r&&(null==o?void 0:o(e,{label:t,value:l})),children:t})},o8=e=>{let{value:t,onChange:l,className:n,disabled:o}=e,{status:r=$.VideoStatusFilter.NoLimit,directory:i=$.DirectoryFilter.NoLimit,category:d=$.CategoryFilter.NoLimit}=t||{};return(0,s.jsxs)("div",{className:f()(o5.videoFilterPannel,n),children:[(0,s.jsxs)("div",{className:o5.optionsContainer,children:[(0,s.jsx)("div",{className:o5.title,children:"观看进度"}),(0,s.jsx)("div",{className:o5.options,children:o3.map(e=>(0,s.jsx)(o7,{onClick:(e,n)=>(null==t?void 0:t.status)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,T._)((0,a._)({},t),{status:n.value}),{click_type:"progress",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===r,disabled:o},e.value))})]}),(0,s.jsxs)("div",{className:o5.optionsContainer,children:[(0,s.jsx)("div",{className:o5.title,children:"视频时长"}),(0,s.jsx)("div",{className:o5.options,children:o6.map(e=>(0,s.jsx)(o7,{onClick:(e,n)=>(null==t?void 0:t.directory)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,T._)((0,a._)({},t),{directory:n.value}),{click_type:"duration",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===i,disabled:o},e.value))})]}),(0,s.jsxs)("div",{className:o5.optionsContainer,children:[(0,s.jsx)("div",{className:o5.title,children:"视频分类"}),(0,s.jsx)("div",{className:o5.options,children:o4.map(e=>(0,s.jsx)(o7,{onClick:(e,n)=>(null==t?void 0:t.category)!==(null==n?void 0:n.value)&&(null==l?void 0:l((0,T._)((0,a._)({},t),{category:n.value}),{click_type:"classification",click_sub_type:n.label})),label:e.label,value:e.value,isActive:e.value===d,disabled:o},e.value))})]})]})};var o9=e=>{let{className:t,value:l,onChange:n,subTab:o,disabled:r,onRef:i}=e,[a,u]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{a&&t9.sendLog("recordFilterTabClick",{sub_tab_name:o})},[a]),(0,s.jsxs)("div",{className:f()(o5.videoFilter,t),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),ref:e=>null==i?void 0:i(e),children:[(0,s.jsxs)("div",{className:o5.btn,children:[(0,s.jsx)(o1,{className:o5.filterIcon}),(0,s.jsx)("span",{children:"筛选"}),(0,s.jsx)(o2,{className:o5.arrowIcon})]}),a&&(0,s.jsx)(o8,{disabled:r,className:o5.pannel,value:l,onChange:n})]})},re=l("781111"),rt={container:"kLCcBh60",arrow:"K2l_WIbP"};let rl=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:4,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M0 0a8 8 0 0 0 2.168 5.476l1.174 1.25a2 2 0 0 1 0 2.738l-1.174 1.25A8 8 0 0 0 0 16.19V0z",fill:"#323442"})}))),rn=e=>{let{popcorn:t,text:l,disable:n=!1}=e,[o,r]=(0,d.useState)(!1),i=(0,d.useRef)();return(0,d.useEffect)(()=>{!(0,l1.$o)(lX.LocalStorageKeys.SelfUserRecordFilterTip)&&!n&&((0,l1.qQ)(lX.LocalStorageKeys.SelfUserRecordFilterTip,1),r(!0),i.current=setTimeout(()=>r(!1),2e4))},[]),o?(0,re.createPortal)((0,s.jsxs)("div",{className:rt.container,onClick:()=>{clearTimeout(i.current),r(!1)},children:[(0,s.jsx)(J.Z,{src:rl,viewBox:"0 0 4 17",width:4,height:17,className:rt.arrow}),l]}),t):null},ro={[tQ.VIDEO]:"清空观看历史",[tQ.VS]:"清空观看历史",[tQ.USER]:"清空用户历史",[tQ.Live]:"清空直播历史"},rr={[tQ.VIDEO]:"确认要清空观看历史？",[tQ.VS]:"确认要清空观看历史？",[tQ.USER]:"确认要清空用户历史？",[tQ.Live]:"确认要清空直播历史？"},ri={[tQ.VIDEO]:"是否要关闭观看历史功能？",[tQ.VS]:"是否要关闭观看历史功能？",[tQ.USER]:"是否要关闭用户历史功能？",[tQ.Live]:"是否要关闭直播历史功能？"},ra={[tQ.VIDEO]:"暂无观看历史记录",[tQ.VS]:"暂无观影历史记录",[tQ.USER]:"暂无用户历史记录",[tQ.Live]:"暂无直播历史记录"};var rs=e=>{var t;let{currentTab:l,osInfo:n,topNavHeight:o=60,userInfo:r,currentSubTab:i=tQ.VIDEO,onSubTabChange:u,abTestData:c,userSettings:v={freqVisitPerm:!0,webcastRecords:!0}}=e,[m,h]=(0,d.useState)(!1),[p,g]=(0,d.useState)(),{dispatch:_}=null!==(t=(0,d.useContext)(O.Context))&&void 0!==t?t:{},[x,w]=(0,d.useState)(!!(null==r?void 0:r.viewHistoryPermission)),[C,y]=(0,d.useState)(null==v?void 0:v.freqVisitPerm),[b,j]=(0,d.useState)(null==v?void 0:v.webcastRecords),[k,N]=(0,d.useState)(!1),[I,E]=(0,d.useState)(!1),[S,L]=(0,d.useState)({status:$.VideoStatusFilter.NoLimit,directory:$.DirectoryFilter.NoLimit,category:$.CategoryFilter.NoLimit}),[M,T]=(0,d.useState)(!1),F=(0,d.useRef)(!1),D=(0,d.useRef)(null),A=(0,tH.O)(),B=(0,d.useMemo)(()=>{if(i===tQ.VS||i===tQ.VIDEO)return x;if(i===tQ.USER)return C;if(i===tQ.Live)return b;return!0},[x,C,b,i]);(0,d.useEffect)(()=>{t9.sendLog(B?"closeRecordShow":"openRecordShow",{})},[c]),(0,d.useEffect)(()=>{t9.sendLog("recordCardShow",{enter_from:"personal_homepage",record_tab:i===tQ.VIDEO?"video":"film"})},[i]);let H=async(e,t)=>{var l;if(null==F?!void 0:!F.current)F.current=!0,T(!0),L(e),await (null==D?void 0:null===(l=D.current)||void 0===l?void 0:l.reloadList(e)),T(!1),F.current=!1,t9.sendLog("recordFilterConfirm",(0,a._)({sub_tab_name:i},t))},U=async()=>{if(N(!0),E(!1),t9.sendLog("clearAllRecord",{}),i===tQ.VIDEO)return await (0,ow.N1)({});if(i===tQ.VS)return await (0,ow.tp)();if(i===tQ.USER)return await (0,ow.fl)();else if(i===tQ.Live)return await (0,ow.tI)()},z=()=>{N(!0),i===tQ.VIDEO||i===tQ.VS?(w(!1),E(!1),t9.sendLog("closeRecordClick",{}),(0,ow.Yi)({on:!1})):i===tQ.USER?(y(!1),(0,ow.a3)({on:!1,field:"freq_visit_perm"})):i===tQ.Live&&(j(!1),(0,ow.a3)({on:!1,field:"webcast_records"})),setTimeout(()=>_({type:"updateUserInfo"}),1e3)},W=e=>{if(!!e)t9.sendLog("recordTabClick",{tab_name:e}),null==u||u(e),E(!1),N(!1),L({}),n_()},Z=(0,d.useMemo)(()=>(0,s.jsxs)("div",{className:f()(oQ.descText,oQ.fuFang,{[oQ.ohosFuFang]:A}),children:[(0,s.jsx)("p",{children:"找不到内容？"}),(0,s.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,s.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]);return(0,d.useEffect)(()=>{!Object.values(tQ).includes(i)&&(null==u||u(tQ.VIDEO))},[i]),(0,d.useEffect)(()=>{y(null==v?void 0:v.freqVisitPerm),j(null==v?void 0:v.webcastRecords)},[v]),(0,d.useEffect)(()=>{let e=(0,lw.V)();e&&(0,n7.X)({top:0},e)},[i]),(0,d.useEffect)(()=>{(async()=>{if((0,eo.DT)()&&window.TTE_ENV){let e=await ox.dw("GET_CHANNEL_ID");(null==e?void 0:e.data)==="30033"&&h(!0)}else(0,V.CY)("xigua_webid")&&h(!0)})()},[]),(0,s.jsxs)("div",{className:oQ.record,children:[(0,s.jsx)(n9,{headerHeight:44,topNavHeight:o,children:(0,s.jsxs)("div",{className:oQ.header,children:[(0,s.jsxs)(ed.mQ,{type:"button",className:oQ.tabs,activeKey:i,onChange:e=>W(e),children:[(0,s.jsx)(ed.Jm,{tab:(0,s.jsx)("span",{className:oQ.title,children:"用户"}),itemKey:tQ.USER}),(0,s.jsx)(ed.Jm,{tab:(0,s.jsx)("span",{className:oQ.title,children:"视频"}),itemKey:tQ.VIDEO}),!((null==n?void 0:n.isMas)||(0,eo.xo)())&&(0,s.jsx)(ed.Jm,{itemKey:tQ.VS,tab:(0,s.jsx)("span",{className:oQ.title,children:"影视综"})}),(0,s.jsx)(ed.Jm,{tab:(0,s.jsx)("span",{className:oQ.title,children:"直播"}),itemKey:tQ.Live}),m&&(0,s.jsx)(ed.Jm,{tab:(0,s.jsx)(R.a,{href:"https://www.ixigua.com/my/watch-history",target:"_blank",className:oQ.title,children:"西瓜观看历史"})})]}),(0,s.jsxs)("div",{className:oQ.setting,children:[B&&I&&i===tQ.VIDEO&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rn,{popcorn:p,text:"观看历史支持筛选啦"}),(0,s.jsx)(o9,{className:oQ.videoFilterBtn,value:S,onChange:H,subTab:i,onRef:g,disabled:M})]}),(I||B)&&(0,s.jsxs)("div",{className:oQ.cleanNew,children:[(0,s.jsx)(J.Z,{src:o0,width:16,height:16,viewBox:"0 0 16 16"}),(0,s.jsxs)("div",{className:f()(oQ.cleanPannel,{[oQ.ohosCleanPannel]:A}),children:[I&&(0,s.jsx)("div",{className:oQ.button,onClick:()=>{(0,ln.Z)({title:rr[i]||"确认要清空观看历史？",cancelBtnText:"取消",confirmBtnText:"清空",onConfirm:async()=>{U()},otherProps:{renderContent:()=>(0,s.jsx)("div",{className:oQ.comfirmText,children:"清空后不可恢复"})}})},children:ro[i]||"清空观看历史"}),B&&(0,s.jsx)("div",{className:oQ.button,onClick:()=>{(0,ln.Z)({title:ri[i]||"是否要关闭观看历史功能？",cancelBtnText:"取消",confirmBtnText:"关闭",onConfirm:async()=>{z()},otherProps:{renderContent:()=>(0,s.jsx)("div",{className:oQ.comfirmText,children:"关闭后将同时清空所有观看历史"})}})},children:"清空并关闭功能"})]})]}),(0,s.jsx)(ed.u,{className:oQ.desc,position:"bottomRight",content:Z,children:(0,s.jsx)(oJ,{className:oQ.tipSvgNew})})]})]})}),(0,s.jsxs)("div",{className:oQ.list,children:[!B&&(0,s.jsxs)("div",{className:oQ.error,children:[(0,s.jsx)(P.H,{className:oQ.empty,icon:(0,s.jsx)(o_.Z,{}),title:"历史记录已关闭",needRenderIconInSSR:!0,desc:"开启后可以查看在电脑端和手机端浏览过的内容"}),(0,s.jsx)(og.zx,{onClick:()=>{i===tQ.VIDEO||i===tQ.VS?(w(!0),t9.sendLog("openRecordClick",{}),(0,ow.Yi)({on:!0})):i===tQ.USER?(y(!0),(0,ow.a3)({on:!0,field:"freq_visit_perm"})):i===tQ.Live&&(j(!0),(0,ow.a3)({on:!0,field:"webcast_records"})),setTimeout(()=>_({type:"updateUserInfo"}),1e3)},className:oQ.openButton,children:"开启功能"})]}),B&&k&&(0,s.jsx)("div",{className:oQ.error,children:(0,s.jsx)(P.H,{className:oQ.empty,needRenderIconInSSR:!0,icon:(0,s.jsx)(o_.Z,{}),title:ra[i]||"暂无历史记录"})}),B&&!k&&i===tQ.USER&&(0,s.jsx)(oq,{setHasClean:E,tab:"record",currentTab:l,topNavHeight:o}),B&&!k&&i===tQ.VIDEO&&(0,s.jsx)(ok,{ref:D,tab:"record",currentTab:l,setHasClean:E,userInfo:r,topNavHeight:o}),B&&!k&&i===tQ.VS&&(0,s.jsx)(oD,{tab:"record",currentTab:l,setHasClean:E}),B&&!k&&i===tQ.Live&&(0,s.jsx)(oY,{tab:"record",currentTab:l,setHasClean:E,topNavHeight:o})]})]})},rd=l("556728");let ru=()=>{var e;return null!==(e=(0,d.useContext)(H))&&void 0!==e?e:{}};var rc={header:"L5bcvypC",container:"KIhHrLT1",errorContent:"RjAb0p73",removeButton:"TfqiI2vJ",disable:"Kl4HPMmF",empty:"tZva5wQ5",icon:"LI9PYQvH",notice:"VQNMofOG",tipSvg:"vdpBWFuR",descText:"UOMYNh44",fuFang:"OQgy9pdP"},rv=e=>{let{abTestData:t}=e,l=(0,d.useMemo)(()=>(0,s.jsxs)("div",{className:f()(rc.descText,rc.fuFang),children:[(0,s.jsx)("p",{children:"找不到内容？"}),(0,s.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,s.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]);return(0,s.jsx)(ed.u,{className:rc.notice,position:"bottomRight",content:l,children:(0,s.jsx)(na,{className:f()(rc.tipSvg,rc.fuFang)})})},rm=l("484321"),rf=()=>(0,s.jsx)(P.H,{className:rc.empty,icon:(0,s.jsx)(lM.Z,{}),title:"暂未添加稍后再看视频",desc:(0,s.jsxs)(s.Fragment,{children:["可在视频底部或预览时点击【",(0,s.jsx)(rm.Z,{className:rc.icon}),"】添加"]})});let rh=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 13A5 5 0 1 0 8 3a5 5 0 0 0 0 10zM5.5 7.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z",fill:"#fff"})})));var rp=e=>{let{userInfo:t,currentTab:l,topNavHeight:n=60,abTestData:o}=e,r=(0,lD.o)(null==t?void 0:t.secUid),{isSelf:i}=ru(),u=(0,d.useRef)(0),[c,v]=(0,d.useState)([]),m=(0,d.useRef)(!0),h=(0,d.useRef)(0),p=(0,d.useCallback)(async()=>{let e=i&&(null==m?void 0:m.current)&&lF.be.hasCache,{data:t=[],cursor:l=0,hasMore:n,statusCode:o,logPb:r}=await lF.be.request({cached:e,consume:!0,params:{cursor:u.current},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}});return!o&&(e?setTimeout(()=>{var e,t;null===(t=C.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(h.current=u.current,u.current=l)),m.current=!1,{data:t,maxCursor:e?0:l,hasMore:e?1:n,statusCode:e?0:o,logPb:r,clearBefore:!e&&0===h.current}},[r,o,i]),g=(0,d.useMemo)(()=>i?(0,s.jsx)(rf,{}):void 0,[i]),[_,w]=(0,d.useState)((null==c?void 0:c.length)>0);(0,d.useEffect)(()=>{var e;w((null==c?void 0:c.length)>0);let{store:t={}}=x.Le.getConfig(x.gI.WatchLater)||{},l=(null==c?void 0:null===(e=c.map)||void 0===e?void 0:e.call(c,e=>e.awemeId))||[],n=null==l?void 0:l.join(",");x.Le.setConfig(x.gI.WatchLater,{store:t,list:n})},[c]);let C=(0,d.useRef)(),y=(0,d.useCallback)(()=>{u.current=0},[]),b=(0,d.useCallback)(()=>{var e,t,l,n;null==C||null===(t=C.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),y(),null==C||null===(n=C.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[y]),{isPostDelete:j}=(0,d.useContext)(lx);(0,d.useEffect)(()=>{j&&b()},[j,b]);let k=lH({maxSelectedCount:50,operate:(0,d.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,on.I)(e.awemeType)}),(0,rd.iH)({awemeIds:l,remove_type:rd.L7.selectItems})},[]),operateDesc:{operation:"取消",itemName:"稍后再看的作品"},tabName:"watch_later",subTabName:"video",iconName:"取消稍后再看"}),{changeShowConfirm:N,renderConfirmModal:I,selectedCount:E,isListSelectable:S}=k,L=()=>{t9.sendLog("manageDeleteClick",{tab_name:"watch_later",sub_tab_name:"video",icon_name:"移除已看完视频"}),(0,ln.Z)({title:"是否确认取消已看完的作品，取消后不可恢复",cancelBtnText:"暂不取消",confirmBtnText:"确认取消",onConfirm:async()=>{lV.sendLog("managePopupConfirm",{tab_name:"watch_later",sub_tab_name:"video",icon_name:"移除已看完视频"});let{isSuccess:e,removedNum:t}=await (0,rd.iH)({awemeIds:[],remove_type:rd.L7.viewedItems});if(!e){X.F.info("服务异常，请稍后再试");return}if(0===t){X.F.info("无已看完作品");return}X.F.info("取消成功"),b()}})};return((0,d.useEffect)(()=>{var e;let t=(null===(e=x.Le.getConfig(x.gI.WatchLater))||void 0===e?void 0:e.list)||"";return x.Le.setConfig(x.gI.WatchLater,{store:{},list:t}),()=>{var e;let t=(null===(e=x.Le.getConfig(x.gI.WatchLater))||void 0===e?void 0:e.list)||"";x.Le.setConfig(x.gI.WatchLater,{store:null,list:t})}},[]),i)?(0,s.jsxs)(lO.Provider,{value:(0,a._)({},k),children:[(0,s.jsxs)("div",{className:rc.container,"data-e2e":"user-watchlater-tab",children:[i&&(0,s.jsx)(n9,{topNavHeight:n,headerHeight:44,children:(0,s.jsxs)("div",{className:rc.header,children:[_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nD,{operateBtns:[{key:"watch_later",actionText:"取消稍后再看",onClick:()=>{N(!0),t9.sendLog("manageDeleteClick",{tab_name:"watch_later",sub_tab_name:"video",item_cnt:E,icon_name:"取消稍后再看"})}}],tabName:"watch_later",subTabName:"video"}),(0,s.jsxs)("div",{className:f()(rc.removeButton,{[rc.disable]:S}),onClick:e=>{if(!S)L()},children:[(0,s.jsx)(rh,{}),"移除已看完的视频"]})]}),(0,s.jsx)(rv,{abTestData:o})]})}),(0,s.jsx)(nI,{ref:C,resetStatusFunc:y,uid:r,tab:"watch_later",currentTab:l,fetchMoreData:p,retryTimes:5,panelNoData:g,updateAwemeList:v,topNavHeight:n})]}),null==I?void 0:I()]}):(0,s.jsx)(P.H,{icon:(0,s.jsx)(D.Z,{}),title:"内容不可见",desc:"内容不可见",className:rc.errorContent})};l("999921");var rg=l("309854"),r_=l("464769");let{COMMON_SEARCH_PARAMS:rx}=em,rw={search_channel:"aweme_video_web",search_source:"normal_search",search_scene:"douyin_search",sort_type:0,publish_time:0,is_filter_search:0,query_correct_type:1};var rC={Home:"aweme_personal_home_video",Favorite:"aweme_favorite_video",Collect:"aweme_collect_video",Viewed:"aweme_viewed_video"};let ry=e=>{let{aweme_list:t,global_doodle_config:l,cursor:n,has_more:o,status_code:r,log_pb:i}=e;return{data:(0,ef.TN)({awemeList:t.map(e=>e.item)||[]}),globalDoodleConfig:{homeText:null==l?void 0:l.home_text,jumpGeneral:null==l?void 0:l.jump_general,keyword:null==l?void 0:l.keyword},cursor:n,hasMore:o,statusCode:r,logId:null==i?void 0:i.impr_id}};async function rb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{keyword:l="",search_id:n="",offset:o=0,count:r=10,enable_history:i,search_channel:s=rw.search_channel,from_user:d}=e,{result:u}=await (0,r_.g8)("/aweme/v1/web/home/search/item/",(0,T._)((0,a._)({},rx,rw),{keyword:l,enable_history:i,search_id:n,offset:o,count:r,search_channel:s,from_user:d}),t,ry);return u}let rj=e=>{switch(e){case"post":default:return rC.Home;case"like":return rC.Favorite;case"favorite_collection":return rC.Collect;case"record":return rC.Viewed}},rk=e=>{switch(e){case"like":return"like_result";case"post":return"post_result";case"favorite_collection":return"favorite_collection";case"record":return"record_card";default:return"watch_later"}},rN=e=>{let{currentTab:t,uid:l,isSelf:n,showSearchBar:o,abTestData:r,onChangeKeyword:i}=e,a="",{userInfo:{isLogin:s,info:u}}=(0,d.useContext)(O.Context)||{userInfo:{}},[c,v]=(0,d.useState)(""),[m,f]=(0,d.useState)(""),h=(0,d.useRef)(0),p=(0,d.useRef)(""),g=(0,d.useRef)(10),_=(0,d.useRef)(!1),x=(0,d.useRef)(""),w=(0,d.useRef)(0),C=(0,d.useRef)(0),y=(0,d.useRef)(!1),b=(0,d.useRef)(0),j=(0,d.useRef)(0),k=(0,d.useCallback)(e=>{t9.sendLog("search",{enter_from:(0,tf.yW)(),tab_name:rk(t),search_keyword:p.current,is_success:y.current?1:0,duration:C.current-w.current,impr_id:e})},[t]),N=(0,d.useCallback)(e=>{rg.oe.event.error({name:rg.Mo.UserSearchReturnCountLess,report:{keyword:p.current,tabName:t,userId:l,logId:e}})},[t,l]),I=(0,d.useCallback)(async()=>{if(!!l&&!_.current){p.current!==x.current&&(x.current=p.current,h.current=0),_.current=!0;try{w.current=performance.now();let e=await rb({search_channel:rj(t),from_user:l,search_id:a,enable_history:Number(null==u?void 0:u.viewHistoryPermission),keyword:p.current,offset:h.current,count:g.current});C.current=performance.now();let{statusCode:n,cursor:o,globalDoodleConfig:r,data:i,hasMore:d,logId:c}=e||{};if(0===n){let e=i.length,t=0===e&&0===d,l=0===h.current;if(a=c,t||(y.current=!0),h.current=o,j.current+=e,v(e=>{if(!l)return e;{let e=(null==r?void 0:r.homeText)||"";return t||(b.current=Number(e.match(/\d+/))),t?"":e}}),!d){let e=j.current===b.current;s&&!e&&N(c)}}return _.current=!1,k(c),e}catch(e){_.current=!1;return}}},[t,l,k,N,s]),E=(0,d.useCallback)(()=>{h.current=0,b.current=0,j.current=0,p.current="",x.current="",f(""),v("")},[]),S=(0,d.useCallback)(e=>{p.current=e,b.current=0,j.current=0,f(e),null==i||i()},[]);return{keyword:m,homeText:c,getSearchRes:I,exitSearch:E,changeKeyword:S,isAllowSearch:(0,d.useMemo)(()=>(n?["like","post","favorite_collection","record"]:["post"]).includes(t)&&o,[n,t,o])}},rI=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm2.776-3.48a.746.746 0 0 0 .527-1.272L9.02 7.965l2.283-2.283a.746.746 0 0 0-1.054-1.054L7.966 6.91 5.682 4.628a.746.746 0 1 0-1.054 1.054l2.283 2.284-2.283 2.283a.747.747 0 0 0 .526 1.278.746.746 0 0 0 .528-.224L7.966 9.02l2.283 2.283c.14.14.33.218.527.218z",fill:"#fff"})}))),rE=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M11.93 12.99a6 6 0 1 1 1.06-1.06l2.54 2.54a.75.75 0 1 1-1.06 1.06l-2.54-2.54zm.82-4.74a4.5 4.5 0 1 0-9 0 4.5 4.5 0 0 0 9 0z",fill:"#fff",fillOpacity:".9"})})));var rS={container:"Od_WDTIn",new:"TyX3HvdZ",blurStyle:"kTWX1Ue1",searchIcon:"vjzQcCib",closeIcon:"P6sTjaGZ",active:"DGnBg__r",hasValue:"UPzzlgq0",input:"bFVaFIP0",hide:"gD_DHjbX"};let rL=(e,t)=>{if(!e)return"搜索 Ta 的作品";if("post"===t)return"搜索你发布的作品";if("like"===t)return"搜索你赞过的作品";else if("favorite_collection"===t)return"搜索你收藏过的作品";else if("record"===t)return"搜索你观看过的作品";else return""},rM=e=>{var t;let{changeKeyword:l,exitSearch:n,keyword:o,currentTab:r,showNewUi:i=!0}=e,{isSelf:a}=null!==(t=(0,d.useContext)(H))&&void 0!==t?t:{},[u,c]=(0,d.useState)(!1),[v,m]=(0,d.useState)(o),h=(0,d.useRef)(null),p=(0,d.useCallback)(()=>{let{value:e=""}=h.current||{};e?l(e):n(),(0,n7.X)({top:172,behavior:"smooth"},(0,lw.V)())},[l,n]);(0,d.useEffect)(()=>{let e=h.current,t=t=>{"Enter"===t.key&&(null==e||e.blur(),p())};return null==e||e.addEventListener("keydown",t),()=>{null==e||e.removeEventListener("keydown",t)}},[p]),(0,d.useEffect)(()=>{if(""!==o)return;let e=h.current;e&&(e.value=o,m(o))},[o]);let[g,_]=(0,d.useState)(!1),x=(0,d.useRef)(null),w=e=>{clearTimeout(x.current),x.current=setTimeout(()=>{_(e)},300)},C=u||g;return(0,s.jsx)("div",{className:f()(rS.container,rS.new,{[rS.active]:C,[rS.hasValue]:null==v?void 0:v.length}),onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:(0,s.jsxs)(s.Fragment,{children:[!C&&""===v&&(0,s.jsxs)("div",{className:rS.blurStyle,children:[(0,s.jsx)(J.Z,{className:rS.searchIcon,src:rE,viewBox:"0 0 18 18"}),(0,s.jsx)("span",{children:rL(a,r)})]}),(C||""!==v)&&(0,s.jsx)(J.Z,{className:rS.searchIcon,src:rE,viewBox:"0 0 18 18",onClick:p}),(0,s.jsx)(ed.II,{ref:h,value:v,className:f()(rS.input,{[rS.hide]:!C&&""===v}),onFocus:()=>{c(!0),t9.sendLog("enterSearch",{enter_from:(0,tf.yW)(),tab_name:"post"===r?"post_result":"like_result"})},onBlur:()=>c(!1),onChange:e=>m(e)}),""!==v&&(0,s.jsx)(J.Z,{className:rS.closeIcon,src:rI,viewBox:"0 0 16 16",onClick:()=>{l(""),m("");let e=h.current;e&&(e.value=""),null==e||e.focus()}})]})})};var rT={searchList:"YKY7NM8s",header:"HLTFiljn",searchText:"a9kwn5kF",noPaddingMargin:"afbwSxBi",errorPanel:"jd74WCw2",btn:"GsiPloJS"};let rR=(e,t)=>{if(!e)return"暂未找到该用户的相关视频";if("post"===t)return"暂未找到发布的相关视频";if("favorite_collection"===t)return"暂未找到收藏的相关视频";else if("record"===t)return"暂未找到观看过的相关视频";else return"暂未找到赞过的相关视频"},rF=e=>{let{isSelf:t,tab:l,primaryAction:n,secondaryAction:o}=e;return(0,d.useEffect)(()=>{t9.sendLog("noLikeToast",{enter_method:"post"===l?"search_post":"search_like"})},[l]),(0,s.jsxs)(P.H,{className:rT.errorPanel,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:rR(t,l),children:[(0,s.jsx)(ed.zx,{theme:"solid",className:rT.btn,type:"primary",onClick:n,children:"返回全部视频"}),(0,s.jsx)(ed.zx,{theme:"solid",className:rT.btn,type:"secondary",onClick:o,children:"搜索更多视频"})]})},rP=e=>{var t;let{uid:l,currentTab:n,getSearchRes:o,homeText:r,keyword:i,exitSearch:u,topNavHeight:c=60}=e,{isSelf:v}=null!==(t=(0,d.useContext)(H))&&void 0!==t?t:{},m=(0,d.useRef)(""),h=(0,d.useRef)(null),[p,g]=(0,d.useState)([]);(0,d.useEffect)(()=>{if(i&&i!==m.current){var e,t,l,n;m.current=i,null===(t=h.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null===(n=h.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[i]);let _=(0,d.useCallback)(()=>{t9.sendLog("clickLikeTab",{enter_method:"post"===n?"search_post":"search_like"}),u()},[n,u]),x=(0,d.useCallback)(()=>{window.open((0,tn.Sp)(m.current,`tab_name=${"post"===n?"post_result":"like_result"}`),(0,l0.f)()?"_self":"_blank","noopener")},[n]),w=(0,d.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("post"===n)return(0,lT.FD)({awemeIds:e.map(e=>e.awemeId).join(",")});let t={},l=[];return(e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,on.I)(e.awemeType)}),"favorite_collection"===n)?(0,lT.BV)({awemeIds:l.join(","),awemeTypeMap:t}):(0,lT.aA)({awemeIds:l.join(","),itemTypeMap:t})},[n]),{updateAwemeCount:C,updateFavoriteCount:y,isPostDelete:b}=(0,d.useContext)(lx),j=(0,d.useCallback)(e=>{let{manageCount:t=0}=e;"post"===n&&(null==C||C(-t,!0)),"like"===n&&(null==y||y(-t,!0))},[n,C,y]),k=lH({maxSelectedCount:50,operate:w,operateDesc:{operation:"post"===n?"删除":"取消",itemName:`${"post"===n?"":"favorite_collection"===n?"收藏的":"喜欢的"}作品`},onManageEndCallback:j,tabName:n,subTabName:"video"}),N=(0,d.useCallback)(()=>{null==u||u()},[u]),{changeShowConfirm:I,renderConfirmModal:E,changeListSelectable:S,selectedCount:L}=k;return(0,d.useEffect)(()=>{S(!1)},[i,S]),(0,d.useEffect)(()=>{if(b){var e,t;null===(t=h.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),N()}},[b,N]),(0,s.jsxs)(lO.Provider,{value:(0,a._)({},k),children:[(0,s.jsxs)("div",{className:f()(rT.searchList,{[rT.noPaddingMargin]:v}),children:[r&&p.length>0&&(0,s.jsx)(n9,{needSticky:v,topNavHeight:c,children:(0,s.jsxs)("div",{className:rT.header,children:[(0,s.jsx)("div",{className:f()(rT.searchText,{[rT.noPaddingMargin]:v}),children:r}),v&&"record"!==n&&(0,s.jsx)(nD,{tabName:n,subTabName:"video",operateBtns:[{key:"cancel_like",actionText:"post"===n?"删除作品":"favorite_collection"===n?"取消收藏":"取消喜欢",onClick:()=>{I(!0),t9.sendLog("manageDeleteClick",{tab_name:n,sub_tab_name:"video",item_cnt:L})}}]})]})}),(0,s.jsx)(nI,{ref:h,keyword:i,resetStatusFunc:N,updateAwemeList:g,uid:l,tab:n,pause:!1,currentTab:n,defaultRes:{statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:10},fetchMoreData:o,panelNoMoreData:(0,s.jsx)(s.Fragment,{}),panelNoData:(0,s.jsx)(rF,{isSelf:v,tab:n,primaryAction:_,secondaryAction:x}),isInSearch:!0})]}),null==E?void 0:E()]})};var rD=l("167618"),rA=l("679855"),rV=l("770193"),rB="lNJJ1Rf2",rH="CCpbVjRE",rU="y84_Oana",rO="waS_k6dU";let rz=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:o,mixInfo:r,close:i,refNextVideoCallBack:s}=e,{watchedEpisode:u,totalEpisode:c}=r||{},v=(0,d.useRef)({cursor:Math.max(Number(u>c?c:null!=u?u:0)-1,0),hasMore:1,statusCode:-1,lastMixVideoIndex:-1}),m=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{let e=!1;return(async()=>{var t,n,s,d,u;m.current=!0;let c=await (0,rV.FF)({mixId:null==r?void 0:r.mixId,cursor:null===(t=v.current)||void 0===t?void 0:t.cursor,count:20});if(m.current=!1,(null!==(s=null==c?void 0:null===(n=c.data)||void 0===n?void 0:n.length)&&void 0!==s?s:0)!==0){v.current={cursor:null==c?void 0:c.cursor,hasMore:null==c?void 0:c.hasMore,statusCode:null==c?void 0:c.statusCode,lastMixVideoIndex:(null==c?void 0:null===(d=c.data)||void 0===d?void 0:d.length)-1};let t=null==c?void 0:null===(u=c.data)||void 0===u?void 0:u.map(e=>{let{cover:t,status:l,playVV:n}=r||{};return e.mixInfo&&(e.mixInfo.cover=t,e.mixInfo.status=l,e.mixInfo.playVV=n),(0,a._)({},e)});if(e)return;o(t||[]),l(0)}else X.F.info("该合集暂无法查看，请浏览其他内容"),i()})(),s.current=()=>X.F.infoInModalVideo("暂无更多作品"),()=>{e=!0}},[r]),(0,d.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!m.current&&(async()=>{var e,t,l;if((null===(e=v.current)||void 0===e?void 0:e.hasMore)===1){m.current=!0;let e=await (0,rV.FF)({mixId:null==r?void 0:r.mixId,cursor:null===(t=v.current)||void 0===t?void 0:t.cursor,count:20});m.current=!1,v.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastMixVideoIndex:(null==n?void 0:n.length)+(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.length)-1},o(t=>[...t,...(null==e?void 0:e.data)||[]])}})()},[n,t,r]),null};var rW={item:"vDimuc2k",cover:"SnFExj9d",payTag:"JmDDkC6o",image:"jt6DMdEY",content:"OFs0DPTA",title:"LSg4yYX6",name:"kC65dXBI",singleLine:"woZqikiL",updatedTag:"DLGU0VeC",count:"UKMDZc86",episode:"ZWVlTcVJ"},rZ=e=>{var t,l,n;let{info:o,rank:r,userInfo:i,currentTab:a,abTestData:u}=e,[c,v]=(0,l$.Z)(),[m,h]=(0,d.useState)(!1),[p,g]=(0,d.useState)(!0),_=(0,d.useRef)(null),x="favorite_collection"===a&&!!o.hasUpdatedEpisode&&p,w=x?((null==_?void 0:null===(t=_.current)||void 0===t?void 0:t.offsetWidth)||42)+4:0,C=(0,tn.$y)(null==o?void 0:o.mixId,1,`previous_page=${(0,tf.yW)()}`);return(0,d.useEffect)(()=>{if(v&&!m){if(h(!0),"favorite_collection"===a){l5.i.sendLog("compilationCoverShow",{enter_from:(0,tf.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:o.mixId});return}t9.sendLog("collectionCoverShow",{enter_from:(0,tf.yW)(),compilation_id:o.mixId,compilation_video_cnt:o.totalEpisode,author_id:i.uid,group_id:""})}},[v]),(0,s.jsx)(R.a,{href:C,title:o.mixName,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===a){l5.i.sendLog("compilationCoverClick",{enter_from:(0,tf.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:o.mixId}),g(!1);return}t9.sendLog("collectionCoverClick",{enter_from:(0,tf.yW)(),compilation_id:o.mixId,compilation_video_cnt:o.totalEpisode,author_id:i.uid,rank:r}),!o.totalEpisode&&(X.F.info("创作者还没有为这个合集添加视频"),e.preventDefault())},children:(0,s.jsxs)("div",{className:rW.item,ref:c,children:[(0,s.jsxs)("div",{className:rW.cover,children:[(0,s.jsx)(oE.Q,{src:o.cover,alt:o.mixName,iconWidth:30,iconHeight:88,imgClass:rW.image}),((null==o?void 0:null===(l=o.chargeInfo)||void 0===l?void 0:l.chargeType)===1||(null==o?void 0:null===(n=o.chargeInfo)||void 0===n?void 0:n.chargeType)===3)&&(0,s.jsx)("div",{className:rW.payTag,children:"付费"})]}),(0,s.jsxs)("div",{className:rW.content,children:[(0,s.jsxs)("div",{className:f()(rW.title,rW.singleLine),children:[(0,s.jsx)("div",{className:rW.name,style:{maxWidth:`calc(100% - ${w}px)`},children:o.mixName}),x&&(0,s.jsxs)("span",{ref:_,className:rW.updatedTag,children:["更新",o.hasUpdatedEpisode,"集"]})]}),(0,s.jsxs)("p",{className:rW.count,children:[(0,er.qe)(o.playVV)," 播放"]}),(0,s.jsxs)("p",{className:rW.episode,children:[(0,s.jsxs)("span",{children:["更新至 ",o.totalEpisode," 集"]}),!!o.watchedEpisode&&(0,s.jsxs)("span",{children:["（上次看到 ",o.watchedEpisode," 集）"]})]})]})]})})};let r$=e=>e.mixId;var rK=e=>{var t,l,n,o;let{userInfo:r,topNavHeight:i=60,setItemCount:u,abTestData:c}=e,v=(0,lD.o)(null==r?void 0:r.secUid),{isSelf:m,updateFollowStatus:f}=(0,d.useContext)(H)||{},h=(0,d.useContext)(O.Context)||{},p=(0,d.useContext)(U.C)||{},g=(0,d.useRef)(0),_=(0,d.useRef)(1),[x,w]=(0,d.useState)(),[C,y]=(0,d.useState)([]);(0,d.useEffect)(()=>{var e;null==u||u(null!==(e=null==C?void 0:C.length)&&void 0!==e?e:0)},[null==C?void 0:C.length,u]);let b=(0,d.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rA.bZ)({cursor:g.current,count:12});return 0===n&&(g.current=t,_.current=l),{data:e,cursor:t,hasMore:l,statusCode:n}},[]),j=(0,d.useCallback)((e,t)=>(0,s.jsx)("div",{onClick:t=>{t.preventDefault();let l=e;(async()=>{var t,n,o,i,s;let d=await (0,rV.vf)({mixId:null==e?void 0:e.mixId});(null==(l=(0,T._)((0,a._)({},(null==d?void 0:d.mixInfo)||{}),{watchedEpisode:null==l?void 0:l.watchedEpisode,watchedItem:null==l?void 0:l.watchedItem}))?void 0:l.totalEpisode)===0||(null==l?void 0:null===(t=l.author)||void 0===t?void 0:t.isBlockedV2)||(null==l?void 0:null===(n=l.author)||void 0===n?void 0:n.userNotSee)||(null==l?void 0:null===(o=l.author)||void 0===o?void 0:o.secret)&&((null==l?!void 0:null===(i=l.author)||void 0===i?!void 0:!i.secret)||(null==l?void 0:null===(s=l.author)||void 0===s?void 0:s.uid)!==r.uid)?X.F.info("该合集为空，请浏览其他内容"):w(l)})()},children:(0,s.jsx)(rZ,{info:e,rank:t,userInfo:r,currentTab:"favorite_collection",abTestData:c})}),[r]),k=(0,d.useRef)(),N=nu(),I=null===(l=k.current)||void 0===l?void 0:null===(t=l.getDataList)||void 0===t?void 0:t.call(l),{withMask:E}=nc((0,T._)((0,a._)({maskShadowStyle:{borderRadius:"6px"},getItemId:r$,dataList:I,isSupportMulti:!0},N),{firstItem:null===(o=k.current)||void 0===o?void 0:null===(n=o.getTargetNode)||void 0===n?void 0:n.call(o,0),getColumnCount:()=>3,stickyArea:{top:i+58+44,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),S=(0,d.useCallback)(()=>{g.current=0},[]);nv({resetStatusFunc:S,scrollListRef:k,scrollElementRef:N.scrollEleRef});let{reloadForPostDelete:L,isPostDelete:M}=(0,d.useContext)(lx),R=(0,d.useCallback)(()=>{var e,t,l,n,o;null==k||null===(t=k.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null==S||S(),null===(l=N.scrollEleRef.current)||void 0===l||l.scrollTo({top:0}),null==k||null===(o=k.current)||void 0===o||null===(n=o.reload)||void 0===n||n.call(o)},[S]);(0,d.useEffect)(()=>{M&&(null==R||R())},[M,R]);let F=(0,np.m)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:rB,children:(0,s.jsx)(lG.Z,{ref:k,scrollContainerEl:F,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:_.current,renderItem:j,fetchMoreData:b,containerClassName:rH,itemClassName:rU,panelNoData:(0,s.jsx)(P.H,{className:rO,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过合集内容哦"}),withMask:E,setDataList:y})}),x&&(0,s.jsx)(oA.default,{modalInnerFeedCard:"mix",isActive:!0,mixInfo:x,userContext:h,abtestData:p,close:()=>{w(void 0),f(),null==L||L(),null==R||R()},uid:v,awemeMixInfo:x,anyHooks:rz,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from_merge:m?"personal_homepage":"others_homepage",tab_name:"favorite_collection",enter_method:(0,V.Rs)("enter_method"),sub_tab_name:"compilation"},shortCutFilteredList:[],isDefaultShowRelatedCard:!1,defaultForceOpenTab:oV.L.Mix})]})},rG=l("35294"),rq="EQP90EWL",rX="Ps7VpG4s",rY="Y9FI0rd1",rQ="PKyzXax6";let rJ=e=>{var t;let{currentNumber:l,setCurrentNumber:n,awemeInfoList:o,setAwemeInfoList:r,seriesInfo:i,close:s,refNextVideoCallBack:u}=e,c=(0,d.useRef)({cursor:Math.max(Number(null!==(t=i.watchedEpisode)&&void 0!==t?t:0)-1,0),hasMore:1,statusCode:-1,lastSeriesVideoIndex:-1}),v=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{let e=!1;return(async()=>{var t,l,o,d,u;v.current=!0;let m=await (0,rG.Ab)({seriesId:null==i?void 0:i.seriesId,cursor:null===(t=c.current)||void 0===t?void 0:t.cursor,count:20});if(v.current=!1,(null!==(o=null==m?void 0:null===(l=m.data)||void 0===l?void 0:l.length)&&void 0!==o?o:0)!==0){c.current={cursor:null==m?void 0:m.cursor,hasMore:null==m?void 0:m.hasMore,statusCode:null==m?void 0:m.statusCode,lastSeriesVideoIndex:(null==m?void 0:null===(d=m.data)||void 0===d?void 0:d.length)-1};let t=null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.map(e=>{let{cover:t,status:l,playVV:n}=i||{};return e.seriesInfo&&(e.seriesInfo.cover=t,e.seriesInfo.status=l,e.seriesInfo.playVV=n),(0,a._)({},e)});if(e)return;r(t||[]),n(0)}else X.F.info("该合集暂无法查看，请浏览其他内容"),s()})(),u.current=()=>X.F.infoInModalVideo("暂无更多作品"),()=>{e=!0}},[i]),(0,d.useEffect)(()=>{5>Math.abs(Number(null==o?void 0:o.length)-l)&&-1!==l&&!v.current&&(async()=>{var e,t,l;if((null===(e=c.current)||void 0===e?void 0:e.hasMore)===1){v.current=!0;let e=await (0,rG.Ab)({seriesId:null==i?void 0:i.seriesId,cursor:null===(t=c.current)||void 0===t?void 0:t.cursor,count:20});v.current=!1,c.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastSeriesVideoIndex:(null==o?void 0:o.length)+(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.length)-1},r(t=>[...t,...(null==e?void 0:e.data)||[]])}})()},[o,l,i]),null};var r0={item:"LGb06Fc7",cover:"KovPXmdX",payTag:"Y_3ovaXZ",image:"jfO3Tgcr",content:"S01S6t6Z",name:"am2z5Qji",count:"hkLUqi_3",episode:"ClyfMGS_",unreadMixCount:"Qp6dcemL"},r1=e=>{var t,l;let{info:n,rank:o,userInfo:r,currentTab:i}=e,[a,u]=(0,l$.Z)(),[c,v]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!0),h=(0,tn.$y)(null==n?void 0:n.seriesId,1,`previous_page=${(0,tf.yW)()}`);return(0,d.useEffect)(()=>{if(u&&!c){if(v(!0),"favorite_collection"===i){l5.i.sendLog("compilationCoverShow",{enter_from:(0,tf.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId});return}t9.sendLog("collectionCoverShow",{enter_from:(0,tf.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:r.uid,group_id:""})}},[u]),(0,s.jsx)(R.a,{href:h,title:n.seriesName,target:"_blank",rel:"noopener noreferrer",onClick:e=>{if("favorite_collection"===i){l5.i.sendLog("compilationCoverClick",{enter_from:(0,tf.yW)(),tab_name:"favorite_collection",group_id:"",compilation_id:n.seriesId}),f(!1);return}t9.sendLog("collectionCoverClick",{enter_from:(0,tf.yW)(),compilation_id:n.seriesId,compilation_video_cnt:n.totalEpisode,author_id:r.uid,rank:o}),!n.totalEpisode&&(X.F.info("创作者还没有为这个短剧添加视频"),e.preventDefault())},children:(0,s.jsxs)("div",{className:r0.item,ref:a,children:[(0,s.jsxs)("div",{className:r0.cover,children:[(0,s.jsx)(oE.Q,{src:n.cover,alt:n.seriesName,iconWidth:30,iconHeight:88,imgClass:r0.image}),((null==n?void 0:null===(t=n.chargeInfo)||void 0===t?void 0:t.chargeType)===1||(null==n?void 0:null===(l=n.chargeInfo)||void 0===l?void 0:l.chargeType)===3)&&(0,s.jsx)("div",{className:r0.payTag,children:"付费"})]}),(0,s.jsxs)("div",{className:r0.content,children:[(0,s.jsx)("div",{className:r0.name,children:n.seriesName}),(0,s.jsxs)("p",{className:r0.count,children:[(0,er.qe)(n.playVV)," 播放"]}),(0,s.jsxs)("p",{className:r0.episode,children:[(0,s.jsxs)("span",{children:["更新至 ",n.totalEpisode," 集"]}),"favorite_collection"===i&&!!n.hasUpdatedEpisode&&m&&(0,s.jsxs)("span",{className:r0.unreadMixCount,children:["更新",n.hasUpdatedEpisode,"集"]})]})]})]})})};let r2=e=>e.seriesId;var r5=e=>{var t,l,n,o;let{userInfo:r,topNavHeight:i=60,setItemCount:u}=e,c=(0,lD.o)(null==r?void 0:r.secUid),{isSelf:v,updateFollowStatus:m}=(0,d.useContext)(H)||{},f=(0,d.useContext)(O.Context)||{},h=(0,d.useContext)(U.C)||{},p=(0,d.useRef)(0),g=(0,d.useRef)(1),[_,x]=(0,d.useState)(),[w,C]=(0,d.useState)([]);(0,d.useEffect)(()=>{var e;null==u||u(null!==(e=null==w?void 0:w.length)&&void 0!==e?e:0)},[null==w?void 0:w.length,u]);let y=(0,d.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rA.DD)({cursor:p.current,count:12});return 0===n&&(p.current=t,g.current=l),{data:e,cursor:t,hasMore:l,statusCode:n}},[]),b=(0,d.useCallback)((e,t)=>(0,s.jsx)("div",{onClick:t=>{t.preventDefault();let l=e;(async()=>{var t,n,o,i,s;let d=await (0,rG.l3)({seriesId:null==e?void 0:e.seriesId});(null==(l=(0,T._)((0,a._)({},(null==d?void 0:d.seriesInfo)||{}),{watchedEpisode:null==l?void 0:l.watchedEpisode,watchedItem:null==l?void 0:l.watchedItem}))?void 0:l.totalEpisode)===0||(null==l?void 0:null===(t=l.author)||void 0===t?void 0:t.isBlockedV2)||(null==l?void 0:null===(n=l.author)||void 0===n?void 0:n.userNotSee)||(null==l?void 0:null===(o=l.author)||void 0===o?void 0:o.secret)&&((null==l?!void 0:null===(i=l.author)||void 0===i?!void 0:!i.secret)||(null==l?void 0:null===(s=l.author)||void 0===s?void 0:s.uid)!==r.uid)?X.F.info("该短剧为空，请浏览其他内容"):x(l)})()},children:(0,s.jsx)(r1,{info:e,rank:t,userInfo:r,currentTab:"favorite_collection"})}),[r]),j=(0,d.useRef)(),k=nu(),N=null===(l=j.current)||void 0===l?void 0:null===(t=l.getDataList)||void 0===t?void 0:t.call(l),I=(0,d.useCallback)(()=>{p.current=0},[]);nv({resetStatusFunc:I,scrollListRef:j,scrollElementRef:k.scrollEleRef});let{reloadForPostDelete:E,isPostDelete:S}=(0,d.useContext)(lx),L=(0,d.useCallback)(()=>{var e,t,l,n,o;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),null==I||I(),null===(l=k.scrollEleRef.current)||void 0===l||l.scrollTo({top:0}),null==j||null===(o=j.current)||void 0===o||null===(n=o.reload)||void 0===n||n.call(o)},[I]);(0,d.useEffect)(()=>{S&&(null==L||L())},[S,L]);let{withMask:M}=nc((0,T._)((0,a._)({maskShadowStyle:{borderRadius:"6px"},getItemId:r2,dataList:N,isSupportMulti:!0},k),{firstItem:null===(o=j.current)||void 0===o?void 0:null===(n=o.getTargetNode)||void 0===n?void 0:n.call(o,0),getColumnCount:()=>3,stickyArea:{top:i+58+44,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),R=(0,np.m)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:rq,children:(0,s.jsx)(lG.Z,{scrollContainerEl:R,ref:j,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:g.current,renderItem:b,fetchMoreData:y,containerClassName:rX,itemClassName:rY,panelNoData:(0,s.jsx)(P.H,{className:rQ,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过短剧内容哦"}),withMask:M,setDataList:C})}),_&&(0,s.jsx)(oA.default,{seriesInfo:_,userContext:f,abtestData:h,close:()=>{x(void 0),m(),null==E||E()},uid:c,awemeSeriesInfo:_,anyHooks:rJ,modalInnerFeedCard:"series",notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:v},logParams:{enter_from_merge:v?"personal_homepage":"others_homepage",enter_method:(0,V.Rs)("enter_method"),tab_name:"favorite_collection",sub_tab_name:"playlet"},shortCutFilteredList:[],isDefaultShowRelatedCard:!1,defaultForceOpenTab:oV.L.Series})]})};let{COMMON_SEARCH_PARAMS:r3}=em||{};function r6(e){let{mc_list:t=[],has_more:l,status_code:n,log_pb:o,cursor:r}=e;return{data:t.map(ef.o0),hasMore:!!l,statusCode:n,logPb:o&&JSON.stringify(o),cursor:r}}async function r4(e){let{cursor:t,count:l=20}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=await (0,ev.U2)("/aweme/v1/web/music/listcollection/",(0,T._)((0,a._)({},r3),{cursor:Math.max(t,0),count:l}),{},void 0,n,{});return(0,ef.RL)(o,r6)}let r7=(0,d.createContext)({});var r8={Loop:"loop",Order:"order",Random:"random"},r9="j0rlnGbB",ie="MpN4pBtB",it="T0V012y8",il="UdNHuFr0",io=l("787960"),ir=l("168354");let ii=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 10.282C11 9.574 11.514 9 12.149 9h1.596c.634 0 1.149.574 1.149 1.282v15.436c0 .708-.515 1.282-1.15 1.282H12.15C11.514 27 11 26.426 11 25.718V10.282zm11 0C22 9.574 22.514 9 23.149 9h1.596c.634 0 1.149.574 1.149 1.282v15.436c0 .708-.515 1.282-1.15 1.282H23.15C22.514 27 22 26.426 22 25.718V10.282z",fill:"#0A0C20"})})));var ia=l("208043"),is=l("194396"),id="iXnFDtGj",iu="POzktyEo",ic="iRAVcF74",iv="JzSPRrob",im="bqjWGZpf",ih="O9wI7OvL",ip=new eF.h({musicCoverShow:{eventName:"music_cover_show",params:{music_id:""}},musicCoverClick:{eventName:"music_cover_click",params:{music_id:""}},musicMoreClick:{eventName:"music_more_click",params:{music_id:"",action:"cancel_favorite"}},clickAudioPlayMode:{eventName:"click_audio_play_mode",params:{auto_play_mode:""}},audioPlay:{eventName:"audio_play",params:{enter_from:"personal_homepage",music_id:"",is_visible:0,auto_play_mode:""}},audioOver:{eventName:"audio_over",params:{music_id:"",is_visible:0,duration:0,auto_play_mode:""}},audioError:{eventName:"audio_error",params:{music_id:"",error_msg:"",error_code:0,error_type:"",player_version:""}}});let ig=()=>l7.F.info("取消成功"),i_=()=>l7.F.info("操作失败，请稍后重试");var ix=e=>{let{musicId:t,removeCurrentMusic:l,pause:n}=e,{type:o,changeType:r}=(0,tL.P)({delayDisappear:100}),i=(0,d.useCallback)(()=>{ig(),null==l||l(t)},[l,t]),{unCollect:a}=(0,is.S)({musicId:t,disableSuccessToast:!0,isLogin:!0,success:i,fail:i_,clickMethod:"music_collection"});return(0,s.jsxs)("div",{className:id,onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("div",{onMouseEnter:()=>{r("active")},onMouseLeave:()=>{r()},children:(0,s.jsx)(io.Z,{height:24,width:24,viewBox:"2 2 32 32",src:ia.Z,className:f()(iu,{[ic]:!!o})})}),(0,s.jsxs)("ul",{className:f()(iv,{[im]:!!o}),onMouseEnter:e=>{e.stopPropagation(),r("active")},onMouseLeave:e=>{e.stopPropagation(),r()},onClick:e=>r(),children:[(0,s.jsx)("li",{className:ih,onClick:e=>{var l;null==n||n(),ip.sendLog("musicMoreClick",{action:"use",music_id:t}),null===(l=window)||void 0===l||l.open(`https://creator.douyin.com/creator-micro/content/cloud-edit?music_id=${t}`,"_blank")},children:"去使用"}),(0,s.jsx)("li",{className:ih,onClick:()=>{ip.sendLog("musicMoreClick",{action:"cancel_favorite",music_id:t}),(0,ln.Z)({title:"是否取消收藏该音乐？",cancelBtnText:"暂不取消",confirmBtnText:"确认",onConfirm:()=>new Promise(async e=>{null==n||n(),await a(),r(),e()}),onCancel(){r()}})},children:"取消收藏"})]})]})},iw={container:"X5IkEJdR",cover:"C7Oj05Q1",img:"kN8UIzkL",defaultCover:"Zo5OWK3g",playStatusIcon:"bAoCtRnC",loading:"FhdLK7WQ",detail:"QHmt4iGs",infoContainer:"P93DMZJU",title:"UmmFpWor",author:"_kWHGcLj",player:"PllSx7Y4",mode:"SdhOKIKH",modeTip:"CmapaMd5",time:"v9WuS6TZ",playTime:"UMYwlTtr",playedTime:"QkNkxUYQ",more:"egb0I1Mt",playing:"cpXHByMI"},iC=l("992283"),iy=l("623176"),ib=l("309551"),ij=l("135621"),ik=l("7979");l("613518");var iN=l("753451"),iI=l("185791"),iE=l("374078");class iS extends iI.ZP{static get pluginName(){return"customVolume"}static get defaultConfig(){return{position:iN.POSITIONS.CONTROLS_RIGHT,index:5,className:"xgplayer-row-volume",disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}afterCreate(){if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.config.disable)return;let{commonStyle:e,volume:t}=this.playerConfig;(null==e?void 0:e.volumeColor)&&(this.find(".xgplayer-drag").style.backgroundColor=e.volumeColor),this.changeMutedHandler=this.hook("mutedChange",e=>{this.changeMuted(e)},{pre:e=>{e.preventDefault(),e.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),"mobile"!==iE.Z.device&&"mobile"!==this.playerConfig.isMobileSimulateMode&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["click","touchend"],this.changeMutedHandler),this.on(iy.VOLUME_CHANGE,this.onVolumeChange),this.once(iy.LOADED_DATA,this.onVolumeChange),"Number"!==iN.Util.typeOf(t)&&(this.player.volume=this.config.default),this.onVolumeChange()}updateVolumePos(e,t){let{player:l}=this,n=this.find(".xgplayer-drag"),o=this.find(".xgplayer-bar");if(!o||!n)return;let r=parseInt(e/o.getBoundingClientRect().width*1e3,10);n.style.width=`${e}px`;let i=Math.max(Math.min(r/1e3,1),0),a={volume:{from:l.volume,to:i}};l.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(t,"change_volume",{muted:l.muted,volume:l.volume,props:a}),l.volume=Math.max(Math.min(r/1e3,1),0),l.muted&&(l.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}updateVolumeValue(){let{volume:e,muted:t}=this.player,l=this.find(".xgplayer-value-label"),n=Math.max(Math.min(e,1),0);l.innerText=t?0:Math.ceil(100*n)}focus(){let{player:e}=this;e.focus({autoHide:!1}),this._timerId&&(iN.Util.clearTimeout(this,this._timerId),this._timerId=null),iN.Util.addClass(this.root,"slide-show")}unFocus(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],l=arguments.length>2?arguments[2]:void 0,{_d:n,player:o}=this;if(!n.isActive)this._timerId&&(iN.Util.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=iN.Util.setTimeout(this,()=>{!n.isActive&&(t?o.blur():o.focus(),iN.Util.removeClass(this.root,"slide-show"),n.isStart&&this.onBarMouseUp(l)),this._timerId=null},e)}changeMuted(e){e&&e.stopPropagation();let{player:t,_d:l}=this;l.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:t.muted,volume:t.volume,props:{muted:{from:t.muted,to:!t.muted}}}),t.volume>0&&(t.muted=!t.muted),t.volume<.01&&(t.volume=this.config.miniVolume)}animate(e,t){e||0===t?this.setAttr("data-state","mute"):t<.5?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}destroy(){this._timerId&&(iN.Util.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",["click","touchend"],this.changeMutedHandler)}render(){if(this.config.disable)return;let e=this.config.default||this.player.volume,t=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-row-volume" data-state="normal">
      <div class="xgplayer-icon">
        <svg class="xg-volume" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M5.25 10.4002C5.25 9.57173 5.92157 8.90015 6.75 8.90015H7.5L10.7699 6.17527C11.2584 5.76819 12 6.11556 12 6.75143V17.0489C12 17.6847 11.2584 18.0321 10.7699 17.625L7.5 14.9002H6.75C5.92157 14.9002 5.25 14.2286 5.25 13.4002V10.4002Z" fill="white"/>
          <path d="M13.5 14.1502L13.5 9.65015C14.7426 9.65015 15.75 10.6575 15.75 11.9002C15.75 13.1428 14.7426 14.1502 13.5 14.1502Z" fill="white"/>
          <path d="M18.9375 11.9001C18.9375 14.9843 16.5354 17.5074 13.5 17.7007L13.5 15.82C15.4987 15.6312 17.0625 13.9483 17.0625 11.9001C17.0625 9.85198 15.4987 8.16908 13.5 7.98024V6.09952C16.5354 6.2928 18.9375 8.81594 18.9375 11.9001Z" fill="white"/>
        </svg>
        <svg class="xg-volume-small" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M6.75 9.00001C5.92157 9.00001 5.25 9.67158 5.25 10.5V13.5C5.25 14.3284 5.92157 15 6.75 15H7.5L10.7699 17.7249C11.2584 18.132 12 17.7846 12 17.1487V6.85129C12 6.21541 11.2584 5.86804 10.7699 6.27512L7.5 9.00001H6.75Z" fill="white"/>
          <path d="M13.5 9.75001L13.5 14.25C14.7426 14.25 15.75 13.2426 15.75 12C15.75 10.7574 14.7426 9.75001 13.5 9.75001Z" fill="white"/>
         <path opacity="0.3" fill-rule="evenodd" clip-rule="evenodd" d="M13.5 6.19934C16.5355 6.39255 18.9376 8.91572 18.9376 11.9999C18.9376 15.0842 16.5355 17.6073 13.5 17.8006V15.9198C15.4988 15.7311 17.0626 14.0481 17.0626 11.9999C17.0626 9.95176 15.4988 8.26882 13.5 8.08006V6.19934Z" fill="white" fill-opacity="0.9"/>
        </svg>
        <svg class="xg-volume-mute" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
         <path d="M6.75 9.00001C5.92157 9.00001 5.25 9.67158 5.25 10.5V13.5C5.25 14.3284 5.92157 15 6.75 15H7.5L10.7699 17.7249C11.2584 18.132 12 17.7846 12 17.1487V6.85129C12 6.21541 11.2584 5.86804 10.7699 6.27512L7.5 9.00001H6.75Z" fill="white" fill-opacity="0.9"/>
          <path d="M17.6255 15.3778L15.7515 13.1622L13.8775 15.3778L12.7504 14.391L14.7706 12.0024L12.75 9.61332L13.8771 8.62647L15.7515 10.8427L17.6259 8.62647L18.753 9.61332L16.7324 12.0024L18.7526 14.391L17.6255 15.3778Z" fill="white" fill-opacity="0.9"/>
        </svg>
      </div>
      <xg-slider class="xgplayer-slider">
        ${t?`<div class="xgplayer-value-label">${100*e}</div>`:""}
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="width: ${100*e}%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`}constructor(...e){super(...e),(0,ik._)(this,"_timerId",void 0),(0,ik._)(this,"_d",void 0),(0,ik._)(this,"onBarMousedown",e=>{let{player:t}=this,l=this.find(".xgplayer-bar");iN.Util.event(e);let n=l.getBoundingClientRect(),o=iN.Util.getEventPos(e,t.zoom),r=n.right-o.clientX;if(o.w=r,o.barW=n.width,this.pos=o,!(r<-2))return this.updateVolumePos(r,e),document.addEventListener("mouseup",this.onBarMouseUp),this._d.isStart=!0,!1}),(0,ik._)(this,"onBarMouseMove",e=>{let{_d:t}=this;if(!t.isStart)return;let{pos:l,player:n}=this;e.preventDefault(),e.stopPropagation(),iN.Util.event(e);let o=iN.Util.getEventPos(e,n.zoom);t.isMoving=!0;let r=l.clientX-o.clientX+l.w;if(!(r>l.barW))this.updateVolumePos(r,e)}),(0,ik._)(this,"onBarMouseUp",e=>{iN.Util.event(e),document.removeEventListener("mouseup",this.onBarMouseUp);let{_d:t}=this;t.isStart=!1,t.isMoving=!1}),(0,ik._)(this,"onMouseenter",e=>{this._d.isActive=!0,this.focus(),this.emit("icon_mouseenter",{pluginName:this.pluginName})}),(0,ik._)(this,"onMouseleave",e=>{this._d.isActive=!1,this.unFocus(100,!1,e),this.emit("icon_mouseleave",{pluginName:this.pluginName})}),(0,ik._)(this,"onVolumeChange",e=>{if(!this.player)return;let{muted:t,volume:l}=this.player;!this._d.isMoving&&(this.find(".xgplayer-drag").style.width=t||0===l?"4px":`${100*l}%`,this.config.showValueLabel&&this.updateVolumeValue()),this.animate(t,l)})}}let iL=e=>W().duration(e,"seconds").format("mm:ss");var iM=e=>{let{rank:t,musicInfo:l,onClickToPlay:n,onClickToPause:o,abTestData:r}=e,[i,s]=(0,d.useState)(!1),[u,c]=(0,d.useState)(!1),[v,m]=(0,d.useState)(!1),[f,h]=(0,d.useState)("00:00"),p=(0,d.useRef)(),g=(0,d.useRef)(null),_=(0,d.useRef)(!1),x=(0,d.useRef)(0),w=(0,d.useRef)(0),C=(0,d.useMemo)(()=>iL(l.duration),[l]),{updateActive:y,resetActive:b,mode:j,cleanHasListen:k}=(0,d.useContext)(r7),N=(0,d.useRef)(j);(0,d.useEffect)(()=>{N.current=j},[j]);let I=(0,d.useCallback)(()=>{ip.sendLog("audioPlay",{enter_from:"personal_homepage",music_id:null==l?void 0:l.mid,is_visible:"visible"===document.visibilityState?1:0,auto_play_mode:N.current})},[null==l?void 0:l.mid]),E=(0,d.useCallback)(()=>{ip.sendLog("audioOver",{music_id:null==l?void 0:l.mid,is_visible:"visible"===document.visibilityState?1:0,duration:Date.now()-w.current,auto_play_mode:N.current}),w.current=Date.now()},[null==l?void 0:l.mid]),S=(0,d.useCallback)(()=>{if(p.current){let{volume:e,autoplayMuted:t}=(0,ij.J)(r);p.current.muted=t,p.current.volume=e}},[]),L=(0,d.useCallback)(()=>{w.current=Date.now(),S(),c(!0)},[S]),M=(0,d.useCallback)(()=>{var e,t;c(!1),(null===(e=p.current)||void 0===e?void 0:e.duration)!==(null===(t=p.current)||void 0===t?void 0:t.currentTime)&&E()},[E]),T=(0,d.useCallback)(e=>{let{currentTime:t}=e;h(iL(t))},[]),R=(0,d.useCallback)(e=>{if(!!p.current&&(null==e?void 0:e.isInternalOp)!==!0)setTimeout(()=>{if(!!p.current)0===(0,l1.$o)(lX.LocalStorageKeys.PLAYER_IS_MUTE)&&p.current.muted&&(0,l1.qQ)(lX.LocalStorageKeys.PREVIEW_IS_MUTE,1),(0,l1.qQ)(lX.LocalStorageKeys.PLAYER_VOLUME,p.current.volume),(0,l1.qQ)(lX.LocalStorageKeys.PLAYER_IS_MUTE,p.current.muted?1:0),(0,ij.c)({isMute:p.current.muted,volume:p.current.volume})})},[]),F=(0,d.useCallback)(e=>{var t,l,n,o,r;(null===(t=p.current)||void 0===t?void 0:t.isPlaying)&&E(),null===(n=p.current)||void 0===n||null===(l=n.offAll)||void 0===l||l.call(n),null===(r=p.current)||void 0===r||null===(o=r.destroy)||void 0===o||o.call(r),e&&m(!1),e&&s(!1),e&&c(!1)},[E]),P=(0,d.useCallback)(()=>{var e;if(!g.current)return;let{volume:t,autoplayMuted:n}=(0,ij.J)(r),o={vtype:"MP3",url:null==l?void 0:null===(e=l.playUrl)||void 0===e?void 0:e.urlList.map(e=>({src:e})),autoplay:!0,loop:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,closePlayVideoFocus:!0,closeVideoPreventDefault:!0,closeVideoStopPropagation:!1,closeVideoDblclick:!0,controls:{mode:"flex",autoHide:!1,initShow:!0},plugins:[ib.Z,iS],autoplayMuted:n,volume:t},i=new iC.ZP((0,a._)({el:g.current,width:"100%",height:"100%"},o));m(!0),null==i||i.once(iy.PLAY,I),i.on(iy.PLAY,L),i.on(iy.PAUSE,M),i.on(iy.TIME_UPDATE,T),i.on(iy.USER_ACTION,R),i.on(iy.LOADED_DATA,()=>{s(!0),m(!1)}),i.on(iy.WAITING,()=>m(!0)),i.on(iy.CANPLAY,e=>{m(!1),_.current&&(_.current=!1,setTimeout(()=>{i.pause()},0))});i.on(iy.ERROR,e=>{var t;if(null===(t=p.current)||void 0===t||t.pause(),ip.sendLog("audioError",{music_id:null==l?void 0:l.mid,error_msg:null==e?void 0:e.message,error_code:null==e?void 0:e.errorCode,error_type:null==e?void 0:e.errorType,player_version:null==e?void 0:e.playerVersion}),!(Date.now()-x.current<3e3))x.current=Date.now(),X.F.info("歌曲播放失败，请点击重试")}),p.current=i},[l,L,M,T,R,I]);(0,d.useEffect)(()=>{if(p.current){let e=()=>{if(j===r8.Loop){var e;null===(e=p.current)||void 0===e||e.play();return}null==y||y(t,null==l?void 0:l.mid)};return p.current.on(iy.ENDED,e),()=>{var t;return null===(t=p.current)||void 0===t?void 0:t.off(iy.ENDED,e)}}},[j,p.current,r]),(0,d.useEffect)(()=>{let e=!1;return u&&(e=!0,window.addEventListener("beforeunload",E)),()=>{e&&window.removeEventListener("beforeunload",E)}},[u]);let D=(0,d.useCallback)(function(){var e,t,l;let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(v){null===(e=p.current)||void 0===e||e.pause(),m(!1),null==o||o(),_.current=!0;return}if(u){null===(t=p.current)||void 0===t||t.pause(),m(!1),null==o||o();return}i?(S(),null===(l=p.current)||void 0===l||l.play()):(P(),!r&&(null==b||b(),null==k||k())),null==n||n()},[i,u,P,S,n,o,v]),A=(0,d.useCallback)(()=>{u&&i&&(null==D||D())},[D,u,i]),V=(0,d.useCallback)(()=>{i&&p.current&&(p.current.currentTime=0,null==A||A())},[A,i]);return(0,d.useEffect)(()=>F,[F]),(0,d.useEffect)(()=>{let e=()=>{A()},t=B.listen(B.EVENT.openImAwemeModal,e),l=B.listen(B.EVENT.openNoticeAwemeModal,e),n=B.listen(B.EVENT.liveModalShow,e),o=B.listen(B.EVENT.videoPause,e);return()=>{null==t||t(),null==l||l(),null==n||n(),null==o||o()}},[A]),{playedTime:f,duration:C,clickMusicCard:D,containerRef:g,isPlaying:u,isActive:i,destroyPlayer:F,pause:A,resetPlayer:V,isBuffering:v}};let iT=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:36,height:42,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{opacity:".3",d:"M30.621 8.779c-2.223-1.433-3.829-3.726-4.33-6.398A9.642 9.642 0 0 1 26.124.6h-7.097l-.012 28.11c-.119 3.147-2.74 5.674-5.954 5.674a5.985 5.985 0 0 1-2.767-.678c-1.898-.988-3.199-2.955-3.199-5.219 0-3.25 2.678-5.896 5.966-5.896.614 0 1.203.1 1.761.273v-7.16a13.286 13.286 0 0 0-1.761-.125C5.86 15.579 0 21.369 0 28.489c0 4.369 2.209 8.234 5.577 10.57a13.092 13.092 0 0 0 7.486 2.341c7.203 0 13.063-5.791 13.063-12.91V14.233A17.01 17.01 0 0 0 36 17.372v-7.015a9.908 9.908 0 0 1-5.379-1.578z",fill:"#fff",fillOpacity:".34"})}))),iR=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.803 5.161a.6.6 0 0 1 .848 0l1.273 1.273a.8.8 0 0 1 0 1.131l-1.272 1.273a.6.6 0 0 1-.85-.849l.237-.236H8.75a3.25 3.25 0 0 0-3.25 3.25v2a3.25 3.25 0 0 0 3.25 3.25h1a.75.75 0 0 1 0 1.5h-1A4.75 4.75 0 0 1 4 13.003v-2a4.75 4.75 0 0 1 4.75-4.75h1.298l-.244-.243a.6.6 0 0 1 0-.849zm4.304 13.678a.6.6 0 0 1-.848 0l-1.273-1.273a.8.8 0 0 1 0-1.131l1.273-1.273a.6.6 0 0 1 .848.848l-.243.243h1.386a3.25 3.25 0 0 0 3.25-3.25v-2a3.25 3.25 0 0 0-3.25-3.25h-1a.75.75 0 0 1 0-1.5h1a4.75 4.75 0 0 1 4.75 4.75v2a4.75 4.75 0 0 1-4.75 4.75h-1.38l.237.237a.6.6 0 0 1 0 .849z",fill:"#fff",fillOpacity:".5"})}))),iF=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.803 5.176a.6.6 0 0 1 .849 0l1.272 1.273a.8.8 0 0 1 0 1.13l-1.272 1.274a.6.6 0 1 1-.849-.849l.236-.236H8.75a3.25 3.25 0 0 0-3.25 3.25v2a3.25 3.25 0 0 0 3.25 3.25h6.5a3.25 3.25 0 0 0 3.25-3.25v-2a3.25 3.25 0 0 0-3.25-3.25h-1a.75.75 0 0 1 0-1.5h1a4.75 4.75 0 0 1 4.75 4.75v2a4.75 4.75 0 0 1-4.75 4.75H8.745A4.75 4.75 0 0 1 4 13.018v-2a4.75 4.75 0 0 1 4.75-4.75h1.297l-.244-.244a.6.6 0 0 1 0-.848zm3.147 4.842h-.958a3.124 3.124 0 0 1-.63.49c-.252.14-.384.205-.608.261l-.004.9a2.367 2.367 0 0 0 1.035-.576l.004 3.473h1.16l.001-4.548z",fill:"#fff",fillOpacity:".5"})}))),iP=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.551 8.573a.5.5 0 0 0 .01-.845l-2.043-1.324a.5.5 0 0 0-.772.42v.522h-.272c-.69 0-1.355.304-1.8.848-.206.251-.379.467-.544.672-.25.312-.483.602-.786.961a.75.75 0 0 0 1.148.966c.31-.367.564-.684.825-1.01.165-.204.332-.412.518-.639a.825.825 0 0 1 .64-.298h.27v.562a.5.5 0 0 0 .763.425l2.043-1.26zM5.18 15.696c0 .414.336.75.75.75H7.484c.791 0 1.48-.402 1.93-.964.211-.263.365-.421.57-.632.136-.14.295-.302.506-.533a.75.75 0 0 0-1.105-1.014c-.144.157-.28.297-.412.434-.247.255-.481.498-.73.807-.21.264-.492.402-.76.402H5.93a.75.75 0 0 0-.75.75zm0-7.258a.75.75 0 0 1 .75-.75h1.656a2.35 2.35 0 0 1 1.797.837l5.441 6.46a.85.85 0 0 0 .65.303h.303v-.696a.5.5 0 0 1 .763-.426l2.043 1.26a.5.5 0 0 1 .009.846l-2.043 1.324a.5.5 0 0 1-.772-.42v-.388h-.303a2.35 2.35 0 0 1-1.797-.836L8.236 9.491a.85.85 0 0 0-.65-.303H5.93a.75.75 0 0 1-.75-.75z",fill:"#fff",fillOpacity:".5"})})));W().extend(oI());let iD=e=>{var t,l,n,o,r,i,a,s;return(null==e?void 0:null===(l=e.avatarThumb)||void 0===l?void 0:null===(t=l.urlList)||void 0===t?void 0:t[0])?null==e?void 0:null===(i=e.avatarThumb)||void 0===i?void 0:null===(r=i.urlList)||void 0===r?void 0:r[0]:"string"==typeof(null==e?void 0:e.avatarThumb)?null==e?void 0:e.avatarThumb:(null==e?void 0:null===(o=e.coverMedium)||void 0===o?void 0:null===(n=o.urlList)||void 0===n?void 0:n[0])?null==e?void 0:null===(s=e.coverMedium)||void 0===s?void 0:null===(a=s.urlList)||void 0===a?void 0:a[0]:"string"==typeof(null==e?void 0:e.coverMedium)?null==e?void 0:e.coverMedium:""};var iA=e=>{let{rank:t,musicInfo:l,currentMusicId:n="",removeCurrentMusic:o,onClickCard:r,abTestData:i}=e,[a,u]=(0,d.useState)(!1),[c,v]=(0,d.useState)(!1),{active:m,mode:p,updateActive:g,updateMode:_,cleanHasListen:x,updatePosition:w}=(0,d.useContext)(r7),[C,y]=(0,l$.Z)(void 0,{threshold:1}),{playedTime:b,containerRef:j,clickMusicCard:k,duration:N,isPlaying:I,isActive:E,destroyPlayer:S,pause:L,isBuffering:M}=iM({musicInfo:l,abTestData:i,rank:t}),T=iD(l),R=n===(null==l?void 0:l.mid);(0,d.useEffect)(()=>{t===m&&(k(),null==r||r(l),!y&&(null==w||w(t)))},[t,m]),(0,d.useEffect)(()=>{!R&&E&&(null==S||S(!0))},[R,E,S]);let F=(0,tA.x)(()=>{ip.sendLog("musicCoverShow",{music_id:null==l?void 0:l.mid})});return(0,s.jsxs)("div",{className:f()({[iw.container]:!0,"use-music-mode":!0,"collect-music-player":!0,[iw.playing]:I,"is-music-focus":R}),ref:F,children:[(0,s.jsxs)("div",{ref:C,className:iw.cover,onClick:e=>{ip.sendLog("musicCoverClick",{music_id:null==l?void 0:l.mid}),k(!1),null==r||r(l)},children:[T&&(0,s.jsx)("img",{className:iw.img,src:T,onLoad:e=>u(!0),onError:e=>u(!1)}),!a&&(0,s.jsx)("div",{className:iw.defaultCover,children:(0,s.jsx)(io.Z,{height:36,width:42,viewBox:"0 0 36 42",src:iT})}),M&&R?(0,s.jsx)(h.gb,{className:iw.loading}):(0,s.jsx)(io.Z,{height:32,width:32,viewBox:"2 2 34 34",className:iw.playStatusIcon,src:I?ii:ir.Z})]}),(0,s.jsxs)("div",{className:iw.detail,children:[(0,s.jsxs)("div",{className:iw.infoContainer,children:[(0,s.jsx)(K.Z,{text:l.title,className:iw.title}),(0,s.jsx)(K.Z,{text:l.author,className:iw.author})]}),(0,s.jsxs)("div",{className:iw.player,children:[(0,s.jsx)("div",{ref:j,onClick:e=>e.stopPropagation()}),R?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:iw.playTime,children:[(0,s.jsxs)("span",{className:f()(iw.time,iw.playedTime),children:[b,"\xa0/\xa0"]}),(0,s.jsx)("span",{className:iw.time,children:N})]}),(0,s.jsxs)("div",{className:iw.mode,onClick:()=>{if(p===r8.Order){null==_||_(r8.Loop),ip.sendLog("clickAudioPlayMode",{auto_play_mode:r8.Loop});return}if(p===r8.Loop){null==_||_(r8.Random),ip.sendLog("clickAudioPlayMode",{auto_play_mode:r8.Random});return}if(p===r8.Random){null==_||_(r8.Order),null==x||x(),ip.sendLog("clickAudioPlayMode",{auto_play_mode:r8.Order});return}},onMouseOver:()=>v(!0),onMouseOut:()=>v(!1),children:[c&&(0,s.jsx)("div",{className:iw.modeTip,children:p===r8.Order?"顺序播放":p===r8.Random?"随机播放":"单曲循环"}),p===r8.Order&&(0,s.jsx)(io.Z,{height:24,width:24,viewBox:"0 0 24 24",src:iR}),p===r8.Random&&(0,s.jsx)(io.Z,{height:24,width:24,viewBox:"0 0 24 24",src:iP}),p===r8.Loop&&(0,s.jsx)(io.Z,{height:24,width:24,viewBox:"0 0 24 24",src:iF})]})]}):(0,s.jsx)("span",{className:iw.time,children:N})]})]}),(0,s.jsx)("div",{className:iw.more,children:(0,s.jsx)(ix,{musicId:null==l?void 0:l.mid,pause:L,removeCurrentMusic:o})})]})},iV=e=>{let{userInfo:t,abTestData:l}=e;(0,lD.o)(null==t?void 0:t.secUid);let n=(0,d.useRef)(0),o=(0,d.useRef)(1),[r,i]=(0,d.useState)([]),a=(0,d.useRef)(),u=(0,d.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:r}=await r4({cursor:n.current,count:20});return 0===r&&(n.current=t,o.current=l),{data:e,cursor:t,hasMore:l,statusCode:r}},[]),[c,v]=(0,d.useState)(-1),[m,f]=(0,d.useState)(r8.Order),[h,p]=(0,d.useState)([]),g=(0,d.useCallback)(e=>{p(t=>t.concat(e))},[]),_=(0,d.useCallback)(()=>{p([])},[]),x=(0,d.useCallback)((e,t)=>{if(m===r8.Order&&v(e===r.length-1?0:e+1),m===r8.Random){var l;let n=Math.floor(Math.random()*r.length);if(h.length===r.length-1){v(n),_();return}for(;n===e||h.includes(null===(l=r[n])||void 0===l?void 0:l.mid);)(n+=1)===r.length&&(n=0);v(n),g(t)}},[r,h,m]),w=(0,d.useCallback)(()=>{v(-1)},[]),C=(0,d.useCallback)(e=>{f(e)},[m]),y=(0,d.useCallback)(e=>{a.current&&a.current.locateSelectVideo(e,-200)},[]),b=(0,d.useCallback)(function(){var e,t,l,n;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!o||!(null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.setScrollData))return;let r=null!==(n=null===(t=(l=a.current).getDataList)||void 0===t?void 0:t.call(l))&&void 0!==n?n:[];a.current.setScrollData({dataList:r.filter(e=>(null==e?void 0:e.mid)!==o)}),p(e=>e.filter(e=>e!==o))},[]),[j,k]=(0,d.useState)(""),N=(0,d.useCallback)((e,n)=>(0,s.jsx)(iA,{musicInfo:e,rank:n,userInfo:t,currentTab:"music",currentMusicId:j,removeCurrentMusic:b,onClickCard:e=>{var t;k(null!==(t=null==e?void 0:e.mid)&&void 0!==t?t:"")},abTestData:l}),[l,t,j]),I=(0,np.m)();return(0,s.jsx)(r7.Provider,{value:{active:c,updateActive:x,resetActive:w,mode:m,hasListen:h,updateMode:C,updateHasListen:g,cleanHasListen:_,updatePosition:y},children:(0,s.jsx)("div",{className:r9,children:(0,s.jsx)(lG.Z,{scrollContainerEl:I,ref:a,skeletonNum:0,defaultHasMoreFlag:o.current,renderItem:N,fetchMoreData:u,containerClassName:ie,itemClassName:it,panelNoData:(0,s.jsx)(P.H,{className:il,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:"暂时还没有收藏过音乐哦"}),setDataList:i})})})},iB={container:"GZcoUIlz",header:"gKjbKnvx",tabs:"q8scm0zI",right:"I5okmpJ5",tip:"Gacsa9Ld",bottomTip:"CsqZitNt",tipSvg:"ldRYveOE",fuFang:"mxNdq0st",descText:"AXyGocDh"};l("685680"),l("526789");let iH=e=>new Promise(t=>setTimeout(t,e));async function iU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,n={data:[],cursor:0,hasMore:!1,statusCode:1};for(let r=0;r<t;r++){var o;let t=await e();if(!(null===(o=t.data)||void 0===o?void 0:o.length)){await iH(l);continue}n=t;break}return n}let iO=new eF.h({favorite_folder_show:{eventName:"favorite_folder_show",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},favorite_folder_click:{eventName:"favorite_folder_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},favorite_folder_more_action_show:{eventName:"favorite_folder_more_action_show",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},edit_favorite_folder_click:{eventName:"edit_favorite_folder_click",params:{folder_name:"",folder_id:"",status:0,enter_from_merge:"",enter_from:""}},edit_favorite_folder_confirm:{eventName:"edit_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},delete_favorite_folder_click:{eventName:"delete_favorite_folder_click",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},delete_favorite_folder_confirm:{eventName:"delete_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,item_cnt:0,enter_from_merge:"",enter_from:""}},create_favorite_folder_click:{eventName:"create_favorite_folder_click",params:{click_position:"",enter_from_merge:"",enter_from:""}},create_favorite_folder_confirm:{eventName:"create_favorite_folder_confirm",params:{folder_name:"",folder_id:"",status:0,click_position:"",enter_from_merge:"",enter_from:""}},remove_favorite_video_click:{eventName:"remove_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},remove_favorite_video_confrm:{eventName:"remove_favorite_video_confrm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}},move_favorite_video_click:{eventName:"move_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},move_favorite_video_confirm:{eventName:"move_favorite_video_confirm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}},add_favorite_video_click:{eventName:"add_favorite_video_click",params:{folder_name:"",folder_id:"",enter_from_merge:"",enter_from:""}},add_favorite_video_confirm:{eventName:"add_favorite_video_confirm",params:{folder_name:"",folder_id:"",item_cnt:0,enter_from_merge:"",enter_from:""}}}),iz=(e,t)=>iO.sendLog(e,(0,a._)({enter_from_merge:(0,tf.yW)(),enter_from:(0,tf.vM)()},t)),iW=e=>{let t=function(e){let{selectItems:t=[],isListSelectable:l=!1,changeListSelectable:n,updateIsSelectDisabled:o}=e;return{state:{selectItems:t,selectable:l},action:{changeListSelectable:n,updateIsSelectDisabled:o}}}(e),[l,n]=(0,d.useState)(),[o,r]=(0,d.useState)([]),[i,s]=(0,d.useState)({}),u=(0,d.useRef)({});u.current=i;let c=(0,d.useRef)({cursor:0,hasMore:!0}),v=(0,d.useMemo)(()=>o.reduce((e,t)=>{var l;return e[t.collectionFolderId]={info:t,videoList:(null===(l=i[t.collectionFolderId])||void 0===l?void 0:l.data)||[]},e},{}),[o,i]),m=(0,d.useMemo)(()=>l?v[l]:void 0,[l,v]),f=(0,d.useCallback)(e=>{n(e),(0,n7.X)({top:0},(0,lw.V)())},[]),h=(0,d.useCallback)(async e=>{var t;if(!e)return{data:[],cursor:0,hasMore:!1,statusCode:0};let l=u.current[e]||{cursor:0,hasMore:!0,data:[]};if(!l.hasMore)return{data:[],cursor:l.cursor,hasMore:l.hasMore,statusCode:0};let{data:n,cursor:o,hasMore:r,statusCode:i}=await iU(()=>(0,rA.d6)({collectsId:e,cursor:l.cursor,offset:10}),2),d=!!r;return u.current=(0,T._)((0,a._)({},u.current),{[e]:{cursor:o,hasMore:d,data:[...(null===(t=u.current[e])||void 0===t?void 0:t.data)||[],...n]}}),s(u.current),{data:n,cursor:o,hasMore:d,statusCode:i}},[]),p=(0,d.useCallback)(async()=>{if(!c.current.hasMore)return await iH(500),{data:[],cursor:c.current.cursor,hasMore:c.current.hasMore,statusCode:0};let{data:e,cursor:t,hasMore:l,statusCode:n}=await (0,rA.So)({cursor:c.current.cursor,offset:10});return c.current.cursor=t,c.current.hasMore=l,r(t=>[...t,...e]),Promise.all(e.map(e=>h(e.collectionFolderId))),{data:e,cursor:t,hasMore:l,statusCode:n}},[h]),g=(0,d.useCallback)(e=>{r(t=>{let l=t.map(e=>e.collectionFolderId);return[...e.filter(e=>!l.includes(e.collectionFolderId)),...t]})},[]),_=(0,d.useCallback)(e=>r(t=>{let l=t.findIndex(t=>t.collectionFolderId===e.collectionFolderId);if(-1===l)return t;let n=[...t];return n[l]=e,n}),[]),x=(0,d.useCallback)((e,n)=>{t.action.updateIsSelectDisabled(!0);let i={folder_name:e.map(e=>e.collectionFolderName).join(","),folder_id:e.map(e=>e.collectionFolderId).join(","),folder_cnt:e.length};iz("delete_favorite_folder_click",i),(0,ln.Z)({title:"确认删除该收藏夹吗，删除后视频依旧可在收藏视频中查看～",cancelBtnText:"暂不删除",confirmBtnText:"确认删除",otherProps:{maskClosable:!1},async onConfirm(){null==n||n();try{await Promise.all(e.map(e=>(0,rA.yN)(e.collectionFolderId))),iz("delete_favorite_folder_confirm",i);let t=o.filter(t=>{let l=e.findIndex(e=>e.collectionFolderId===t.collectionFolderId);return -1===l});if(-1!==e.findIndex(e=>e.collectionFolderId===l)){if(t.length){let e=o.findIndex(e=>e.collectionFolderId===l),t=o[e+1],n=t?t.collectionFolderId:o[0].collectionFolderId;f(n)}else f("")}r(t),s(t=>{let l=(0,a._)({},t);for(let t of e)delete l[t.collectionFolderId];return l}),l7.F.info("删除收藏夹成功")}catch(e){l7.F.info("删除收藏夹失败")}finally{t.action.updateIsSelectDisabled(!1),t.action.changeListSelectable(!1)}},onCancel(){t.action.updateIsSelectDisabled(!1)}})},[o,l,t.action.updateIsSelectDisabled,t.action.changeListSelectable,f]),w=(0,d.useCallback)(e=>{var l,n;f(e),null===(l=(n=t.action).changeListSelectable)||void 0===l||l.call(n,!1)},[t.action.changeListSelectable,f]),C=(0,d.useCallback)((e,t,l)=>{let n=u.current[t],o=[...(null==n?void 0:n.data)||[]],i=l.map(e=>e.awemeId),d=[],c=0;if("remove"===e)d=o.filter(e=>!i.includes(e.awemeId)),c=-(o.length-d.length);else if("add"===e){d=o;let e=o.map(e=>e.awemeId);for(let t of l){if(!e.includes(t.awemeId))d.unshift(t),c+=1}}u.current=(0,T._)((0,a._)({},u.current),{[t]:(0,T._)((0,a._)({},n),{data:d})}),s(u.current),r(e=>{var l;let n=e.findIndex(e=>e.collectionFolderId===t);if(-1===n)return e;let o=(0,T._)((0,a._)({},e[n]),{videoTotal:(null===(l=e[n])||void 0===l?void 0:l.videoTotal)+c}),r=[...e];return r.splice(n,1,o),r})},[]),y=(0,d.useCallback)(async(e,t)=>{let l=o.find(t=>t.collectionFolderId===e),{status_code:n}=await (0,rA.RX)({item_ids:t.map(e=>e.awemeId),item_type:2,from_collects_id:e,collects_name:(null==l?void 0:l.collectionFolderName)||""});if(n){l7.F.info("操作失败");return}l7.F.info("操作成功");C("remove",e,t)},[t.action.changeListSelectable,o]),b=(0,d.useCallback)(async(e,t)=>{C("remove",e,t)},[C]),j=(0,d.useCallback)(async(e,t)=>{let l=e.map(e=>{var t,l;return null===(l=v[e])||void 0===l?void 0:null===(t=l.info)||void 0===t?void 0:t.collectionFolderId});for(let n of(await Promise.all(e.map(async e=>{var n,o;let{status_code:r}=await (0,rA.RX)({item_ids:t.map(e=>e.awemeId),item_type:2,to_collects_id:e,collects_name:(null===(o=v[e])||void 0===o?void 0:null===(n=o.info)||void 0===n?void 0:n.collectionFolderName)||"",move_collects_list:l,update_collects_sort:!0});if(r)throw Error()})),e))C("add",n,t)},[v]),k=(0,d.useCallback)(()=>{f(""),r([]),s({}),u.current={},c.current={cursor:0,hasMore:!0}},[f]);return{multi:t,state:{currentCollectsId:l,collects:o,collectMap:v,currentCollectsInfo:m,videoResRef:u,collectResRef:c},action:{getCollects:p,createCollection:g,editCollection:_,removeCollections:x,selectCollection:w,getVideoList:h,reset:k,removeVideosFromCollection:y,moveVideosToCollections:j,removeVideoForDeleted:b}}},iZ=(0,d.createContext)(null),i$=()=>(0,d.useContext)(iZ);var iK="j5lb65v3",iG=l("276467"),iq=l("760508"),iX=l("154222");let iY=d.forwardRef(function(){let{awemeInfo:e,collected:t,collectMethod:l,selectType:n,disabledCollectionIds:o,disabledScrollBar:r=!0,awaysReset:i,onMove:a,onClose:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectType:"multi"},c=arguments.length>1?arguments[1]:void 0,[v,m]=(0,d.useState)(!1),f=(0,d.useCallback)(()=>m(!0),[]),h=(0,d.useCallback)(()=>m(!1),[]);return(0,d.useImperativeHandle)(c,()=>({open:f,close:h})),(0,iG.Z)(v,"favorites_modal"),(0,iq.Z)(v,"modal"),(0,d.useEffect)(()=>r?(v?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}):()=>{},[v,r]),(0,s.jsx)(tj.u,{type:"custom",maskClosable:!1,className:iK,isHide:!v,onCancel:()=>m(!1),children:(0,s.jsx)(iX.Z,{show:v,type:"modal",selectType:n,awemeInfo:e,collected:t,collectMethod:l,disabledCollectionIds:o,awaysReset:i,onClose:()=>{m(!1),null==u||u()},onCollectDone:()=>m(!1),onMove:a})})});var iQ="LcXGUwTd";let iJ=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,s.jsx)("path",{d:"M4.436 14.15L2.259 3.003a.75.75 0 0 1 1.095-.802l9.936 5.42a.47.47 0 0 1-.184.88l-4.527.395a.94.94 0 0 0-.754.506l-2.51 4.871a.47.47 0 0 1-.88-.125z",fill:"#fff",fillOpacity:".5"})}))),i0=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:15,height:16,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{d:"M6.267 2.867a.566.566 0 0 1 .942.423v2.551c1.527 0 2.404.003 3.133.223a5.213 5.213 0 0 1 3.48 3.48c.224.74.224 1.639.224 3.22v.162a.506.506 0 0 1-.836.374c-.055-.047-.09-.1-.095-.108v-.001l-.03-.047-.002-.004c-.327-.527-.471-.758-.63-.956a4.32 4.32 0 0 0-2.855-1.59c-.251-.03-.524-.03-1.144-.03H7.209v2.14a.566.566 0 0 1-.942.423l-4.995-4.44a.924.924 0 0 1 0-1.38l4.995-4.44z",fill:"#fff",fillOpacity:".5"})})));var i1={btn:"zgUMhIOF",iconAdd:"DxmyGXyX",textBtn:"UFnmy3O4",icon:"w_ucM6pp",modal:"kkBN9OA8",header:"xKw4z_tH",title:"oWTFCp49",btnGroup:"fqyhlFRY",wrapper:"SyiyRtsU",content:"Dt2WNXSM",item:"LUtmELJM"},i2=l("242121"),i5=l.n(i2),i3=l("405050"),i6="rbS1qUuy",i4="ppjoec6Z";let i7={top:0,bottom:0,left:0,right:0};var i8=e=>{let{currentTab:t,userInfo:l,topNavHeight:n=60,itemClassName:o,listSelectContext:r,columnCount:i,isInModal:a=!1,setItemCount:u,abTestData:c,scrollContainerEl:v}=e,m=i$(),f=(0,lD.o)(null==l?void 0:l.secUid),h=(0,d.useRef)(0),p=(0,d.useRef)(0),g=(0,d.useRef)([]),[_,x]=(0,d.useState)([]),w=(0,d.useRef)(!0);(0,d.useEffect)(()=>{var e;null==u||u(null!==(e=null==_?void 0:_.length)&&void 0!==e?e:0)},[null==_?void 0:_.length,u]);let C=(0,d.useCallback)(()=>{p.current=0},[]),y=async()=>{var e;let t=(null==w?void 0:w.current)&&lF.UG.hasCache,{data:l=[],maxCursor:n=0,hasMore:o,statusCode:r}=await oh(e=>lF.UG.request({cached:t,consume:!0,params:{maxCursor:e},fetcherOptions:{expired:12e5,resetExpiredCacheBefore:!1,hoverDelay:!1}}),p.current),i=l.length<6?h.current:p.current;l.map(e=>(e.cursor=i,e)),!r&&(t?setTimeout(()=>{var e,t;null===(t=j.current)||void 0===t||null===(e=t.loadMoreData)||void 0===e||e.call(t)},200):(h.current=p.current,p.current=n)),w.current=!1;let a=tK(l,g.current);return{data:i5()(a,(null===(e=m.state.currentCollectsInfo)||void 0===e?void 0:e.videoList)||[],"awemeId"),maxCursor:t?0:n,hasMore:t?1:o,statusCode:t?0:r,clearBefore:!t&&0===h.current}},{isPostDelete:b}=(0,d.useContext)(lx),j=(0,d.useRef)();(0,d.useEffect)(()=>{if(b){var e,t,l,n;null==j||null===(t=j.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),C(),null==j||null===(n=j.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)}},[b,C]);let k=(0,d.useRef)(null),N=(0,i3.d)(v);return(0,s.jsx)("div",{className:i6,"data-e2e":"user-favorite-list",ref:k,children:(0,s.jsx)("div",{className:i4,"data-e2e":"user-post-list",children:(0,s.jsx)(nI,{ref:j,resetStatusFunc:C,uid:f,tab:"favorite_collection",currentTab:t,defaultRes:{statusCode:0,data:[],hasMore:1,cursor:0,maxCursor:0},fetchMoreData:y,retryTimes:5,panelNoData:(0,s.jsx)(om,{title:"暂无收藏的视频",type:"collect"}),topNavHeight:n,itemClassName:o,listSelectContext:r,columnCount:i,containerRef:a?k:void 0,scrollRef:a?N:void 0,customStickyArea:a?i7:void 0,updateAwemeList:x})})})};let i9=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:30,height:31,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{d:"M14.57 25.775c5.81 0 10.519-4.757 10.519-10.625S20.379 4.525 14.57 4.525c-5.81 0-10.518 4.757-10.518 10.625S8.762 25.775 14.57 25.775zm0-5.844c-.58 0-1.051-.476-1.051-1.062v-2.657h-2.63c-.58 0-1.051-.475-1.051-1.062 0-.587.47-1.063 1.051-1.063h2.63v-2.656c0-.587.47-1.062 1.052-1.062.58 0 1.052.475 1.052 1.062v2.656h2.629c.58 0 1.052.476 1.052 1.063s-.471 1.062-1.052 1.062h-2.63v2.657c0 .587-.47 1.062-1.051 1.062z",fill:"#fff",fillOpacity:".75",opacity:".8"})}))),ae=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:17,height:16,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.75 13.333a.75.75 0 0 0 1.5 0V8.75h4.583a.75.75 0 0 0 0-1.5H9.249V2.667a.75.75 0 1 0-1.5 0V7.25H3.166a.75.75 0 1 0 0 1.5h4.583v4.583z",fill:"#fff"})}))),at=lU();var al=e=>{var t,l;let{btnType:n="button"}=e,o=i$(),[r,i]=(0,d.useState)(!1),{userInfo:a}=(0,d.useContext)(O.Context)||{},u=lH({maxSelectedCount:50}),c=(0,d.useRef)(void 0),v=(0,d.useCallback)(()=>{var e;null===(e=u.changeListSelectable)||void 0===e||e.call(u,!0),i(!0)},[u.changeListSelectable]),m=(0,d.useCallback)(()=>{var e;null===(e=u.changeListSelectable)||void 0===e||e.call(u,!1),i(!1)},[u.changeListSelectable]),f=(0,d.useCallback)(async()=>{try{var e,t,l;if(!o.state.currentCollectsId)return;iz("add_favorite_video_confirm",{folder_name:(null===(e=o.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderName)||"",folder_id:(null===(t=o.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderId)||"",item_cnt:(null===(l=u.selectItems)||void 0===l?void 0:l.length)||0}),await o.action.moveVideosToCollections([o.state.currentCollectsId],u.selectItems||[]),i(!1),u.changeListSelectable(!1),l7.F.info("添加视频成功")}catch(e){l7.F.info("添加视频失败",null==c?void 0:c.current)}},[u.changeListSelectable,o.action.moveVideosToCollections,o.state.currentCollectsId,u.selectItems]),h=(0,d.useCallback)(()=>{var e,t;iz("add_favorite_video_click",{folder_name:(null===(e=o.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderName)||"",folder_id:(null===(t=o.state.currentCollectsInfo)||void 0===t?void 0:t.info.collectionFolderId)||""}),v()},[v,o.state.currentCollectsInfo]);return(0,d.useEffect)(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),(0,s.jsxs)(at.Provider,{value:u,children:["button"===n?(0,s.jsxs)(ed.zx,{newStyle:!0,className:i1.btn,onClick:h,theme:"solid",children:[(0,s.jsx)(J.Z,{src:ae,className:i1.iconAdd,viewBox:"0 0 17 16"}),"添加视频"]}):(0,s.jsx)(nP,{className:i1.textBtn,icon:(0,s.jsx)(J.Z,{src:i9,viewBox:"0 0 30 31",className:i1.icon}),text:"添加视频",disabledToast:"需退出「批量管理」才可以添加视频哦～",disabled:o.multi.state.selectable,onClick:h}),(0,s.jsxs)(tj.u,{className:i1.modal,isHide:!r,maskClosable:!1,type:"custom",onCancel:m,children:[(0,s.jsxs)("div",{className:i1.header,children:[(0,s.jsxs)("p",{className:i1.title,children:["添加视频（",(null==u?void 0:null===(t=u.selectItems)||void 0===t?void 0:t.length)||0,"）"]}),(0,s.jsxs)("div",{className:i1.btnGroup,children:[(0,s.jsx)(ed.zx,{newStyle:!0,className:i1.btn,size:"small",type:"secondary",onClick:m,theme:"solid",children:"取消"}),(0,s.jsx)(ed.zx,{newStyle:!0,disabled:!(null===(l=u.selectItems)||void 0===l?void 0:l.length),className:i1.btn,size:"small",onClick:f,theme:"solid",children:"确定"})]})]}),(0,s.jsx)("div",{className:i1.wrapper,children:(0,s.jsx)("div",{ref:c,className:i1.content,children:r&&(0,s.jsx)(i8,{currentTab:"favorite_collection",userInfo:a,itemClassName:i1.item,listSelectContext:at,columnCount:5,isInModal:!0,scrollContainerEl:c.current})})})]})]})},an=l("786881"),ao={btn:"m2SRVW9n",iconAdd:"AEi5kC4i",textBtn:"_TgaQ6fY",icon:"UkCx0Fk3"},ar=e=>{let{btnType:t="button"}=e,l=i$(),n=(0,d.useCallback)(e=>{l.action.createCollection([e]),iz("favorite_folder_show",{folder_name:e.collectionFolderName,folder_id:e.collectionFolderId})},[l.action.createCollection]),{open:o,modal:r,show:i}=(0,an.Z)({toastInGlobal:!0,logParams:{click_position:"favorite_folder_tab"},onDone:n});return(0,d.useEffect)(()=>(i?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),(0,s.jsxs)(s.Fragment,{children:["button"===t?(0,s.jsxs)(ed.zx,{newStyle:!0,className:ao.btn,onClick:o,theme:"solid",children:[(0,s.jsx)(J.Z,{src:ae,className:ao.iconAdd,viewBox:"0 0 17 16"}),"新建收藏夹"]}):(0,s.jsx)(nP,{className:ao.textBtn,icon:(0,s.jsx)(J.Z,{src:i9,viewBox:"0 0 30 31",className:ao.icon}),text:"新建收藏夹",disabledToast:"需退出「批量管理」才可以新建收藏夹哦～",disabled:l.multi.state.selectable,onClick:o}),r]})},ai=()=>{var e;let t=i$(),{selectItems:l,selectable:n}=t.multi.state,o=(0,d.useRef)(null),r=(0,d.useMemo)(()=>!!t.state.currentCollectsId||!!t.state.collects.length,[t.state.currentCollectsId,t.state.currentCollectsInfo,t.state.collects]),i=(0,d.useMemo)(()=>{if(t.state.currentCollectsId){var e;return!(null===(e=t.state.currentCollectsInfo)||void 0===e?void 0:e.videoList.length)}return!1},[t.state.currentCollectsId,null===(e=t.state.currentCollectsInfo)||void 0===e?void 0:e.videoList]),a=(0,d.useCallback)(async(e,r)=>{var i,a,s,d,u;try{let o=t.state.currentCollectsId;if(!l.length||!n||!o)return;let u={folder_id:"",folder_name:"",item_cnt:l.length};if(null==r?void 0:r.length)t.action.createCollection(r),u.folder_id=(null===(i=r[0])||void 0===i?void 0:i.collectionFolderId)||"",u.folder_name=(null===(a=r[0])||void 0===a?void 0:a.collectionFolderName)||"";else{let l=t.state.collectMap[e[0]];u.folder_id=(null==l?void 0:null===(s=l.info)||void 0===s?void 0:s.collectionFolderId)||"",u.folder_name=(null==l?void 0:null===(d=l.info)||void 0===d?void 0:d.collectionFolderName)||""}await t.action.removeVideosFromCollection(o,l),await t.action.moveVideosToCollections(e,l),iz("move_favorite_video_confirm",u),l7.F.info("移动视频成功")}catch(e){l7.F.info("移动视频失败")}finally{t.multi.action.updateIsSelectDisabled(!1),t.multi.action.changeListSelectable(!1),null===(u=o.current)||void 0===u||u.close()}},[l,n,t.state.currentCollectsId,t.state.currentCollectsInfo,t.state.collectMap,t.multi.action.updateIsSelectDisabled,t.multi.action.changeListSelectable]),u=(0,d.useCallback)(()=>{var e,o;let r=t.state.currentCollectsId;if(!!l.length&&!!n&&!!r)iz("remove_favorite_video_click",{folder_id:(null===(e=t.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(o=t.state.currentCollectsInfo)||void 0===o?void 0:o.info.collectionFolderName)||""}),t.multi.action.updateIsSelectDisabled(!0),(0,ln.Z)({title:"是否确认移出该收藏夹？",cancelBtnText:"暂不移除",confirmBtnText:"确认移除",otherProps:{maskClosable:!1},async onConfirm(){var e,n;iz("remove_favorite_video_confrm",{folder_id:(null===(e=t.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(n=t.state.currentCollectsInfo)||void 0===n?void 0:n.info.collectionFolderName)||"",item_cnt:l.length}),t.multi.action.updateIsSelectDisabled(!1),await t.action.removeVideosFromCollection(r,l),t.multi.action.changeListSelectable(!1)},onCancel(){t.multi.action.updateIsSelectDisabled(!1)}})},[l,n,t.state.currentCollectsId,t.state.currentCollectsInfo,t.action.removeVideosFromCollection,t.multi.action.updateIsSelectDisabled,t.multi.action.changeListSelectable]),c=(0,d.useCallback)(async()=>{let e=t.state.currentCollectsId;if(!!l.length&&!!n&&!e)t.action.removeCollections(l)},[l,n,t.state.currentCollectsId,t.action.removeCollections]),v=(0,d.useMemo)(()=>t.state.currentCollectsId?[{key:"remove_videos",actionText:"从收藏夹移除",onClick:u},{key:"move",actionText:"移动到",icon:(0,s.jsx)(J.Z,{width:16,height:16,src:iJ,viewBox:"0 0 16 17"}),onClick:()=>{var e,l,n;iz("move_favorite_video_click",{folder_id:(null===(e=t.state.currentCollectsInfo)||void 0===e?void 0:e.info.collectionFolderId)||"",folder_name:(null===(l=t.state.currentCollectsInfo)||void 0===l?void 0:l.info.collectionFolderName)||""}),t.multi.action.updateIsSelectDisabled(!0),null===(n=o.current)||void 0===n||n.open()}}]:[{key:"remove_collects",actionText:"删除收藏夹",onClick:c}],[t.state.currentCollectsId,u,c,t.multi.action.updateIsSelectDisabled,t.state.currentCollectsInfo]),m=(0,d.useMemo)(()=>t.state.currentCollectsId?(0,s.jsx)(nP,{text:"返回",icon:(0,s.jsx)(J.Z,{width:16,height:16,src:i0,viewBox:"0 0 15 16"}),onClick:()=>t.action.selectCollection("")}):t.state.collects.length?(0,s.jsx)(ar,{btnType:"text"}):null,[t.state.currentCollectsId,t.action.selectCollection,t.state.collects]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:iQ,children:[r&&(0,s.jsx)(nD,{tabName:"favorite_collection",subTabName:"favorite_folder",disabled:i,operateBtns:v}),m,t.state.currentCollectsId&&(0,s.jsx)(al,{btnType:"text"})]}),(0,s.jsx)(iY,{ref:o,selectType:"single",disabledCollectionIds:t.state.currentCollectsId?[t.state.currentCollectsId]:[],awaysReset:!0,disabledScrollBar:!0,onMove:a,onClose:()=>t.multi.action.updateIsSelectDisabled(!1)})]})},aa=l("546165"),as=l("456713");let ad=e=>{let t=0;for(let l=0;l<e.length;l++)e.charCodeAt(l)>255?t+=2:t++;return t};var au={card:"EiwrFqzJ",cover:"tfXBhzAM",header:"b1GRUyke",left:"swoz21LD",title:"FS06n8KE",secret:"iauctvHQ",count:"aKwtfamZ",digit:"AKV4z4in",coverList:"ihmdgw0h",tip:"zkJ3N9Bb"},ac=l("386431"),av={cover:"gvU106fc",wrapper:"I1rFNmBl",icon:"eYCVafaL",large:"RuL7TIb1"},am=e=>{let{src:t,className:l,alt:n,size:o="default"}=e,[r,i]=(0,d.useState)("");return(0,d.useEffect)(()=>{if(!t)return;let e=new Image;e.onload=()=>{i(t)},e.src=t},[t]),(0,s.jsx)("div",{className:f()([av.cover,l,"large"===o&&av.large]),children:(0,s.jsx)("div",{className:av.wrapper,children:r?(0,s.jsx)("img",{src:r,alt:n}):(0,s.jsx)(J.Z,{src:ac.Z,className:av.icon,viewBox:"0 0 105 120"})})})},af=l("300764"),ah="FMMtyFzN",ap="L4Qmo8JM",ag="Q23uIlnF";let a_=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{d:"M16.5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zM10.5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0zM5 12a1.5 1.5 0 1 0 3 0 1.5 1.5 0 0 0-3 0z",fill:"#fff",fillOpacity:".5"})})));var ax=e=>{let{className:t,data:l}=e,n=i$(),{open:o,modal:r}=(0,an.Z)({collectsInfo:l,toastInGlobal:!0,onDone:n.action.editCollection}),[i,u]=(0,d.useState)(),[c,v]=(0,d.useState)(),{styles:m,attributes:h,update:p}=(0,af.D)(i,c,{placement:"bottom-start"}),g=(0,d.useRef)(),_=(0,d.useCallback)(e=>{g.current&&clearTimeout(g.current),null==c||c.setAttribute("data-show",""),!e&&iz("favorite_folder_more_action_show",{folder_id:l.collectionFolderId,folder_name:l.collectionFolderName}),null==p||p()},[c,p,l]),x=(0,d.useCallback)(()=>{g.current=setTimeout(()=>{null==c||c.removeAttribute("data-show")},100)},[c,p]),w=(0,d.useCallback)(()=>{x(),o(),iz("edit_favorite_folder_click",{folder_id:l.collectionFolderId,folder_name:l.collectionFolderName,status:l.status})},[o,x,l]),C=(0,d.useCallback)(async()=>{x();let e={folder_id:l.collectionFolderId,folder_name:l.collectionFolderName,status:l.status,item_cnt:l.videoTotal};iz("delete_favorite_folder_click",e),n.action.removeCollections([l],()=>iz("delete_favorite_folder_confirm",e))},[n.action.removeCollections,l,x]);return(0,d.useEffect)(()=>{let e=l9()(x,50);return document.addEventListener("wheel",e),()=>{document.removeEventListener("wheel",e)}},[x]),(0,d.useEffect)(()=>{null==p||p()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{ref:u,className:f()([ah,t]),onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(J.Z,{src:a_,viewBox:"0 0 24 24",onMouseEnter:()=>_(!1),onMouseLeave:x}),r]}),(0,re.createPortal)((0,s.jsxs)("ul",(0,T._)((0,a._)({ref:v,className:ap,style:m.popper,onMouseEnter:()=>_(!0),onMouseLeave:x},h.popper),{onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("li",{className:ag,onClick:w,children:"编辑收藏夹"}),(0,s.jsx)("li",{className:ag,onClick:C,children:"删除收藏夹"})]})),document.body)]})},aw=e=>{let{data:t}=e,l=i$(),n=(0,d.useMemo)(()=>{var e;let n=((null===(e=l.state.collectMap[t.collectionFolderId])||void 0===e?void 0:e.videoList)||[]).map(e=>{var t;return null===(t=e.video)||void 0===t?void 0:t.cover});return Array(6).fill(void 0).map((e,t)=>{let l=n[t];return{key:l||t,value:l}})},[t,l.state.collectMap]),o=(0,tA.x)(()=>{iz("favorite_folder_show",{folder_name:t.collectionFolderName,folder_id:t.collectionFolderId})}),r=(0,d.useCallback)(()=>{l.action.selectCollection(t.collectionFolderId),iz("favorite_folder_click",{folder_name:t.collectionFolderName,folder_id:t.collectionFolderId})},[t.collectionFolderId,t.collectionFolderName]);return(0,s.jsxs)("div",{ref:o,className:au.card,onClick:r,children:[(0,s.jsxs)("div",{className:au.header,children:[(0,s.jsxs)("div",{className:au.left,children:[(0,s.jsx)(ed.u,{className:au.tip,style:24>=ad(t.collectionFolderName)?{display:"none"}:{},content:t.collectionFolderName,position:"right",children:(0,s.jsx)("p",{className:au.title,children:t.collectionFolderName})}),0===t.status&&(0,s.jsx)(as.z,{className:au.secret,svg:(0,s.jsx)(aa.Z,{})})]}),!l.multi.state.selectable&&(0,s.jsx)(ax,{data:t})]}),(0,s.jsxs)("p",{className:au.count,children:["共",(0,s.jsx)("span",{className:au.digit,children:t.videoTotal}),"作品"]}),(0,s.jsx)("div",{className:au.coverList,children:n.map(e=>(0,s.jsx)(am,{className:au.cover,src:e.value},e.key))})]})},aC="v4rYAh3M",ay="KGPbW6AB",ab=l("584071"),aj={},ak=()=>{let e=!!i$().state.currentCollectsId;return(0,s.jsx)("div",{className:aj.empty,children:(0,s.jsx)(P.H,{icon:e?(0,s.jsx)(lM.Z,{}):(0,s.jsx)(ab.Z,{}),title:e?"暂无内容":"暂无收藏夹",desc:e?"暂时还没有收藏过合集内容哦":"赶快去新建属于自己的收藏夹吧",children:e?(0,s.jsx)(al,{}):(0,s.jsx)(ar,{})})})},aN=()=>{var e,t;let l=i$(),n=(0,d.useRef)(),o=(0,d.useCallback)(e=>(0,s.jsx)(aw,{data:e}),[l.state.collects]);(0,d.useEffect)(()=>{var e;null==n||null===(e=n.current)||void 0===e||e.setScrollData({dataList:l.state.collects})},[l.state.collects]);let r=nu(),{withMask:i}=nc((0,T._)((0,a._)({maskShadowStyle:{borderRadius:"6px"},getItemId:e=>e.collectionFolderId,dataList:l.state.collects,isSupportMulti:!0},r),{firstItem:null===(t=n.current)||void 0===t?void 0:null===(e=t.getTargetNode)||void 0===e?void 0:e.call(t,0),getColumnCount:()=>3,stickyArea:{top:162,bottom:0,left:0,right:0},itemMargin:{top:0,bottom:16,left:0,right:16}})),u=(0,np.m)();return(0,s.jsx)("div",{className:aC,children:(0,s.jsx)(lG.Z,{scrollContainerEl:u,ref:n,skeletonNum:0,defaultDataList:[],defaultHasMoreFlag:1,renderItem:o,fetchMoreData:l.action.getCollects,itemClassName:ay,panelNoData:(0,s.jsx)(ak,{}),withMask:i})})},aI=l("240427"),aE={wrapper:"j7BV4kGE",navigation:"cY_OF5SG",item:"VpQXHluk",arrow:"hk39Sros",arrowBg:"a6FOWNzv",arrowOuter:"eCDZXOEC",active:"l6JWwE5E",more:"hz09PVM0",cover:"PMdgYAyk",icon:"nS8FOHVd",right:"DphUWwVP",top:"V4HG8DSl",name:"zuQlK4aU",secret:"oOdJyltK",total:"OQpiDXxM",bgWrapper:"u010k95M",bg:"QBN22IdH",loading:"WNqy4KwO",tip:"o0OfarhY"};let aS=(0,d.forwardRef)((e,t)=>(0,s.jsx)("svg",(0,T._)((0,a._)({xmlns:"http://www.w3.org/2000/svg",width:9,height:21,fill:"none",ref:t},e),{children:(0,s.jsx)("path",{d:"M7.991 9.154c1.296.87 1.265 2.874-.027 3.748C5.374 14.655 1.794 17.53 0 21V0c2.156 4.549 4.619 6.89 7.991 9.154z",fill:"#454650"})}))),aL=e=>{let t=(0,tA.x)(()=>{if(!!e.id)iz("favorite_folder_show",{folder_id:e.id,folder_name:e.name})}),l=(0,d.useCallback)(()=>{var t;e.id&&iz("favorite_folder_click",{folder_id:e.id,folder_name:e.name}),null===(t=e.onClick)||void 0===t||t.call(e)},[e.onClick,e.id,e.name]);return(0,s.jsxs)("div",{ref:t,className:f()([aE.item,e.active&&aE.active]),onClick:l,children:[e.isPlus?(0,s.jsx)(as.z,{className:aE.icon,svg:(0,s.jsx)(aI.Z,{})}):(0,s.jsx)(am,{size:"large",className:aE.cover,src:e.src,alt:e.name}),(0,s.jsxs)("div",{className:aE.right,children:[(0,s.jsxs)("div",{className:aE.top,"data-tip":e.name,children:[(0,s.jsx)(ed.u,{position:"right",showArrow:!1,style:14>=ad(e.name)?{display:"none"}:{},content:(0,s.jsx)("span",{style:{lineHeight:"26px"},children:e.name}),className:aE.tip,children:(0,s.jsx)("p",{className:aE.name,children:e.name})}),e.secret&&(0,s.jsx)(as.z,{className:aE.secret,svg:(0,s.jsx)(aa.Z,{})})]}),void 0!==e.total&&(0,s.jsx)("span",{className:aE.total,children:e.total})]}),(0,s.jsx)("div",{className:aE.bgWrapper,children:(0,s.jsx)(as.z,{className:aE.bg,svg:(0,s.jsx)(ab.Z,{})})}),(0,s.jsxs)("div",{className:aE.arrow,children:[(0,s.jsx)(J.Z,{className:aE.arrowBg,src:aS,viewBox:"0 0 9 21"}),(0,s.jsx)(J.Z,{className:aE.arrowOuter,src:aS,viewBox:"0 0 9 21"})]}),e.children]})};var aM=()=>{let e=i$(),t=(0,d.useCallback)(t=>{e.action.createCollection([t]),e.action.selectCollection(t.collectionFolderId)},[e.action.createCollection,e.action.selectCollection]),{open:l,modal:n}=(0,an.Z)({toastInGlobal:!0,onDone:t,logParams:{click_position:"favorite_folder_tab"}}),[o,r]=(0,l$.Z)();return((0,d.useEffect)(()=>{if(!!r)e.action.getCollects()},[r]),(0,d.useEffect)(()=>{let e=document.querySelector(".user-page-footer"),t=document.querySelector("#collection-navigation"),l=l9()(()=>{var l;let n=document.body.clientHeight,o=(null==e?void 0:e.getBoundingClientRect().top)||0,{top:r=0,height:i=0}=null!==(l=null==t?void 0:t.getBoundingClientRect())&&void 0!==l?l:{},a=0;if(!!i)a=o>n?n-r:o-r,(null==t?void 0:t.style)&&a&&(t.style.height=`${a}px`)},10),n=(0,lw.s)();return n.addEventListener("scroll",l),()=>{n.removeEventListener("scroll",l)}},[]),e.state.collects.length)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:aE.wrapper,children:(0,s.jsx)(lh.Z,{topOffset:-60,children:t=>{let{style:n,isSticky:r}=t;return(0,s.jsxs)("div",{id:"collection-navigation",className:aE.navigation,style:r?(0,T._)((0,a._)({},n),{position:"fixed",top:176}):void 0,children:[(0,s.jsx)(aL,{name:"新建收藏夹",isPlus:!0,onClick:l}),e.state.collects.map(t=>{var l,n,o,r;return(0,s.jsx)(aL,{id:t.collectionFolderId,active:t.collectionFolderId===e.state.currentCollectsId,name:t.collectionFolderName,src:null===(r=e.state.collectMap[t.collectionFolderId])||void 0===r?void 0:null===(o=r.videoList)||void 0===o?void 0:null===(n=o[0])||void 0===n?void 0:null===(l=n.video)||void 0===l?void 0:l.cover,secret:0===t.status,total:t.videoTotal,onClick:()=>e.action.selectCollection(t.collectionFolderId),children:(0,s.jsx)(ax,{data:t,className:aE.more})},t.collectionFolderId)}),e.state.collectResRef.current.hasMore&&(0,s.jsx)("div",{ref:o,className:aE.loading,children:(0,s.jsx)(h.gb,{})})]})}})}),n]}):null},aT="wbN0sWZG",aR="WyLL_KaO",aF=()=>{var e,t,l,n,o,r;let i=i$(),{userInfo:a}=(0,d.useContext)(O.Context)||{},u=null!==(r=(0,lD.o)(null==a?void 0:null===(e=a.info)||void 0===e?void 0:e.secUid))&&void 0!==r?r:"",c=(0,d.useRef)(),v=(0,d.useCallback)(()=>i.action.getVideoList(i.state.currentCollectsId),[i.state.currentCollectsId]),{isPostDelete:m}=(0,d.useContext)(lx);return(0,d.useEffect)(()=>{if(m&&i.state.currentCollectsId){var e;let t=null!==(e=x.Le.getConfig(x.gI.DeletePostList))&&void 0!==e?e:[];i.action.removeVideoForDeleted(i.state.currentCollectsId,t)}},[m,i.action,i.state.currentCollectsId]),(0,d.useEffect)(()=>{var e,t,l;if(!i.state.currentCollectsId){null==c||null===(l=c.current)||void 0===l||l.resetRes({statusCode:0,hasMore:!1,dataList:[]});return}let n=i.state.videoResRef.current[i.state.currentCollectsId]||{cursor:0,hasMore:0};null==c||null===(t=c.current)||void 0===t||t.resetRes({statusCode:0,hasMore:n.hasMore,dataList:(null===(e=i.state.currentCollectsInfo)||void 0===e?void 0:e.videoList)||[]})},[i.state.currentCollectsInfo,i.state.currentCollectsId]),(0,s.jsx)("div",{className:aT,children:(0,s.jsx)(nI,{ref:c,itemClassName:aR,uid:u,tab:"favorite_collection",currentTab:"favorite_collection",modalInnerFeedCard:"collect_folder",defaultRes:{statusCode:0,hasMore:0,cursor:0,data:(null===(t=i.state.currentCollectsInfo)||void 0===t?void 0:t.videoList)||[]},fetchMoreData:v,collectionFolderInfo:null===(l=i.state.currentCollectsInfo)||void 0===l?void 0:l.info,modalEnterFrom:"collection_folder",columnCount:5,panelNoData:(0,s.jsx)(ak,{}),logParams:{folder_id:(null===(n=i.state.currentCollectsInfo)||void 0===n?void 0:n.info.collectionFolderId)||"",folder_name:(null===(o=i.state.currentCollectsInfo)||void 0===o?void 0:o.info.collectionFolderName)||"",sub_tab_name:"folder"}})})},aP="BXe90Hzs",aD=e=>{let{isEntry:t}=e,l=i$(),[n,o]=(0,d.useState)(!1),r=(0,d.useCallback)(async()=>{if(!!t)try{o(!0),await l.action.getCollects()}catch(e){}finally{o(!1)}},[t,l.action.getCollects]);return(0,d.useEffect)(()=>{r()},[r]),(0,d.useEffect)(()=>{if(!l.state.currentCollectsId&&!!l.state.collects.length)l.action.selectCollection(l.state.collects[0].collectionFolderId)},[l.state.currentCollectsId,l.state.collects]),(0,s.jsx)("div",{className:aP,children:n?(0,s.jsx)(h.gb,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(aM,{}),(0,s.jsx)(aF,{})]})})},aA=()=>i$().state.currentCollectsId?(0,s.jsx)(aD,{}):(0,s.jsx)(aN,{});let aV=e=>{if(e===tJ.COMPILATION)return"收藏合集";if(e===tJ.VIDEO);else if(e===tJ.SERIES)return"收藏短剧";return"收藏作品"};var aB=e=>{let{userInfo:t,currentTab:l,topNavHeight:n=60,abTestData:o,currentSubTab:r=tJ.VIDEO,onSubTabChange:i}=e,[u,c]=(0,d.useState)(!1),v=lH({maxSelectedCount:50,operate:(0,d.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(r===tJ.VIDEO){let t={},l=[];return e.forEach(e=>{l.push(e.awemeId),t[e.awemeId]=(0,on.I)(e.awemeType)}),(0,lT.BV)({awemeIds:l.join(","),awemeTypeMap:t})}if(r===tJ.COMPILATION){let t=e.map(e=>e.mixId).join(",");return(0,lT._A)({mixIds:t})}if(r===tJ.SERIES){let t=e.map(e=>e.seriesId).join(",");return(0,lT.eh)({seriesIds:t})}},[r]),operateDesc:{operation:"取消",itemName:aV(r)},tabName:"favorite_collection",subTabName:r}),m=iW(v),{changeListSelectable:h,changeShowConfirm:p,renderConfirmModal:g,selectedCount:_}=v,x=(0,d.useMemo)(()=>(0,s.jsxs)("div",{className:f()(iB.descText,iB.fuFang),children:[(0,s.jsx)("p",{children:"找不到内容？"}),(0,s.jsx)("p",{children:"1.某些内容格式电脑端暂不支持查看，请在 APP 查看"}),(0,s.jsx)("p",{children:"2.某些内容因作者删除或设置私密，暂时无法查看"})]}),[]),w=e=>{if(!!e)null==i||i(e),n_(),e!==r&&(0,lw.V)().scrollTo(0,0),r===tJ.FAVORITE_FOLDER&&e!==tJ.FAVORITE_FOLDER&&m.action.reset(),l5.i.sendLog("favoriteCollectionTabClick",{tab_name:e})};(0,d.useEffect)(()=>{if("favorite_collection"===l&&r===tJ.COMPILATION){var e;let t=rD.Q.getItem({sKey:lX.CookieKeys.SelfTabRedDotControl})||[],l=null==t?void 0:null===(e=t.map)||void 0===e?void 0:e.call(t,e=>{let{id:t,u:l}=e;return{id:t,u:l,c:l}});rD.Q.setItem(lX.CookieKeys.SelfTabRedDotControl,l,31536e3)}},[o,l,r]),(0,d.useEffect)(()=>{null==h||h(!1)},[r,h]);let C=[tJ.COMPILATION,tJ.VIDEO,tJ.SERIES],[y,b]=(0,d.useState)(0);return(0,d.useEffect)(()=>{!Object.values(tJ).includes(r)&&(null==i||i(tJ.VIDEO))},[r]),(0,d.useEffect)(()=>{(async()=>{if((0,eo.DT)()&&window.TTE_ENV){let e=await ox.dw("GET_CHANNEL_ID");(null==e?void 0:e.data)==="30033"&&c(!0)}else(0,V.CY)("xigua_webid")&&c(!0)})()},[]),(0,s.jsx)(lO.Provider,{value:(0,a._)({},v),children:(0,s.jsxs)(iZ.Provider,{value:m,children:[(0,s.jsxs)("div",{className:iB.container,children:[(0,s.jsx)(n9,{topNavHeight:n,children:(0,s.jsxs)("div",{className:iB.header,children:[(0,s.jsxs)(ed.mQ,{type:"button",className:iB.tabs,activeKey:r,onChange:e=>w(e),children:[t0.map(e=>(0,s.jsx)(ed.Jm,{itemKey:e.tab,tab:(0,s.jsx)("span",{children:e.title})},e.tab)),u&&(0,s.jsx)(ed.Jm,{tab:(0,s.jsx)(R.a,{href:"https://www.ixigua.com/my/favorite",target:"_blank",children:(0,s.jsx)("span",{children:"西瓜收藏"})})})]}),(0,s.jsxs)("div",{className:iB.right,children:[C.includes(r)&&y>0&&(0,s.jsx)(nD,{tabName:"favorite_collection",subTabName:r,operateBtns:[{key:"cancel_favorite",actionText:"取消收藏",onClick:()=>{p(!0),t9.sendLog("manageDeleteClick",{tab_name:"favorite_collection",sub_tab_name:r,item_cnt:_})}}]}),r===tJ.FAVORITE_FOLDER&&(0,s.jsx)(ai,{}),[tJ.VIDEO,tJ.FAVORITE_FOLDER].includes(r)&&(0,s.jsx)(ed.u,{className:f()(iB.tip,iB.bottomTip),position:"bottomRight",content:x,children:(0,s.jsx)(na,{className:f()(iB.tipSvg,iB.fuFang),style:{marginLeft:"20px"}})})]})]})}),(0,s.jsxs)("div",{children:[r===tJ.FAVORITE_FOLDER&&(0,s.jsx)(aA,{}),r===tJ.VIDEO&&(0,s.jsx)(i8,{currentTab:l,userInfo:t,topNavHeight:n,setItemCount:b,abTestData:o}),r===tJ.MUSIC&&(0,s.jsx)(iV,{currentTab:l,userInfo:t,abTestData:o}),r===tJ.COMPILATION&&(0,s.jsx)(rK,{userInfo:t,topNavHeight:n,setItemCount:b,abTestData:o}),r===tJ.SERIES&&(0,s.jsx)(r5,{userInfo:t,topNavHeight:n,setItemCount:b})]})]}),null==g?void 0:g()]})})};l("459167"),l("842903");var aH={container:"gaJE6HAF",defaultBg:"hsRjuMei",backgroundBox:"sJK0SpmY",background:"vtj7C6dX",gradient:"B6M32uoI",gradientBottom:"KHZgK2KB",gradientTop:"YpFJLpHw",gradientRight:"c8ZuVcFK"};let aU=e=>{var t,l,n,o;let r;let{headImageInfo:i,abTestData:a,isSelf:d}=e||{},{coverUrl:u,darkCoverColor:c}=i||{};u&&c&&(r=function(e,t){var l;let{h:n,s:o}=e;return`hsl(${n}deg ${o>40?40:o}% ${null==t?void 0:null===(l=t.userUiUpdate)||void 0===l?void 0:l.lightness}%)`}(function(e){let t,l,n=e.replace(/#/g,"");(3===n.length||4===n.length)&&(n=n.split("").map(e=>e+e).join(""));let o=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})[\da-z]{0,0}$/i.exec(n);if(!o)return null;let r=parseInt(o[1],16)/255,i=parseInt(o[2],16)/255,a=parseInt(o[3],16)/255,s=parseInt(o[4],16)/255,d=Math.max(i,a,s),u=Math.min(i,a,s),c=(d+u)/2;if(d===u)t=0,l=0;else{let e=d-u;switch(l=c>.5?e/(2-d-u):e/(d+u),d){case i:t=(a-s)/e+(a<s?6:0);break;case a:t=(s-i)/e+2;break;case s:t=(i-a)/e+4}t/=6}return t=Math.round(360*t),l=Number((100*l).toFixed(2)),c=Number((100*c).toFixed(2)),(100*r).toFixed(2),{h:t,s:l,l:c}}(c),a));let v=1;return((null==a?void 0:null===(t=a.userUiUpdate)||void 0===t?void 0:t.type)===1||!d&&(null==a?void 0:null===(l=a.userUiUpdate)||void 0===l?void 0:l.type)===2)&&(v=null==a?void 0:null===(o=a.userUiUpdate)||void 0===o?void 0:o.opacity),u?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:aH.container,children:[(0,s.jsx)("div",{className:aH.backgroundBox,children:(0,s.jsx)("div",{className:aH.background,style:{backgroundImage:`url(${null==u?void 0:null===(n=u.urlList)||void 0===n?void 0:n[0]})`,opacity:v}})}),(0,s.jsx)("div",{className:aH.gradient,style:{"--bg-color":r}}),(0,s.jsx)("div",{className:aH.gradientBottom}),(0,s.jsx)("div",{className:aH.gradientTop}),(0,s.jsx)("div",{className:aH.gradientRight})]})}):(0,s.jsx)("div",{className:f()(aH.container,aH.defaultBg)})};var aO={frameContainer:"lfsfx_uh",videoPerf:"Z98HPnyY",notMargin:"feJVidxC",listBoxContainer:"J5eTQYYD",notHeaderPadding:"bz2Cx4xw",topBackground:"O1NCg33L",listContainer:"lNYhMAbF",errorContent:"BR0xcuWq",banContainer:"LlNc_sxC",desc:"DC7dDYHY",text:"E8zfM1Vy",link:"Tdpk9Ywl",tabinner:"TyOzgFCS",tip:"i1GzLfGF",tipText:"HFFd1shz",hasNavTab:"vBN4fX8S",container:"GE_yTyVX"},az={header:"w75dxPFo",tabs:"X134v8wD",title:"pYhAzOOt",setIcon:"jkLYzQhF",active:"CAbTZxla",setLink:"h5VBrzVG",tipText2:"hq9RAaEW"},aW=new eF.h({postTabClick:{eventName:"post_tab_click",params:{enter_from:"",tab_name:"",to_user_id:""}},creatorManageEntranceClick:{eventName:"creator_manage_entrance_click",params:{type:""}}}),aZ={collection:"HwKhAESI",header:"rBtO1tap",expand:"HSw3euhy",down:"qIa6CP2_",list:"_pm_CKzZ",container:"vOL_yy91",item:"chV42PC_",more:"d3n6421E",noMore:"sX4SXbsy"},a$=l("388222");let aK=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:n,setAwemeInfoList:o,mixInfo:r,close:i}=e,s=(0,d.useRef)({cursor:0,hasMore:1,statusCode:-1,lastMixVideoIndex:-1}),u=(0,d.useRef)(t),c=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{let e=!1;return(async()=>{var t,n,d,u,v;c.current=!0;let m=await (0,a$.Lz)({mixId:null==r?void 0:r.mixId,cursor:null===(t=s.current)||void 0===t?void 0:t.cursor,count:20});if(c.current=!1,(null!==(d=null==m?void 0:null===(n=m.data)||void 0===n?void 0:n.length)&&void 0!==d?d:0)!==0){s.current={cursor:null==m?void 0:m.cursor,hasMore:null==m?void 0:m.hasMore,statusCode:null==m?void 0:m.statusCode,lastMixVideoIndex:(null==m?void 0:null===(u=m.data)||void 0===u?void 0:u.length)-1};let t=null==m?void 0:null===(v=m.data)||void 0===v?void 0:v.map(e=>{let{cover:t,status:l,playVV:n}=r||{};return e.mixInfo&&(e.mixInfo.cover=t,e.mixInfo.status=l,e.mixInfo.playVV=n),(0,a._)({},e)});if(e)return;o(t||[]),l(0)}else i()})(),()=>{e=!0}},[r]),(0,d.useEffect)(()=>{-1!==u.current&&-1!==t&&t>u.current&&t>s.current.lastMixVideoIndex&&u.current===s.current.lastMixVideoIndex&&X.F.info("暂无更多合集, 已为你播放推荐视频"),u.current=t},[t]),(0,d.useEffect)(()=>{5>Math.abs(Number(null==n?void 0:n.length)-t)&&-1!==t&&!c.current&&(async()=>{var e,l,i,a;if((null===(e=s.current)||void 0===e?void 0:e.hasMore)===1){c.current=!0;let e=await (0,a$.Lz)({mixId:null==r?void 0:r.mixId,cursor:null===(l=s.current)||void 0===l?void 0:l.cursor,count:20});c.current=!1,s.current={cursor:null==e?void 0:e.cursor,hasMore:null==e?void 0:e.hasMore,statusCode:null==e?void 0:e.statusCode,lastMixVideoIndex:(null==n?void 0:n.length)+(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.length)-1},o(t=>[...t,...(null==e?void 0:e.data)||[]])}else{c.current=!0;let e=await (0,nm.b)({awemeId:null===(a=n[t])||void 0===a?void 0:a.awemeId,count:20,filterGids:n.map(e=>null==e?void 0:e.awemeId).join(",")||""});c.current=!1,o(t=>[...t,...(null==e?void 0:e.awemeList)||[]])}})()},[n,t]),null};var aG=d.forwardRef((e,t)=>{var l,n,o;let{userInfo:r,currentTab:i,defaultMixRes:a,setIsExpand:u,updateDataList:c}=e,v=(0,lD.o)(null==r?void 0:r.secUid),{isSelf:m,updateFollowStatus:h}=(0,d.useContext)(H)||{},p=(0,d.useContext)(O.Context)||{},g=(0,d.useContext)(U.C)||{},[_,x]=(0,d.useState)(!1),[w,C]=(0,d.useState)(),[y,b]=(0,d.useState)((null==a?void 0:a.total)||0),j=(0,d.useRef)(null!==(n=null==a?void 0:a.cursor)&&void 0!==n?n:0),k=(0,d.useRef)(null===(o=null==a?void 0:a.hasMore)||void 0===o||o),N=(0,d.useMemo)(()=>(null==a?void 0:a.data)||[],[a]),I=(0,d.useMemo)(()=>{let{isBlock:e,isBlocked:t,secret:l,followStatus:n}=r;return!!(e||t||!m&&l&&2!==n)},[m,r]),{reloadForPostDelete:E,isPostDelete:S}=(0,d.useContext)(lx),L=(0,d.useRef)(null),M=(0,d.useCallback)(()=>{var e,t,l,n;x(!1),null==L||null===(t=L.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),j.current=0,null==L||null===(n=L.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[]);(0,d.useEffect)(()=>{S&&M()},[S,M]),(0,d.useImperativeHandle)(t,()=>({reloadMixList:M}),[M]);let T=(0,d.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n,total:o}=await (0,rV.HN)({uid:v,cursor:j.current,count:6});return j.current=t,k.current=l,0===y&&o&&b(o),{data:e,cursor:t,hasMore:l,statusCode:n}},[v,y]);(0,d.useEffect)(()=>{m&&y&&t9.sendLog("creatorManageEntranceShow",{type:"compilation"})},[m,y]);let R=(0,d.useCallback)((e,t)=>(0,s.jsx)("div",{onClick:t=>{(null==e?void 0:e.totalEpisode)!==0&&(t.preventDefault(),C(e))},children:(0,s.jsx)(rZ,{info:e,rank:t,userInfo:r})}),[r]),F=(0,np.m)();return I?null:(0,s.jsxs)("div",{className:aZ.collection,children:[(0,s.jsx)("div",{className:aZ.header,children:y>3&&(0,s.jsxs)("span",{className:f()(aZ.expand,{[aZ.down]:_}),onClick:()=>{x(!_),null==u||u(!_)},children:[_?"收起":"展开全部",(0,s.jsx)(nH,{})]})}),(0,s.jsx)("div",{className:f()(aZ.list,{[aZ.more]:_}),children:(0,s.jsx)(lG.Z,{scrollContainerEl:F,ref:L,skeletonNum:0,defaultDataList:N,defaultHasMoreFlag:k.current,renderItem:R,fetchMoreData:T,containerClassName:aZ.container,itemClassName:aZ.item,pause:"post"!==i,panelNoMoreData:(0,s.jsx)("div",{className:aZ.noMore}),setDataList:c,containerNoLineHeight:!0})}),w&&(0,s.jsx)(oA.default,{modalInnerFeedCard:"mix",isActive:!0,modalEnterFrom:"userPost",isSelf:m,mixInfo:w,userContext:p,abtestData:g,uid:v,awemeMixInfo:w,anyHooks:aK,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from:m?"personal_homepage":"others_homepage",enter_from_merge:m?"personal_homepage":"others_homepage",enter_method:(0,V.Rs)("enter_method"),tab_name:"compilation"},close:()=>{C(void 0),h(),null==E||E()},shortCutFilteredList:[null===(l=lY.getShortcut().dislike)||void 0===l?void 0:l.key]})]})}),aq={collection:"Wa1eR3Db",header:"aciZUKdC",title:"mDp5r34k",enter:"Rd_wTsgp",expand:"QmPWJKyG",down:"TK3U9AgM",list:"mH1MDZLp",container:"lbhATqze",item:"Nfz9aVYm",more:"Po2oqEm1",noMore:"YBlwRJGq"},aX=d.forwardRef((e,t)=>{var l,n,o;let{userInfo:r,currentTab:i,defaultSeriesRes:a,setIsExpand:u,updateDataList:c}=e,v=(0,lD.o)(null==r?void 0:r.secUid),{isSelf:m,updateFollowStatus:h}=(0,d.useContext)(H)||{},p=(0,d.useContext)(O.Context)||{},g=(0,d.useContext)(U.C)||{},[_,x]=(0,d.useState)(!1),[w,C]=(0,d.useState)(),[y,b]=(0,d.useState)((null==a?void 0:a.total)||0),j=(0,d.useRef)(null!==(n=null==a?void 0:a.cursor)&&void 0!==n?n:0),k=(0,d.useRef)(null===(o=null==a?void 0:a.hasMore)||void 0===o||o),N=(0,d.useMemo)(()=>(null==a?void 0:a.data)||[],[a]),I=(0,d.useMemo)(()=>{let{isBlock:e,isBlocked:t,secret:l,followStatus:n}=r;return!!(e||t||!m&&l&&2!==n)},[m,r]),{reloadForPostDelete:E,isPostDelete:S}=(0,d.useContext)(lx),L=(0,d.useRef)(null),M=(0,d.useCallback)(()=>{var e,t,l,n;x(!1),null==L||null===(t=L.current)||void 0===t||null===(e=t.reset)||void 0===e||e.call(t),j.current=0,null==L||null===(n=L.current)||void 0===n||null===(l=n.reload)||void 0===l||l.call(n)},[]);(0,d.useEffect)(()=>{S&&M()},[S,M]),(0,d.useImperativeHandle)(t,()=>({reloadSeriesList:M}),[M]);let T=(0,d.useCallback)(async()=>{let{data:e,cursor:t,hasMore:l,statusCode:n,total:o}=await (0,rG.Kl)({uid:v,cursor:j.current,count:6});return j.current=t,k.current=l,0===y&&o&&b(o),{data:e,cursor:t,hasMore:l,statusCode:n}},[v,y]);(0,d.useEffect)(()=>{m&&y&&t9.sendLog("creatorManageEntranceShow",{type:"compilation"})},[m,y]);let R=(0,d.useCallback)((e,t)=>(0,s.jsx)("div",{onClick:t=>{(null==e?void 0:e.totalEpisode)!==0&&(t.preventDefault(),C(e))},children:(0,s.jsx)(r1,{info:e,rank:t,userInfo:r})}),[r]),F=(0,np.m)();return I?null:(0,s.jsxs)("div",{className:aq.collection,children:[(0,s.jsx)("div",{className:aq.header,children:y>3&&(0,s.jsxs)("span",{className:f()(aq.expand,{[aq.down]:_}),onClick:()=>{x(!_),null==u||u(!_)},children:[_?"收起":"展开全部",(0,s.jsx)(nH,{})]})}),(0,s.jsx)("div",{className:f()(aq.list,{[aq.more]:_}),children:(0,s.jsx)(lG.Z,{scrollContainerEl:F,ref:L,skeletonNum:0,defaultDataList:N,defaultHasMoreFlag:k.current,renderItem:R,fetchMoreData:T,containerClassName:aq.container,itemClassName:aq.item,pause:"post"!==i,setDataList:c,containerNoLineHeight:!0,panelNoMoreData:(0,s.jsx)("div",{className:aq.noMore}),buttomClassName:aq.bottom})}),w&&(0,s.jsx)(oA.default,{modalInnerFeedCard:"series",isSelf:m,seriesInfo:w,userContext:p,abtestData:g,uid:v,awemeSeriesInfo:w,anyHooks:rJ,notCanMixListen:!0,moreBoxShowList:{notInterestingIcon:!1,unfollow:!0,report:!0,deleteSelfPost:m},logParams:{enter_from:m?"personal_homepage":"others_homepage",enter_from_merge:m?"personal_homepage":"others_homepage",enter_method:(0,V.Rs)("enter_method"),tab_name:"compilation"},close:()=>{C(void 0),h(),null==E||E()},shortCutFilteredList:[null===(l=lY.getShortcut().dislike)||void 0===l?void 0:l.key]})]})}),aY=e=>{var t,l;let{currentTab:n,userInfo:o,defaultMixRes:r,defaultSeriesRes:i,abTestData:u,isSelf:c,updatePostOffset:v,setHasSubTab:m}=e,h=(0,lD.o)(null==o?void 0:o.secUid);(0,d.useRef)(u).current=u;let[p,g]=(0,d.useState)(()=>t4.filter(e=>(null==e?void 0:e.tab)===t6.SERIES&&!!((null==i?void 0:i.total)>0)||(null==e?void 0:e.tab)===t6.COMPILATION&&!!((null==r?void 0:r.total)>0)&&(e.total=(null==r?void 0:r.total)||0,!0)));(0,d.useEffect)(()=>{null==m||m(p.length>0)},[p,m]);let[_,x]=(0,d.useState)(()=>(null==r?void 0:r.total)>0?t4["0"].tab:(null==i?void 0:i.total)>0?t4["1"].tab:"");(0,d.useEffect)(()=>{(async()=>{if(!r){let{total:e}=await (0,rV.HN)({uid:h,cursor:0,count:6});e>0&&(g(t=>t.concat((0,T._)((0,a._)({},t4["0"]),{total:e}))),x(t4["0"].tab))}if(!i){let{total:e}=await (0,rG.Kl)({uid:h,cursor:0,count:6});e>0&&g(t=>(0===t.length&&x(t4["1"].tab),t.concat((0,T._)((0,a._)({},t4["1"]),{total:e}))))}})()},[]);let w=e=>{x(e),aW.sendLog("postTabClick",{enter_from:(0,tf.vM)(),tab_name:e,to_user_id:c?"":null==o?void 0:o.uid})},C=(0,d.useRef)(null),[y,b]=(0,d.useState)(!1),[j,k]=(0,d.useState)([]),[N,I]=(0,d.useState)(-1);return(0,d.useEffect)(()=>{if(j.length>0){let e=Math.ceil(j.length/3);null==v||v(y?128*e+40+40:152)}},[j.length,y,v]),(0,d.useEffect)(()=>{k([])},[_]),(0,s.jsxs)("div",{ref:C,children:[(null==p?void 0:p.length)>0&&(0,s.jsx)("div",{className:f()(az.header),children:(0,s.jsx)("ul",{className:az.tabs,children:p.map((e,t)=>{var l;return(0,s.jsxs)("li",{className:f()(az.title,{[az.active]:_===e.tab}),onClick:()=>w(e.tab),children:[(0,s.jsx)("span",{children:`${e.title} ${e.total}`}),c&&(0,s.jsx)(R.a,{className:az.setLink,href:null==e?void 0:e.setLink,target:"_blank",onClick:()=>{aW.sendLog("creatorManageEntranceClick",{type:e.tab})},children:(null==u?void 0:null===(l=u.userUiUpdate)||void 0===l?void 0:l.type)?(0,s.jsx)(ed.u,{position:"right",content:(0,s.jsxs)("span",{className:az.tipText2,children:["点击前往创作服务平台管理",e.title]}),children:(0,s.jsx)(nS,{className:az.setIcon})}):(0,s.jsx)(nS,{className:az.setIcon})})]},e.tab)})})}),_===t6.COMPILATION&&(0,s.jsx)(aG,{currentTab:n,userInfo:o,defaultMixRes:(null==r?void 0:null===(t=r.data)||void 0===t?void 0:t.length)>0?r:void 0,setIsExpand:b,updateDataList:k}),_===t6.SERIES&&(0,s.jsx)(aX,{currentTab:n,userInfo:o,defaultSeriesRes:(null==i?void 0:null===(l=i.data)||void 0===l?void 0:l.length)>0?i:void 0,setIsExpand:b,updateDataList:k})]})};function aQ(e){let{userInfo:t,children:l}=null!=e?e:{},{awemeCount:n=-1,favoritingCount:o=-1,showFavoriteList:r=!1,favoritePermission:i=0}=null!=t?t:{},{isSelf:a}=(0,d.useContext)(H),u=!a&&!r||a&&1===i,[c,v]=(0,d.useState)(n),[m,f]=(0,d.useState)(u?-1:o),[h,p]=(0,d.useState)(!1),g=(0,d.useCallback)((e,t)=>{v(l=>{let n=t?l+e:e;return n<0?0:n})},[]),_=(0,d.useCallback)((e,t)=>{!u&&f(l=>{let n=t?l+e:e;return n<0?0:n})},[u]);(0,d.useEffect)(()=>{h&&(p(!1),x.Le.setConfig(x.gI.DeletePostList,[]))},[h]);let w=(0,d.useCallback)(()=>{var e,t;let l=null!==(t=null===(e=x.Le.getConfig(x.gI.DeletePostList))||void 0===e?void 0:e.length)&&void 0!==t?t:0;l>0&&!h&&(g(-l,!0),p(!0),(0,lp.d)((0,lw.V)(),0,500))},[g,h]);return(0,s.jsx)(lx.Provider,{value:{userAwemeCount:c,userFavoriteCount:m,updateAwemeCount:g,updateFavoriteCount:_,reloadForPostDelete:w,isPostDelete:h},children:l})}var aJ=l("263154"),a0={user:"Wc3mO4FI",emptyWrapper:"E8Nb_TV1",listSortByTime:"jpgKAn6x",date:"T1khduSZ",cardList:"PftuS4H5",cardContainer:"DcwIdlu8",loading:"UAtV4ZIv",errorWrapper:"XcXtrmYk"},a1={appointmentCard:"SgBleybe",avatarWrap:"ABNWceR2",avatar:"m8TWhn6S",info:"tCbd066q",nameInfo:"J0y3B3jC",nickname:"Qu9tr6N4",badge:"ew2Jlhez",badgeIcon:"ljjHy7aI",liveExtraText:"fNK6GSzr",appointmentButton:"NGGat9gC",contentBlock:"aOUAMB9C"};let a2=e=>{let{info:t,className:l,onClick:n,onBtnClick:o}=e,{appointmentId:r,userId:i,userSecUid:a,userAvatar:u,userNickname:c,currentRoomId:v,webRid:m,accountCertInfo:h}=t,p=(0,tA.Y)(()=>{t9.sendLog("reserveLiveCardShow",{anchor_id:i,room_id:v})}),g=!!v,_=(0,d.useMemo)(()=>({web_rid:m,enter_from_merge:"personal_homepage",action_type:"click",enter_method:"web_appointment",room_id:v}),[v]),x=(0,d.useMemo)(()=>({authorInfo:{roomData:{},roomId:v,nickname:c,title:c,secUid:a,uid:i}}),[v,c,c,a,i]);return(0,s.jsxs)("div",{className:f()(a1.appointmentCard,l),ref:p,onClick:()=>{t9.sendLog("reserveLiveCardClick",{anchor_id:i,room_id:v}),null==n||n({webRid:m,currentRoomId:v,userSecUid:a,isLiving:g})},children:[(0,s.jsx)("div",{className:a1.avatarWrap,children:g?(0,s.jsx)(tt.nh,{type:"large",src:u,alt:`${c}头像`,uid:i,liveRoomUrl:(0,tn.cc)(_),isNeedSendLog:!0,onClick:e=>{e.preventDefault()},awemeInfo:x,position:"right",zIndex:1e4}):(0,s.jsx)(tl.q,{className:a1.avatar,defaultClassName:a1.avatar,src:u,alt:`${c}头像`})}),(0,s.jsxs)("div",{className:a1.info,children:[(0,s.jsxs)("div",{className:a1.nameInfo,children:[(0,s.jsx)("div",{className:a1.nickname,children:(0,s.jsx)(K.Z,{text:c})}),(0,s.jsx)(Q.C,{iconClassName:a1.badgeIcon,accountCertInfo:h,className:a1.badge,isRoleNameShow:!1})]}),(0,s.jsx)("div",{className:a1.liveExtraText,children:function(e){let t=null==e?void 0:e.dueStartTime,l=(null==e?void 0:e.cycle)===1,n=null==e?void 0:e.scheduledWeekdays,o=["","一","二","三","四","五","六","日"];try{let e=function(e,t){if(!e)return"";let l=W()(e),n=W()(t),o=l.format("yyyy-MM-dd HH:mm:ss"),r=t>0?n.format("yyyy-MM-dd HH:mm:ss"):"";return r&&"00:00:00"===o.split(" ")[1]&&"23:59:59"===r.split(" ")[1]?l.isSame(n,"day")?l.format("M月D日"):`${l.format("M月D日")} ~ ${n.format("M月D日")}`:r?l.isSame(n,"day")?`${l.format("M月D日 HH:mm")} ~ ${n.format("HH:mm")}`:`${l.format("M月D日 HH:mm")} ~ ${n.format("M月D日 HH:mm")}`:l.format("M月D日 HH:mm")}(1e3*t,0);if(l){let t=null==n?void 0:n.map(e=>0===e?7:e),l=null==t?void 0:t.sort(),r=null==l?void 0:l.length;if(r){let t=l[r-1]-l[0]+1===r;if(t&&7===r)e=`${e}（每天开播）`;else if(t&&r>1)e=`${e}（每周${o[l[0]]}至周${o[l[r-1]]}开播）`;else{let t="";null==l||l.map(e=>{t+=o[e]}),e=`${e}（每周${t}开播）`}}}return e}catch(e){return""}}(t)})]}),(0,s.jsx)(ed.zx,{className:a1.appointmentButton,type:"secondary",theme:"solid",onClick:e=>{e.stopPropagation(),null==o||o({appointmentId:r,userId:i,currentRoomId:v})},children:(0,s.jsx)("div",{className:a1.contentBlock,children:"已预约"})})]})};var a5=()=>{var e;let[t,l]=(0,d.useState)({}),[n,o]=(0,d.useState)(!1),[r,i]=(0,d.useState)([]),[a,c]=(0,d.useState)(!0),[v,m]=(0,d.useState)(!1),[p,g]=(0,d.useState)(!1),_=(0,d.useCallback)(async()=>{try{m(!1),g(!1),c(!0);let{statusCode:t,list:l}=await (0,nz.Pd)();if(0!==t)c(!1),m(!0);else{var e;let t=null==l?void 0:null===(e=l.reduce)||void 0===e?void 0:e.call(l,(e,t)=>{let{dueStartTime:l}=t,n=W().unix(l).format("YYYY-MM-DD"),o=e[n];return e[n]=[...o||[],t],e},{}),n=Object.entries(t).sort((e,t)=>e[0]<t[0]?-1:0).map(e=>{let[t,l]=e;return{date:function(e){let t=W()(e);if(!t.isValid())return"";let l=x.Le.getConfig(x.gI.ServerTime),n=l?W()(l):W()(),o=t.isSame(n,"day"),r=t.isSame(n.subtract(1,"day"),"day"),i=t.isSame(n.add(1,"day"),"day");if(o)return"今天";if(r)return"昨天";if(i)return"明天";return n.format("YYYY")===t.format("YYYY")?t.format("MM月DD日"):t.format("YY年MM月DD日")}(t),list:l}});c(!1),i(n)}}catch(e){c(!1),g(!0)}},[]),w=(0,d.useCallback)(async()=>{try{var e;let{appointmentId:l,userId:n,currentRoomId:r}=t,a=await (0,nz.v1)({appointment_id:l});(null==a?void 0:a.statusCode)===0&&(null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.responseStatus)===1?(t9.sendLog("reserveLiveCardCancel",{anchor_id:n,room_id:r}),o(!1),i(e=>(e.forEach((t,n)=>{let{list:o}=t,r=o.findIndex(e=>e.appointmentId===l);r>-1&&(o.splice(r,1),0===o.length&&e.splice(n,1))}),[...e]))):X.F.info("取消预约失败")}catch(e){X.F.info("取消预约失败")}},[t]),C=(0,d.useCallback)(e=>{l(e),o(!0)},[]),y=(0,d.useCallback)(e=>{let{webRid:t,currentRoomId:l,userSecUid:n,isLiving:o}=e;if(o){let e=(0,tn.cc)({web_rid:t,enter_from_merge:"personal_homepage",enter_method:"web_appointment",action_type:"click",room_id:l});window.open(e,"_blank","noopener")}else{let e=(0,tn.HC)(n,(0,u.stringify)({enter_from:"personal_homepage",enter_method:"web_appointment"}));window.open(e,"_blank","noopener")}},[]);return(0,d.useEffect)(()=>{_()},[]),(0,s.jsxs)("div",{className:a0.user,children:[null==r?void 0:null===(e=r.map)||void 0===e?void 0:e.call(r,e=>{var t;let{date:l,list:n}=e;return(0,s.jsxs)("div",{className:a0.listSortByTime,children:[(0,s.jsx)("div",{className:f()(a0.date,"user_record_date"),children:l}),(0,s.jsx)("div",{className:a0.cardList,children:null==n?void 0:null===(t=n.map)||void 0===t?void 0:t.call(n,e=>(0,s.jsx)(a2,{info:e,className:a0.cardContainer,onClick:y,onBtnClick:C},e.appointmentId))})]},l)}),!a&&!v&&!p&&0===r.length&&(0,s.jsx)(P.H,{className:a0.emptyWrapper,needRenderIconInSSR:!0,icon:(0,s.jsx)(lM.Z,{}),title:"暂无内容",desc:"暂无预约记录"}),a&&(0,s.jsx)(h.gb,{className:a0.loading}),v&&(0,s.jsx)("div",{className:a0.errorWrapper,children:(0,s.jsx)(N.nl,{secondaryButtonTitle:"刷新",secondaryButtonAction:_})}),p&&(0,s.jsx)("div",{className:a0.errorWrapper,children:(0,s.jsx)(N.oO,{secondaryButtonAction:_})}),(0,s.jsx)(aJ.Z,{show:n,setShow:o,contentText:"确认取消该直播预约吗？",confirmText:"取消预约",cancelText:"返回",onConfirm:w})]})};let a3={[$.HeaderType.DEFAULT]:60,[$.HeaderType.HEADER_VARIANT_66]:66,[$.HeaderType.HEADER_VARIANT_68]:68,[$.HeaderType.HEADER_VARIANT_72]:72},a6=()=>{var e;let t=document.documentElement.getAttribute("header-variant");return t===$.HeaderType.HEADER_VARIANT_66?66:t===$.HeaderType.HEADER_VARIANT_72?72:(null===(e=x.Le.getConfig(x.gI.AbtestData))||void 0===e?void 0:e.useNavUi)===1?56:68},a4=()=>{let[e,t]=(0,d.useState)(a6());return(0,d.useEffect)(()=>{60===e&&t(a3[$.HeaderType.HEADER_VARIANT_68])},[e]),(0,d.useEffect)(()=>{let e=B.listen(B.EVENT.headerHeightChange,e=>{let{header_type:l}=e;t(a3[l])});return()=>{null==e||e()}},[]),{topNavHeight:e}};var a7=l("305452"),a8=l("845789"),a9=l("393705"),se=l("687701"),st=l("79811"),sl=l("564123"),sn=l("703774");let so=e=>"record"===e?"record_card":e,sr=(e,t)=>{var l,n,o,r,i,s;let d=null==e?void 0:e.uid;if(!d)return;let c={post:null==e?void 0:e.awemeCount,like:null==e?void 0:e.favoritingCount,favorite_collection:null==e?void 0:null===(o=e.userCollectCount)||void 0===o?void 0:null===(n=o.collectCountList)||void 0===n?void 0:null===(l=n[0])||void 0===l?void 0:l.collectCount,watch_later:null==e?void 0:e.watchLaterCount},{query:v={}}=u.parseUrl(location.href),m=so(null!==(i=null!==(r=v.showTab)&&void 0!==r?r:(0,V.Rs)("showTab"))&&void 0!==i?i:"post"),f=c[m],h={};["enter_from","enter_method","from_gid","is_full_screen","tab_name","list_name","is_search","nt","event_page","enter_from_merge","fir_previous_page","is_personal_panel_video","from_tab_name"].forEach(e=>{var t;return h[e]=null!==(t=v[e])&&void 0!==t?t:(0,V.Rs)(e)}),lV.sendLog(t?"enterPersonalHomepage":"enterPersonalDetail",(0,T._)((0,a._)({},h),{to_user_id:d,is_private:Number(!t&&(null==e?void 0:e.secret)),tab_name:m,video_num:f,relation:!t&&(null==e?void 0:e.followStatus),is_personal_panel_video:Number((null!==(s=v.is_personal_panel_video)&&void 0!==s?s:(0,V.Rs)("is_personal_panel_video"))||0)}))},si=e=>{let{isSelf:t,userInfo:l,tab:n}=e,o=(0,d.useRef)(!0);(0,d.useEffect)(()=>{if(!!t){if(o.current){o.current=!1;return}sr(l,t)}},[t,null==l?void 0:l.uid,n])};var sa=l("478838"),ss=l("744"),sd=new eF.h({personalPageWidgetAddShow:{eventName:"personal_page_widget_add_show",params:{}},personalPageWidgetAddClick:{eventName:"personal_page_widget_add_click",params:{}},personalPageWidgetAddClose:{eventName:"personal_page_widget_add_close",params:{}}}),su="IihuHUky",sc="EAJTzXdP",sv="Fn9KXjLO",sm="Y2CuGR8t",sf="OyjkUHFH",sh="c3u6FvIr";let sp=e=>{let{showTab:t}=e,[l,n]=(0,d.useState)(!1),o=()=>{n(!0),(0,l1.qQ)(lX.LocalStorageKeys.DesktopSelfPageWidgetLastShowTime,Date.now());let e=Number((0,l1.$o)(lX.LocalStorageKeys.DesktopSelfPageWidgetShowNum))||0;(0,l1.qQ)(lX.LocalStorageKeys.DesktopSelfPageWidgetShowNum,e+1)},r=async()=>{if(l||!t||!["like","favorite_collection","record"].includes(t))return;let e=Number((0,l1.$o)(lX.LocalStorageKeys.DesktopSelfPageWidgetLastShowTime))||0;if((Number((0,l1.$o)(lX.LocalStorageKeys.DesktopSelfPageWidgetShowNum))||0)>=3||Date.now()-e<6048e5)return;let{data:n}=await ox.dw("canSetDesktopSelfPageWidget"),{data:r}=await ox.dw("hasSetDesktopSelfPageWidget");!r&&n&&o()};(0,d.useEffect)(()=>{r()},[t]);let i=(0,d.useCallback)(()=>{n(!1),sd.sendLog("personalPageWidgetAddClose")},[]),a=(0,d.useCallback)(()=>{sd.sendLog("personalPageWidgetAddClick"),ox.dw("setDesktopSelfPageWidgetState",!0).then(e=>{(null==e?void 0:e.code)===sa.jK.Success?(n(!1),ed.FN.info("添加成功")):ed.FN.info("添加失败")})},[]);return((0,d.useEffect)(()=>{l&&sd.sendLog("personalPageWidgetAddShow")},[l]),l)?(0,s.jsxs)("div",{className:su,children:[(0,s.jsx)("div",{className:sv}),(0,s.jsx)("div",{className:sh,onClick:i,children:(0,s.jsx)(as.z,{svg:(0,s.jsx)(ss.Z,{style:{fontSize:"16px"}})})}),(0,s.jsxs)("div",{className:sm,children:[(0,s.jsx)("h2",{children:"添加「喜欢/收藏/历史」到桌面"}),(0,s.jsx)("p",{className:sf,children:"添加后，可在桌面快速复访内容"}),(0,s.jsx)(ed.zx,{type:"primary",theme:"solid",className:sc,onClick:a,children:"立即添加"})]})]}):(0,s.jsx)(s.Fragment,{})},sg=e=>{let{toUid:t,fromUid:l,isSelf:n,isLogin:o,recordParams:r,abTestData:i}=e,a=(0,d.useRef)({}),s=(0,d.useMemo)(()=>`${l}_${t}`,[l,t]),u=async()=>{if(!!r)try{let e=await (0,nz.uX)({recordParams:r});(null==e?void 0:e.statusCode)===0?a.current[s]=!0:a.current[s]=!1}catch(e){a.current[s]=!1}};(0,d.useEffect)(()=>{!a.current[s]&&!n&&o&&(a.current[s]=!0,u())},[n,o,s,r,i])},s_=e=>{let{uid:t,abTestData:l,isSelf:n}=e,o=(0,d.useRef)({}),[r,i]=(0,d.useState)({freqVisitPerm:!0,webcastRecords:!0}),a=async()=>{if(o.current[t])return;let{data:e,statusCode:l}=await (0,ow.s$)();0===l&&(i(e),o.current[t]=!0)};return(0,d.useEffect)(()=>{n&&t&&a()},[n,t]),r},sx=["post","like"],sw=["post","like","favorite_collection","record","watch_later","my_appointment"];var sC=e=>{var t,l,n,o,r,i,c,v,m,h,p,_,x,w,C,y,b,j,k,N;let{userInfo:I,showTab:E,showSubTab:S,logId:L,defaultMixRes:M,defaultSeriesRes:z,defaultPostRes:W,lastdate:Z,isClient:$,osInfo:K,isHideImpInfo:G}=e,{uid:q,secret:X,followStatus:Y}=I||{},{isSelf:Q=!1}=null!==(r=(0,d.useContext)(H))&&void 0!==r?r:{},J=(0,d.useRef)(null),ee=null!==(i=(0,d.useContext)(U.C))&&void 0!==i?i:{},{isMobile:et,isiPad:el}=(0,g.X)(),en=s_({isSelf:Q,uid:q,abTestData:ee}),{userInfo:eo,dispatch:er}=null!==(c=(0,d.useContext)(O.Context))&&void 0!==c?c:{},ei=(Q?sw:sx).includes(E)?E:"post",[ea,es]=(0,d.useState)(ei),[ed,eu]=(0,d.useState)(S),[ec,ev]=(0,d.useState)(!1),[em,ef]=(0,d.useState)(!1),[eh,ep]=(0,d.useState)(0),eg=(0,d.useRef)();si({isSelf:Q,userInfo:I,tab:ea}),(0,d.useEffect)(()=>{var e;null===(e=eg.current)||void 0===e||e.notifySubscribers({})},[ec]);let{getSearchRes:e_,exitSearch:ex,changeKeyword:ew,homeText:eC,keyword:ey,isAllowSearch:eb}=rN({uid:q,currentTab:ea,isSelf:Q,showSearchBar:!0,abTestData:ee,onChangeKeyword:()=>ev(!1)}),{topNavHeight:ej}=a4();sg({fromUid:null==eo?void 0:null===(t=eo.info)||void 0===t?void 0:t.uid,toUid:q,isSelf:Q,isLogin:null==eo?void 0:eo.isLogin,recordParams:null==I?void 0:I.profileRecordParams,abTestData:ee});let ek=(0,d.useCallback)((e,t)=>{var l,n,o,r;let{url:i,query:s}=u.parseUrl(null===(l=location)||void 0===l?void 0:l.href);s.showTab=e,delete s.showSubTab,null===(r=window)||void 0===r||null===(o=r.history)||void 0===o||null===(n=o.replaceState)||void 0===n||n.call(o,null,"",u.stringifyUrl({url:i,query:s})),(0,V.no)((0,T._)((0,a._)({},u.parse((0,V.ht)())||{}),{showTab:e})),es(e),ex(),ev(!1)},[ex]),eN=(0,d.useCallback)(e=>{var t,l,n,o;let{url:r,query:i}=u.parseUrl(null===(t=location)||void 0===t?void 0:t.href);i.showSubTab=e,null===(o=window)||void 0===o||null===(n=o.history)||void 0===n||null===(l=n.replaceState)||void 0===l||l.call(n,null,"",u.stringifyUrl({url:r,query:i})),eu(e)},[]);(0,d.useEffect)(()=>B.listen(B.EVENT.userChangeTab,e=>{let{tab:t,subTab:l,source:n,awemeId:o,isPersonalPanelVideo:r,enterMethod:i}=e;(0,V.no)((0,a._)({},u.parse((0,V.ht)())||{},o?{aweme_id:o}:{},r?{is_personal_panel_video:r}:{},i?{enter_method:i}:{})),ek(t,n),l&&eN(l),o&&B.emit(B.EVENT.openUserModal,{awemeId:o})}),[ek,ee]);let[eI,eE]=(0,d.useState)($);(0,d.useEffect)(()=>{var e,t;eE(["MAIN_WINDOW","MULTI_WINDOW"].includes(null===(t=window)||void 0===t?void 0:null===(e=t.TTE_ENV)||void 0===e?void 0:e.windowName))},[$]);let eS=null!==(v=(0,lD.o)(null==I?void 0:I.secUid))&&void 0!==v?v:"",[eL,eM]=(0,d.useState)(!1),eT=le(I);(0,d.useEffect)(()=>{eT&&Q&&la({isAccountBan:!0,isSelf:Q})},[eT,Q]),(0,d.useEffect)(()=>()=>{n_(!1)},[]),(0,d.useEffect)(()=>{if(et||el){let e=()=>{var e;if(!!J.current)(null===(e=J.current)||void 0===e?void 0:e.clientWidth)<846?ef(!0):ef(!1)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}},[et,el]);let eR=(0,np.m)();if(I.isBlock)return(0,s.jsxs)("div",{className:f()(aO.frameContainer,aO.notMargin,aO.videoPerf),children:[(null==ee?void 0:null===(m=ee.userUiUpdate)||void 0===m?void 0:m.type)?(0,s.jsx)(aU,{headImageInfo:null==I?void 0:null===(p=I.coverAndHeadImageInfo)||void 0===p?void 0:null===(h=p.profileCoverList)||void 0===h?void 0:h[0],abTestData:ee,isSelf:Q}):(0,s.jsx)("div",{className:aO.topBackground}),(0,s.jsx)(lf,{userInfo:I,logId:L,isHideImpInfo:G}),(0,s.jsx)(P.H,{title:"你已经拉黑对方，无法查看其作品",icon:(0,s.jsx)(D.Z,{}),className:aO.errorContent}),";"]});if(I.isBlocked)return(0,s.jsxs)("div",{className:f()(aO.frameContainer,aO.notMargin,aO.videoPerf),children:[(null==ee?void 0:null===(_=ee.userUiUpdate)||void 0===_?void 0:_.type)?(0,s.jsx)(aU,{headImageInfo:null==I?void 0:null===(w=I.coverAndHeadImageInfo)||void 0===w?void 0:null===(x=w.profileCoverList)||void 0===x?void 0:x[0],abTestData:ee,isSelf:Q}):(0,s.jsx)("div",{className:aO.topBackground}),(0,s.jsx)(lf,{userInfo:I,logId:L,isHideImpInfo:G}),(0,s.jsx)(P.H,{title:"由于对方的隐私设置，你无法查看TA的作品",icon:(0,s.jsx)(D.Z,{}),className:aO.errorContent}),";"]});if(!Q&&X&&1!==Y&&2!==Y)return(0,s.jsxs)("div",{className:f()(aO.frameContainer,aO.notMargin,aO.videoPerf),children:[(null==ee?void 0:null===(C=ee.userUiUpdate)||void 0===C?void 0:C.type)?(0,s.jsx)(aU,{headImageInfo:null==I?void 0:null===(b=I.coverAndHeadImageInfo)||void 0===b?void 0:null===(y=b.profileCoverList)||void 0===y?void 0:y[0],abTestData:ee,isSelf:Q}):(0,s.jsx)("div",{className:aO.topBackground}),(0,s.jsx)(lf,{userInfo:I,logId:L,isHideImpInfo:G}),(0,s.jsx)(P.H,{title:"私密账号",desc:"发起关注请求，通过后即可查看该账号内容",icon:(0,s.jsx)(D.Z,{}),className:aO.errorContent})]});if(eT&&!Q)return(0,s.jsxs)("div",{className:f()(aO.frameContainer,aO.notMargin,aO.videoPerf),children:[(null==ee?void 0:null===(j=ee.userUiUpdate)||void 0===j?void 0:j.type)?(0,s.jsx)(aU,{headImageInfo:null==I?void 0:null===(N=I.coverAndHeadImageInfo)||void 0===N?void 0:null===(k=N.profileCoverList)||void 0===k?void 0:k[0],abTestData:ee,isSelf:Q}):(0,s.jsx)("div",{className:aO.topBackground}),(0,s.jsx)(lf,{userInfo:I,logId:L,isHideImpInfo:G}),(0,s.jsxs)("div",{className:f()(aO.banContainer,aO.videoPerf),children:[(0,s.jsx)(P.H,{icon:(0,s.jsx)(A.Z,{}),title:"账号已被封禁",className:aO.errorContent}),(0,s.jsxs)("div",{className:aO.desc,children:[(0,s.jsx)("span",{className:aO.text,children:"由于违反"}),(0,s.jsx)(R.a,{className:aO.link,href:t3,target:"_blank",rel:"noopener noreferrer",children:"《抖音社区自律公约》"}),(0,s.jsx)("span",{className:aO.text,children:"的相关规定，该账号已被封禁"})]})]})]});let eF=ey&&eb;return(0,s.jsxs)("div",{className:f()(aO.frameContainer,aO.hasNavTab,aO.notMargin,aO.videoPerf,{[aO.fixedHeaderPadding]:eI}),children:[ec?(0,s.jsx)("div",{className:aO.topBackground}):(0,s.jsx)(aU,{headImageInfo:null==I?void 0:null===(n=I.coverAndHeadImageInfo)||void 0===n?void 0:null===(l=n.profileCoverList)||void 0===l?void 0:l[0],abTestData:ee,isSelf:Q}),!ec&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(lf,{userInfo:I,logId:L,lastdate:Z,isHideImpInfo:G})}),(0,s.jsx)("div",{className:aO.container,children:(0,s.jsx)("div",{ref:J,className:f()(aO.listBoxContainer,aO.videoPerf),children:(0,s.jsx)(aQ,{userInfo:I,children:(0,s.jsxs)(F.W,{ref:eg,scrollListener:eR,children:[(0,s.jsx)(lE,{userInfo:I,currentTab:ea,setCurrentTab:e=>{ek(e,"user_self"),n_()},topNavHeight:ec?200:ej,children:(0,s.jsx)("div",{className:aO.tabinner,children:!em&&eb&&(0,s.jsx)(rM,{changeKeyword:ew,exitSearch:ex,keyword:ey,currentTab:ea,showNewUi:!!(null==ee?void 0:null===(o=ee.userUiUpdate)||void 0===o?void 0:o.type)})})}),(0,s.jsxs)("div",{className:f()(aO.listContainer,aO.videoPerf),children:["post"===ea&&!eF&&(0,s.jsxs)(s.Fragment,{children:[!(null==I?void 0:I.isNotShow)&&!ec&&(0,s.jsx)(aY,{currentTab:ea,userInfo:I,defaultMixRes:M,defaultSeriesRes:z,abTestData:ee,isSelf:Q,updatePostOffset:e=>{ep(e)},setHasSubTab:eM}),(0,s.jsx)(ot,{topNavHeight:ej,currentTab:ea,userInfo:I,defaultPostRes:W,topOffset:eh,setHideUserInfo:ev,hideUserInfo:ec,abTestData:ee})]}),"like"===ea&&!eF&&(0,s.jsx)(op,{abTestData:ee,topNavHeight:ej,currentTab:ea,userInfo:I}),"favorite_collection"===ea&&!eF&&(0,s.jsx)(aB,{topNavHeight:ej,currentTab:ea,currentSubTab:ed,onSubTabChange:eN,userInfo:I,abTestData:ee}),"record"===ea&&!eF&&(0,s.jsx)(rs,{osInfo:K,currentTab:ea,userInfo:I,topNavHeight:ej,currentSubTab:ed,onSubTabChange:eN,abTestData:ee,userSettings:en}),"watch_later"===ea&&!eF&&(0,s.jsx)(rp,{osInfo:K,currentTab:ea,userInfo:I,topNavHeight:ej,abtest:ee}),"my_appointment"===ea&&!eF&&(0,s.jsx)(a5,{osInfo:K,currentTab:ea,userInfo:I,topNavHeight:ej,abTestData:ee}),eF&&(0,s.jsx)(rP,{uid:eS,currentTab:ea,getSearchRes:e_,homeText:eC,keyword:ey,setCurrentTab:es,exitSearch:ex,topNavHeight:ej})]})]})})})}),Q&&(0,s.jsx)(sp,{showTab:ea})]})};function sy(){let{Context:e}=O,{userInfo:t}=(0,d.useContext)(e)||{},{isSpider:l,info:n,isLogin:o,statusCode:r}=t||{};return{isSpider:l,userInfo:t,userInfoDetail:n,isLogin:o,statusCode:r}}var sb={isLight:"Gz7EAAfQ",dark:"A0fCS3UQ",isDark:"NaH757lM","mac-os":"KvzwVdod",container:"tQ0DXWWO",leftContainer:"FiJ8fcVJ",trustLoginSwitch:"r6CdgQ8i",userInfoWrapper:"cnxXLEpt",recommendWrapper:"_O9Nf95W",collectionsWrapper:"qkBJeBg4",leftPlaceHolderRight:"wYwQjJPN",leftPlaceHolderLeft:"ZqSvQz5o",rightPlaceHolderRight:"k_s8q_HI",rightContainer:"e7HUbqFy",errorRight:"e4SVmzgc",errorWrapper:"FJriwNb4",errorContent:"cHTScUGx",notFound:"tn_BwG9n",loading:"lcBZny9J",noPadding:"iDFhRnRM",hasNavTab:"IuEjqxIz"};function sj(e){let{isClient:t,isHideImpInfo:l,userInfo:n,osInfo:o,queryParam:r,otherUserLogId:i,defaultPostRes:a,defaultMixRes:u,defaultSeriesRes:c}=e,{isSpider:v}=sy(),m=(0,d.useMemo)(()=>{var e,t,l,n;return v?null==a?void 0:null===(n=a.data)||void 0===n?void 0:null===(l=n.map)||void 0===l?void 0:null===(t=l.call(n,e=>null==e?void 0:e.createTime))||void 0===t?void 0:null===(e=t.sort((e,t)=>t-e))||void 0===e?void 0:e[0]:void 0},[null==a?void 0:a.data,v]);return(0,s.jsx)("div",{"data-e2e":"user-detail",id:"user_detail_element",className:sb.container,"data-bytereplay-mask":"strict",children:(0,s.jsx)(sC,{userInfo:n,showTab:null==r?void 0:r.showTab,showSubTab:null==r?void 0:r.showSubTab,logId:i,defaultPostRes:a,defaultMixRes:u,defaultSeriesRes:c,showSearchBar:!0,lastdate:m,isClient:t,isHideImpInfo:l,osInfo:o})})}let sk=()=>{let e=(0,eo.DT)(),t=(0,tH.fV)(),l=(0,eo.FJ)().awemePcClient;return{isClient:e,osInfo:t,clientVersion:null!=l?l:""}};function sN(e){let{user:t,queryUid:l}=e;return!t||!t.uid||t.secUid!==l}var sI={None:0,0:"None",FirstTab:1,1:"FirstTab",Reversion:2,2:"Reversion"};let sE=0,sS=e=>{var t;sE=null!=e?e:2;let l=0;(0,l1.$o)(lX.LocalStorageKeys.MyTabRedDotShow)&&(l=1);let n=null!==(t=rD.Q.getItem({sKey:lX.CookieKeys.MyTabRedDotShowed}))&&void 0!==t?t:l;return n===e||2===n},sL=e=>rD.Q.setItem(lX.CookieKeys.MyTabRedDotShowed,e?sE:0,1/0);var sM=l("411204"),sT={frameContainer:"vrhlYUar",videoPerf:"jBCFmbJk",topBackground:"VeoAQgav",loginGuide:"ZmRHKdm5",loginGuideTitle:"bKpibc0A",loginGuideDesc:"A4FWky_I",hasNavTab:"eY2CVPsy"},sR="a2O2tkDa",sF="cfh1mzOU",sP="pD6PdvVu",sD="IQMSYOIi",sA="vY4fGtPY",sV="Wl4TExRM",sB="A4eoN_cY",sH="RM0KAUag",sU="dhp8XjfD";function sO(){let e={title:"粉丝",count:"-",onclick:null},t={title:"关注",count:"-",onclick:null},l={title:"获赞",count:"-",onclick:null};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:sR,children:[(0,s.jsx)("div",{className:sF,children:(0,s.jsx)("div",{className:sP})}),(0,s.jsxs)("div",{className:sD,children:[(0,s.jsx)("h1",{className:sA,children:"未登录"}),(0,s.jsx)("div",{className:sV,children:[t,e,l].map((e,t)=>(0,s.jsxs)("div",{className:f()(sB),children:[(0,s.jsx)("p",{className:sH,children:e.title}),(0,s.jsx)("p",{className:sU,children:e.count})]},t))})]})]})})}var sz="y6lEOZGb",sW="i0EcZ9Fm",sZ="xpLe5J7w",s$="yvZ4w13h",sK="XOQhIrjI";let sG=e=>{let{abTestData:t}=e;return(0,s.jsx)("div",{className:sZ,children:[{title:"作品",key:"post"},{title:"喜欢",key:"like"},{title:"收藏",key:"favorite_collection"},{title:"观看历史",key:"record"},{title:"稍后再看",key:"watch_later"},{title:"我的预约",key:"my_appointment"}].map(e=>(0,s.jsx)("div",{className:f()(s$),children:(0,s.jsx)("span",{className:sK,children:e.title})},e.key))})};var sq=e=>{let{abTestData:t}=e;return(0,s.jsx)("div",{className:sz,children:(0,s.jsx)("div",{className:sW,children:(0,s.jsx)(sG,{abTestData:t})})})},sX=e=>{var t;let{isClient:l,abTestData:n}=e,o=(0,d.useCallback)(()=>void location.reload(),[]);return(0,s.jsxs)("div",{className:f()(sT.frameContainer,sT.hasNavTab,sT.videoPerf,{[sT.fixedHeaderPadding]:l}),children:[!(null==n?void 0:null===(t=n.userUiUpdate)||void 0===t?void 0:t.type)&&(0,s.jsx)("div",{className:sT.topBackground}),(0,s.jsx)(sO,{}),(0,s.jsx)(sq,{abTestData:n}),(0,s.jsx)(sM.default,{showDesc:!1,showHeader:!1,className:sT.loginGuide,success:o,enterMethod:"personal_tab"}),(0,s.jsx)("p",{className:sT.loginGuideTitle,children:"登录后即可观看喜欢、收藏的视频"}),(0,s.jsx)("p",{className:sT.loginGuideDesc,children:"打开「抖音APP」扫描二维码"})]})};function sY(e){let{isClient:t,abTestData:l}=e;return(0,s.jsx)("div",{"data-e2e":"user-detail",className:f()(sb.container,sb.noPadding,sb.hasNavTab),children:(0,s.jsx)(sX,{isClient:t,abTestData:l})})}var sQ=l("626594"),sJ=(0,y.C)(e=>{var t,l,n;let{id:o}=(0,v.U)(),r="self"===o,{user:i,mix:m,series:y,post:k,status:N,isHideImpInfo:I=!1,isClient:S,osInfo:L,redirectFrom:T}=e||{},{isiPad:R,isMobile:F}=(0,g.X)();(0,d.useEffect)(()=>{let e=new URL(window.location.href),t=e.searchParams.get("_sw")||"";t&&"unknown"!==t&&(e.searchParams.delete("_sw"),history.replaceState(null,"",e.toString()))},[]);let P=(0,c.a)(),D=null!==(t=(0,d.useContext)(C.C))&&void 0!==t?t:{},{innerLink:A,tccConfig:U}=(0,d.useContext)(b.r),O=(0,d.useMemo)(()=>(0,u.parse)(null==P?void 0:P.search),[null==P?void 0:P.search]);(0,d.useEffect)(()=>{let e=(0,u.parse)(location.search).showTab;"/user/self"!==location.pathname&&(!e||"post"===e)&&performance.mark("user_page_init")},[]),(0,d.useEffect)(()=>{try{navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",e=>{try{if("reload"===e.data.action){var t;window.location.reload(),lV.sendLog("userCacheInvalid",{message:null!==(t=e.data.reason)&&void 0!==t?t:""})}}catch(e){}})}catch(e){}},[]);let{isClient:z,osInfo:W}=function(e){let{isClient:t,clientVersion:l,osInfo:n}=e;return(0,d.useMemo)(()=>{if(void 0===t||void 0===l||void 0===n){let e=sk();return{isClient:e.isClient,clientVersion:e.clientVersion,osInfo:e.osInfo}}return{isClient:t,clientVersion:l,osInfo:n}},[t,l,n])}({isClient:S,osInfo:L}),{isSpider:Z,userInfoDetail:$,isLogin:K}=sy();r&&(o=null!==(l=null==$?void 0:$.secUid)&&void 0!==l?l:"");let{otherUserLogId:G,isEmptyUser:q,isUserCanceled:X,statusCode:Y,isSelf:Q,userInfo:J,setUserInfo:ee}=function(e,t){let{isLogin:l,statusCode:n,userInfoDetail:o}=sy(),r=(0,lD.o)(t),i=(0,d.useMemo)(()=>(function(e){let{currentUser:t,isLogin:l,uid:n,otherInfo:o}=e,r={isEmptyUser:!1,isUserCanceled:!1,isSelf:!1,userInfo:{},statusCode:0};if(function(e){let{isLogin:t,queryUid:l,currentUid:n}=e;return!!t&&l===n}({isLogin:l,queryUid:n,currentUid:null==t?void 0:t.secUid}))r.userInfo=t,r.isSelf=!0,r.statusCode=0;else{let{user:e,statusCode:t}=o||{};sN({user:e,queryUid:n})&&(r.isEmptyUser=!0),r.isUserCanceled=!!(null==e?void 0:e.userCanceled),r.statusCode=t||0,r.userInfo=e,r.isSelf=!1}return r})({currentUser:o,isLogin:l,uid:r,otherInfo:e}),[r,o,l,e]),{userInfo:a,isEmptyUser:s,isUserCanceled:u,isSelf:c,statusCode:v}=i||{},[m,f]=(0,d.useState)(""),[h,p]=(0,d.useState)(a),[g,_]=(0,d.useState)(s),[w,C]=(0,d.useState)(u),[y,b]=(0,d.useState)(c),[j,k]=(0,d.useState)(v);(0,d.useEffect)(()=>{x.Le.setConfig(x.gI.UserProfileSelf,!!y)},[y]),(0,d.useEffect)(()=>{_(s),C(u),b(c),p(a),k(v)},[i]);let N=async()=>await (0,nz.YI)(r,null,void 0,!0)||{};return(0,d.useEffect)(()=>{if(void 0!==l&&(!1!==l||"self"!==r))(async()=>{if(l&&o&&r===(null==o?void 0:o.secUid))p(o),b(!0),k(n);else{let{user:e,statusCode:t,logPb:l}=await N(),n=()=>{var n;_(sN({user:e,queryUid:r})),C(!!(null==e?void 0:e.userCanceled)),k(t),p(e),f(null!==(n=null==l?void 0:l.impr_id)&&void 0!==n?n:""),b(!1)};try{(0,re.unstable_batchedUpdates)(()=>{n()})}catch(e){n()}}})()},[o,i]),{otherUserLogId:m,isEmptyUser:g,isUserCanceled:w,statusCode:j,isSelf:y,userInfo:h,setUserInfo:p}}(i,r?null==$?void 0:$.secUid:void 0),et=(0,d.useCallback)(()=>{!r&&!Q&&ee(e=>{var t,l;let n=null===(t=x.Le.getConfig(x.gI.FollowStatusCache))||void 0===t?void 0:t[null==e?void 0:e.uid];return e.followStatus=null!==(l=null==n?void 0:n.followStatus)&&void 0!==l?l:e.followStatus,(0,a._)({},e)})},[Q,ee,r]);!function(e){let{isSelf:t,userInfo:l,isSelfPage:n}=e;(0,a7.o)(()=>{let e=null==l?void 0:l.uid,n=e=>{(0,tf.TU)(e?"personal_homepage":"others_homepage")};e&&t?n(!0):e&&void 0!==t&&!t?n(!1):(0,tf.TU)("error_homepage")},[t,l]);let o=(0,d.useRef)(location.pathname);(0,d.useEffect)(()=>{if(!(null==l?void 0:l.uid))return;sr(l,t);let e=(0,V.Rs)("previous_page")||"",r=location.href,i={app_code_link:"app_code",web_code_link:"web_code"};if(!n)!async function(){let t=await (0,a8.Re)();lV.sendLog("pageView",(0,a._)({enter_from:(0,tf.yW)(),url:location.href,url_path:location.pathname,link_from:(0,l0.f)()?"pwa":i[e]||"",theme:(0,a9.bS)(rD.Q.getItem({sKey:lX.CookieKeys.Theme})),from_push:rD.Q.getItem({sKey:lX.CookieKeys.FromClientPush})?1:0,seo_vids:se.t("seo_vids")||"",physical_screen_num:t.physical_screen_num,physical_screen_info:t.physical_screen_info,sidebar_status:(0,st.GE)()},(0,a8.Wc)(a8.rh.PAGE_VIEW))),lV.sendLog("pageViewV2",(0,a._)({enter_from:(0,tf.yW)(),url:location.href,url_path:location.pathname,link_from:(0,l0.f)()?"pwa":i[e]||"",theme:(0,a9.bS)(rD.Q.getItem({sKey:lX.CookieKeys.Theme})),from_push:rD.Q.getItem({sKey:lX.CookieKeys.FromClientPush})?1:0,seo_vids:se.t("seo_vids")||"",physical_screen_num:t.physical_screen_num,physical_screen_info:t.physical_screen_info},(0,a8.Wc)(a8.rh.PAGE_VIEW)))}(),(0,sl.vP)({key:location.pathname,event:(t,l,n)=>{let a=location.pathname,s=o.current,d=(0,sn.Nr)(a),u=(0,sn.Nr)(s),c=a!==s&&d&&u,v=d&&"page_visible_change"===n;if(l>0&&(0,tf.yW)()&&!c&&!v){var m,f,h,p;let o=(null===(m=window.EXPOSE_DATA)||void 0===m?void 0:m.landingPage)==="discover",a=o&&(null===(f=window.EXPOSE_DATA)||void 0===f?void 0:f.landingMode)!==2,s=null!==(p=null!==(h=(0,V.Rs)("enter_method"))&&void 0!==h?h:o?"default_landing":void 0)&&void 0!==p?p:"other";lV.sendLog("pageStayTime",{enter_from:"others_homepage",url:r,url_path:location.pathname,duration:l,is_visible:u?0:Number(t),link_from:(0,l0.f)()?"pwa":i[e]||"",sidebar_status:(0,st.GE)(),reason:u?`exit_child_route_${n}`:n,is_recommend:"default_landing"===s?Number(a):void 0},!1)}o.current=location.pathname}})},[null==l?void 0:l.uid])}({userInfo:J,isSelf:Q,isSelfPage:r}),!function(e){let{isEmptyUser:t,isUserCanceled:l}=e;(0,d.useEffect)(()=>{var e,n;t&&rg.oe.event.info({name:rg.Mo.UserNotExist,report:{url:null===(e=location)||void 0===e?void 0:e.pathname}}),l&&rg.oe.event.info({name:rg.Mo.UserUnregister,report:{url:null===(n=location)||void 0===n?void 0:n.pathname}})},[t,l])}({isEmptyUser:q,isUserCanceled:X});let el=(0,j.A)(Q,null==$?void 0:$.uid);return(!function(e){let{isSelfPage:t}=e;if((0,d.useEffect)(()=>{t&&!sS(sI.Reversion)&&sL(!0)},[t]),(0,d.useEffect)(()=>B.listen(B.EVENT.refreshPage,()=>{location.reload()}),[]),!t);}({isSelfPage:r}),(0,w.Z)({isLogin:K}),(0,d.useEffect)(()=>{let e="";return document.body&&(e=document.body.style.minWidth,R||F?document.body.style.minWidth="100%":document.body.style.minWidth="1024px"),()=>{document.body.style.minWidth=e}},[R,F]),r&&!K)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sQ.Z,{children:(0,s.jsx)("title",{children:"抖音-记录美好生活"})}),(0,s.jsx)(sY,{isClient:z,abTestData:D})]}):function(e){let{status:t,isSpider:l,statusCode:n,isEmptyUser:o,isUserCanceled:r,userInfo:i}=e;return t>400&&l||0!==n||!!(null==i?void 0:i.uid)&&o||!!(null==i?void 0:i.uid)&&r}({status:N,isSpider:Z,statusCode:Y,isEmptyUser:q,isUserCanceled:X,userInfo:J})?(0,s.jsx)(E,{status:N,isSpider:Z,statusCode:Y,isEmptyUser:q,isUserCanceled:X}):(0,s.jsx)(H.Provider,{value:{updateFollowStatus:et,isSelf:Q,haveDashBoard:el,currentUserInfoDetail:$,isSpider:Z},children:(0,s.jsxs)("div",{className:f()(sb.container,sb.containerMargin,{userNewUi:null==D?void 0:null===(n=D.userUiUpdate)||void 0===n?void 0:n.type}),children:[(0,s.jsx)(M,{userInfo:J,uid:o,isSpider:Z,redirectFrom:T}),(null==J?void 0:J.uid)?(0,s.jsx)(sj,{isHideImpInfo:I,isClient:z,osInfo:W,userInfo:J,queryParam:O,otherUserLogId:G,defaultPostRes:k,defaultMixRes:m,defaultSeriesRes:y,key:J.uid}):(0,s.jsx)(h.gb,{text:"数据加载中",className:sb.loading}),(0,s.jsx)(p.$,{className:"user-page-footer",innerLink:(null==A?void 0:A.data)||[],defaultValue:null==U?void 0:U[_.TccKey.SiteFooter]})]})})})},890242:function(e,t,l){l.d(t,{o:function(){return o}});var n=l(591006);function o(e){let{id:t}=(0,n.U)();return"self"===t&&null!=e?e:t}},140433:function(e,t,l){l.d(t,{x:function(){return c}});var n=l(590921),o=l(874155);l(586529),l(227470),l(572521),l(632852);var r=l(16866),i=l(886330),a=l(579309),s=l(333886),d=l(13351);let u=/^\/video|user|hashtag\/.*?/;async function c(e,t){let l=await i.U2({key:a.TccKey.PovertyContentConfig,defaultValue:a.TCC_DEFAULT_VALUE_MAP.get(a.TccKey.PovertyContentConfig),ctx:t}),c=window.location.pathname;if(0===l.openApi||!(0,d._Q)(t)||(0,d.We)(t)||!e||0===e.length||!u.test(c))return e;let v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map(e=>`${t}_${e.awemeId}`).join(" ")}(e,2),m=e,f=await (0,s.Ts)(v,t);return 0===f.statusCode&&(m=function(e,t){let l=t.map(e=>(0,o._)((0,n._)({},e),{targetId:e.targetId.split("_")[1]}));return e.map(e=>{var t;let i=l.find(t=>t.targetId===e.awemeId);return(0,o._)((0,n._)({},e),{isHighQuality:null!==(t=null==i?void 0:i.hitStatus)&&void 0!==t?t:r.HighQualityStatus.HighQuality})})}(e,f.data)),m}},326026:function(e,t,l){l.d(t,{u:function(){return g}}),l("612222");var n=l("259202"),o=l("611542"),r=l("781111"),i=l("505486"),a=l("825211"),s=l.n(a),d=l("454644");l("843789");var u=l("590921"),c=l("874155");let v=(0,o.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,c._)((0,u._)({width:13,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M12.601 12.601a1.362 1.362 0 0 1-1.927 0L6.5 8.427 2.326 12.6a1.362 1.362 0 0 1-1.927-1.927L4.573 6.5.4 2.326A1.362 1.362 0 1 1 2.326.399L6.5 4.573 10.674.4a1.362 1.362 0 1 1 1.927 1.927L8.427 6.5l4.174 4.174a1.362 1.362 0 0 1 0 1.927z",fill:"#2F3035",fillOpacity:".9"})})));var m=l("787960"),f={default:1,1:"default",custom:2,2:"custom"};let h=!!("undefined"!=typeof window&&window.document&&window.document.createElement),p=e=>{var t,l,n,o,r;if(!h)return null;let i=document.createElement("div"),a=(null===(t=document)||void 0===t?void 0:t.fullscreenElement)||(null===(l=document)||void 0===l?void 0:l.msFullscreenElement)||(null===(n=document)||void 0===n?void 0:n.mozFullScreenElement)||(null===(o=document)||void 0===o?void 0:o.webkitFullscreenElement)||null;return a?a.appendChild(i):null===(r=null!=e?e:document.body)||void 0===r||r.appendChild(i),i},g=o.forwardRef((e,t)=>{let{className:l,modalClassName:a,onCancel:u,onOk:c,type:g="default",size:_="default",mask:x=!0,isHide:w=!0,closable:C=!0,title:y,message:b,okText:j,cancelText:k,maskClosable:N=!0,children:I,mountEl:E}=e,[S,L]=(0,o.useState)(w),M=(0,o.useRef)(null),T=(0,o.useRef)(S);T.current=S;let R=(0,o.useRef)(),F=(0,o.useRef)(),P=(0,o.useRef)(!1);!P.current&&h&&(F.current=p(E),R.current=F.current.parentNode,P.current=!0),(0,o.useImperativeHandle)(t,()=>F.current),(0,o.useEffect)(()=>(null===F.current.parentNode&&null!==R.current&&R.current.appendChild(F.current),()=>{var e,t;null===(t=F.current)||void 0===t||null===(e=t.parentNode)||void 0===e||e.removeChild(F.current)}),[]),(0,o.useEffect)(()=>{L(w)},[w]);let D=async e=>{if(!!N&&M.current===e.target)await L(!0),null==u||u(e,T.current)},A=async e=>{await L(!0),null==u||u(e,T.current)},V=async e=>{await L(!0),null==c||c(e,T.current)};return F.current?r.createPortal((0,n.jsx)(i.Z,{in:!S,classNames:"modal-mask",timeout:{enter:400,exit:150},appear:!0,children:(0,n.jsx)("div",{ref:M,onClick:e=>D(e),className:s()(d.default.maskLayerWap,{[d.default.maskLayer]:x,[d.default.visible]:S,[d.default.mountEl]:!!E},a),children:(0,n.jsxs)("div",{className:s()("modal-pannel",{mountEl:!!E}),children:[(0,n.jsxs)("div",{className:s()(d.default.modalWap,d.default[_],{[d.default.defaultType]:2===f[g]},l),children:[(0,n.jsx)(m.Z,{onClick:e=>A(e),className:s()(d.default.closeIcon,{[d.default.closeIconHide]:!C}),src:v,width:13,height:13,viewBox:"0 0 13 13"}),(0,n.jsx)("h2",{className:s()(d.default.title),children:y}),(0,n.jsx)("p",{className:s()(d.default.message),children:b}),(0,n.jsxs)("div",{className:s()(d.default.btn,{[d.default.btnHide]:!j&&!k}),children:[(0,n.jsx)("a",{href:"#",onClick:e=>V(e),className:s()(d.default.okText,{[d.default.okBtnHide]:!j}),children:j}),(0,n.jsx)("a",{href:"#",onClick:e=>A(e),className:s()(d.default.okText,d.default.cancelText,{[d.default.cancelBtnHide]:!k}),children:k})]})]}),(0,n.jsx)("div",{className:s()(d.default.modalWap,d.default[_],{[d.default.customType]:1===f[g]},l),children:I})]})})}),F.current):null})},991065:function(e,t,l){l.d(t,{Z:function(){return S}});var n=l("259202"),o=l("611542"),r=l("825211"),i=l.n(r),a=l("954884"),s=l("550245"),d=l("452300"),u=l("781114"),c=l("452229"),v=l("354795"),m=new v.h({fastLiveHeadClickMore:{eventName:"fast_live_head_click_more",params:{entrance_type:"",hover_show_cnt:0}},fastLiveHeadShow:{eventName:"fast_live_head_show",params:{entrance_type:"",anchor_id:"",room_id:"",show_type:""}}}),f=l("590921"),h=l("874155");l("612222"),l("586529"),l("227470");var p=l("830320"),g=l("690352"),_=l("688497"),x=l("606660"),w=l("55035"),C=l("258946"),y=l("320664"),b=l("356789"),j=l("553876"),k=l("671815"),N=l("660326"),I=e=>{var t,l;let{data:r,logParams:a,abTestData:s,liveList:d,index:c,defaultShowCount:v,isInDouyinWeb:I,onItemClick:E,itemClass:S,awemeInfo:L,isLogin:M}=e,[T,R]=(0,p.Z)(),F=(0,_.x)(()=>{m.sendLog("fastLiveHeadShow",{entrance_type:a.entrance_type,anchor_id:null==r?void 0:r.anchorId,room_id:null==r?void 0:r.roomId,show_type:"hover"})}),P=(0,u.cc)((0,f._)({web_rid:null==r?void 0:r.webRid,room_id:null==r?void 0:r.roomId,action_type:"click"},a)),D={episodeExtra:null==r?void 0:r.episodeExtra,logId:(null==a?void 0:a.request_id)||"0"},A=(0,o.useMemo)(()=>"String"!==(0,C.tQ)(P)?null:(0,y.D)(P.split("?",2)[1]),[P]),V=(0,o.useCallback)(()=>(0,h._)((0,f._)({},a),{show_rank:`${c+1}`,show_cnt:v}),[a,v,c]),B=(0,o.useMemo)(()=>{var e,t,l,n;let o=(null==r?void 0:null===(l=r.episodeExtra)||void 0===l?void 0:null===(t=l.main_camera_match_info)||void 0===t?void 0:null===(e=t.league_info)||void 0===e?void 0:e.league_id)===1159,i=Number(null==r?void 0:null===(n=r.paidLiveData)||void 0===n?void 0:n.paid_type);return I&&!o&&!i&&((null==s?void 0:s.liveModalFullplayer)===x.LiveModalFullplayer.WithoutAction||(null==s?void 0:s.liveModalFullplayer)===x.LiveModalFullplayer.DynamicBg||(null==s?void 0:s.liveModalFullplayer)===x.LiveModalFullplayer.EntranceStrengthen||(null==s?void 0:s.liveModalFullplayer)===x.LiveModalFullplayer.Normal)},[r,null==s?void 0:s.liveModalFullplayer,I]),H=(0,o.useCallback)(()=>{b.emit(b.EVENT.videoPause),b.emit(b.EVENT.livePause),b.emit(b.EVENT.searchMusicPause)},[]),U=e=>{if(H(),B){var t,l;null==e||e.preventDefault(),b.emit(b.EVENT.liveModalShow,{type:"liveFollowList",data:{webRid:null==r?void 0:r.webRid,roomId:null==r?void 0:r.roomId,anchorId:null==r?void 0:r.anchorId},liveFollowList:null==d?void 0:null===(l=d.filter(e=>{var t,l,n;return(null==e?void 0:null===(n=e.episodeExtra)||void 0===n?void 0:null===(l=n.main_camera_match_info)||void 0===l?void 0:null===(t=l.league_info)||void 0===t?void 0:t.league_id)!==1159}))||void 0===l?void 0:null===(t=l.filter(e=>{var t;return!(null==e?void 0:null===(t=e.paidLiveData)||void 0===t?void 0:t.paid_type)}))||void 0===t?void 0:t.map(e=>({webRid:e.webRid,roomId:e.roomId,anchorId:e.anchorId})),enterMethod:j.a.FOLLOW_TOP,teaLogParams:(0,f._)({},V())})}},O=o.useRef(),z=o.useMemo(()=>{var e,t,l;return(null==L?void 0:null===(l=L.authorInfo)||void 0===l?void 0:null===(t=l.roomData)||void 0===t?void 0:null===(e=t.others)||void 0===e?void 0:e.web_enter_benefit_point_data)||{has_ongoing_lottery:!1,has_ongoing_lucky_money:!1}},[L]),W=(0,N.gE)(s,z.has_ongoing_lottery,z.has_ongoing_lucky_money,!0),Z=(0,o.useMemo)(()=>{let[e,t]=P.split("?"),l=g.parse(t||"");return`${e}?${g.stringify(l)}`},[P,L]);return(0,n.jsx)("div",{ref:T,children:(0,n.jsx)("div",{ref:F,onMouseEnter:e=>{var t;null===(t=O.current)||void 0===t||t.mouseEnterHandler(e)},onMouseLeave:e=>{var t;null===(t=O.current)||void 0===t||t.mouseLeaveHandler(e)},children:(0,n.jsxs)(w.a,{href:Z,rel:"noopener noreferrer",target:"_blank",className:i()(k.default.liveItem,S),onClick:e=>{(0,N.tw)(null==r?void 0:r.anchorId,A,D,0,null==r?void 0:r.isEcomLive),E(),U(e)},children:[(0,n.jsx)(N.nh,{isEcomLive:null==r?void 0:r.isEcomLive,isShow:R,src:null==r?void 0:r.coverSrc,className:k.default.avatar,uid:null==r?void 0:r.anchorId,type:"extra-small",isFirstLive:(null==r?void 0:null===(l=r.episodeExtra)||void 0===l?void 0:null===(t=l.mod)||void 0===t?void 0:t.episode_stage)===2,liveRoomUrl:P,liveRoomParam:D,disableAllAnim:!0,awemeInfo:L,from:"follow",position:"right",isLogin:M,fixLeft:104,handlerRef:O,disableSelfEvent:!0,wrapStyle:{display:"flex"},useRedPack:!1,logParams:a}),(0,n.jsxs)("div",{className:k.default.nameWrap,children:[(0,n.jsx)("div",{className:k.default.name,children:null==r?void 0:r.userName}),W.icon&&(0,n.jsxs)("div",{className:k.default.redPackWrap,children:[(0,n.jsx)("img",{src:W.icon,className:k.default.redPackImg}),(0,n.jsx)("span",{className:k.default.redPackText,children:W.text})]})]})]})})})},E=l("701007"),S=e=>{var t;let{liveList:l=[],hasLimit:r,loading:v,logParams:f,abTestData:h,onItemClick:p,isLogin:g}=e,_=(0,a.a)(),x=(0,d.En)(_.pathname),w=(null===(t=window)||void 0===t?void 0:t.location.hostname)==="www.douyin.com"&&!x,C=r?l.slice(0,3):l,y=C.length<6?C.length:5,b=(0,o.useRef)();return(0,o.useEffect)(()=>{let e=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()},t=b.current,l=r||C.length<5;return l&&(null==t||t.addEventListener("wheel",e)),()=>{l&&(null==t||t.removeEventListener("wheel",e))}},[r]),(0,n.jsx)("div",{ref:b,className:i()(c.default.container,c.default.hideScrollbar,{[c.default.longList]:!r}),children:v?(0,n.jsx)(s.g,{className:c.default.loading}):(0,n.jsxs)("div",{className:c.default.list,children:[C.map((e,t)=>(0,n.jsx)(I,{data:e,logParams:f,index:t,abTestData:h,liveList:l,defaultShowCount:y,isInDouyinWeb:w,onItemClick:p,itemClass:t!==C.length-1||r?"":c.default.avatarItem,awemeInfo:e.__fakeAwemeInfo,isLogin:g},e.anchorId)),r&&(0,n.jsx)(E.a,{className:c.default.more,spa:w,href:(0,u.ff)(),onClick:()=>{m.sendLog("fastLiveHeadClickMore",{entrance_type:f.entrance_type,hover_show_cnt:l.length})},children:"查看更多"})]})})}},710094:function(e,t,l){l.d(t,{G9:function(){return I},UU:function(){return N}}),l(612222);var n=l(259202),o=l(611542),r=l(825211),i=l.n(r),a=l(801881),s=l(954884),d=l(980376),u=l(582099),c=l(124797),v=l(819769),m=l(703774),f=l(452300),h=l(356789),p=l(373810),g=l(584713),_=l(433075),x=l(250623),w=l(488171),C=l(375456),y=l(463792),b=l(633825),j=l(496419);let k=[v.gI.PlayerCardInfo,v.gI.isVideoPlayed,v.gI.IsInModalVideo],N=()=>{let e=(0,o.useRef)(!1),{pathname:t}=(0,s.a)(),l=(0,o.useRef)(t),n=(0,o.useRef)(!1);return(0,m.Nr)(t)?n.current=!0:(n.current?(n.current=!1,e.current=l.current===t):e.current=!1,l.current=t),e},I=e=>{let{children:t,parentRouteClassName:l,checkIsActive:r}=e,{pathname:I}=(0,s.a)(),E=!0;r&&(E=r(I));let S=E&&(0,m.Nr)(I),L=(0,m.Nr)(I)||!E,M=(0,o.useRef)(),T=N(),R=(0,o.useRef)(I),F=(0,o.useRef)(I),P=(0,o.useMemo)(()=>(0,f.oS)(null==R?void 0:R.current)?c.lT.Recommend:(0,f.i8)(null==R?void 0:R.current)?c.lT.Follow:(0,f.z1)(null==R?void 0:R.current)?c.lT.Friend:(0,f.e2)(null==R?void 0:R.current)?c.lT.Modal:(0,f.h$)(null==R?void 0:R.current)?c.lT.User:void 0,[]);return L&&(F.current=I),(0,o.useLayoutEffect)(()=>{L&&h.emit(h.EVENT.videoPause)},[L]),(0,o.useEffect)(()=>()=>{if(S){let e=h.getPageScope(R.current);h.emit(h.EVENT.exitChildRoute,null,e),"child_route"!==e&&h.emit(h.EVENT.exitChildRoute,null,"child_route")}else h.emit(h.EVENT.enterChildRoute)},[S]),(0,o.useEffect)(()=>{if(L){let e=!1,t=t=>{e=!0};return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t),e&&setTimeout(()=>{window.dispatchEvent(new Event("resize"))},20)}}},[L]),(0,o.useLayoutEffect)(()=>{if(L){let e=k.map(e=>v.Le.getConfig(e));return v.Le.setConfig(v.gI.SlideStartTime,{slideStartTime:0}),()=>{k.forEach((t,l)=>{v.Le.setConfig(t,e[l])}),v.Le.setConfig(v.gI.SlideStartTime,{slideStartTime:0})}}},[L]),(0,o.useLayoutEffect)(()=>{!T.current&&(0,j.S)()&&(0,p._)()},[]),(0,u.Z)(()=>{let e=window.location.pathname;if(!L)return(!T.current||v.Le.getConfig(v.gI.NeedExitFullScreenAndModal))&&(v.Le.setConfig(v.gI.NeedExitFullScreenAndModal,!1),(0,p._)()),()=>{!(0,m.dH)(location.pathname)&&(0,p._)()};{var t,l,n,o,r;let i=null===(t=v.Le.getConfig(v.gI.IsInModalVideo))||void 0===t?void 0:t.isInModal,a=P&&!i?null===(l=C.s.getLastRegisterPlayerIdByScene)||void 0===l?void 0:l.call(C.s,P):(0,_.OB)();a&&(0,_.wS)(a,!1);let s=null===d.Z||void 0===d.Z?void 0:null===(o=d.Z.instManager)||void 0===o?void 0:null===(n=o.find)||void 0===n?void 0:n.call(o,e=>(null==e?void 0:e.playerId)===a);if((0,m.dH)(e)){null==s||null===(r=s.pause)||void 0===r||r.call(s);let e=C.s.getPlayerInfoMap();v.Le.setConfig(v.gI.TempPlayerMap,e),C.s.clearPlayerInfoMap()}return()=>{var t,l,n,o;let r=!1,s=null!==(l=v.Le.getConfig(v.gI.TempPlayerMap))&&void 0!==l?l:null;if(s){if(T.current)null===(o=C.s.setPlayerInfoMap)||void 0===o||o.call(C.s,s);else{let t=new Map;s.forEach((e,l)=>{if(e.scene===c.lT.Modal){var n;null===(n=C.s.unRegister)||void 0===n||n.call(C.s,{id:l})}else t.set(l,e)}),(0,m.dH)(e),null===(n=C.s.setPlayerInfoMap)||void 0===n||n.call(C.s,t)}v.Le.setConfig(v.gI.TempPlayerMap,null)}(0,m.dH)(e)&&!T.current&&i&&(r=!0);let d=P&&(!i||r)?null===(t=C.s.getLastRegisterPlayerIdByScene)||void 0===t?void 0:t.call(C.s,P):(0,_.OB)(),u=r&&d?d:a||d;u&&(0,_.wS)(u,!0);let f=setTimeout(()=>{let e=(0,_.OB)(),t=C.s.getPlayersByScene(P).find(t=>t.playerId===e),l=C.s.getAllPlayer().find(e=>(null==e?void 0:e.playerId)===u);if(l&&!(t&&e!==u)){var n;!(0,m.Nr)(F.current)&&l.once("play",()=>{(0,g.yr)({fromCache:1})}),null==l||null===(n=l.play)||void 0===n||n.call(l)}},500);v.Le.setConfig(v.gI.BackToCacheDelayPlayTimer,f)}}},[L]),(0,o.useEffect)(()=>{if(L)return;let e=M.current,t=e=>h.emit(h.EVENT.routePageScroll,e);return null==e||e.addEventListener("scroll",t),()=>{null==e||e.removeEventListener("scroll",t)}},[L]),(0,o.useEffect)(()=>{S&&h.emit(h.EVENT.childRouteRender)},[S]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.O,{active:!L,className:i()({[w.tt]:!L,[x.default.withoutscrollbar]:P===c.lT.User},l,w.ei,x.default.routeContainer),ref:M,children:t}),S&&(0,n.jsx)(y.w,{isActive:S,children:(0,n.jsx)("div",{className:i()(w.WV,w.ei,x.default.routeContainer,x.default.childRoute,{[x.default.enterChildRoute]:!E}),children:(0,n.jsx)(a.Outlet,{})})})]})}},852674:function(e,t,l){l.d(t,{C:function(){return m}});var n=l("590921"),o=l("874155"),r=l("259202"),i=l("582982"),a=l.n(i);l("611542");var s=l("710094"),d=l("305452"),u=l("356789"),c=l("488171");let v=()=>{(0,d.o)(()=>{let e=Array.from(document.querySelectorAll(`.${c.ei}`)).find(e=>e.getBoundingClientRect().height>0)||window;return u.emit(u.EVENT.globalScrollEl,e),u.listen(u.EVENT.sideBarShow,()=>{u.emit(u.EVENT.globalScrollEl,e)})},[])};function m(e,t,l){return function(i){v();let d=(0,r.jsx)(e,(0,n._)({},i));return(0,r.jsx)(s.G9,(0,o._)((0,n._)({checkIsActive:t,parentRouteClassName:l},a()),{children:d}))}}},75041:function(e,t,l){l.d(t,{X:function(){return n}});let n=(0,l(611542).createContext)(null)},623331:function(e,t,l){l.d(t,{Z:function(){return ej}});var n=l("590921"),o=l("874155");l("612222"),l("685680"),l("632852"),l("930798");var r=l("259202"),i=l("611542"),a=l("308132"),s=l("305647"),d=l("825211"),u=l.n(d),c=l("356789"),v=l("295301"),m=l("67108"),f=l.n(m);let h=(0,i.createContext)(null);l("526789");var p=l("300764"),g=l("917658"),_=l("181242"),x=l("75041");function w(e){let{searchText:t}=e;return(0,r.jsx)("div",{className:g.default.middle,children:t?"没有搜索到相关用户":"没有数据"})}function C(e){let{isMiddle:t}=e;return(0,r.jsx)("div",{className:u()({[g.default.middle]:t}),children:(0,r.jsx)(_.gb,{})})}function y(e){let{isMiddle:t,onLoadMoreData:l}=e;return(0,r.jsxs)("div",{className:u()({[g.default.middle]:t}),children:["用户信息获取失败，请",(0,r.jsx)("span",{className:g.default.reload,onMouseDown:()=>{l()},children:"刷新"}),"重试"]})}function b(e){var t,l,n;let{suggestData:o,searchText:i,onLoadMoreData:a,isLoading:s}=e,d=null;return(null==o?void 0:o.statusCode)===0||s?(null==o?void 0:o.hasMore)?d=(0,r.jsx)(C,{isMiddle:(null==o?void 0:null===(n=o.data)||void 0===n?void 0:n.length)===0}):(null==o?void 0:o.hasFetchData)&&(null==o?void 0:null===(t=o.data)||void 0===t?void 0:t.length)===0&&(d=(0,r.jsx)(w,{searchText:i})):d=(0,r.jsx)(y,{isMiddle:(null==o?void 0:null===(l=o.data)||void 0===l?void 0:l.length)===0,onLoadMoreData:a}),d}function j(e){let{children:t,className:l,targetEl:n,isSearch:o,searchText:a,onLoadMoreData:s,suggestData:d}=e,c=(0,i.useRef)(null),[v,m]=(0,i.useState)(null),[_,w]=(0,i.useState)(!1),C=(0,i.useRef)(null),y=(0,i.useRef)(!1),j=(0,i.useContext)(x.X),{isDetail:k}=null!=j?j:{},{refOuterContainer:N}=(0,i.useContext)(h)||{},{styles:I}=(0,p.D)(n,v,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,16]}}]}),E=(0,i.useCallback)(()=>{var e,t;return k?{}:{marginTop:-((null==N?void 0:null===(t=N.current)||void 0===t?void 0:null===(e=t.querySelector(".richtext-container"))||void 0===e?void 0:e.offsetHeight)+200)}},[]);C.current=s;let S=(0,i.useCallback)(f()(async()=>{if(!!v&&!y.current){if(v.scrollTop+v.clientHeight+100>v.scrollHeight){var e;await (null===(e=C.current)||void 0===e?void 0:e.call(C))}}},500),[v]);return(0,i.useEffect)(()=>{v&&(v.scrollTop=0)},[a,v]),(0,i.useEffect)(()=>{if(!!v&&(null==d?void 0:d.statusCode)===0&&!!(null==d?void 0:d.hasMore))return y.current=!1,v.addEventListener("scroll",S),()=>{y.current=!0,v&&v.removeEventListener("scroll",S)}},[v,S,d]),(0,r.jsxs)("div",{className:u()(g.default.container,l,"atBox-outside-container",g.default.atIcon),ref:m,style:E(),onMouseDown:e=>{e.preventDefault()},children:[(0,r.jsx)("div",{className:u()(g.default.innerContainer,"atBox-inner-container",{[g.default.isSearch]:o}),ref:c,children:t}),(0,r.jsx)(b,{suggestData:d,searchText:a,isLoading:_,onLoadMoreData:async()=>{w(!0),await s(),w(!1)}})]})}function k(e){let{children:t,store:l}=e,{onLoadMoreData:n,suggestData:o,searchText:a,isAtIconSelected:s}=(0,i.useContext)(h);return(0,r.jsx)(j,{searchText:a,targetEl:null==l?void 0:l.getReferenceElement(),onLoadMoreData:n,suggestData:o,isAtIconSelected:s,children:t})}var N=l("250751"),I=l("245086"),E=l("240319"),S=l("688497");let L=(0,i.forwardRef)((e,t)=>(0,r.jsxs)("svg",(0,o._)((0,n._)({width:13,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.611 11a4.889 4.889 0 1 0 0-9.777 4.889 4.889 0 0 0 0 9.777z",fill:"#FE2C55"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.691 7.23a.612.612 0 0 0 0 .863.612.612 0 0 0 .863 0l2.697-2.697a.61.61 0 1 0-.864-.864L5.691 7.23z",fill:"url(#icon-avater-select_svg__paint0_linear_37464_5518)"}),(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.418 7.229a.612.612 0 0 1-.864 0l-.431-.432-1.288-1.288a.612.612 0 0 0-.864 0 .612.612 0 0 0 0 .864l1.72 1.72a.612.612 0 0 0 .863 0l.864-.864z",fill:"#fff"}),(0,r.jsx)("rect",{x:1.355,y:".856",width:10.511,height:10.511,rx:5.256,stroke:"#363741",strokeWidth:".733"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"icon-avater-select_svg__paint0_linear_37464_5518",x1:7.925,y1:3.112,x2:5.088,y2:5.809,gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#fff"}),(0,r.jsx)("stop",{offset:1,stopColor:"#ECEDED"})]})})]})));var M=l("590613"),T=l("699233"),R=l("684028");function F(e){var{className:t,mention:l,awemeInfo:a,selectOn:s,onClick:d}=e,c=(0,N._)(e,["className","mention","awemeInfo","selectOn","onClick"]);let[v,m]=(0,i.useState)(!1),f=(0,S.x)(()=>{E.Z.sendLog("commentAtShow",{author_id:`${null==a?void 0:a.authorUserId}`,group_id:null==a?void 0:a.awemeId,log_pb:null==a?void 0:a.logPb,enter_from:(0,I.vM)(),to_user_id:null==l?void 0:l.uid})}),h=(0,i.useCallback)(e=>{null==d||d(e),s&&m(e=>!e)},[d,s]),p=(0,i.useCallback)(()=>(0,r.jsx)("i",{className:M.default.mask}),[]);return(0,r.jsx)("div",(0,o._)((0,n._)({className:u()(M.default.container,t),onClick:e=>h(e)},c),{ref:f,children:(0,r.jsxs)("div",{className:M.default.innerContainer,children:[v?(0,r.jsx)(T.Z,{width:14,height:14,viewBox:"0 0 14 14",src:L,className:M.default.icon}):null,(0,r.jsx)(R.q,{src:l.avatarUri,type:"extraSmall",maskConf:{showMask:v,MaskItem:p}}),(0,r.jsx)("span",{className:M.default.userName,children:l.remarkName||l.nickname||""})]})}))}function P(e){var{children:t,mention:l,onMouseDown:n,onMouseUp:o,onMouseEnter:a}=e;(0,N._)(e,["children","mention","onMouseDown","onMouseUp","onMouseEnter"]);let{awemeInfo:s}=(0,i.useContext)(h);return(0,r.jsx)("div",{onMouseDown:n,onMouseUp:o,onMouseEnter:a,onMouseDown:e=>{n(e)},onMouseDownCapture:e=>{n(e)},onMouseUp:e=>{E.Z.sendLog("commentAtClick",{author_id:`${null==s?void 0:s.authorUserId}`,group_id:null==s?void 0:s.awemeId,log_pb:null==s?void 0:s.logPb,enter_from:(0,I.vM)(),to_user_id:null==l?void 0:l.uid}),o(e)},onClick:e=>{o(e)},onMouseEnter:()=>{},children:(0,r.jsx)(F,{mention:l,awemeInfo:s})})}function D(e){let{SuggestionComponent:t,loadSearchAtData:l,loadMoreDefaultAtData:n,atUserDefaultData:o,atUserSearchData:a,awemeInfo:s,editorState:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,refOuterContainer:m,setIsAtIconPoint:p}=e,[g,_]=(0,i.useState)(!1),[w,C]=(0,i.useState)(null==a?void 0:a.searchText),y=(0,i.useMemo)(()=>(null==a?void 0:a.hasMore)&&c,[a,c]),b=(0,i.useMemo)(()=>w?a:o,[a,o,w]),j=(0,i.useContext)(x.X),{isActive:N=!0}=null!=j?j:{};(0,i.useEffect)(()=>{(g||c)&&0===o.data.length&&0===o.statusCode&&o.hasMore&&n()},[g,o,n,c,N]),(0,i.useEffect)(()=>{!N&&_(!1)},[N]),(0,i.useEffect)(()=>{w&&l(w)},[w]);let I=(0,i.useCallback)(()=>w?l(w):n(),[w,l,n]),E=(0,i.useCallback)(f()(e=>{C(e.value)},300,{leading:!1,trailing:!0}),[]);return(0,r.jsx)(h.Provider,{value:{onLoadMoreData:I,suggestData:b,searchText:w,awemeInfo:s,editorState:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,refOuterContainer:m,setIsAtIconPoint:p},children:(0,r.jsx)(t,{open:g,onOpenChange:e=>{_(e)},suggestions:b.data,onSearchChange:e=>{E(e)},renderEmptyPopup:y,popperOptions:{loadMoreDefaultAtData:n,loadSearchAtData:l,suggestData:b,searchText:w},popoverContainer:k,entryComponent:P,hasMore:null==b?void 0:b.hasMore,isActive:N})})}l("969642"),l("415691"),l("39087"),l("227470"),l("238658"),l("869211");var A=l("146611"),V=l.n(A),B=(e,t,l)=>{let n=t.getAnchorKey(),o=t.getAnchorOffset();return function(e,t,l){let n=e.substr(0,t),o=l.map(e=>V()(e)).join("|"),r=RegExp(`(${o})`,"g"),i=n.matchAll(r),a=0,s=0;for(let e of i){let t=e[1].length;s=(a=e.index||0)+t}let d=n.slice(s);return{begin:a,end:n.length,matchingString:d}}(e.getCurrentContent().getBlockForKey(n).getText(),o,l)};function H(e){return"@"===e?"mention":`${e}mention`}function U(e,t,l,n,o){let r=e.getCurrentContent().createEntity(H(n),o,{mention:t}).getLastCreatedEntityKey(),i=e.getSelection(),{begin:s,end:d}=B(e,i,[n]),u=i.merge({anchorOffset:s,focusOffset:d}),c=a.Modifier.replaceText(e.getCurrentContent(),u,`${l}${t.name}`,void 0,r),v=u.getAnchorKey();e.getCurrentContent().getBlockForKey(v).getLength()===d&&(c=a.Modifier.insertText(c,c.getSelectionAfter()," "));let m=a.EditorState.push(e,c,"insert-fragment");return a.EditorState.forceSelection(m,c.getSelectionAfter())}let O=e=>{let t=e.getCurrentContent(),l=t.createEntity("mention","IMMUTABLE",{}).getLastCreatedEntityKey(),n=a.Modifier.insertText(t,t.getSelectionAfter(),"@",null,l);return a.EditorState.push(e,n,"insert-fragment")},z=(e,t)=>U(e,t,"@","@","IMMUTABLE"),W=(e,t)=>{let l=e.getCurrentContent(),n=l.createEntity("mention","IMMUTABLE",{mention:t}).getLastCreatedEntityKey(),o=e.getSelection(),r=a.Modifier.removeRange(l,o,"backward"),i=a.Modifier.insertText(r,r.getSelectionAfter()," "),s=a.Modifier.insertText(i,i.getSelectionAfter(),`@${t.name}`,void 0,n);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())},Z=(e,t)=>{let l=e.getCurrentContent(),n=l.createEntity("emoji","IMMUTABLE",{emojiInfo:t}).getLastCreatedEntityKey(),o=e.getSelection(),r=a.Modifier.removeRange(l,o,"backward"),i=a.Modifier.insertText(r,r.getSelectionAfter()," "),s=a.Modifier.insertText(i,i.getSelectionAfter(),`${t.text}`,void 0,n);s=a.Modifier.insertText(s,s.getSelectionAfter()," ");let d=a.EditorState.push(e,s,"insert-fragment");return a.EditorState.forceSelection(d,s.getSelectionAfter())};function $(e,t,l){let r=[],i=-1;return t.findEntityRanges(t=>{let n=t.getEntity();if(!n)return!1;let o=e.getEntity(n),a="mention"===o.getType();if(a){var s,d;let e=o.getData();r[++i]={user_id:null===(s=e.mention)||void 0===s?void 0:s.uid,sec_uid:null===(d=e.mention)||void 0===d?void 0:d.secUid,type:0,start:l+0,end:l+0}}return a},(e,t)=>{r[i]=(0,o._)((0,n._)({},r[i]),{start:l+e,end:l+t})}),r}let K=e=>({text:G(e),textExtra:(function(e){let t=e.getCurrentContent(),l=t.getFirstBlock(),n=t.getLastBlock(),o=l.getKey();if(o===n.getKey())return $(t,l,0);{let e=[];for(let l=o,n=0;l;l=t.getKeyAfter(l)){let o=t.getBlockForKey(l);e.push(...$(t,o,n)),n+=o.text.length+1}return e}})(e).filter(e=>null==e?void 0:e.user_id)}),G=e=>{let t=e.getCurrentContent().getBlocksAsArray(),l=[];for(let e=0;e<t.length;e++)l.push(t[e].text);return l.join("\n")},q=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,i=e.getCurrentContent();if(0===l.length)return i=a.Modifier.insertText(i,i.getSelectionAfter(),t),a.EditorState.push(e,i,"insert-fragment");let s=l.sort((e,t)=>e.start-t.start);for(;t.length>r;)if(s.length>0&&s[0].start===r){let e=s[0],l=(0,o._)((0,n._)({},e),{uid:e.userId,name:t.slice(e.start,e.end)}),d=i.createEntity("mention","IMMUTABLE",{mention:l}),u=d.getLastCreatedEntityKey();i=a.Modifier.insertText(d,d.getSelectionAfter(),`${l.name}`,void 0,u),s.shift(),r=e.end}else{let e=s.length>0?s[0]:{start:t.length},l=t.slice(r,e.start);i=a.Modifier.insertText(i,i.getSelectionAfter(),l),r=e.start}return a.EditorState.push(e,i,"insert-fragment")},X=13;var Y=l("873715"),Q=l("709499");function J(e){let{mention:t,children:l,className:n}=e;return(0,r.jsx)("a",{href:t.link,className:n,spellCheck:!1,"data-testid":"mentionLink",children:l})}function ee(e){let{children:t,className:l}=e;return(0,r.jsx)("span",{className:l,spellCheck:!1,"data-testid":"mentionText",children:t})}function et(e){let{entityKey:t,theme:l={},mentionComponent:n,children:o,decoratedText:i,className:a,contentState:s}=e,d=(0,Q.Z)(l.mention,a),u=s.getEntity(t).getData().mention,c=n||(u.link?J:ee);return(0,r.jsx)(c,{entityKey:t,mention:u,theme:l,className:d,decoratedText:i,children:o})}var el=l("7979"),en=l("838871"),eo=l.n(en);let er=e=>{let{onMentionSelect:t,mention:l,theme:n,index:o,onMentionFocus:a,isFocused:s,id:d,searchValue:u,entryComponent:c}=e,v=(0,i.useRef)(!1),m=(0,i.useRef)(null);(0,i.useEffect)(()=>{s&&requestAnimationFrame(()=>{var e;return null===(e=m.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"nearest"})})},[s]),(0,i.useEffect)(()=>{v.current=!1});let f=s?n.mentionSuggestionsEntryFocused:n.mentionSuggestionsEntry;return(0,r.jsx)("div",{ref:m,children:(0,r.jsx)(c,{className:f,onMouseDown:e=>{e.preventDefault(),v.current=!0},onMouseUp:()=>{v.current&&(t(l),v.current=!1)},onMouseEnter:()=>{a(o)},role:"option",id:d,"aria-selected":s?"true":void 0,theme:n,mention:l,isFocused:s,searchValue:u})})};er.propTypes={entryComponent:eo().any.isRequired,searchValue:eo().string,onMentionSelect:eo().func};function ei(e){let{mention:t,theme:l={}}=e;return t.avatar?(0,r.jsx)("img",{src:t.avatar,className:l.mentionSuggestionsEntryAvatar,role:"presentation"}):null}function ea(e){let{mention:t,theme:l,isFocused:i,searchValue:a}=e,s=(0,N._)(e,["mention","theme","isFocused","searchValue"]);return(0,r.jsxs)("div",(0,o._)((0,n._)({},s),{children:[(0,r.jsx)(ei,{mention:t,theme:l}),(0,r.jsx)("span",{className:null==l?void 0:l.mentionSuggestionsEntryText,children:t.name})]}))}let es=e=>e?"static"!==window.getComputedStyle(e).getPropertyValue("position")?e:es(e.parentElement):null;function ed(e){let t,l,n,{decoratorRect:o,popover:r,props:i}=e,a=es(r.parentElement);if(a){let e=a.getBoundingClientRect();t={scrollLeft:a.scrollLeft,scrollTop:a.scrollTop,left:o.left-e.left,top:o.bottom-e.top}}else t={scrollTop:window.pageYOffset||document.documentElement.scrollTop,scrollLeft:window.pageXOffset||document.documentElement.scrollLeft,top:o.bottom,left:o.left};let s=t.left+t.scrollLeft,d=t.top+t.scrollTop;return i.open&&(i.suggestions.length>0?(l="scale(1)",n="all 0.25s cubic-bezier(.3,1.2,.2,1)"):(l="scale(0)",n="all 0.35s cubic-bezier(.3,1,.2,1)")),{left:`${s}px`,top:`${d}px`,transform:l,transformOrigin:"1em 0%",transition:n}}l("586529"),l("613518");var eu=e=>{let[t,l,n]=e.split("-");return{blockKey:t,decoratorKey:parseInt(l,10),leafKey:parseInt(n,10)}};function ec(e){return void 0!==e}function ev(e){let{store:t,children:l,theme:a,popperOptions:s={placement:"bottom-start"}}=e,[d,u]=(0,i.useState)(()=>(0,Q.Z)(a.mentionSuggestions,a.mentionSuggestionsPopup)),[c,v]=(0,i.useState)(null),{styles:m,attributes:f}=(0,p.D)(t.getReferenceElement(),c,s);return(0,i.useEffect)(()=>{requestAnimationFrame(()=>u((0,Q.Z)(a.mentionSuggestions,a.mentionSuggestionsPopup,a.mentionSuggestionsPopupVisible)))},[a]),(0,r.jsx)("div",(0,o._)((0,n._)({ref:v,style:m.popper},f.popper),{className:d,children:l}))}var em=l("681433");let ef=l.n(em)()(e=>{});class eh extends i.Component{componentDidUpdate(){if(this.popover){let e=this.props.suggestions.length;if(e>0&&this.state.focusedOptionIndex>=e&&this.setState({focusedOptionIndex:e-1}),!this.props.store.getAllSearches().has(this.activeOffsetKey))return;let t=this.props.store.getPortalClientRect(this.activeOffsetKey);for(let[e,l]of Object.entries((this.props.positionSuggestions||ed)({decoratorRect:t,props:this.props,popover:this.popover})))this.popover.style[e]=l}}componentWillUnmount(){this.props.callbacks.onChange=void 0}render(){if(!this.props.open)return null;let e=this.props,{entryComponent:t,popoverComponent:l,popperOptions:a,popoverContainer:s=ev,onOpenChange:d,onAddMention:u,onSearchChange:c,suggestions:v,ariaProps:m,callbacks:f,theme:h={},store:p,entityMutability:g,positionSuggestions:_,mentionTriggers:x,mentionPrefix:w}=e,C=(0,N._)(e,["entryComponent","popoverComponent","popperOptions","popoverContainer","onOpenChange","onAddMention","onSearchChange","suggestions","ariaProps","callbacks","theme","store","entityMutability","positionSuggestions","mentionTriggers","mentionPrefix"]);return l||_?(ef("The properties `popoverComponent` and `positionSuggestions` are deprecated and will be removed in @draft-js-plugins/mentions 6.0 . Use `popperOptions` instead"),i.cloneElement(l||(0,r.jsx)("div",{}),(0,o._)((0,n._)({},C),{className:h.mentionSuggestions,role:"listbox",id:`mentions-list-${this.key}`,ref:e=>{this.popover=e}}),null==v?void 0:v.map((e,l)=>(0,r.jsx)(er,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===l,mention:e,index:l,id:`mention-option-${this.key}-${l}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.name)))):this.props.renderEmptyPopup||0!==v.length?(0,r.jsx)(s,{store:this.props.store,popperOptions:a,theme:h,children:null==v?void 0:v.map((e,l)=>(0,r.jsx)(er,{onMentionSelect:this.onMentionSelect,onMentionFocus:this.onMentionFocus,isFocused:this.state.focusedOptionIndex===l,mention:e,index:l,id:`mention-option-${this.key}-${l}`,theme:h,searchValue:this.lastSearchValue,entryComponent:t||ea},null!==e.id?e.id:e.uid))}):null}constructor(e){super(e),(0,el._)(this,"state",{focusedOptionIndex:0}),(0,el._)(this,"key",(0,a.genKey)()),(0,el._)(this,"popover",void 0),(0,el._)(this,"activeOffsetKey",void 0),(0,el._)(this,"lastSearchValue",void 0),(0,el._)(this,"lastActiveTrigger",""),(0,el._)(this,"lastSelectionIsInsideWord",void 0),(0,el._)(this,"onEditorStateChange",e=>{let t=this.props.store.getAllSearches();if(0===t.size)return e;let l=function(e,t,l){let n=e.getSelection(),o=n.getAnchorKey(),r=n.getAnchorOffset();if(!n.isCollapsed()||!n.getHasFocus())return null;let i=t.map(e=>eu(e)).filter(e=>e.blockKey===o).map(t=>{var l;return null==e?void 0:null===(l=e.getBlockTree(t.blockKey))||void 0===l?void 0:l.getIn([t.decoratorKey])});if(i.every(e=>void 0===e))return null;let a=e.getCurrentContent().getBlockForKey(o).getText(),s=i.filter(ec).map(e=>{let{start:t,end:n}=e;return l.map(e=>0===t&&r>=t+e.length&&a.substr(0,e.length)===e&&r<=n||l.length>1&&r>=t+e.length&&(a.substr(t+1,e.length)===e||a.substr(t,e.length)===e)&&r<=n||1===l.length&&r>=t+e.length&&r<=n?e:void 0).filter(ec)[0]}).filter(ec);if(s.isEmpty())return null;let[d,u]=s.entrySeq().first();return{activeOffsetKey:d,activeTrigger:u}}(e,t,this.props.mentionTriggers);if(!l)return(()=>(this.props.store.resetEscapedSearch(),this.closeDropdown(),e))();let n=this.activeOffsetKey;return this.activeOffsetKey=l.activeOffsetKey,this.onSearchChange(e,e.getSelection(),this.activeOffsetKey,n,l.activeTrigger),!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.props.store.resetEscapedSearch(),!this.props.open&&!this.props.store.isEscaped(this.activeOffsetKey||"")&&this.openDropdown(),n!==this.activeOffsetKey&&this.setState({focusedOptionIndex:0}),e}),(0,el._)(this,"onSearchChange",(e,t,l,n,o)=>{let{matchingString:r}=B(e,t,[o]);(this.lastActiveTrigger!==o||this.lastSearchValue!==r||l!==n)&&(this.lastActiveTrigger=o,this.lastSearchValue=r,this.props.onSearchChange({trigger:o,value:r}))}),(0,el._)(this,"onDownArrow",e=>{e.preventDefault();let t=this.state.focusedOptionIndex+1;this.onMentionFocus(t>=this.props.suggestions.length?0:t)}),(0,el._)(this,"onTab",e=>{e.preventDefault(),this.commitSelection()}),(0,el._)(this,"onUpArrow",e=>{if(e.preventDefault(),this.props.suggestions.length>0){let e=this.state.focusedOptionIndex-1;this.onMentionFocus(e<0?this.props.suggestions.length-1:e)}}),(0,el._)(this,"onEscape",e=>{e.preventDefault(),this.props.store.escapeSearch(this.activeOffsetKey||""),this.closeDropdown(),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,el._)(this,"onMentionSelect",e=>{if(!e)return;this.props.onAddMention&&this.props.onAddMention(e),this.closeDropdown();let t=U(this.props.store.getEditorState(),e,this.props.mentionPrefix,this.lastActiveTrigger||"",this.props.entityMutability);this.props.store.setEditorState(t)}),(0,el._)(this,"onMentionFocus",e=>{let t=`mention-option-${this.key}-${e}`;this.props.ariaProps.ariaActiveDescendantID=t,this.setState({focusedOptionIndex:e}),this.props.store.setEditorState(this.props.store.getEditorState())}),(0,el._)(this,"commitSelection",()=>{let e=this.props.suggestions[this.state.focusedOptionIndex];return this.props.store.getIsOpened()&&e?(this.onMentionSelect(e),"handled"):"not-handled"}),(0,el._)(this,"openDropdown",()=>{this.props.callbacks.handleReturn=this.commitSelection,this.props.callbacks.keyBindingFn=e=>{40===e.keyCode&&this.onDownArrow(e),38===e.keyCode&&this.onUpArrow(e),27===e.keyCode&&this.onEscape(e),9===e.keyCode&&this.onTab(e)};let e=`mention-option-${this.key}-${this.state.focusedOptionIndex}`;this.props.ariaProps.ariaActiveDescendantID=e,this.props.ariaProps.ariaOwneeID=`mentions-list-${this.key}`,this.props.ariaProps.ariaHasPopup="true",this.props.ariaProps.ariaExpanded=!0,this.props.onOpenChange(!0)}),(0,el._)(this,"closeDropdown",()=>{this.props.callbacks.handleReturn=void 0,this.props.callbacks.keyBindingFn=void 0,this.props.ariaProps.ariaHasPopup="false",this.props.ariaProps.ariaExpanded=!1,this.props.ariaProps.ariaActiveDescendantID=void 0,this.props.ariaProps.ariaOwneeID=void 0,this.props.onOpenChange(!1)}),this.props.callbacks.onChange=this.onEditorStateChange}}(0,el._)(eh,"propTypes",{open:eo().bool.isRequired,onOpenChange:eo().func.isRequired,entityMutability:eo().oneOf(["SEGMENTED","IMMUTABLE","MUTABLE"]),entryComponent:eo().func,onAddMention:eo().func,suggestions:eo().array.isRequired});let ep="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;function eg(e){let t=(0,i.useRef)(),l=e=>{e.store.updatePortalClientRect(e.offsetKey,()=>t.current.getBoundingClientRect())};return ep(()=>(e.store.register(e.offsetKey),e.store.setIsOpened(!0),l(e),e.store.setEditorState(e.store.getEditorState()),()=>{e.store.unregister(e.offsetKey),e.store.setIsOpened(!1),e.store.setReferenceElement(null)}),[]),(0,i.useEffect)(()=>{l(e)}),(0,r.jsx)("span",{ref:l=>{t.current=l,e.store.setReferenceElement(l)},children:e.children})}var e_=e=>(t,l,n)=>{t.findEntityRanges(t=>{let l=t.getEntity();return null!==l&&e.some(e=>n.getEntity(l).getType()===H(e))},l)};l("572521");let ex=/\s/,ew=(e,t,l,n)=>{let o=t.getText();t.findEntityRanges(e=>!e.getEntity(),(t,r)=>{let i=o.slice(t,r);l?!function(e,t,l,n){let o,r;let i=e.lastIndex;for(;null!==(o=e.exec(t));){var a,s;if(e.lastIndex===i)break;i=e.lastIndex;let t=(r=l+o.index)+o[0].length;a=0,s=o.index;n(r,t)}}(e,i,t,n):!function(e,t,l,n){let o,r;let i=e.lastIndex;for(;null!==(o=e.exec(t))&&e.lastIndex!==i;){;i=e.lastIndex;let a=(r=l+o.index)+o[0].length;ex.test(t[r])&&(r+=1),n(r,a)}}(e,i,t,n)})};var eC=(e,t,l)=>{let n=`(${e.map(e=>V()(e)).join("|")})`,o=t?RegExp(`${n}(${l}|\\s)*`,"g"):RegExp(`(\\s|^)${n}${l}*`,"g");return(e,l)=>{ew(o,e,t,l)}},ey=l("582099"),eb=e=>{let{suggestions:t,onSearchChange:l,popoverContainer:n,hasMore:o}=e,{editorState:s,awemeInfo:d,addUserMention:u,isAtIconSelected:c,setIsAtIconSelected:v,setIsAtIconPoint:m}=(0,i.useContext)(h);return((0,ey.Z)(()=>{var e,t,n,o,r;let i=s.getCurrentContent(),d=i.getPlainText(),u=s.getSelection().getAnchorOffset(),c=null===(n=(0,a.convertToRaw)(i))||void 0===n?void 0:null===(t=n.blocks)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.entityRanges,f=null==c?void 0:null===(r=c.reverse)||void 0===r?void 0:null===(o=r.call(c))||void 0===o?void 0:o.find(e=>e.offset<u);if(d){if(f){let{offset:e,length:t}=f,n=d.substring(e+t-1,u),o=n.indexOf("@");o>-1?l({value:n.slice(o+1)}):v(!1)}else{let e=d.indexOf("@");e>-1?l({value:d.slice(e+1)}):v(!1)}}else v(!1),m(!1),l({value:""})},[s,l]),c&&((null==t?void 0:t.length)||!1!==o))?(0,r.jsx)(n,{children:null==t?void 0:t.map(e=>(0,r.jsx)("div",{id:`search_${e.uid}`,children:(0,r.jsx)(F,{mention:e,awemeInfo:d,onClick:t=>{t.stopPropagation(),E.Z.sendLog("commentAtClick",{author_id:`${null==d?void 0:d.authorUserId}`,group_id:null==d?void 0:d.awemeId,log_pb:null==d?void 0:d.logPb,enter_from:(0,I.vM)(),to_user_id:null==e?void 0:e.uid}),u(e),l({value:""}),v(!1),m(!1)}})},`search_${e.uid}`))}):null};l("288123"),l("618354");var ej=i.forwardRef(function(e,t){let{placeholder:l,onChange:d,loadSearchAtData:m,loadMoreDefaultAtData:f,atUserDefaultData:h,atUserSearchData:p,onEditFocus:g,onEditBlur:_,awemeInfo:x,handlePublishClick:w,isAtIconSelected:C,setIsAtIconSelected:y,refOuterContainer:b,setIsAtIconPoint:j,isAtIconPoint:k,className:N,readOnly:I,maxLength:E}=e,S=(0,i.useRef)(null),L=(0,i.useRef)(null),[M,T]=(0,i.useState)(()=>a.EditorState.createEmpty()),R=(0,i.useRef)([]),F=(0,i.useRef)(!1),[P,A]=(0,i.useState)(!1),V=(0,i.useMemo)(()=>(function(){let e,t,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i={keyBindingFn:void 0,handleKeyCommand:void 0,handleReturn:void 0,onChange:void 0},a={ariaHasPopup:"false",ariaExpanded:!1,ariaOwneeID:void 0,ariaActiveDescendantID:void 0},s=(0,Y.Map)(),d=(0,Y.Map)(),u=!1,c={getEditorState:void 0,setEditorState:void 0,getPortalClientRect:e=>d.get(e)(),getAllSearches:()=>s,isEscaped:t=>e===t,escapeSearch:t=>{e=t},resetEscapedSearch:()=>{e=void 0},register:e=>{s=s.set(e,e)},updatePortalClientRect:(e,t)=>{d=d.set(e,t)},unregister:e=>{s=s.delete(e),d=d.delete(e)},getIsOpened:()=>u,setIsOpened:e=>{u=e},getReferenceElement:()=>t,setReferenceElement:e=>{t=e}},{mentionPrefix:v="",theme:m={},positionSuggestions:f,mentionComponent:h,mentionSuggestionsComponent:p=eh,entityMutability:g="SEGMENTED",mentionTrigger:_="@",mentionRegExp:x="[\\w-\xc0-\xd6\xd8-\xf6\xf8-\xffĀ-ňŊ-ſА-я぀-ゟ゠-ヿ㄰-㆏가-힣一-龥؀-ۿ\xc0-ỹ。.><》《+。。,，]",supportWhitespace:w=!1,popperOptions:C}=l,y="string"==typeof _?[_]:_,b={ariaProps:a,callbacks:i,theme:m,store:c,entityMutability:g,positionSuggestions:f,mentionTriggers:y,mentionPrefix:v,popperOptions:C};return{MentionSuggestions:e=>(0,r.jsx)(p,(0,n._)({},e,b)),decorators:[{strategy:e_(y),component:e=>(0,r.jsx)(et,(0,o._)((0,n._)({},e),{theme:m,mentionComponent:h}))},{strategy:eC(y,w,x),component:e=>(0,r.jsx)(eg,(0,o._)((0,n._)({},e),{store:c}))}],getAccessibilityProps:()=>({role:"combobox",ariaAutoComplete:"list",ariaHasPopup:a.ariaHasPopup,ariaExpanded:a.ariaExpanded,ariaActiveDescendantID:a.ariaActiveDescendantID,ariaOwneeID:a.ariaOwneeID}),initialize:e=>{let{getEditorState:t,setEditorState:l}=e;c.getEditorState=t,c.setEditorState=l},keyBindingFn:e=>i.keyBindingFn&&i.keyBindingFn(e),handleReturn:e=>i.handleReturn&&i.handleReturn(e),onChange:e=>i.onChange?i.onChange(e):e}})({entityMutability:"IMMUTABLE",mentionPrefix:"@",mentionTrigger:"@",supportWhitespace:!0,mentionComponent:e=>(0,r.jsx)("span",{className:u()(e.className,"douyin_mention_word"),children:e.children})}),[]),{MentionSuggestions:B}=V||{},H=[];H.unshift(V);let U=(0,i.useCallback)(e=>{let t=z(M,e);T(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},[M,d]);(0,i.useImperativeHandle)(t,()=>({addUserMention:e=>{let t=W(M,e);T(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},addEmoji:e=>{let t=Z(M,{text:`${(null==e?void 0:e.text)||"[微笑]"}`});T(t),null==d||d(G(t)),c.emit(c.EVENT.videoStopPlayNext)},getCommentInfo:()=>{let e=K(M);return(0,o._)((0,n._)({},e),{pastedText:R.current})},getCommentText:()=>G(M),clearInput:()=>new Promise(e=>{T(t=>(R.current=[],e(t),a.EditorState.createEmpty())),null==d||d("")}),resetInput:e=>{let t=e.getSelection(),l=e.getCurrentContent().getBlockMap().last(),n=t.merge({anchorKey:l.getKey(),anchorOffset:l.getLength(),focusKey:l.getKey(),focusOffset:l.getLength(),isBackward:!1,hasFocus:!0}),o=a.EditorState.forceSelection(e,n);T(o),null==d||d(G(o))},focus:()=>{setTimeout(()=>{var e,t;null===(t=S.current)||void 0===t||null===(e=t.focus)||void 0===e||e.call(t)},200)},blur:()=>{setTimeout(()=>{var e,t;null===(t=S.current)||void 0===t||null===(e=t.blur)||void 0===e||e.call(t)},200)},addAtIcon:()=>{let e=O(M),t=a.EditorState.moveFocusToEnd(e);T(t),null==d||d(G(t))},setContent:(e,t)=>{let l=q(M,e,t);T(l),null==d||d(G(l))}}),[M,d]);let $=(0,i.useCallback)(e=>{let{keyCode:t}=e,l=e.ctrlKey||e.metaKey;return t!==X||l?(0,a.getDefaultKeyBinding)(e):(w(),"noop")},[w]);return(0,i.useEffect)(()=>{A(!0)},[]),(0,r.jsx)("div",{className:u()("richtext-container",N),ref:L,children:P?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.ZP,{readOnly:I,editorState:M,onChange:e=>{T(e),null==d||d(G(e))},stripPastedStyles:!0,keyBindingFn:$,plugins:H,handlePastedText:(e,t,l)=>E>0&&l.getCurrentContent().getPlainText().length+e.length>E?"handled":(R.current.push(e),"not-handled"),placeholder:(0,r.jsx)(v.Z,{text:l}),handleBeforeInput:(e,t)=>E>0&&t.getCurrentContent().getPlainText().length+e.length>E?"handled":"not-handled",ref:S,onFocus:()=>{var e;!F.current&&setTimeout(()=>{T(e=>{let t=e.getCurrentContent().getLastBlock(),l=t.getKey(),n=t.getLength(),o=a.SelectionState.createEmpty(l).merge({anchorOffset:n,focusOffset:n});return a.EditorState.forceSelection(e,o)})}),F.current=!0,null==g||g(),c.emit(c.EVENT.videoStopPlayNext),k&&(null==p?void 0:null===(e=p.data)||void 0===e?void 0:e.length)>0&&y(!0)},onBlur:()=>{F.current=!1,null==_||_(),c.emit(c.EVENT.videoRemoveStopPlayNext)},isAtIconSelected:C}),(0,r.jsx)(D,{SuggestionComponent:C?eb:B,loadSearchAtData:m,loadMoreDefaultAtData:f,atUserDefaultData:h,atUserSearchData:p,awemeInfo:x,editorState:M,addUserMention:U,isAtIconSelected:C,setIsAtIconSelected:y,refOuterContainer:b,setIsAtIconPoint:j})]}):(0,r.jsx)("div",{className:"placeholder-default",children:(0,r.jsx)("span",{children:l})})})})},240319:function(e,t,l){var n=l(354795);t.Z=new n.h({inputText:{eventName:"input_text",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_position:""}},commentAtShow:{eventName:"comment_at_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",to_user_id:""}},commentAtClick:{eventName:"comment_at_click",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",to_user_id:""}},emojiTabShow:{eventName:"emoji_tab_show",params:{author_id:"",group_id:"",log_pb:"",enter_method:"comment",enter_from:"",previous_page:"",tab_name:""}},clickEmoji:{eventName:"click_emoji",params:{author_id:"",group_id:"",enter_method:"comment",log_pb:"",enter_from:"",previous_page:"",tab_name:""}},postComment:{eventName:"post_comment",params:{author_id:"",group_id:"",emoji_comment_type:"",log_pb:"",enter_from:"",previous_page:"",reply_comment_id:"",tab_name:"",is_full_webscreen:"",from_follow_list:"0",relation:"",clarity:"",aweme_type:"",pic_cnt:0,reply_to_comment_id:"",is_auto:1,interact_type:"",item_duration_ms:0}},xiguaPostCommentClick:{eventName:"xigua_post_comment_click",params:{author_id:"",group_id:""}},atPanelClick:{eventName:"at_panel_click",params:{enter_from:"",group_id:""}},emojiSearchClick:{eventName:"emoji_search_click",params:{enter_from:"",enter_method:""}},emojiSearchResultShow:{eventName:"emoji_search_result_show",params:{enter_from:"",enter_method:""}},emojiSearchResultClick:{eventName:"emoji_search_result_click",params:{enter_from:"",enter_method:""}},picCommentButtonClick:{eventName:"pic_comment_button_click",params:{enter_from:""}}})},263154:function(e,t,l){var n=l(259202),o=l(611542),r=l(825211),i=l.n(r),a=l(432097),s=l(816356),d=l(187818),u=l(456742),c=l(699233);t.Z=e=>{let{title:t,titleChildren:l,contentText:r,children:v,confirmText:m,cancelText:f,closeButton:h,cancelButton:p=!0,okBtnInRight:g,onConfirm:_,onCancel:x,onClose:w,className:C,show:y,setShow:b}=e,j=(0,o.useCallback)(()=>{if(!w||!1!==w())b(!1)},[w,b]),k=(0,o.useCallback)(()=>{if(!_||!1!==_())b(!1)},[_,b]),N=(0,o.useCallback)(()=>{if(!x||!1!==x())b(!1)},[x,b]);return(0,n.jsx)("div",{children:y&&(0,n.jsx)(u.T6,{className:d.default.mask,onClick:j,children:(0,n.jsxs)("div",{className:i()(d.default.modalContainer,C),children:[h&&(0,n.jsx)("div",{className:d.default.close,onClick:j,children:(0,n.jsx)(c.Z,{width:36,height:36,src:s.Z,color:"#A9AAB7"})}),t&&(0,n.jsx)("div",{className:d.default.title,children:t}),(0,n.jsxs)("div",{className:d.default.content,children:[r&&(0,n.jsx)("p",{children:r}),v]}),(0,n.jsxs)("div",{className:d.default.footer,children:[p&&(0,n.jsx)(a.zx,{theme:"solid",className:d.default.button,type:"secondary",onClick:N,children:f||"取消"}),(0,n.jsx)(a.zx,{theme:"solid",className:d.default.button,type:"primary",onClick:k,children:m||"确定"})]})]})})})}},140109:function(e,t,l){l.d(t,{eD:function(){return x}}),l("612222");var n=l("259202"),o=l("611542"),r=l("825211"),i=l.n(r),a=l("464105"),s=l("13351"),d=l("766756"),u=l("819769"),c=l("153584"),v=l("590921"),m=l("874155");let f=(0,o.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,m._)((0,v._)({width:14,height:15,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.646 7.146L8 9.793V2.5H7v7.293L4.354 7.146l-.708.708 3.5 3.5.354.353.354-.353 3.5-3.5-.708-.708zM3 12.5v1h9v-1H3z",fill:"#fff",stroke:"#fff",strokeWidth:".5"})})));var h=l("238560"),p=l("699233"),g=l("413013"),_=l("330349");let x=(0,o.memo)(e=>{let{className:t,hintText:l,log:r,isLogin:v,defaultHeighlight:m=!0,isShow:x,style:w,textContainerClassName:C,showDivider:y=!1,defaultShow:b=!0,showAnimation:j=!1,downloadHintClassName:k,downloadButtonClassNmae:N,autoCancelHeighlight:I=!0,onClick:E,onVisibilityChange:S}=e,{downloadHref:L,downloadAttr:M}=(0,g.o)({channelId:r.channelId}),[T,R]=(0,a.C)({value:x,defaultValue:b}),[F,P]=(0,o.useState)(m),D=(0,o.useRef)(null);return((0,o.useEffect)(()=>{null==S||S(T)},[T,S]),(0,o.useEffect)(()=>{(async()=>{!(0,s.DT)()&&!(0,s.tq)()&&(0,_.D5)()&&!T&&v&&!await (0,d.Y)(!0)&&R(!0)})(),T&&h.Z.sendLog("addToDesktopShow",{enter_from:null==r?void 0:r.enterFrom,type:null==r?void 0:r.type,guide_type:null==r?void 0:r.guideType,channel_id:null==r?void 0:r.channelId,ug_channel_id:u.Le.getConfig(u.gI.WebUgChannelId)||""})},[T,v,r,R]),(0,o.useEffect)(()=>(F&&!D.current&&T&&I&&(D.current=setTimeout(()=>{P(!1),clearTimeout(D.current),D.current=null},5e3)),()=>{clearTimeout(D.current),D.current=null}),[F,T]),j||T)?(0,n.jsxs)("div",{className:i()(c.default.container,t,{[c.default.withDivider]:y,[c.default.hide]:!T}),style:w,children:[(0,n.jsxs)("div",{className:i()(c.default.downloadHint,k),children:[(0,n.jsx)("div",{className:i()(c.default.downloadHintText,C),children:null!=l?l:"下载电脑客户端，随时访问抖音"}),(0,n.jsxs)("a",{href:L,download:M,className:i()(c.default.downloadButton,N,{[c.default.highlight]:F}),onClick:()=>{if(E)return E(),!1;h.Z.sendLog("addToDesktopClick",{enter_from:null==r?void 0:r.enterFrom,type:null==r?void 0:r.type,guide_type:null==r?void 0:r.guideType,group_id:null==r?void 0:r.groupId,channel_id:null==r?void 0:r.channelId,ug_channel_id:u.Le.getConfig(u.gI.WebUgChannelId)||""})},children:[(0,n.jsx)(p.Z,{className:c.default.downloadIcon,src:f,width:14,height:14,viewBox:"0 0 14 14"}),(0,n.jsx)("span",{children:"下载"})]})]}),y&&(0,n.jsx)("div",{className:c.default.divider})]}):(0,n.jsx)(n.Fragment,{})})},810549:function(e,t,l){l.d(t,{$:function(){return h}}),l(612222),l(555266),l(632852);var n=l(259202),o=l(611542),r=l(825211),i=l.n(r),a=l(278569),s=l(802368),d=l(956178),u=l(333886),c=l(376364),v=l(701007),m=l(765743),f={light:"isLight",dark:"isDark"};function h(e){var t,l;let{theme:r,linkItems:h,subLinkItems:p,innerLink:g=[],showInnerLink:_=!0,fetchInnerLinkAfterLCP:x=!1,className:w,defaultValue:C}=e,[y,b]=(0,o.useState)(()=>null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[])),j=(0,m.u)({defaultValue:C}),k=h||(null==j?void 0:null===(t=j.footer)||void 0===t?void 0:t.links)||[],N=p||(null==j?void 0:null===(l=j.footer)||void 0===l?void 0:l.subLinks)||[];return(0,o.useEffect)(()=>{let e=null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[]),t=!1;if(!(null==e?void 0:e.length)&&_){let e=()=>{(async()=>{var e,l;let[n,o]=await Promise.all([(0,u.Ws)(),(0,u.F8)()]),r=(null==n?void 0:n.statusCode)===0?null==n?void 0:n.data:[],i=(null==o?void 0:o.statusCode)===0?[{links:null==o?void 0:null===(l=o.data)||void 0===l?void 0:null===(e=l.map)||void 0===e?void 0:e.call(l,e=>({url:null==e?void 0:e.url,anchor:null==e?void 0:e.keyword}))}]:[];!t&&b(r.concat(i).reduce((e,t)=>e.concat(null==t?void 0:t.links),[]))})()};x?s.H(e):e()}return()=>{t=!0}},[]),(0,o.useEffect)(()=>{_&&!(null==y?void 0:y.length)&&(null==g?void 0:g.length)&&b(null==g?void 0:g.reduce((e,t)=>e.concat(null==t?void 0:t.links),[]))},[g,_,y]),(0,n.jsx)("footer",{className:i()(f[r],w),"data-e2e":"page-footer",children:(0,n.jsxs)("div",{className:c.default.footerWrapper,children:[(0,n.jsxs)(a.NoSSR,{children:[(0,n.jsx)("div",{className:c.default.linkItems,children:!!k.length&&k.map((e,t)=>(0,n.jsx)("div",{className:c.default.linkItem,children:(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:`noopener noreferrer ${(0,d.P)(e.title)}`,isNeedSeoOpt:!(null==e?void 0:e.needExtraParams),children:e.title})},t))}),!!N.length&&N.map((e,t)=>(0,n.jsx)("div",{className:c.default.subLinkItems,children:!!e.length&&e.map((e,t)=>(0,n.jsxs)("div",{className:c.default.subLinkItem,children:[e.icon&&(0,n.jsx)("img",{className:c.default.icon,src:e.icon,alt:"icon"}),e.url?(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",children:e.title}):(0,n.jsx)("span",{children:e.title})]},t))},`group_${t}`))]}),!!y.length&&_&&(0,n.jsxs)("div",{className:c.default.innerLinkContainer,children:[(0,n.jsx)("span",{className:c.default.divide}),(0,n.jsx)("span",{className:c.default.innerLinkTitle,children:"热门："}),y.map(e=>(0,n.jsx)("span",{className:c.default.innerLinkItem,children:(0,n.jsx)(v.a,{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.anchor})},e.url))]})]})})}},233374:function(e,t,l){l.d(t,{$:function(){return u}}),l(612222);var n=l(259202),o=l(611542),r=l(495384),i=l(713017),a=l(393705),s=l(167618),d=l(837305);function u(e){let{children:t,mobileUrl:l,nonce:u,applicableDevice:c="pc,mobile"}=e,[v,m]=o.useState(!1);o.useEffect(()=>{(0,i.GP)()&&m(!0)},[]);let f=o.useMemo(()=>(0,a.Dr)(s.Q.getItem({sKey:d.CookieKeys.Theme})),[]);return(0,n.jsxs)(r.Helmet,{children:[(0,n.jsx)("meta",{charSet:"utf-8"}),t,(0,n.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-transform"}),(0,n.jsx)("meta",{httpEquiv:"Cache-Control",content:"no-siteapp"}),(0,n.jsx)("meta",{httpEquiv:"x-dns-prefetch-control",content:"on"}),(0,n.jsx)("meta",{name:"applicable-device",content:l?"pc":c}),l&&(0,n.jsx)("meta",{name:"mobile-agent",content:`format=[html5]; url=${l}`}),l&&(0,n.jsx)("link",{rel:"alternate",media:"only screen and (max-width: 640px)",href:l}),(0,n.jsx)("meta",{name:"baidu-site-verification",content:"code-2WPwEy0bEv"}),(0,n.jsx)("meta",{name:"google",content:"notranslate"}),(0,n.jsx)("meta",{name:"theme-color",content:`${"light"===f?"#ffffff":"#161823"}`}),(0,n.jsx)("script",{nonce:u,children:`
        (function(win, export_obj) {
          win['TeaAnalyticsObject'] = export_obj;
          if (!win[export_obj]) {
              function _collect() {
                  _collect.q.push(arguments);
              }
              _collect.q = _collect.q || [];
              win[export_obj] = _collect;
          }
          win[export_obj].l = +new Date();
      })(window, 'collectEvent');
      `}),!v&&(0,n.jsx)("link",{rel:"manifest",href:"https://p-pc-weboff.byteimg.com/tos-cn-i-9r5gewecjs/pwa/manifest.json"}),(0,n.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Medium:500&display=swap",rel:"stylesheet",media:"print",id:"media1"}),(0,n.jsx)("link",{href:"//fonts.bytedance.com/dfd/api/v1/css?family=DFPKingGothicGB-Regular:500&display=swap",rel:"stylesheet",media:"print",id:"media2"}),(0,n.jsx)("script",{nonce:u,children:`
          document.getElementById("media1").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
          document.getElementById("media2").addEventListener("load", function () {
            this.media = "all";
            this.onload = null;
          });
        `})]})}},978980:function(e,t,l){l.d(t,{a:function(){return a}});var n=l(611542),o=l(245086),r=l(806212),i=l(528386);let a=e=>{let{currentNumber:t,setCurrentNumber:l,awemeInfoList:a,setAwemeInfoList:s,userAwemeList:d,scrollRef:u,modalVideoIndex:c,additionalDistance:v=-60,refNextVideoCallBack:m}=e,f=(0,n.useRef)(t),h=(0,n.useRef)(!1),p=(0,n.useRef)(c);return(0,n.useEffect)(()=>{p.current=c},[c]),(0,n.useEffect)(()=>()=>{var e;if(p.current!==f.current){if("personal_homepage"===(0,o.yW)()||"others_homepage"===(0,o.yW)()){let e=window.innerWidth<=r.I?3:6,t=t=>Math.floor(t/e);if(t(p.current)===t(f.current))return}null===(e=u.current)||void 0===e||e.locateSelectVideo(f.current,v)}},[]),(0,n.useEffect)(()=>{(null==a?void 0:a.length)>c&&-1===t&&l(c||0)},[a]),(0,n.useEffect)(()=>{s(d)},[d]),(0,n.useEffect)(()=>{5>Math.abs(Number(null==a?void 0:a.length)-t)&&-1!==t&&!h.current&&(async()=>{var e,t,l;(null===(t=u.current)||void 0===t?void 0:null===(e=t.getHasMore)||void 0===e?void 0:e.call(t))?(h.current=!0,await (null===(l=u.current)||void 0===l?void 0:l.loadMoreData()),h.current=!1):m.current=()=>i.F.info("暂时没有更多了")})(),f.current=t},[t,a]),null}},550499:function(e,t,l){l.d(t,{Z:function(){return E}});var n=l("590921"),o=l("874155");l("612222"),l("930798"),l("632852");var r=l("259202"),i=l("611542"),a=l("67108"),s=l.n(a),d=l("825211"),u=l.n(d),c=l("158077"),v=l("839965"),m=l("110541"),f=l("456641");l("347885");var h=l("432097"),p=l("837305"),g=l("528557"),_=l("452295"),x=l("554898");let w=e=>{var t,l;let{abTestData:n,refBlockShowMore:o,actionCloseBlock:i,isLogin:a,setActionCloseBlock:s,blockNum:d,setBlockNum:u,dispatch:c,refLoginBlock:v,handleJumpBlock:f,disableFetchRef:w,loadMoreData:C,handleUnLoginClick:y,transition:b,notAnimate:j,children:k}=e;if([2,4].includes(null==n?void 0:null===(t=n.authorBlock)||void 0===t?void 0:t.type)&&o.current&&!i&&!a)return(0,r.jsx)(_.w,{close:()=>{o.current=!1,s(!0),(0,g.qQ)(p.LocalStorageKeys.AuthorBlock,{lastTimes:Date.now(),actionClose:!0})},blockNum:d,enterMethod:"authorcard_force_qrcode",change:()=>{null==c||c({type:"updateUserInfo"}),o.current=!1},onShow:()=>{[3,4].includes(null==n?void 0:n.authorBlock.type)&&v.current&&u(e=>{let t=e<2?e+1:e;return e<2&&(0,g.qQ)(p.LocalStorageKeys.AuthorBlock,{total:t,lastTimes:Date.now()}),t})},text:"登录查看更多视频",transition:b,notAnimate:j});if((null==n?void 0:null===(l=n.authorBlock)||void 0===l?void 0:l.type)&&o.current&&!i&&!a)return(0,r.jsx)(_.E,{isDetail:!1,blockNum:d,refBlockShowMore:o.current,handleJumpBlock:f,handleUnLogin:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,x.default)({success:async()=>{null==c||c({type:"updateUserInfo"}),w.current=!1,o.current=!1,C()},enterMethod:"authorcard_force_click",headerText:"登录后查看更多作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},text:"登录查看更多视频",blockText:"跳过登录，继续看视频",enterMethod:"authorcard_force_click",onShow:()=>{[3,4].includes(null==n?void 0:n.authorBlock.type)&&u(e=>{let t=e<2?e+1:e;return e<2&&(0,g.qQ)(p.LocalStorageKeys.AuthorBlock,{total:t,lastTimes:Date.now()}),t})}});if(!a&&w.current)return(0,r.jsxs)("div",{className:m.default.loginBtnWrapper,children:[(0,r.jsx)("div",{children:"登录后查看更多作品"}),(0,r.jsx)(h.zx,{theme:"solid",className:m.default.loginBtn,onClick:y,children:"立即登录"})]});else return k};var C=l("309854");let y=e=>{let{refFetchMore:t,setScrollData:l,refLoading:r,disableFetchRef:a,refBlockShowMore:s,refPageId:d,refTotalReloadNum:u,refAvailableReloadNum:c,getBlockNum:v,actionCloseBlock:m,whaleDecisionCustom:f,setWhaleDecisionCustom:h,refListLength:g,refLoginBlock:_,isLogin:x,abTestData:w,WHALE_CUT_HEADER:y,dataFilter:b,dataListRef:j,hasMoreRef:k,listFilterFn:N,refScrollCheck:I,blockType:E,hideListRef:S,needReCheckScroll:L}=e,M=(0,i.useRef)(x);return M.current=x,{loadMore:i.useCallback(async function(){let{errorRetry:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.current){l(e=>(0,o._)((0,n._)({},e),{statusCode:1}));return}if(!r.current&&!a.current&&!s.current){r.current=!0;try{var i,x;let o=d.current,T=c.current,{statusCode:R,data:F,hasMore:P,logPb:D,whaleDecisionCustom:A,clearBefore:V=!1}=await t.current(o,T);h(A);let{actionClose:B}=v(p.LocalStorageKeys.AuthorBlock);g.current+F.length>=18&&_.current&&!M.current&&E&&([1,2].includes(null==w?void 0:null===(i=w.authorBlock)||void 0===i?void 0:i.type)||[3,4].includes(null==w?void 0:null===(x=w.authorBlock)||void 0===x?void 0:x.type)&&!(B||m))&&(s.current=!0),f===y&&(a.current=!0);let H=!1;if(r.current=!1,o===d.current){let t=b?b(F,V?[]:j.current):F,o=R;0===R&&(k.current=!!a.current||!!s.current||P),0===R&&(0===F.length&&P?T<=0&&f!==y?o=-1:c.current=T-1:c.current=u.current),t.forEach(e=>{e.scrollLogPb=D}),!(e&&-1===o)&&l(e=>{if(e.statusCode=o,0===e.statusCode){let l=V?[]:e.dataList,n=N?N(l,t):l.concat(t||[]),o=0;n.length%6!=0&&f===y&&(o=(null==n?void 0:n.length)-(null==n?void 0:n.length)%6),s.current&&n.length>18&&(o=18),o>0&&(S.current=n.slice(o),n=null==n?void 0:n.slice(0,o)),e.dataList=n}return(0,n._)({},e)}),0===o&&(H=!0)}else H=!0;return H&&k.current&&L&&setTimeout(()=>{I.current()},0),(0!==R||P&&(!F||(null==F?void 0:F.length)===0))&&C.oe.event.error({name:C.Mo.ListServerError,report:{logId:D}}),{statusCode:R,data:F,hasMore:P,logPb:D}}catch(e){r.current=!1,l(e=>(0,o._)((0,n._)({},e),{statusCode:1}))}}},[])}};var b=l("148459"),j=l("478279"),k=l("295443");let{WHALE_CUT_HEADER:N}=c,I=i.memo(function(e){let{itemClassName:t,index:l,ItemCompnent:n,renderItem:o,itemInfo:a,directRenderItem:s,withMask:d,isHighLight:c}=e,[v,f]=(0,i.useState)(c);return s?o(a,l,a.scrollLogPb):((0,i.useEffect)(()=>{if(f(c),c){let e=setTimeout(()=>{f(!1)},3e3);return()=>{clearTimeout(e)}}},[c]),(0,r.jsxs)("li",{className:u()(t,m.default.item,{[m.default.coveredMask]:d,[m.default.highLight]:v&&c}),children:[n?(0,r.jsx)(n,{itemInfo:a,index:l,logPb:a.scrollLogPb}):o(a,l,a.scrollLogPb),null==d?void 0:d(a)]}))});var E=i.forwardRef(function(e,t){var l,a;let{defaultDataList:d=[],defaultHasMoreFlag:c=!0,defaultStatusCode:h=0,fetchMoreData:p,scrollContainerEl:g,containerClassName:_="",itemClassName:C="",pageId:E="",renderItem:S,isHorizontal:L=!1,pause:M=!1,reloadNum:T=0,skeletonNum:R=20,renderSkeleton:F=null,panelLoginError:P=null,panelReloadDataError:D=null,panelNoData:A=null,panelNoMoreData:V=null,renderNoDataError:B=null,handleLoadEnd:H,dataFilter:U,onListRenderFinish:O,loginNeedLogMethod:z="",needSkelton:W=!1,needFirstPause:Z=!1,SkeletonComponent:$=null,ItemCompnent:K=null,setDataList:G=null,retryTimes:q=0,defaultWhaleDecisionCustom:X="",listFilterFn:Y,directRenderItem:Q=!1,withMask:J,containerNoLineHeight:ee=!1,needReCheckScroll:et=!0,buttomClassName:el,scrollListStyle:en={},blockType:eo,isLiveCategory:er=!1,renderList:ei,highLightAwemeId:ea}=e,{dispatch:es,userInfo:{isLogin:ed=!1}={}}=(0,i.useContext)(b.Context)||{},eu=(0,i.useContext)(j.C),ec=d||[],[ev,em]=(0,i.useState)({dataList:U?U(ec):ec,statusCode:h}),{dataList:ef,statusCode:eh}=ev,ep=(0,i.useRef)(c),eg=(0,i.useRef)(null),e_=(0,i.useRef)(!1),ex=(0,i.useRef)(null),ew=(0,i.useRef)(null),eC=(0,i.useRef)(null),ey=(0,i.useRef)(null),eb=(0,i.useRef)(!0),ej=(0,i.useRef)(!1),ek=(0,i.useRef)(!1),eN=(0,i.useRef)(!1),eI=(0,i.useRef)(T),eE=(0,i.useRef)(T),[eS,eL]=(0,i.useState)(W),eM=(0,i.useRef)(ef),[eT,eR]=(0,i.useState)(X),eF=(0,i.useRef)(1===c&&!ed&&X===N),eP=(0,i.useRef)([]);eM.current=ef,ej.current=Z,eb.current=!ef.length,ey.current=E,ew.current=L,ex.current=p,eN.current=M;let eD=(0,i.useRef)((null==d?void 0:d.length)||0);eD.current=(null==ef?void 0:ef.length)||0;let{blockNum:eA,setBlockNum:eV,actionCloseBlock:eB,setActionCloseBlock:eH,refBlockShowMore:eU,handleJumpBlock:eO,refLoginBlock:ez,getBlockNum:eW,transition:eZ,isShowDebounce:e$}=(0,k._g)({effectiveTime:null==eu?void 0:null===(l=eu.authorBlock)||void 0===l?void 0:l.effective_time,type:null==eu?void 0:null===(a=eu.authorBlock)||void 0===a?void 0:a.type,abtestData:eu,isLogin:ed});(0,i.useEffect)(()=>{if(ed||eT!==N&&(!eU.current||eB)){var e;eF.current=!1,(null===(e=eP.current)||void 0===e?void 0:e.length)>0&&em(e=>{var t;let l=[...eP.current];return eP.current=[],{statusCode:e.statusCode,dataList:null==e?void 0:null===(t=e.dataList)||void 0===t?void 0:t.concat(l)}})}else eT===N&&(eF.current=!0)},[ed,ef,eT,eB]);let eK=(0,i.useMemo)(()=>{let e=[];for(let t=0;t<R;t++)e.push({type:1,data:e});return e},[F||$?R:0]),{loadMore:eG}=y({refFetchMore:ex,setScrollData:em,refLoading:e_,disableFetchRef:eF,refBlockShowMore:eU,refPageId:ey,refTotalReloadNum:eI,refAvailableReloadNum:eE,getBlockNum:eW,actionCloseBlock:eB,whaleDecisionCustom:eT,setWhaleDecisionCustom:eR,refListLength:eD,refLoginBlock:ez,isLogin:ed,abTestData:eu,WHALE_CUT_HEADER:N,dataFilter:U,dataListRef:eM,hasMoreRef:ep,listFilterFn:Y,refScrollCheck:eC,blockType:eo,hideListRef:eP,needReCheckScroll:et}),eq=i.useCallback(async()=>{let e;for(let l=0;l<q;l++){var t;if(!((null==(e=await eG({errorRetry:l!==q-1}))?void 0:e.hasMore)&&(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.length)===0))break}return e},[q,eG]),eX=(0,i.useMemo)(()=>q?eq:eG,[eq,eG]);eC.current=i.useCallback(async()=>{if(!!eg.current&&!eN.current&&!!ep.current&&(!ej.current||!!ek.current||!!eb.current))if(eb.current)await eX();else{let e=0,t=0,l=eg.current.getBoundingClientRect();if(g){let n=g.getBoundingClientRect();e=l.right-n.right,t=l.bottom-n.bottom}else e=l.right-window.innerWidth,t=l.bottom-window.innerHeight;(null==eg?void 0:eg.current)&&!eN.current&&(!ew.current&&t<=800?await eX():ew.current&&e<=500&&await eX())}},[]);let eY=i.useCallback(async()=>{ek.current=!1,em(e=>(0,o._)((0,n._)({},e),{statusCode:0})),await eX()},[]),eQ=i.useCallback(e=>{ek.current=!1,ep.current=!0,!(null==e?void 0:e.length)&&eL(!0),em(t=>(0,o._)((0,n._)({},t),{statusCode:0,dataList:e||[]})),eP.current=[]},[]);return(0,i.useImperativeHandle)(t,()=>({reload:eY,reset:eQ,getTotal:()=>ef.length,getDataList:()=>ef,getStatusCode:()=>eh,getListClientRect:()=>{var e,t;return null===(t=eg.current)||void 0===t?void 0:null===(e=t.getBoundingClientRect)||void 0===e?void 0:e.call(t)},getTargetNode:function(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===(t=eg.current)||void 0===t?void 0:null===(e=t.childNodes)||void 0===e?void 0:e[l]},locateSelectVideo:function(e){var t,l;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,r=null===(l=eg.current)||void 0===l?void 0:null===(t=l.childNodes)||void 0===t?void 0:t[e];if(!r)return;let i=null==r?void 0:r.offsetParent,a=null==r?void 0:r.offsetTop;for(;i&&i!==document.body&&i!==g;)a+=null==i?void 0:i.offsetTop,i=i.offsetParent;(0,v.d)(g||window,a+n,o)},getHasMore:()=>ep.current,scrollCheck:()=>{eC.current()},setScrollData:e=>{em(t=>(0,n._)({},t,e))},loadMoreData:async function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return ep.current?await eX(...t):{statusCode:0,data:[],hasMore:0,logPb:""}},resetRes:e=>{ep.current=e.hasMore,em({statusCode:e.statusCode,dataList:e.dataList})}}),[eY,eQ,ef,eh,eX,g]),(0,i.useEffect)(()=>{null==G||G(ef),ef.length>0&&(null==O||O())},[ef]),(0,i.useEffect)(()=>{if(M)return;let e=g||document,t=s()(()=>{eC.current()},50,{leading:!0,trailing:!0,maxWait:100}),l=s()(()=>{let e=eg.current.getBoundingClientRect();if(!!e.width&&!!e.height)eC.current()},50,{leading:!0,trailing:!0,maxWait:100});return!ep.current&&H&&H(),e&&ep.current&&0===eh&&(e.addEventListener("scroll",t),window.addEventListener("resize",l),t()),()=>{e&&(e.removeEventListener("scroll",t),window.removeEventListener("resize",l))}},[g,eX,H,eh,M]),(0,i.useEffect)(()=>{(null==ef?void 0:ef.length)||0!==eh||!ep.current?eL(!1):eL(!0)},[ef,ep,eh]),(0,r.jsxs)(r.Fragment,{children:[ei?(0,r.jsx)("div",{className:u()(_,{[m.default.noLineHeight]:J||ee}),ref:eg,style:en,"data-e2e":"scroll-list",children:null==ei?void 0:ei(ef)}):(0,r.jsxs)("ul",{className:u()(_,{[m.default.noLineHeight]:J||ee}),ref:eg,style:en,"data-e2e":"scroll-list",children:[ef.map((e,t)=>(0,i.createElement)(I,{itemClassName:C,index:t,ItemCompnent:K,renderItem:S,withMask:J,itemInfo:e,key:(null==e?void 0:e.key)||`li_${t}`,directRenderItem:Q,isHighLight:ea&&ea===(null==e?void 0:e.awemeId)})),eS&&eK.map((e,t)=>(0,r.jsx)("li",{className:u()(C,m.default.item),children:$&&(0,r.jsx)($,{})||F()},`li_skelton_${t}`))]}),(0,r.jsx)(w,{abTestData:eu,refBlockShowMore:eU,actionCloseBlock:eB,isLogin:ed,setActionCloseBlock:eH,blockNum:eA,setBlockNum:eV,dispatch:es,refLoginBlock:ez,handleJumpBlock:eO,disableFetchRef:eF,loadMoreData:eX,handleUnLoginClick:e=>{var t,l,n;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),(0,x.default)({success:async()=>{null==es||es({type:"updateUserInfo"}),eF.current=!1,eU.current=!1,eX()},enterMethod:"",headerText:"登录后查看更多作品",next:`https://${null===(n=window)||void 0===n?void 0:null===(l=n.location)||void 0===l?void 0:l.host}`})},notAnimate:!0,children:(0,r.jsx)("div",{className:u()(m.default.bottomWrap,el),style:{width:L?"auto":"100%"},children:(0,r.jsx)(f.n,{statusCode:eh,dataList:ef,renderNoDataError:B,loginNeedLogMethod:z,panelNoData:A,panelLoginError:P,panelNoMoreData:V,panelReloadDataError:D,reload:eY,hasMoreData:ep.current,onClickPauseBtn:async()=>{ek.current=!0,em(e=>(0,n._)({},e)),await eX()},isNeedFirstPause:ej.current,isClickMore:ek.current,upperLoadingLayer:!1,isLiveCategory:er})})})]})})},456641:function(e,t,l){l.d(t,{n:function(){return d}});var n=l(259202);l(611542);var o=l(432097),r=l(550245),i=l(560651),a=l(110541);function s(e){let{reload:t,isLiveCategory:l}=e;return(0,n.jsxs)("div",{className:a.default.noMoreText,children:[l?"暂时没有更多了，可以一会":"服务异常，重新",(0,n.jsx)("span",{onClick:t,className:a.default.opBtn,children:"刷新"}),l?"试试":"拉取数据"]})}function d(e){let{statusCode:t,dataList:l,renderNoDataError:d,loginNeedLogMethod:u,panelNoData:c,panelLoginError:v,panelNoMoreData:m,panelReloadDataError:f,reload:h,hasMoreData:p,onClickPauseBtn:g,isNeedFirstPause:_,isClickMore:x,upperLoadingLayer:w=!1,isLiveCategory:C=!1}=e,y=null;return 2===t?y=v||(0,n.jsx)(i.x,{enterMethod:u}):0===t?y=p?_&&!x?(0,n.jsx)("div",{className:a.default.firstReqBtnWrapper,children:(0,n.jsx)(o.zx,{theme:"solid",type:"secondary",style:{width:"100%"},size:"small",onClick:g,children:"点击查看更多"})}):(0,n.jsx)(r.g,{text:"",upperLayer:w}):0===l.length?c||(0,n.jsx)("div",{className:a.default.noMoreText,children:"没有数据"}):m||(0,n.jsx)("div",{className:a.default.noMoreText,children:"暂时没有更多了"}):(0===l.length&&(y=null==d?void 0:d(t)),!y&&(y=f||(0,n.jsx)(s,{reload:h,isLiveCategory:C}))),(0,n.jsx)(n.Fragment,{children:y})}},560651:function(e,t,l){l.d(t,{x:function(){return u}});var n=l("259202"),o=l("611542"),r=l("245086"),i=l("110541"),a=l("354795"),s=new a.h({loiginButtonClick:{eventName:"login_button_click",params:{enter_from:"",url_path:""}},loiginButtonShow:{eventName:"login_button_show",params:{enter_from:"",url_path:""}}}),d=l("554898");function u(e){let{enterMethod:t}=e;return(0,o.useEffect)(()=>{s.sendLog("loiginButtonShow",{enter_from:(0,r.yW)(),url_path:window.location.pathname||""})},[]),(0,n.jsxs)("div",{className:i.default.abContainer,children:[(0,n.jsx)("div",{className:i.default.abNoMoreText,children:"登录后可查看更多精彩视频"}),(0,n.jsx)("div",{className:i.default.abOpBtn,onClick:()=>{(0,d.default)({success:()=>{location.reload()},enterMethod:t}),s.sendLog("loiginButtonClick",{enter_from:(0,r.yW)(),url_path:window.location.pathname||""})},children:"点击登录"})]})}},513519:function(e,t,l){l.r(t),l.d(t,{ConfirmModalOnEl:function(){return _},renderWebConfirm:function(){return x},showWebConfirm:function(){return h.Z}});var n=l(590921),o=l(874155);l(612222);var r=l(259202),i=l(611542),a=l(825211),s=l.n(a),d=l(781111),u=l(432097),c=l(816356),v=l(721975),m=l(456742),f=l(699233),h=l(530147);let p=e=>{let{children:t,title:l,onCancel:n,closeBtn:o,panelStyle:a={},titleStyle:d={},maskClosable:u=!0,className:h,renderContent:p,content:g}=e,_=i.useCallback(e=>{e.stopPropagation(),u&&n&&n(!1)},[n,u]);return(0,r.jsx)("div",{onMouseDown:e=>e.stopPropagation(),onMouseUp:e=>e.stopPropagation(),children:(0,r.jsx)(m.T6,{className:v.default.mask,onClick:_,children:(0,r.jsxs)("div",{className:s()(v.default.modalContainer,h),style:a,onClick:e=>{e.stopPropagation()},children:[o&&(0,r.jsx)("div",{className:v.default.close,onClick:_,children:(0,r.jsx)(f.Z,{width:36,height:36,src:c.Z,color:"#A9AAB7"})}),l&&(0,r.jsx)("div",{className:v.default.title,style:d,children:l}),"function"==typeof p?p():g?(0,r.jsx)("p",{className:v.default.content,children:g}):void 0,(0,r.jsx)("div",{className:v.default.buttonCt,children:t})]})})})},g=e=>{let{cancelBtnText:t="取消",confirmBtnText:l="确认",onCancel:i,onConfirm:a,onlyConfirmButton:d=!1,confirmBtnProps:c={}}=e;return(0,r.jsx)(p,(0,o._)((0,n._)({},e),{children:(0,r.jsxs)("div",{className:v.default.buttonSpaceBetween,children:[!d&&(0,r.jsx)(u.zx,{theme:"solid",type:"secondary",className:s()(v.default.button,v.default.cancel),onClick:i,children:t}),(0,r.jsx)(u.zx,(0,o._)((0,n._)({theme:"solid",className:s()(v.default.button),onClick:a},c),{children:l}))]})}))},_=e=>{let[t,l]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=document.createElement("div"),t=document.body;return t.appendChild(e),l(e),()=>{t.removeChild(e)}},[]),t?d.createPortal((0,r.jsx)(g,(0,n._)({},e)),t):null},x=e=>(0,r.jsx)(g,(0,n._)({},e));t.default=g},687999:function(e,t,l){l.d(t,{P:function(){return p}}),l("347885");var n=l("259202"),o=l("611542"),r=l("825211"),i=l.n(r),a=l("606660"),s=l("403335"),d=l("699233"),u=l("456713"),c=l("590921"),v=l("874155");let m=(0,o.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,v._)((0,c._)({width:18,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M17.448 17.448a1.886 1.886 0 0 1-2.668 0L9 11.668l-5.78 5.78A1.886 1.886 0 1 1 .552 14.78L6.332 9 .552 3.22A1.886 1.886 0 1 1 3.22.552L9 6.332l5.78-5.78a1.886 1.886 0 1 1 2.668 2.668L11.668 9l5.78 5.78a1.886 1.886 0 0 1 0 2.668z",fill:"#fff"})}))),f=(0,o.forwardRef)((e,t)=>(0,n.jsx)("svg",(0,v._)((0,c._)({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,n.jsx)("path",{d:"M16 4l-8 8.14L16 20",stroke:"#fff",strokeOpacity:".7",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",shapeRendering:"crispEdges"})})));var h=l("716902");let p=e=>{let{onClick:t,isClientMiniWin:l,isBackSvg:o=!1,clientHomeStyle:r}=e,c=[a.ClientHomeStyle.V1,a.ClientHomeStyle.V2,a.ClientHomeStyle.V3].includes(r),v=!(o||c);return(0,n.jsxs)("div",{className:i()(h.default.container,"isDark",{[h.default.hide]:l},c&&h.default.clientHomeStyleWrap),onClick:t,children:[(0,n.jsx)("div",{className:h.default.circle}),c&&(0,n.jsx)(u.z,{className:i()(h.default.back),svg:(0,n.jsx)(s.Z,{style:{fontSize:"24px"}})}),o&&!c&&(0,n.jsx)(d.Z,{src:f,className:h.default.back,viewBox:"0 0 24 24"}),v&&(0,n.jsx)(d.Z,{src:m,className:h.default.close,viewBox:"0 0 18 18"})]})}},613470:function(e,t,l){l.r(t),l.d(t,{default:function(){return tQ}});var n=l("590921"),o=l("874155"),r=l("250751");l("613518"),l("999921"),l("227470"),l("459167"),l("612222"),l("724356"),l("572521"),l("347885");var i=l("259202"),a=l("611542"),s=l("781111"),d=l("825211"),u=l.n(d),c=l("283132"),v=l("135524"),m=l("732515"),f=l("583128"),h=l("442183"),p=l("819769"),g=l("356789"),_=l("713017"),x=l("452300"),w=l("21693"),C=l("13351"),y=l("539073"),b=l("552432"),j=l.n(b),k=l("305452"),N=l("895184"),I=l("837892");let E=e=>{let{abtestData:t,closeModal:l,container:n,isClientMiniWin:o=!1,modalEnterFrom:r}=e,i=(0,a.useRef)(null),s=(0,a.useRef)([]),d=(0,a.useRef)(null),u=(0,a.useRef)(null),v=(0,a.useRef)(0);v.current=(0,_.vU)()?120:0;let m=(0,a.useCallback)((e,t)=>{let l=0,n=e.slice(Math.max(e.length-t,1));for(let e=0;e<n.length;e++)l+=n[e];return Math.ceil(l/t)},[]),f=(0,a.useCallback)(e=>{var t;null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||e.stopPropagation(),i.current&&clearTimeout(i.current),i.current=setTimeout(()=>{s.current=[]},400);let l=new Date().getTime(),n=e.wheelDelta||-e.deltaY||-e.detail,o=Math.max(-1,Math.min(1,n)),a=void 0!==e.wheelDeltaX||void 0!==e.deltaX,f=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!a;s.current=[...s.current,v.current+Math.abs(n)];let h=l-d.current;d.current=l,h>400&&1===s.current.length&&(s.current=[,,].fill(s.current[0]),u.current=!1);let _=m(s.current,20),x=_>m(s.current,40);x&&!u.current&&f&&((0,p.Vv)(c.PagingType.scroll),o<0?(g.commonEvent.emit("changeNext",{from:"scroll",triggerFrom:r}),g.emit(g.EVENT.reportPlayNext,{clickFrom:"scroll"})):(g.commonEvent.emit("changePrev",{from:"scroll",triggerFrom:r}),g.emit(g.EVENT.reportPlayPrev,{clickFrom:"scroll"})),u.current=!0),!x&&u.current&&f&&(u.current=!1)},[]);return(0,a.useEffect)(()=>(null==n||n.addEventListener("wheel",f),()=>{null==n||n.removeEventListener("wheel",f)}),[n]),(0,k.o)(()=>{let e=j()(e=>{if(e.nativeEvent)return;let t=o?[38]:[38,87],l=o?[40]:[40,83],n=p.Le.getConfig(p.gI.DisableNextPre);!t.includes(e.keyCode)||e.shiftKey||n&&38===e.keyCode?l.includes(e.keyCode)&&!e.shiftKey&&(!n||40!==e.keyCode)&&((0,p.Vv)(c.PagingType.hotkey),g.commonEvent.emit("changeNext",{from:"keyboard"}),g.emit(g.EVENT.reportPlayNext,{clickFrom:"keyboard"})):((0,p.Vv)(c.PagingType.hotkey),g.commonEvent.emit("changePrev",{from:"keyboard"}),g.emit(g.EVENT.reportPlayPrev,{clickFrom:"keyboard"}))},500,{leading:!0,trailing:!1});return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t,o]),(0,a.useEffect)(()=>{let e=e=>{if(e.shiftKey||e.metaKey||e.ctrlKey||(0,N.r)())return;let t=p.Le.getConfig(p.gI.DisableExit);"Escape"===e.code&&!o&&!t&&l({click_method:"esc"}),e.preventDefault()};return I.k.bind("Escape",e),()=>{I.k.remove("Escape",e)}},[l,o]),null},S=e=>{let{originAwemeInfo:t}=e,[l,n]=(0,a.useState)(""),[o,r]=(0,a.useState)(!1),[i,s]=(0,a.useState)(t);return{slideVideoTab:l,setSlideVideoTab:n,modalAwemeInfo:i,setModalAwemeInfo:s,globalIsSideBarShow:o,setIsSideBarShowFunc:r}},L=e=>{let{currentNumber:t}=e,l=(0,a.useRef)(t),n=(0,a.useRef)(!0);return -1===l.current&&-1!==t&&(l.current=t),l.current!==t&&(n.current=!1),n.current};var M=l("354795"),T=new M.h({closePlayer:{eventName:"close_player",params:{enter_from:"",tab_name:"",click_method:""}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",play_material:"video"}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"click_button",play_material:"video"}},modalNextVideoUnready:{eventName:"modal_next_video_unready",params:{error:"",enter_from:"",group_id:"",log_pb:""}},modalNextVideoView:{eventName:"modal_next_video_view",params:{index:0,success:!0,error:"",enter_from:"",group_id:"",log_pb:""}}}),R=l("528386"),F=l("315100");let P=e=>window.location.href.includes(e)||window.location.href.includes("user/self"),D=e=>{let{awemeInfoListRef:t,userInfo:l,currentNumber:n}=e,[o,r]=(0,a.useState)(F.Kw.NotShow);return(0,a.useEffect)(()=>{var e,o,i,a;let s=!1,d=t.current,u=async()=>{var e,t;let o=await (0,F.AH)({userId:null==l?void 0:null===(e=l.info)||void 0===e?void 0:e.uid,itemId:null===(t=d[n])||void 0===t?void 0:t.awemeId});!s&&!o.statusCode&&r(o.status)};return P(null==l?void 0:null===(e=l.info)||void 0===e?void 0:e.secUid)&&d[n]&&(null===(i=d[n])||void 0===i?void 0:null===(o=i.authorInfo)||void 0===o?void 0:o.uid)===(null==l?void 0:null===(a=l.info)||void 0===a?void 0:a.uid)&&u(),()=>{s=!0}},[n,l]),{asrState:o}};var A=l("773627"),V=l("181242"),B=l("517381"),H=l("440159");let U=e=>{var t,l;let{item:r,isActive:s,customProps:d,playNextFunc:u,playPrevFunc:c,swiper:v,onLivePlay:m,onLivePause:f,isShowGuide:h,useNewUserSoundGuide:p}=e,{userContext:g,abtestData:_}=d,{userInfo:x}=g||{},{isLogin:w}=x||{};(0,a.useEffect)(()=>{if(s&&v){try{null==v||v.on("changeNext",u),null==v||v.on("changePrev",c)}catch(e){}return()=>{try{null==v||v.off("changeNext",u),null==v||v.off("changePrev",c)}catch(e){}}}},[s,u,c,v]);let C=(0,a.useCallback)(()=>{m(r)},[r]),y=(0,a.useCallback)(()=>{f(r)},[r]);return(0,i.jsx)(B.K6,(0,o._)((0,n._)({},r),{isShow:s,isActive:s,customProps:d,source:{url:r.authorInfo.url,userName:`@ ${r.authorInfo.remarkName||r.authorInfo.nickname}`},title:{clamp:1,text:r.title},gameName:"",scale:3/4,showUserCountInTag:!0,disableLiveCoverBorder:!0,isLogReady:w,userInfo:x,isEnd:2!==r.status,abTestData:_,logParams:(0,n._)({},null!==(l=null==r?void 0:r.logParams)&&void 0!==l?l:{},(null==r?void 0:r.searchLogParams)?{search_params:null==r?void 0:r.searchLogParams}:{},null==d?void 0:null===(t=d.logParams)||void 0===t?void 0:t.live_log_params),onPlay:C,onPause:y,onDestroy:y,enableLiveInfo:!0,isModal:!0,isShowGuide:h,useNewUserSoundGuide:p}))},O=e=>{let{item:t,videoRef:l}=e;return t.awemeType===v.e.LiveCard?(0,i.jsx)(U,(0,o._)((0,n._)({},e),{ref:l})):(0,i.jsx)(H.Z,(0,o._)((0,n._)({},e),{isMultiInstanceScene:!0,ref:l}))};l("632852");var z=l("538846"),W=l("799506"),Z=l("137682"),$=l("687999"),K=l("324887"),G=l("998251"),q=l("913046");let X=(e,t,l,n)=>{let[o,r]=(0,a.useState)(!0),[i,s]=(0,a.useState)(!1),{handleHiddenLog:d}=(0,q.s)(),[u,c]=(0,a.useState)((0,N.r)()),v=(0,a.useRef)(null),m=(0,a.useRef)(!1),{run:f}=(0,G.Z)(()=>{r(!0)},500,[],{trailing:!1,leading:!0}),{run:h}=(0,G.Z)(async()=>{r(m.current||!1)},3e3),p=()=>{m.current=!0},g=()=>{m.current=!1};return(0,k.o)(()=>{var e,n,o,r,i,a;if(!!t&&!!l)return null===(n=t.config)||void 0===n||null===(e=n.el)||void 0===e||e.addEventListener("mousemove",f),null===(r=t.config)||void 0===r||null===(o=r.el)||void 0===o||o.addEventListener("mousemove",h),null===(i=v.current)||void 0===i||i.addEventListener("mouseenter",p),null===(a=v.current)||void 0===a||a.addEventListener("mouseleave",g),()=>{var e,l,n,o,r,i;null===(l=t.config)||void 0===l||null===(e=l.el)||void 0===e||e.removeEventListener("mousemove",f),null===(o=t.config)||void 0===o||null===(n=o.el)||void 0===n||n.removeEventListener("mousemove",h),null===(r=v.current)||void 0===r||r.removeEventListener("mouseenter",p),null===(i=v.current)||void 0===i||i.removeEventListener("mouseleave",g)}},[t,l]),(0,k.o)(()=>{if(!l)return;let e=()=>{c((0,N.r)())};return document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e)}},[l]),(0,a.useEffect)(()=>{r(!0),m.current=!1,l&&h()},[l,e,n,u]),(0,a.useEffect)(()=>{s(o)},[o]),{isShowExtra:i,extraRef:v,searchBarProps:{onHistoryClick:e=>{let{text:t}=e.currentTarget.dataset;return d(t)},onSearchClick:e=>d(e),onInputKeyDown:(e,t)=>{if("Enter"===(0,W.CS)(e))return d(t)}}}},Y=(0,z.ZP)(()=>Promise.resolve().then(l.bind(l,678808)),{resolveComponent:e=>{let{SearchBar:t}=e;return t},ssr:!1});var Q=e=>{var t,l,r,s,d;let{isInnerFeed:c,modalInnerFeedCard:v,isClientMiniWin:m,refPlayer:f,onCloseButtonClick:h,abtestData:p,awemeInfoList:g,currentNumber:_,modalEnterFrom:x,isSelf:w,userInfo:C,logParams:y,awemeFeed:b,searchParams:j,slideVideoTab:k,currentAwemeInfo:N,close:I}=e,{handleHiddenLog:E}=(0,q.s)(),{isShowExtra:S,extraRef:L}=X(N,null==f?void 0:null===(t=f.current)||void 0===t?void 0:t.getPlayer(),!0,c),M=(0,a.useMemo)(()=>(null==p?void 0:p.discoverModalExtraHide)&&"waterFall"===x,[x,null==p?void 0:p.discoverModalExtraHide]);return m?null:(0,i.jsxs)("div",{ref:L,className:u()({[Z.default.extraTL]:M,[Z.default.extraShow]:M&&S}),children:[c||v?(0,i.jsx)(K.N,{positionFixed:!0,exitTextProps:{getCurrentTab:()=>{var e,t;return(null==f?void 0:null===(t=f.current)||void 0===t?void 0:null===(e=t.getCurTab)||void 0===e?void 0:e.call(t))||k},modalEnterFrom:x,isSelf:w,uidEquals:(null==g?void 0:null===(r=g[_])||void 0===r?void 0:null===(l=r.authorInfo)||void 0===l?void 0:l.uid)===(null==C?void 0:null===(s=C.info)||void 0===s?void 0:s.uid)},onHandleReturn:()=>{var e;T.sendLog("closePlayer",(0,o._)((0,n._)({},y,(null==g?void 0:null===(e=g[_])||void 0===e?void 0:e.logParams)||{}),{enter_from:b.getValue("feedType"),click_method:"button"})),b.dispatch("modalAwemeInfo",null),v&&(null==I||I())},clientHomeStyle:null==p?void 0:p.clientHomeStyle}):(0,i.jsx)($.P,{onClick:h,isClientMiniWin:m,clientHomeStyle:null==p?void 0:p.clientHomeStyle}),v&&!g[_]?null:(0,i.jsx)("div",{className:u()(Z.default.searchCt,"isDark"),children:(0,i.jsx)(Y,{customProps:{isModalVideo:!0,isSmoothInnerFeed:c,searchParams:j,logParams:"general_search"===x?(0,n._)({},y,(null==g?void 0:null===(d=g[_])||void 0===d?void 0:d.logParams)||{}):void 0},userInfo:C,abTestData:p,onSearchClick:e=>E(e),onHistoryClick:e=>{let{text:t}=e.currentTarget.dataset;return E(t)},onInputKeyDown:(e,t)=>{if("Enter"===(0,W.CS)(e))return E(t)},playerProps:{awemeInfo:g[_],scene:"modal",modalEnterFrom:x}})})]})},J=l("775583"),ee=l("697878"),et=l("736909"),el=l("124797"),en=l("837305"),eo=l("829833"),er=l("244307"),ei=l("421794"),ea=l("886276");let es=e=>{if((null==e?void 0:e.seriesInfo)||(null==e?void 0:e.mixInfo)){let{currentEpisode:t,totalEpisode:l,chargeCount:n}=(null==e?void 0:e.seriesInfo)||(null==e?void 0:e.mixInfo);if(n&&t>l-n)return!0}return!1};var ed=l("327630"),eu=l("593810"),ec=l("443747"),ev=l("623176");let em=e=>{let{player:t,awemeInfo:l,isActive:n,abtestData:o,modalEnterFrom:r}=e,i=c.ModalEnterFromVal.WaterFall===r;(0,a.useEffect)(()=>{let e;if(!t||!n||!i)return;let o=()=>{(t.cumulateTime?t.cumulateTime:0)>15e3&&((0,et.VY)({info:{[eu.BW.CompletePlayTime]:!0},awemeId:null==l?void 0:l.awemeId,abData:0}),clearInterval(e))},r=()=>{if((null==l?void 0:l.awemeType)!==68)(0,et.VY)({info:{[eu.BW.Finish]:!0},awemeId:null==l?void 0:l.awemeId,abData:0})};return t.once(ev.ENDED,r),()=>{o(),t.off(ev.ENDED,r),e&&clearInterval(e)}},[t,l,n])},ef=e=>{let{awemeInfo:t,isActive:l,modalEnterFrom:n}=e;(0,a.useEffect)(()=>{var e;let{discoverPageCurrentVideoId:o,discoverPageVideoVV:r=0}=p.Le.getConfig(p.gI.LandingPageGuideInfo)||{};l&&(e=[c.ModalEnterFromVal.Hot,c.ModalEnterFromVal.WaterFall],e.includes(n))&&o!==t.awemeId&&p.Le.setConfig(p.gI.LandingPageGuideInfo,{discoverPageVideoVV:r+1,discoverPageCurrentVideoId:t.awemeId},!0)},[l,t.awemeId])};var eh=l("825630"),ep=l("546186"),eg=l("281586"),e_=l("289290"),ex=l("497749"),ew=l("35515"),eC=l("690352"),ey=l("945363"),eb=l("433075"),ej=l("875164"),ek=l("401310"),eN=l("375456");let eI=e=>{let t=(0,ek.n)(),{awemeInfo:l,modalEnterFrom:n,isActive:o}=e;return(0,a.useRef)(null),(0,a.useEffect)(()=>{eN.s.getAllPlayer().filter(e=>eN.s.getPlayerScene(e.playerId)!==el.lT.Modal).forEach(e=>{var t;null===(t=e.pause)||void 0===t||t.call(e),e.config.autoplay=!1,e.autoplay=!1})},[]),(0,a.useEffect)(()=>{t&&o&&(0,eb.wS)(t.playerId,!0)},[t,o]),(0,a.useEffect)(()=>{var e,t,l;return sessionStorage.setItem("ModalRefresh","1"),null===(l=document)||void 0===l||null===(t=l.activeElement)||void 0===t||null===(e=t.blur)||void 0===e||e.call(t),()=>{let{url:e,query:t}=eC.parseUrl(location.href);delete t.modal_id,window.history.replaceState(null,"",eC.stringifyUrl({url:e,query:t}))}},[]),(0,a.useEffect)(()=>{if(l&&!(0,C.DT)()&&"recommendUpdateWindow"!==n&&n!==c.ModalEnterFromVal.FollowAuthorModal&&o){let{url:n,query:o}=eC.parseUrl(location.href);if(!o.modal_id){var e,t;(0,ey.t_)(en.SessionStorageKeys.BackURl,null===(t=window)||void 0===t?void 0:null===(e=t.location)||void 0===e?void 0:e.pathname)}o.modal_id=null==l?void 0:l.awemeId,window.history.replaceState(null,"",eC.stringifyUrl({url:n,query:o}))}},[l,o,n]),(0,a.useEffect)(()=>{ej.n.loginGuideShowed&&ej.n.destroy()},[]),(0,a.useEffect)(()=>{if(""===document.body.style.overflow)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[]),null};var eE=l("918036"),eS=l("478086"),eL=l("804929"),eM=l("935708");let eT=e=>{let{isActive:t,startTime:l,awemeInfo:n,isLogin:o=!1,isClientMiniWin:r=!1}=e,i=(0,ek.n)(),s=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{if(i&&t&&l>=3&&(0,ei.D)(n)&&o&&!r&&!s.current){let e=()=>{var e,t;null===(t=i.showPrompt)||void 0===t||t.call(i,{text:`上次播放至：${(0,eL.$y)(1e3*l)}`},{mode:"arrow",autoHide:!0,interval:3e3,preventScreenOverflow:!0,style:{left:`${1e3*l/(null==n?void 0:null===(e=n.video)||void 0===e?void 0:e.duration)*100}%`,bottom:"10px",padding:"8px 12px",borderRadius:"12px",backgroundColor:"#33343F",color:"#ffffff",fontSize:"12px",transition:"none",zIndex:"20"}}),s.current=!0};return i.once("play",e),()=>{i.off("play",e)}}if(i&&t&&l>=3&&o&&r){var e;null===(e=i.hidePrompt)||void 0===e||e.call(i)}},[i,t,l,n,o,r]),null},eR=e=>{let t=(0,eM.N)();return(0,i.jsx)(A.k,{componentName:"WaterLaterContinueTip",Slardar:t,children:(0,i.jsx)(eT,(0,n._)({},e))})};var eF=l("623258"),eP=l("82757"),eD=l("322859"),eA=l("137180"),eV=l("710046"),eB=l("374999"),eH=l("313330"),eU=l("690002"),eO=l("84930"),ez=l("84666"),eW=l("762152"),eZ=l("486799"),e$=l("767798"),eK=l("933305"),eG=l("891869"),eq=l("881246"),eX=l("91404"),eY=l("996677"),eQ=l("978521"),eJ=l("796033"),e0=l("312750"),e1=l("926879"),e2=l("571413"),e5=l("956642"),e3=l("81793"),e6=l("86510"),e4=l("227879"),e7=l("542434"),e8=l("995232"),e9=l("601475"),te=l("183062"),tt=l("713534"),tl=l("318822"),tn=l("604601"),to=l("455875"),tr=l("58259"),ti=l("586423"),ta=l("240576"),ts=l("946210"),td=l("751765"),tu=l("924764"),tc=l("856363"),tv=l("874754"),tm=l("351582"),tf=l("721066"),th=l("221159"),tp=l("458463"),tg=l("845899"),t_=l("99640"),tx=l("371442"),tw=l("966078"),tC=l("543899"),ty=l("183160"),tb=l("770662"),tj=l("232021");l("410326"),l("936737");var tk=l("975181"),tN=l("223842"),tI=l("52090"),tE=l("473087"),tS=l("165793"),tL=l("803383"),tM=l("752310"),tT=l("659361"),tR=l("797210");let tF=e=>{let{config:t,isInitPlayer:l}=e,n=(0,ek.n)();return(0,a.useEffect)(()=>{if(l&&n){let e=setTimeout(()=>{var e,l;!(null===(e=n.plugins)||void 0===e?void 0:e.srplugin)&&(null===(l=t.plugins)||void 0===l?void 0:l.includes(tT.o))&&(n.config.srplugin=t.srplugin,n.registerPlugin(tT.o),setTimeout(()=>{n.emit(tR.B.RegisterMissingSrPlugin)}))});return()=>{clearTimeout(e)}}},[n,l]),null},tP=e=>{let t=(0,eM.N)();return(0,i.jsx)(A.k,{componentName:"RegisterMissingPlugin",Slardar:t,children:(0,i.jsx)(tF,(0,n._)({},e))})},tD=(0,a.memo)((0,a.forwardRef)((e,t)=>{var l,r,s,d,m,p,g,x,w,y,b,j,k,N,I,E,S;let{isActive:L,isNext:M,isPrev:T,isFirst:R,isLast:F,awemeInfo:P,nextAwemeInfo:D,prevAwemeInfo:A,playNextFunc:V,abtestData:B,deleteCurrentSwiper:H,toggleComment:U,onAvatarClick:O,fullScreenTarget:z,logParams:W,videoToast:Z,followHandler:$,playPrevFunc:K,userInfo:G,dispatch:q,isAuthorCardShow:X,isShowRelatedCard:Y,moreBoxShowList:Q,videoHashtagClassName:ev,videoTags:eC,children:ey,disableAutoPlay:eb,shortCutFiltered:ej,positionBoxClassName:ek,customProps:eN,actionFollow:eL,actionUnFollow:eM,modalEnterFrom:eT,showPlaySwitch:tT=!0,isShowPageFullScreen:tR=!1,isShowCssFullScreenGuide:tF,isInnerFeed:tD,onCooperationAuthorClick:tA,isShowCooperation:tV,sideBarShow:tB,slardarInstance:tH,defaultIsPageFullScreen:tU,avatarTipText:tO,onRelatedClick:tz,onDislike:tW,onShopAnchorClick:tZ=()=>{},onShopAnchorMouseEnter:t$=()=>{},onShopAnchorMouseLeave:tK=()=>{},isShowGuide:tG,notCanMixListen:tq,openSpecificTab:tX,index:tY,isFullScreen:tQ,useNewUserSoundGuide:tJ,isMultiInstanceScene:t0,isUpperFeed:t1,isRevisitStart:t2,startTime:t5,chapterProps:t3,setContainerPlayer:t6}=e,t4=(0,a.useRef)(null),{isMainland:t7}=(0,a.useContext)(ed.k),{hasChapterBar:t8}=(0,ts.W)(B,P,null===(l=t4.current)||void 0===l?void 0:l.player),{isClientMiniWin:t9}=(0,a.useContext)(f.C),le=(0,C.DT)();ef({isActive:L,awemeInfo:P,modalEnterFrom:eT});let{noPaidVideo:lt}=(0,tf.B)({awemeInfo:P});(0,th.u)({awemeInfo:P,isInnerFeed:tD,player:null===(r=t4.current)||void 0===r?void 0:r.player});let ll=(0,ei.b)(P,B),{isDanmuIcon:ln,hideList:lo,isChapterIcon:lr,chapterMaxWidth:li}=(0,tp.C)({isActive:L,abtestData:B,player:null===(s=t4.current)||void 0===s?void 0:s.player,hasChapter:t8,showInnerAutoplay:tD&&!lt,showAutoPlay:!eb&&!lt,showFakeScreen:(null==P?void 0:P.awemeType)!==v.e.Note,showPlayBackRatio:(null==P?void 0:P.awemeType)!==v.e.Note,showWatchLater:ll});(0,tg.j)({player:null==t4?void 0:null===(d=t4.current)||void 0===d?void 0:d.player}),(0,t_._)({awemeInfo:P,prevAwemeInfo:A,isInnerFeedModel:tD&&L}),(0,tx.V)({awemeInfo:P}),(0,tS.g)({player:null==t4?void 0:null===(m=t4.current)||void 0===m?void 0:m.player,awemeInfo:P}),(0,tL.G)({player:null==t4?void 0:null===(p=t4.current)||void 0===p?void 0:p.player,awemeInfo:P,scene:"pc_web_mix_aweme",abtestData:B}),(0,a.useImperativeHandle)(t,()=>{var e;return{getPlayer:()=>t4.current.getPlayer(),player:null===(e=t4.current)||void 0===e?void 0:e.player}}),(0,tw.D)({awemeInfo:P,isActive:L});let la=(0,a.useMemo)(()=>{let e={isModal:!0},t=(0,td.YO)({abtestData:B,awemeInfo:P,isInnerFeed:tD,modalEnterFrom:eT,isModalVideo:!0});return Object.assign(e,(0,ta.k)({awemeInfo:P,abtestData:B,enableSr:t}),(0,tk.QF)({awemeInfo:P,abtestData:B,enableSr:t})),(0,tu.Zf)({config:e,awemeInfo:P,abtestData:B}),(0,tc.LX)({config:e,awemeInfo:P,abtestData:B,isMultiInstanceScene:t0}),(0,td.nq)({config:e,abtestData:B,enableSr:t}),e.startTime=(0,ep.v)(P.awemeId),[c.ModalEnterFromVal.GeneralSearch,c.ModalEnterFromVal.Search].includes(eT)&&!tD&&(e.progressDot=(0,ea.x)(null==P?void 0:P.videoAbstract)),e},[P,B,eT,tD]),ls=(0,a.useMemo)(()=>(0,J.Jt)(P),[P]),ld=(0,a.useMemo)(()=>(0,J.gc)(P),[P]),lu=(0,a.useMemo)(()=>{var e;return[...(null==Q?void 0:Q.notInterestingIcon)?[]:[null===(e=ee.getShortcut().dislike)||void 0===e?void 0:e.badgeText],...ej||[]]},[null==Q?void 0:Q.notInterestingIcon,ej]),lc=(0,a.useCallback)(()=>{c.ModalEnterFromVal.WaterFall===eT&&(0,et.VY)({info:{[eu.BW.Finish]:!0},awemeId:null==P?void 0:P.awemeId,abData:0})},[B,eT]);(0,tC.O)({player:null===(g=t4.current)||void 0===g?void 0:g.player,isActive:L,awemeInfo:P,abtestData:B}),(0,ty.w)({player:null===(x=t4.current)||void 0===x?void 0:x.player,isActive:L,awemeInfo:P,abtestData:B,isInnerFeed:tD}),(0,tb.U)({config:la,isActive:L,awemeInfo:P,player:null===(w=t4.current)||void 0===w?void 0:w.player}),(0,tj.Q)({player:null===(y=t4.current)||void 0===y?void 0:y.player,isActive:L,awemeInfo:P,abtestData:B,isSliderVideo:!0,isKeyWorkCancalLike:!0,shortcutExclude:[]}),em({player:null===(b=t4.current)||void 0===b?void 0:b.player,isActive:L,awemeInfo:P,abtestData:B,modalEnterFrom:eT});let lv=(0,a.useRef)(!1),lm=(0,a.useMemo)(()=>L||T||M,[L,T,M]);lv.current=lm;let lf=(0,h.x)();return(0,i.jsxs)(eh.f,{xgplayerConfig:la,isInitPlayer:lm,style:{height:"100%",width:"100%"},className:u()(ec.default.container,"chapterPlayerStyle","modalPlayer","lowPopup",[c.ModalEnterFromVal.GeneralSearch,c.ModalEnterFromVal.Search].includes(eT)?"searchModal":""),ref:t4,slardarInstance:tH,reuseConfig:void 0,setContainerPlayer:t6,abtestData:B,children:[(0,i.jsx)(tN.V,{awemeInfo:P,isActive:L,timeout:(0,_.b_)()?4e3:2e3,isFirst:!0}),(0,i.jsx)(eg.p,{scene:el.lT.Modal,isActive:L}),(0,i.jsx)(ep.t,{awemeInfo:P,player:null===(j=t4.current)||void 0===j?void 0:j.player,isActive:L}),(0,i.jsxs)(e_.n,{isActive:L,controlHeight:el.fp.MidHigh,position:"right",awemeInfo:P,className:(0,o._)((0,n._)({},ek),{right:u()(null==ek?void 0:ek.right,{fullscreenModal:tQ})}),abtestData:B,isClientMiniWin:t9,children:[tT&&!t9&&(0,i.jsx)(ex.I,{playNextFunc:V,playPrevFunc:K,disablePrev:R&&!(X||Y)||(X||Y)&&!A,disableNext:F&&!(X||Y)||(X||Y)&&!D,className:u()(ec.default.playSwitchContainer,"filter-bg")}),!t9&&(0,i.jsx)(ew.Interaction,{actionFollow:eL,actionUnFollow:eM,awemeInfo:P,toggleComment:U,loginUserInfo:G,loginDispatch:q,deleteCurrentSwiper:H,fullScreenTarget:z,onAvatarClick:O,abtestData:B,videoToast:Z,isActive:L,followHandler:$,reportExtraParams:W,moreBoxShowList:Q,onRelatedClick:tz,canShowAvatarFollowBtn:!ld,canShowAvatarTip:!ld,showMusicDetail:!(0,J.gc)(P),avatarTipText:tO,onDislike:tW,isSearchPlayer:"general_search"===eT,from:[c.ModalEnterFromVal.GeneralSearch,c.ModalEnterFromVal.Search].includes(eT)?"search":void 0})]}),(0,i.jsx)(eI,{awemeInfo:P,isActive:L,modalEnterFrom:eT}),!es(P)&&(0,i.jsx)(eE._,{awemeInfo:P,isActive:L,controlHeight:el.fp.MidHigh,showImg:!(0,_.G6)(),abtestData:B}),(null==P?void 0:null===(k=P.video)||void 0===k?void 0:k.duration)>18e4&&(0,i.jsx)(eS.S,{awemeInfo:P,isActive:L,isLogin:null==G?void 0:G.isLogin,startTime:t2?t5:0,isClientMiniWin:t9}),eT===c.ModalEnterFromVal.UserWatchLater&&(0,i.jsx)(eR,{awemeInfo:P,isActive:L,isLogin:null==G?void 0:G.isLogin,startTime:t5,isClientMiniWin:t9}),(0,i.jsx)(eF.V,{awemeInfo:P,isActive:L}),(null==P?void 0:null===(N=P.chargeInfo)||void 0===N?void 0:N.is_charge_content)&&(0,i.jsx)(eP.V,{abTestData:B,awemeInfo:P,isActive:L,isClientMiniWin:t9,isShowReplay:!t9}),eb?(0,i.jsx)(eD.r,{}):(0,i.jsxs)(i.Fragment,{children:[tD||lt?null:(0,i.jsx)(eA.kL,{isActive:L,awemeInfo:P,playNextFunc:V,customLocalStorage:[c.ModalEnterFromVal.Search,c.ModalEnterFromVal.GeneralSearch].includes(eT)?en.LocalStorageKeys.SearchHorizontalAutoPlay:void 0,ablePlayNext:!(F&&!(X||Y)||(X||Y)&&!D),shortcutDisabled:!1,abtestData:B,defaultVal:1}),tD&&!lt?(0,i.jsx)(eV.Ot,{isActive:L,awemeInfo:P,playPrevFunc:K,playNextFunc:V,ablePlayPrev:!((X||Y)&&!A),ablePlayNext:!((X||Y)&&!D),hide:lo.some(e=>e[0]===tp.p.InnerAutoPlayer),abtestData:B}):null]}),!lt&&(0,i.jsx)(eB.SD,{isActive:L,awemeInfo:P,abtestData:B,isInnerFeed:tD,hide:lo.some(e=>e[0]===tp.p.Clear)}),(0,i.jsx)(tP,{isInitPlayer:lm,config:la}),(0,i.jsx)(eH.k,{isActive:L,onVolumeShortCutChange:()=>{var e;(0,tv.t)(null===(e=t4.current)||void 0===e?void 0:e.player)}}),(0,i.jsx)(eU.g,{isActive:L,abtestData:B,awemeInfo:P,scene:"modal"}),(0,i.jsx)(eO.b,{isActive:L}),!(0,tm.GP)(P)&&(0,i.jsx)(ez.Z,{awemeInfo:P,userInfo:G,isActive:L,logParams:W,isFirst:R,isClientMiniWin:t9,isNext:M,isPrev:T}),(0,i.jsx)(eW.L,{awemeInfo:P,isActive:L,abtestData:B}),(0,i.jsx)(eZ.E,{isActive:L,awemeInfo:P,abtestData:B,userInfo:G,deleteCurrentSwiper:H,config:la,isNext:M,currentIndex:tY}),(0,i.jsx)(e$.h,{isActive:L}),(0,i.jsx)(eK.P,{isActive:L,awemeInfo:P,abtestData:B,userInfo:G}),(0,i.jsx)(eG.t,{isInnerFeed:tD,isModalVideo:!0,modalEnterFrom:eT,isActive:L,userInfo:G,dispatch:q,abtestData:B,awemeInfo:P,player:null==t4?void 0:null===(I=t4.current)||void 0===I?void 0:I.player,isClientMiniWin:t9}),tJ?(0,i.jsx)(tE._q,{isActive:L,awemeInfo:P,isShowGuide:tG,abtestData:B}):(0,i.jsx)(eq.x,{isActive:L,awemeInfo:P,abtestData:B,isShowGuide:tG,scene:"recommend"}),ll&&eT!==c.ModalEnterFromVal.UserWatchLater&&(0,i.jsx)(eX.vq,{isActive:L,awemeInfo:P,isLogin:null==G?void 0:G.isLogin,loginDispatch:q,toast:Z,logParams:W,abtest:B}),ls&&(0,i.jsx)(eY.FeedbackAd,{awemeInfo:P,deleteCurrentSwiper:H,abtestData:B}),(null==P?void 0:P.awemeType)===v.e.Note?(0,i.jsx)(eQ.PictureMode,{isActive:L,awemeInfo:P,logParams:W,playNextFunc:V,abTestData:B,ablePlayNext:!(F&&!(X||Y)||(X||Y)&&!D),playPrevFunc:K,ablePlayPrev:!(R&&!(X||Y)||(X||Y)&&!A),isClientMiniWin:t9,isShowSideBar:tB,onPlayFinish:lc}):null,(0,i.jsx)(eJ.q,{isActive:L,abtestData:B,awemeInfo:P,isInnerFeed:tD}),(0,i.jsx)(e0.PlayBackSetting,{disable:ls,isActive:L,awemeInfo:P,logParams:W,loginBlock:!(null==G?void 0:G.isLogin),loginDispatch:q,speedType:(0,_.G6)()?eo.$.Safari:eo.$.Normal}),ey,!t9||lf?(0,i.jsx)(e1.I,{isActive:L,fullScreenTarget:z,loginDispatch:q,abtestData:B,isLogin:!!(null==G?void 0:G.isLogin)}):null,t9?(0,i.jsxs)(i.Fragment,{children:[L&&(0,i.jsx)(to.MiniWinMask,{isActive:L,awemeInfo:P,abtestData:B,playPrevFunc:K,playNextFunc:V,disablePrev:R&&!(X||Y)||(X||Y)&&!A,disableNext:F&&!(X||Y)||(X||Y)&&!D,ablePlayNext:!(F&&!(X||Y)||(X||Y)&&!D),loginUserInfo:G,loginDispatch:q,fullScreenTarget:z,reportExtraParams:W,recordPreferVideoSwitch:!0}),L&&!lf&&(0,i.jsx)(tr.N,{awemeInfo:P})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e2.Danmaku,{isActive:L,awemeInfo:P,userInfo:G,loginDispatch:q,danmakuInfo:null==eN?void 0:eN.danmakuInfo,abtestData:B,isDanmuIcon:ln}),t8?(0,i.jsx)(e5.WC,{isActive:L,awemeInfo:P,userInfo:G,loginDispatch:q,abtestData:B,isChapterIcon:lr,chapterProps:t3,logParams:W,chapterMaxWidth:li}):null,le&&(0,i.jsx)(tI.zm,{isActive:L,awemeInfo:P,isInnerFeed:tD,abtestData:B}),tR&&(0,i.jsx)(e3.Vw,{awemeInfo:P,isShowGuide:tF,logParams:W,isActive:L,defaultIsPageFullScreen:tU,modalEnterFrom:eT,abtestData:B}),(0,i.jsxs)(e6.r,{isActive:L,controlHeight:el.fp.MidHigh,position:"bottom",awemeInfo:P,abtestData:B,children:[t7&&(0,er.n)(P)&&eT!==c.ModalEnterFromVal.RecommendUpdateWindow&&(0,i.jsx)(e4.n,{awemeInfo:P,onClick:tZ,isActive:L,onMouseEnter:t$,onMouseLeave:tK}),(0,i.jsx)(e7.VideoInfo,{isInnerFeed:tD,isActive:L,awemeInfo:P,userInfo:G,isTopicLinkSearchResult:!0,videoHashtagClassName:ev,modalEnterFrom:eT,videoTags:eT===c.ModalEnterFromVal.RecommendUpdateWindow?[]:eC,abTestData:B,isShowCreateTime:!0,onCooperationAuthorClick:tA,isShowCooperation:tV,showSideBar:tB,loginUserInfo:G,loginDispatch:q,fullScreenTarget:z,reportExtraParams:W,openSpecificTab:tX,canMixListen:!tq&&eT!==c.ModalEnterFromVal.RecommendUpdateWindow&&!tD,chapterProps:t3}),!!P.videoAbstract&&eT===c.ModalEnterFromVal.GeneralSearch&&!tD&&(0,i.jsx)(e8.y,{awemeInfo:P,isActive:L,showVideoInfo:!0,player:null===(E=t4.current)||void 0===E?void 0:E.player,logParams:W,isModal:!0,openSpecificTab:tX})]}),(0,i.jsx)(e9.h,{awemeInfo:P,isActive:L,userInfo:G,abtestData:B}),(0,i.jsx)(te.MenuList,{isActive:L,awemeInfo:P,abtestData:B,isSliderVideo:!0,isKeyWorkCancalLike:!0,shortcutExclude:[],shortCutFiltered:lu,showEnterDetail:!ls&&!ld,modalEnterFrom:eT,userInfo:G}),(0,i.jsx)(tt.B,{awemeInfo:P,abtestData:B,isActive:L}),(0,i.jsx)(tl.I,{abtestData:B,isActive:L,awemeInfo:P,logParams:W,isChapterScene:!0}),(null==lo?void 0:lo.length)>0&&(0,i.jsx)(tn.SettingList,{isActive:L,awemeInfo:P,hideList:lo,player:null==t4?void 0:null===(S=t4.current)||void 0===S?void 0:S.player,dispatch:q,abtestData:B,userInfo:G}),(0,i.jsx)(tM.P,{abtestData:B,isActive:L,controlHeight:el.fp.MidHigh})]}),"general_search"===eT&&(0,i.jsx)(ti.l,{awemeInfo:P,from:"modal_player",isActive:L,isUpperFeed:t1})]})}));var tA=l("695450"),tV=l("302774");let tB=()=>{let e=(0,a.useRef)({});return{recordLatestAwemeId:(0,a.useCallback)((t,l)=>{t&&l&&!e.current[l]&&(e.current[l]=!0,p.Le.setConfig(p.gI.FeedLatestViewedAweme,{awemeId:l}))},[])}};var tH=l("569900"),tU=l("412547"),tO=l("761417"),tz=l("558304");let tW=["search_multi_modal","waterFall","hot",/^channel/,/^music/,"favorite_collection","like","post","record","watch_later"];var tZ=l("448454"),t$=l("17764");let{useRecommendGuide:tK}=tA.Z,tG="modal-video-0",tq=()=>{let e=parseInt(tG.match(/\d+$/)[0]);e++,tG=tG.replace(/\d+$/,e)},tX=()=>{let e=parseInt(tG.match(/\d+$/)[0]);e--,tG=tG.replace(/\d+$/,e)},tY=e=>{var t,l,r,s,d,m;let{preloadReady:b,preloadAwemeList:j=[],userContext:k,abtestData:N,close:I,anyHooks:M,moreBoxShowList:F={notInterestingIcon:!0,unfollow:!0,report:!0,shortcutList:!1,dataAnalysis:!1,deleteSelfPost:!1},logParams:P,defaultCommentShow:B=!1,className:H,insertCommentId:U,disableSwitch:z=!1,disableAutoPlay:W=!1,originAwemeInfo:Z,modalId:$,uid:K,useOldModal:G,danmakuInfo:q,defaultShowSideBar:X,shortCutFilteredList:Y,modalEnterFrom:J="",collectFolderId:ee,collectionFolderInfo:et,isDefaultShowRelatedCard:el,modalInnerFeedCard:en,defaultForceOpenTab:eo,bingeInfo:er,container:ei,isSelf:ea,scene:es,notCanMixListen:ed,searchParams:eu,mouseScrollContainer:ec,searchFrom:ev,wrapperClassName:em}=e,{userInfo:ef}=k,eh=(0,a.useRef)(tG),ep=(0,a.useRef)(null),eg=(0,a.useRef)(null),e_=(0,a.useRef)(()=>{}),ex=(0,a.useRef)(()=>{T.sendLog("modalNextVideoUnready",(0,n._)({error:"正在加载下一个视频"},P)),R.F.info("正在加载下一个视频")}),ew=(0,a.useRef)(),eC=(0,a.useRef)(""),[ey,ej]=(0,a.useState)(!1),[ek,eN]=(0,a.useState)(-1),[eI,eE]=(0,a.useState)(!0),[eS,eL]=(0,a.useState)([]),[eM,eT]=(0,a.useState)(null),eR=(0,a.useRef)([]);eR.current=eS;let{awemeFeed:eF}=(0,t$.j)(),eP=eF.useValue("modalAwemeInfo",Boolean),eD=eF.useValue("innerFeedAwemeInfo"),[eA,eV]=(0,a.useState)(!0),[eB,eH]=(0,a.useState)(!0),[eU,eO]=(0,a.useState)(),[ez,eW]=(0,a.useState)(!1),eZ=(0,h.x)(),[e$,eK]=(0,a.useState)(Z),eG=(null==N?void 0:N.discoverSlideOptimize)&&(null==P?void 0:P.enter_from)==="discover";(0,a.useEffect)(()=>(p.Le.setConfig(p.gI.IsInModalVideo,{isInModal:!0}),p.Le.setConfig(p.gI.VideoPlayMethod,"auto"),g.emit(g.EVENT.videoPause),g.emit(g.EVENT.musicPause),g.emit(g.EVENT.searchMusicPause),g.emit(g.EVENT.livePause),p.Le.setConfig(p.gI.isVideoPlayed,null),g.emit(g.EVENT.enterModalVideo,eh.current),tq(),()=>{p.Le.setConfig(p.gI.IsInModalVideo,{isInModal:!1}),g.emit(g.EVENT.exitModalVideo,eh.current),tX()}),[]),(0,a.useEffect)(()=>{(0,p.Vv)(void 0)},[$]),(0,a.useEffect)(()=>{eV(0===ek),eH(ek===eS.length-1)},[ek,eS]);let eq="general_search"===J,{recommendGuideChild:eX,useNewUserSoundGuide:eY,recommendGuideVisible:eQ,handleCloseGuide:eJ}=tK({isCanShow:J!==c.ModalEnterFromVal.Im,enterFrom:"modal_video",modalEnterFrom:J,awemeInfoList:eS,className:y.default.guideCard,disableLottie:(0,_.b_)()||(0,_.Sb)(),isFullscreen:!0,closeWhenUp:eq,isCloseInGuide:!0,swiper:eM}),e0=(0,a.useCallback)(e=>{if(z)return;let{from:t="click_button",triggerFrom:l}=e||{};if("ai_search"!==l||J===l)eQ&&eJ({scroll:"mouse",keyboard:"keyboard",click_button:"next_video_button"}[t]),"auto"===t&&(0,p.Vv)(c.PagingType.auto),eN(e=>{let t=!0,l=e;if(e<eR.current.length-1)t=!0,l=e+1;else{var o,r;t=!1,(null==N?void 0:N.discoverOptimize)?!!document.querySelector("#toastContainer")||null===(o=ex.current)||void 0===o||o.call(ex):null===(r=ex.current)||void 0===r||r.call(ex),l=e}return T.sendLog("modalNextVideoView",(0,n._)({error:t?"":"正在加载下一个视频",index:e+1,success:t},P)),eG&&(null==eM||eM.slideTo(l)),l}),eE(!1)},[z,eQ,eM,eG]),e1=(0,a.useCallback)(e=>{if(z)return;let{from:t="click_button",triggerFrom:l}=e||{};if("ai_search"!==l||J===l)eQ&&eq&&eJ({scroll:"mouse",keyboard:"keyboard",click_button:"last_video_button"}[t]),eN(e=>{var t;if(e>0)return eG&&(null==eM||eM.slideTo(e-1)),e-1;return null===(t=e_.current)||void 0===t||t.call(e_),eG&&(null==eM||eM.slideTo(e)),e}),eE(!1)},[z,eQ,eq,eM,eG]),e2=(0,a.useCallback)(()=>{var e,t,l,n;eS.length-1===ek&&(eN(ek-1),eG&&(null==eM||eM.slideTo(ek-1))),eL(e=>{var t;let l=[...e];return l.splice(ek,1),null===(t=ew.current)||void 0===t||t.call(ew,{currentNumber:ek,awemeList:l}),l}),null===(t=ep.current)||void 0===t||null===(e=t.setIsAuthorCardShow)||void 0===e||e.call(t,!1),null===(n=ep.current)||void 0===n||null===(l=n.setIsShowRelatedCard)||void 0===l||l.call(n,!1)},[ek,eS,eM,eG]),e5=(0,a.useMemo)(()=>{if((0,x.En)()){var e;return null===(e=(0,w.P)(N))||void 0===e?void 0:e.preloadCount}let t={};return((null==N?void 0:N.preloadCountApplySideServer)==="both"||(0,C.DT)()&&(null==N?void 0:N.preloadCountApplySideServer)==="client"||!(0,C.DT)()&&(null==N?void 0:N.preloadCountApplySideServer)==="web")&&(t=null==N?void 0:N.preloadCountServer),Object.assign({},null==N?void 0:N.preloadCount,t)},[N,eM]);(0,a.useLayoutEffect)(()=>{(()=>{if(null==e5?void 0:e5.open){let e=ek+1,t=(null==e5?void 0:e5.count)||3,l=eS.slice(e).filter(e=>(null==e?void 0:e.awemeType)===v.e.Normal&&!(0,tm.Ni)(e)).slice(0,t);p.Le.setConfig(p.gI.PreloadList,l)}else{let e=eS.slice(ek+1,ek+4).filter(e=>!(0,tm.Ni)(e));p.Le.setConfig(p.gI.PreloadList,e)}})()},[N,ek,eS]);let e3=(0,a.useCallback)(function(){var e,t;let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];eP&&!en?(eF.dispatch({modalAwemeInfo:null,nextAwemeInfo:null,prevAwemeInfo:null}),T.sendLog("closePlayer",(0,o._)((0,n._)({},P,l,(null==eS?void 0:null===(e=eS[ek])||void 0===e?void 0:e.logParams)||{}),{enter_from:eF.getValue("feedType")})),r&&I(ek)):(I(ek),T.sendLog("closePlayer",(0,n._)({},P,l,(null==eS?void 0:null===(t=eS[ek])||void 0===t?void 0:t.logParams)||{})))},[I,eS,ek,P,eP]);E({abtestData:N,container:ec||ei,closeModal:e3,isClientMiniWin:ey,modalEnterFrom:J});let{slideVideoTab:e6,setSlideVideoTab:e4,modalAwemeInfo:e7,setModalAwemeInfo:e8,globalIsSideBarShow:e9,setIsSideBarShowFunc:te}=S({originAwemeInfo:null!=Z?Z:eS[0]}),{defaultTab:tt="",isTabFeed:tl,onLivePause:tn=()=>null,onLivePlay:to=()=>null}=(null==M?void 0:M((0,o._)((0,n._)({},e),{delVideoCallBackRef:ew,currentNumber:ek,awemeInfoList:eS,refPrevVideoCallBack:e_,refNextVideoCallBack:ex,curTab:e6,awemeInfo:e7,setCurrentNumber:eN,setAwemeInfoList:eL,setIsFirst:eV,setIsLast:eH,setModalAwemeInfo:e8,swiper:eM,preloadReady:b,preloadAwemeList:j,currentAwemeInfo:e$})))||{};(0,tU.g)({swiper:eM,setAwemeInfoList:eL,awemeInfoList:eS,refMixPlayer:ep});let tr=(0,tZ.Z)(e=>{var t,l,n;if(null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),null==e||null===(l=e.stopPropagation)||void 0===l||l.call(e),null==tn||tn(null===(n=eR.current)||void 0===n?void 0:n[ek]),(null==e?void 0:e.triggerFrom)!=="ai_search"||J===(null==e?void 0:e.triggerFrom))e3({click_method:"button"},!0)});(0,a.useEffect)(()=>{let e=location.pathname,t=(0,eb.OB)();return t&&(0,eb.wS)(t,!1),()=>{t&&e===location.pathname&&(0,eb.wS)(t,!0),g.emit(g.EVENT.syncInteraction)}},[]),(0,a.useEffect)(()=>{let e=g.listen(g.EVENT.triggerModalPlayerClose,tr),t=g.listen(g.EVENT.triggerModalPlayerCloseForCachePages,tr);return()=>{e(),t()}},[tr]);let{asrState:ti}=D({awemeInfoListRef:eR,userInfo:ef,currentNumber:ek});(0,tV.Z)({refMixPlayer:ep,changeMinWinCb:e=>{e&&(eC.current=document.body.style.minWidth),document.body.style.minWidth=e?"auto":eC.current,document.body.style.overflow=e?"hidden":"",ej(e)}}),(0,a.useEffect)(()=>{eM&&(eG||eM.slideTo(ek))},[eM,ek,eG]),(0,a.useEffect)(()=>{if(eM){let e=null==eM?void 0:eM.activeIndex,t=t=>{eN(null==eM?void 0:eM.activeIndex),(null==t?void 0:t.from)==="drag"&&g.emit((null==eM?void 0:eM.activeIndex)-e>0?g.EVENT.reportPlayNext:g.EVENT.reportPlayPrev,{clickFrom:"drag"}),e=null==eM?void 0:eM.activeIndex};return eM.on("slideChange",t),()=>{eM.off("slideChange",t)}}},[eM]);let ta=L({currentNumber:ek}),{recordLatestAwemeId:ts}=tB(),{isRevisitStart:td,time:tu}=(()=>{var e,t,l,n,o,r,i,a,s,d;if(!(tW.findIndex(e=>{var t;return e===es||(null==e?void 0:null===(t=e.test)||void 0===t?void 0:t.call(e,es))})>=0))return{time:void 0,isRevisitStart:!1};let u="watch_later"===es,c=null!==(e=eS[ek])&&void 0!==e?e:Z,v=p.Le.getConfig(p.gI.PreviewPlayInfoRecord),m=(null==v?void 0:v.awemeId)===(null==c?void 0:c.awemeId)?null==v?void 0:v.recordPlayTime:void 0,f=(null==c?void 0:c.awemeId)===(null==Z?void 0:Z.awemeId);if(u&&f&&!m){let{store:e}=null!==(r=p.Le.getConfig(p.gI.WatchLater))&&void 0!==r?r:{},s=(null==e?void 0:null===(t=e[null==c?void 0:c.awemeId])||void 0===t?void 0:t.loop)>0||(null==c?void 0:null===(l=c.playProgress)||void 0===l?void 0:l.watch_times)>0,d=null!==(a=null!==(i=null==e?void 0:null===(n=e[null==c?void 0:c.awemeId])||void 0===n?void 0:n.progress)&&void 0!==i?i:null==c?void 0:null===(o=c.playProgress)||void 0===o?void 0:o.play_progress)&&void 0!==a?a:0;return s||!d?{time:0,isRevisitStart:!1}:{time:Math.floor(d/1e3),isRevisitStart:!1}}if(["favorite_collection","like","record"].includes(es)&&f&&ea){if((null==e7?void 0:null===(s=e7.playProgress)||void 0===s?void 0:s.play_progress)<=0)return{time:0,isRevisitStart:!1};let e=Math.max(Math.floor((null==e7?void 0:null===(d=e7.playProgress)||void 0===d?void 0:d.play_progress)/1e3)-2,1);return{time:m>=e?m:e,isRevisitStart:!0}}return{time:m,isRevisitStart:!1}})()||{},tc=(0,i.jsx)(O,{close:tr,className:"isDark isDeepDark",fullScreenTarget:ei,deleteCurrentSwiper:e2,moreBoxShowList:(0,o._)((0,n._)({},F),{shortcutList:!0,notInterestingIcon:!!tl||F.notInterestingIcon,dataAnalysis:(null==F?void 0:F.dataAnalysis)&&(null==Z?void 0:Z.authorUserId)===(null===(t=eS[ek])||void 0===t?void 0:t.authorUserId),deleteSelfPost:null==F?void 0:F.deleteSelfPost,asrState:ti}),modalEnterFrom:J,modalInnerFeedCard:en,swiper:g.commonEvent,videoToast:e=>R.F.info(e,void 0,1e3),item:eS[ek],playNextFunc:e0,playPrevFunc:e1,defaultCommentShow:B,InnerPlayer:tD,disableAutoPlay:W,relatedDefaultTab:tt,originAwemeInfo:null!=Z?Z:eS[0],modalId:$,defaultShowSideBar:X,setModalAwemeInfo:e8,customProps:{insertCommentId:eI?U:void 0,userContext:k,abtestData:N,logParams:(0,o._)((0,n._)({},P),{is_modal_first_enter:ta?"1":"0"}),showTopicAndMusicCard:!1,showMixCard:!1,showMixCardEntry:!1,showHotCard:!!((null===(l=eS[ek])||void 0===l?void 0:l.hotList)&&(null===(s=eS[ek])||void 0===s?void 0:null===(r=s.hotList)||void 0===r?void 0:r.rank)!==51&&(null===(m=eS[ek])||void 0===m?void 0:null===(d=m.hotList)||void 0===d?void 0:d.type)!==2),tab:"modal",useOldModal:G,danmakuInfo:q},ref:ep,shortCutFilteredList:Y,collectFolderId:ee,collectionFolderInfo:et,isDefaultShowRelatedCard:el,defaultForceOpenTab:eo,bingeInfo:er,isClientMiniWin:ey,notCanMixListen:ed,startTime:tu,onLivePause:tn,onLivePlay:to,searchFrom:ev,isShowGuide:eQ,useNewUserSoundGuide:eY,isRevisitStart:td,onAwemeInfoChange:eG?null:eK}),tv=J.includes("search");return(0,i.jsx)(f.C.Provider,{value:{userId:K,slideVideoTab:e6,setSlideVideoTab:e4,setModalAwemeInfo:e8,awemeInfoList:eS,globalIsSideBarShow:e9,setIsSideBarShowFunc:te,isCssFullScreen:!0,isSelf:ea,collectionFolderInfo:et,isClientMiniWin:ey,globalIsCommentTrayPushGuideShow:eU,setIsCommentTrayPushGuideShowFunc:eO,globalCommentTrayPushGuideType:ez,setCommentTrayPushGuideTypeFunc:eW},children:(0,i.jsxs)("div",{className:em,children:[(0,i.jsx)(Q,{close:I,isInnerFeed:eP,modalInnerFeedCard:en,isClientMiniWin:ey,refPlayer:ep,onCloseButtonClick:tr,abtestData:N,awemeInfoList:eS,currentNumber:ek,modalEnterFrom:J,isSelf:ea,userInfo:ef,logParams:P,awemeFeed:eF,searchParams:eu,slideVideoTab:e6,currentAwemeInfo:eP?eD:null==eS?void 0:eS[ek]}),!ey&&eX,(0,i.jsx)("div",{id:"upperFeedContainer",className:u()(y.default.moreIndex,{[y.default.isClientMiniWin]:ey,searchUpperFeedContainer:tv})}),(0,i.jsx)(A.k,{componentName:"ModalVideo",children:(0,i.jsxs)("div",{className:u()(y.default.modalVideo,H,"modal-video-container",{[y.default.isLoading]:!eS[ek],[y.default.modalSlider]:"search"===J,isMiniWindow:ey,isMiniWindowOptimize:ey&&eZ}),"data-e2e":"modal-video-container",children:[eS[ek]?(0,i.jsx)(tO.ZP,{onSwiper:eT,abTestData:N,cardBetween:0,nextSwiperHeaderHeight:0,upperSpace:0,data:eS,scene:tz.R5.Modal,defaultCssFullScreen:!0,initIndex:ek,useWheelListener:!1,collectionFolderInfo:et,children:(0,i.jsx)(tH.o,{"data-e2e":"feed-item",className:u()(y.default.swiperItem),slot:tz.t6.INSIDE,children:e=>{let{slideData:t,activeIndex:l,currentIndex:n}=e;if(!(1>=Math.abs(l-n)))return null;{let e=l===n;return ts(e,null==t?void 0:t.awemeId),(0,a.cloneElement)(tc,{isActive:e,isFirst:0===n,isNext:l+1===n,isPrev:l-1===n,isLast:n===eS.length-1,index:n,isClientMiniWin:ey,item:t,videoRef:e?ep:eg})}}})}):(0,i.jsx)(V.gb,{}),(0,i.jsx)("div",{id:"modal_fullscreen_capture_feedback",children:(0,i.jsx)("div",{id:"modal_fullscreen_capture"})})]})})]})})};var tQ=(0,a.memo)(e=>{var t;let{root:l,onSetAttribute:d,metaCtxId:u,isSelfMetaProvider:c=!1,modalEnterFrom:v}=e,f=(0,a.useRef)(document.createElement("div"));(0,a.useEffect)(()=>{let e=l||document.getElementById("douyin-right-container");if(null==d||d(f),e)null==e||e.appendChild(f.current);else{let e=document.body;null==e||e.appendChild(f.current)}return()=>{var e,t;(null===(e=f.current)||void 0===e?void 0:e.parentNode)&&(null===(t=f.current)||void 0===t||t.remove()),f.current=null}},[]),(0,m.w)(()=>{let e=f.current;if(e)return e.classList.add(y.default.routeHide),()=>{e.classList.remove(y.default.routeHide)}},[]);let h=(0,t$.j)(),{awemeFeed:p}=h,g=(0,r._)(h,["awemeFeed"]);return c?s.createPortal((0,i.jsx)(tY,(0,o._)((0,n._)({},e),{close:t=>{var l,n;f.current.parentNode&&(null===(n=f.current)||void 0===n||n.remove()),null==e||null===(l=e.close)||void 0===l||l.call(e,t)},container:l||f.current,mouseScrollContainer:f.current})),f.current):s.createPortal((0,i.jsx)(t$.b,{context:(0,o._)((0,n._)({},g),{metaCtxId:null!==(t=null!=u?u:v)&&void 0!==t?t:"modal"}),children:(0,i.jsx)(tY,(0,o._)((0,n._)({},e),{close:t=>{var l,n;f.current.parentNode&&(null===(n=f.current)||void 0===n||n.remove()),null==e||null===(l=e.close)||void 0===l||l.call(e,t)},container:l||f.current,mouseScrollContainer:f.current}))}),f.current)})},452295:function(e,t,l){l.d(t,{E:function(){return w},w:function(){return x}});var n=l(590921),o=l(874155);l(612222);var r=l(259202),i=l(611542),a=l(152502),s=l.n(a),d=l(830320),u=l(825211),c=l.n(u),v=l(432097),m=l(898263),f=l(713017),h=l(245086),p=l(630873),g=l(26313),_=l(503308);l(693059);let x=e=>{let{success:t=null,host:l=null,next:a=null,enterMethod:u="author_card_login_guide",destroy:v=null,change:h=()=>null,close:p,className:g,blockNum:x,onShow:w,text:C,transition:y,notAnimate:b}=e,j=(0,i.useRef)(null),[k,N]=(0,i.useState)(!0),I=(0,i.useRef)(null),[E,S]=(0,d.Z)();(0,i.useEffect)(()=>{S&&w()},[S]);let L=()=>{var e;null===(e=j.current)||void 0===e||e.call(j),null==v||v()},M=async()=>{var e;N(!0);let r=await (0,_.gE)({success:t,host:l,next:a,enterMethod:u,refreshNumber:0}),i=await (0,_.j1)();I.current=new i((0,o._)((0,n._)({},r),{success:e=>{if(null==e?void 0:e.redirect_url){s().get(null==e?void 0:e.redirect_url).then(()=>{var t;setTimeout(L,0),null==r||null===(t=r.success)||void 0===t||t.call(r,e),null==h||h()}).catch(()=>{L()});return}L()}})),null===(e=I.current)||void 0===e||e.setTeaConfig({ug_source:(0,m.Rs)("ug_source"),sem_keyword:(0,m.Rs)("sem_keyword"),browser_is_360:(0,f.a2)()?"1":"0"}),N(!1)};(0,i.useEffect)(()=>{M()},[]);let T=(0,i.useCallback)(()=>{var e,t;return(null===(e=I.current)||void 0===e?void 0:e.LoginContainer)?null===(t=I.current)||void 0===t?void 0:t.LoginContainer({}):(0,r.jsx)("div",{})},[]);return(0,r.jsx)("div",{className:c()("related-video-card-login-guide-block",g,{showBlockBtn:2===x,animate__fadeInUpBig:y,notAnimate:b}),ref:E,children:k?null:(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("div",{className:"related-video-card-login-guide-block__content",children:[(0,r.jsx)(T,{}),(0,r.jsxs)("div",{className:"related-video-card-login-guide-block__desc",children:[(0,r.jsx)("p",{children:C}),(0,r.jsx)("p",{className:"related-video-card-login-guide-block__text",children:"打开【抖音】扫码登录"}),2===x&&(0,r.jsx)("div",{className:"related-video-card-login-guide-block__close",onClick:()=>{p()},children:(0,r.jsx)("span",{children:"跳过登录"})})]})]})})})},w=e=>{let{blockNum:t,isDetail:l,handleUnLogin:n,handleJumpBlock:o,onShow:a,text:s,blockText:u,enterMethod:m}=e,[f,_]=(0,d.Z)();return(0,i.useEffect)(()=>{_&&(p.Z.sendLog("loginGuideShow",{enter_from:(0,h.vM)(),enter_method:m,params_for_special:"uc_login"}),null==a||a())},[_]),(0,r.jsxs)("div",{ref:f,className:c()(g.default.loginBtnWrapper,{[g.default.isDetail]:l}),children:[2===t?(0,r.jsx)("div",{className:g.default.jumpBlock,onClick:o,children:(0,r.jsx)("span",{children:u})}):(0,r.jsx)("div",{children:s}),(0,r.jsx)(v.zx,{className:g.default.loginBtn,onClick:()=>{p.Z.sendLog("loginGuideClick",{enter_from:(0,h.vM)(),enter_method:m,params_for_special:"uc_login"}),n()},theme:"solid",children:"立即登录"})]})}},630873:function(e,t,l){var n=l(354795);t.Z=new n.h({loginGuideShow:{eventName:"login_guide_show",params:{enter_from:"",enter_method:"",params_for_special:""}},loginGuideClick:{eventName:"login_guide_click",params:{enter_from:"",enter_method:"",params_for_special:""}}})},463792:function(e,t,l){l.d(t,{w:function(){return c}});var n=l(259202),o=l(611542),r=l(954884),i=l(106834),a=l(446500),s=l(928470),d=l(703774);let u=()=>{let e=(0,o.useRef)({isRecoveryFromChild:!1}),{pathname:t}=(0,r.a)(),l=(0,o.useRef)(t),n=(0,o.useRef)(!1);return(0,d.Nr)(t)?n.current=!0:(n.current?(n.current=!1,e.current.isRecoveryFromChild=l.current==l.current):e.current.isRecoveryFromChild=!1,l.current=t),e},c=e=>{let{isActive:t,children:l,inherit:r=!0}=e,d=(0,o.useRef)();(0,i.U)();let c=u();!d.current&&(d.current=new a.T(t));let v=(0,o.useMemo)(()=>({isActive:t,routeModel:d.current,ref:c}),[t]);return(0,o.useEffect)(()=>{d.current&&d.current.setActive(t)},[t]),(0,n.jsx)(s.I.Provider,{value:v,children:l})}},411204:function(e,t,l){l.r(t),l.d(t,{default:function(){return g}});var n=l("590921"),o=l("874155");l("612222");var r=l("259202"),i=l("611542"),a=l("152502"),s=l.n(a),d=l("825211"),u=l.n(d),c=l("331972"),v=l("898263"),m=l("713017"),f=l("245086"),h=l("503308"),p=l("719275"),g=e=>{let{success:t=null,host:l=null,next:a=null,enterMethod:d="share_board",destroy:g=null,change:_=()=>null,showHeader:x=!0,showDesc:w=!0,className:C}=e,y=(0,i.useRef)(null),[b,j]=(0,i.useState)(!0),k=(0,i.useRef)(null),[N,I]=(0,i.useState)(!1),E=()=>{var e;null===(e=y.current)||void 0===e||e.call(y),null==g||g()},S=async()=>{I(!await c.hh.getVar({name:"short_link_login_new",defaultValue:0}))},L=async()=>{var e;S(),j(!0);let r=await (0,h.gE)({success:t,host:l,next:a,enterMethod:d}),i=await (0,h.j1)();k.current=new i((0,o._)((0,n._)({},r),{success:e=>{if(null==e?void 0:e.redirect_url){s().get(null==e?void 0:e.redirect_url).then(()=>{var t;setTimeout(E,0),null==r||null===(t=r.success)||void 0===t||t.call(r,e),null==_||_(),(0,p.ev)()}).catch(()=>{E()});return}E()}})),null===(e=k.current)||void 0===e||e.setTeaConfig({ug_source:(0,v.Rs)("ug_source"),sem_keyword:(0,v.Rs)("sem_keyword"),browser_is_360:(0,m.a2)()?"1":"0",enterMethod:d,enterFrom:(0,f.vM)()}),j(!1)};(0,i.useEffect)(()=>{L()},[]);let M=(0,i.useCallback)(()=>{var e,t;return(null===(e=k.current)||void 0===e?void 0:e.LoginContainer)?null===(t=k.current)||void 0===t?void 0:t.LoginContainer({}):(0,r.jsx)("div",{})},[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{id:"share-login-guide",className:u()("login-guide",{"show-icon":N},C),children:[x&&(0,r.jsx)("div",{className:"header",children:(0,r.jsx)("span",{children:"登录后分享给朋友"})}),b?null:(0,r.jsx)(M,{}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{children:"打开抖音APP"}),(0,r.jsx)("p",{children:"扫描二维码登录"})]})]})})}},287312:function(e,t,l){l.d(t,{W:function(){return v}});var n=l(590921),o=l(874155),r=l(250751),i=l(259202),a=l(611542),s=l(448454),d=l(72497),u=l(135837);let c=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],v=(0,a.forwardRef)((e,t)=>{let{scrollListener:l}=e,v=(0,r._)(e,["scrollListener"]),m=(0,a.useRef)({subscribers:[],framePending:!1,node:null,rafHandle:null}),f=(0,a.useCallback)(e=>{m.current.subscribers=m.current.subscribers.concat(e)},[]),h=(0,a.useCallback)(e=>{m.current.subscribers=m.current.subscribers.filter(t=>t!==e)},[]),p=l||"undefined"!=typeof window&&window,g=(0,s.Z)(e=>{!m.current.framePending&&(m.current.rafHandle=window.requestAnimationFrame(()=>{if(!m.current.node)return;m.current.framePending=!1;let{top:e,bottom:t}=m.current.node.getBoundingClientRect();m.current.subscribers.forEach(l=>l({distanceFromTop:e,distanceFromBottom:t,eventSource:(0,d.S)(p)?p:document.documentElement}))}),m.current.framePending=!0)});(0,a.useEffect)(()=>()=>{window.cancelAnimationFrame(m.current.rafHandle)},[]),(0,a.useEffect)(()=>{if(p)return c.forEach(e=>{p.addEventListener(e,g)}),g({}),()=>{c.forEach(e=>{p.removeEventListener(e,g)})}},[p,g]);let _=(0,a.useRef)({subscribe:f,unsubscribe:h,getParent:()=>m.current.node});return(0,a.useImperativeHandle)(t,()=>({notifySubscribers:g}),[g]),(0,i.jsx)(u.X.Provider,{value:_.current,children:(0,i.jsx)("div",(0,o._)((0,n._)({},v),{ref:e=>m.current.node=e,onScroll:g,onTouchStart:g,onTouchMove:g,onTouchEnd:g}))})})},848800:function(e,t,l){l.d(t,{Z:function(){return s}});var n=l(7979);l(612222);var o=l(259202),r=l(611542),i=l(781111),a=l(135837);class s extends r.Component{componentDidMount(){this.context.subscribe(this.handleContainerEvent)}componentWillUnmount(){this.context.unsubscribe(this.handleContainerEvent)}componentDidUpdate(){this.placeholder.style.paddingBottom=this.props.disableCompensation?"0":`${this.state.isSticky?this.state.calculatedHeight:0}px`}render(){let e=r.cloneElement(this.props.children({isSticky:this.state.isSticky,wasSticky:this.state.wasSticky,distanceFromTop:this.state.distanceFromTop,distanceFromBottom:this.state.distanceFromBottom,calculatedHeight:this.state.calculatedHeight,style:this.state.style}),{ref:e=>{this.content=i.findDOMNode(e)}});return(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{ref:e=>this.placeholder=e}),e]})}constructor(...e){super(...e),(0,n._)(this,"state",{isSticky:!1,wasSticky:!1,style:{},distanceFromTop:0,distanceFromBottom:0,calculatedHeight:0}),(0,n._)(this,"placeholder",void 0),(0,n._)(this,"content",void 0),(0,n._)(this,"context",void 0),(0,n._)(this,"handleContainerEvent",e=>{let{distanceFromTop:t,distanceFromBottom:l,eventSource:n}=e,o=this.context.getParent(),r=!1;this.props.relative&&(r=n!==o,t=-(n.scrollTop+n.offsetTop)+this.placeholder.offsetTop);let i=this.placeholder.getBoundingClientRect(),a=this.content.getBoundingClientRect().height,s=l-this.props.bottomOffset-a,d=!!this.state.isSticky,u=r?d:t<=-this.props.topOffset&&l>-this.props.bottomOffset;l=(this.props.relative?o.scrollHeight-o.scrollTop:l)-a;let c=u?{position:"fixed",top:s>0?this.props.relative?o.offsetTop-o.offsetParent.scrollTop:0:s,left:i.left,width:i.width}:{};!this.props.disableHardwareAcceleration&&(c.transform="translateZ(0)"),this.setState({isSticky:u,wasSticky:d,distanceFromTop:t,distanceFromBottom:l,calculatedHeight:a,style:c})})}}(0,n._)(s,"defaultProps",{relative:!1,topOffset:0,bottomOffset:0,disableCompensation:!1,disableHardwareAcceleration:!1}),(0,n._)(s,"contextType",a.X)},135837:function(e,t,l){l.d(t,{X:function(){return n}});let n=l(611542).createContext(null)},517760:function(e,t,l){l.d(t,{_:function(){return i}}),l(612222);var n=l(611542),o=l(350836),r=l(448454);let i=e=>{let{previewUrlList:t,onVideoEnded:l,onVideoStopped:i,onVideoPlaying:a,hoverPreviewVideoElement:s}=e,[d,u]=(0,n.useState)(!1),[c,v]=(0,n.useState)(!1),m=(0,n.useRef)(),f=(0,n.useRef)();(0,n.useEffect)(()=>()=>{window.clearTimeout(f.current)},[]);let h=(0,o.Z)(),p=(0,r.Z)(e=>{window.clearTimeout(f.current),u(e)}),g=(0,r.Z)(e=>{if(window.clearTimeout(f.current),!h()){window.clearTimeout(f.current);return}f.current=window.setTimeout(()=>{if(!!h())u(!0)})}),_=(0,r.Z)(()=>{if(!!h())p(!1)}),x=(0,n.useMemo)(()=>t.length>0&&d,[t,d]),w=(0,n.useRef)(x);(0,n.useLayoutEffect)(()=>{!x&&w.current&&(null==i||i(),v(!1))},[x,i]),(0,n.useEffect)(()=>{w.current=x},[x]);let C=(0,r.Z)(()=>{null==l||l()}),y=(0,r.Z)(()=>{v(!0),null==a||a()});return(0,n.useEffect)(()=>{if(s)return s.addEventListener("mouseenter",g),s.addEventListener("mouseleave",_),()=>{s.removeEventListener("mouseenter",g),s.removeEventListener("mouseleave",_)}},[s]),{onMouseEnter:g,onMouseLeave:_,isPlay:x,isHovered:d,setIsHovered:p,onEnded:C,onPlaying:y,isReady:c,previewImageRef:m}}},193335:function(e,t,l){l.d(t,{U:function(){return v}}),l(612222);var n=l(611542),o=l(582867),r=l.n(o),i=l(350464),a=l.n(i),s=l(356789),d=l(819769),u=l(804929);r().extend(a());let c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if("number"!=typeof e||e<=0)return"";let t="H时m分s秒";return e<6e4?t="s秒":e<36e5&&(t="m分s秒"),`已看${r().duration(e,"milliseconds").format(t)}`},v=(e,t)=>{var l,o,r,i,a;let v=null!==(r=e.video.duration)&&void 0!==r?r:0,[m,f]=(0,n.useState)(null!==(i=null==e?void 0:null===(l=e.playProgress)||void 0===l?void 0:l.play_progress)&&void 0!==i?i:0),[h,p]=(0,n.useState)(null!==(a=null==e?void 0:null===(o=e.playProgress)||void 0===o?void 0:o.watch_times)&&void 0!==a?a:0);return(0,n.useEffect)(()=>s.listen(s.EVENT.WatchLaterProgressChange,()=>{var t,l,n,o,r,i,a;let{store:s={}}=null!==(r=d.Le.getConfig(d.gI.WatchLater))&&void 0!==r?r:{},u=null!==(i=null===(t=s[e.awemeId])||void 0===t?void 0:t.progress)&&void 0!==i?i:null==e?void 0:null===(l=e.playProgress)||void 0===l?void 0:l.play_progress,c=null!==(a=null===(n=s[e.awemeId])||void 0===n?void 0:n.loop)&&void 0!==a?a:null==e?void 0:null===(o=e.playProgress)||void 0===o?void 0:o.watch_times;f(null!=u?u:0),p(null!=c?c:0)}),[]),{pctFormat:v>0?(0,u.Sb)(m,v,h):c(m),isWatchLaterTab:"watch_later"===t}}},233914:function(e,t,l){l.d(t,{J:function(){return z}});var n=l("590921");l("632852"),l("612222"),l("930798"),l("347885");var o=l("259202"),r=l("611542"),i=l("825211"),a=l.n(i),s=l("582867"),d=l.n(s),u=l("538846"),c=l("283132"),v=l("124797"),m=l("721778"),f=l("135524"),h=l("549516"),p=l("910924"),g=l("688497"),_=l("16866"),x=l("819769"),w=l("804929"),C=l("713017"),y=l("232548"),b=l("874155");let j=(0,r.forwardRef)((e,t)=>(0,o.jsxs)("svg",(0,b._)((0,n._)({width:19,height:19,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.533 14.824a.625.625 0 0 0 1.25 0 7.391 7.391 0 0 0-3.371-6.208 5.115 5.115 0 0 0 1.113-3.195 5.107 5.107 0 0 0-1.506-3.636A5.107 5.107 0 0 0 10.384.28c-.815 0-1.594.185-2.316.55a.625.625 0 1 0 .564 1.116 3.896 3.896 0 0 1 5.643 3.476 3.862 3.862 0 0 1-1.165 2.776.756.756 0 0 0 .172 1.203 6.145 6.145 0 0 1 3.251 5.424zm-3.119 2.32a.625.625 0 0 0 1.25 0 7.19 7.19 0 0 0-3.262-6.027 4.982 4.982 0 0 0 1.071-3.095c0-1.338-.52-2.595-1.466-3.54a4.974 4.974 0 0 0-3.54-1.467c-1.337 0-2.595.52-3.54 1.466a4.974 4.974 0 0 0-1.467 3.54 4.974 4.974 0 0 0 1.071 3.096A7.19 7.19 0 0 0 .27 17.145a.625.625 0 0 0 1.25 0 5.943 5.943 0 0 1 3.143-5.247.752.752 0 0 0 .172-1.196 3.729 3.729 0 0 1-1.125-2.68 3.76 3.76 0 0 1 3.757-3.757 3.76 3.76 0 0 1 3.756 3.757c0 1.016-.399 1.967-1.124 2.68a.752.752 0 0 0 .171 1.197 5.943 5.943 0 0 1 3.144 5.246z",fill:"#fff"}),(0,o.jsx)("path",{d:"M17.783 14.824h.25-.25zm-3.371-6.208l-.196-.156-.171.216.231.15.136-.21zm.7-1.172l-.23-.099.23.099zm-1.093-5.659l-.177.177.177-.177zM8.068.83l.113.223L8.068.83zm-.276.84l-.223.113.223-.113zm.84.276l-.113-.223.113.223zm4.478 6.252l-.175-.179.175.179zm-.218.645l-.247.036.247-.036zm.39.557l-.118.22.118-.22zm-1.88 1.718l-.196-.155-.17.215.23.15.136-.21zm.669-1.125l-.23-.099.23.099zm-1.064-5.51l-.177.176.177-.177zm-7.08 0l.176.176-.176-.177zm-1.064 5.51l.23-.099-.23.099zm.668 1.125l.137.21.229-.15-.17-.214-.196.154zm1.132.781l-.118-.22.118.22zm.389-.554l.247.035-.247-.035zm-.217-.642l.175-.179-.175.179zm5.264 0l-.175-.179.175.179zm-.217.642l.247-.036-.247.036zm.388.554l.118-.22-.118.22zm6.888 3.301a.375.375 0 0 1-.375-.375h-.5c0 .483.392.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm-3.257-5.998a7.141 7.141 0 0 1 3.257 5.998h.5a7.641 7.641 0 0 0-3.485-6.418l-.272.42zm.606-1.48a4.869 4.869 0 0 1-.666 1.114l.392.312c.298-.375.543-.787.733-1.23l-.46-.197zm.393-1.925c0 .668-.132 1.315-.393 1.924l.46.197a5.358 5.358 0 0 0 .433-2.121h-.5zm-1.433-3.46a4.858 4.858 0 0 1 1.433 3.46h.5c0-1.44-.561-2.795-1.579-3.813l-.354.354zM10.384.53c1.307 0 2.534.509 3.458 1.433l.354-.354A5.358 5.358 0 0 0 10.384.03v.5zm-2.203.523A4.838 4.838 0 0 1 10.384.53v-.5c-.854 0-1.671.194-2.429.577l.226.446zm-.166.504a.375.375 0 0 1 .166-.504L7.955.606a.875.875 0 0 0-.386 1.176l.446-.226zm.504.166a.375.375 0 0 1-.504-.166l-.446.226a.875.875 0 0 0 1.175.386l-.225-.446zm1.865-.443a4.1 4.1 0 0 0-1.865.443l.225.446a3.6 3.6 0 0 1 1.64-.389v-.5zm4.141 4.142a4.146 4.146 0 0 0-4.141-4.142v.5a3.646 3.646 0 0 1 3.641 3.642h.5zm-1.24 2.954a4.113 4.113 0 0 0 1.24-2.954h-.5c0 .985-.387 1.907-1.09 2.597l.35.357zm-.145.432a.508.508 0 0 1 .146-.432l-.35-.357a1.007 1.007 0 0 0-.291.86l.495-.071zm.26.372a.506.506 0 0 1-.26-.372l-.495.07c.045.315.239.592.52.743l.235-.441zm3.383 5.645A6.395 6.395 0 0 0 13.4 9.18l-.236.44a5.895 5.895 0 0 1 3.12 5.205h.5zM14.04 17.52a.375.375 0 0 1-.375-.375h-.5c0 .483.392.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm-3.149-5.818a6.94 6.94 0 0 1 3.15 5.818h.5a7.439 7.439 0 0 0-3.376-6.237l-.274.419zm.576-1.434a4.73 4.73 0 0 1-.635 1.07l.393.31c.284-.362.52-.758.701-1.183l-.46-.197zm.382-1.871c0 .65-.128 1.279-.382 1.871l.46.197c.28-.655.422-1.351.422-2.068h-.5zM10.83 4.658a4.724 4.724 0 0 1 1.393 3.364h.5a5.224 5.224 0 0 0-1.54-3.717l-.353.353zM7.467 3.265c1.27 0 2.464.495 3.363 1.393l.354-.353a5.224 5.224 0 0 0-3.717-1.54v.5zM4.103 4.658a4.724 4.724 0 0 1 3.364-1.393v-.5a5.224 5.224 0 0 0-3.717 1.54l.353.353zM2.71 8.022c0-1.271.495-2.465 1.393-3.364l-.353-.353a5.224 5.224 0 0 0-1.54 3.717h.5zm.383 1.871a4.724 4.724 0 0 1-.383-1.871h-.5c0 .717.143 1.413.423 2.068l.46-.197zm.635 1.07a4.73 4.73 0 0 1-.635-1.07l-.46.197c.182.425.418.821.702 1.182l.393-.31zM.52 17.145a6.939 6.939 0 0 1 3.148-5.818l-.273-.419A7.439 7.439 0 0 0 .02 17.145h.5zm.375.375a.375.375 0 0 1-.375-.375h-.5c0 .483.391.875.875.875v-.5zm.375-.375a.375.375 0 0 1-.375.375v.5a.875.875 0 0 0 .875-.875h-.5zm3.275-5.467a6.193 6.193 0 0 0-3.275 5.467h.5a5.693 5.693 0 0 1 3.012-5.027l-.237-.44zm.26-.37a.503.503 0 0 1-.26.37l.237.44c.279-.15.472-.425.517-.739l-.495-.07zm-.146-.428a.504.504 0 0 1 .145.428l.495.071a1.004 1.004 0 0 0-.29-.856l-.35.357zM3.46 8.022c0 1.083.426 2.099 1.2 2.858l.35-.357a3.479 3.479 0 0 1-1.05-2.501h-.5zm4.007-4.007A4.01 4.01 0 0 0 3.46 8.022h.5a3.51 3.51 0 0 1 3.507-3.507v-.5zm4.006 4.007a4.01 4.01 0 0 0-4.006-4.007v.5a3.51 3.51 0 0 1 3.506 3.507h.5zm-1.199 2.858a3.979 3.979 0 0 0 1.2-2.858h-.5a3.48 3.48 0 0 1-1.05 2.501l.35.357zm-.145.428a.504.504 0 0 1 .145-.428l-.35-.357a1.003 1.003 0 0 0-.29.856l.495-.07zm.26.37a.503.503 0 0 1-.26-.37l-.495.071c.046.314.239.59.518.74l.236-.441zm3.275 5.467a6.193 6.193 0 0 0-3.276-5.467l-.236.44a5.693 5.693 0 0 1 3.012 5.027h.5z",fill:"#fff"})]})));var k=l("147602"),N=l("367575"),I=l("500840"),E=l("268176"),S=l("193335"),L=l("517760"),M=l("86082"),T=l("699233"),R=l("447362"),F=l("830272"),P=l("646285"),D=l("63601"),A=l("946816"),V=l("478279"),B=l("148459"),H=l("456713");let U=(0,u.ZP)(()=>Promise.all([l.e("9107"),l.e("8581")]).then(l.bind(l,443644)),{resolveComponent:e=>{let{Preview:t}=e;return t},ssr:!1}),O=e=>{var t,l,n,i,s,d,u;let{scene:h,awemeInfo:p,isSelf:g,uid:_,canShowUnLook:C,canShowCooperationTag:y=!0,from:b,abTestData:k,userInfo:N}=e,{pctFormat:E,isWatchLaterTab:L}=(0,S.U)(p,h),F=(0,r.useCallback)(()=>(0,o.jsx)(T.Z,{viewBox:"0 0 19 19",src:j}),[]),D=h===c.cardScene.authorCard,V=[{key:"reviewStatus",El:M.p4},{key:"isTop",El:M.Bf},{key:"labelFriend",El:F},{key:"labelPartSee",El:F},{key:"hotList",El:M.ac},{key:"relationLabels",El:M.qZ},{key:"cooperation",El:M.A1}],B=[],H=[],[U,O]=(0,r.useState)(C&&(u=(null===(l=x.Le.getConfig(x.gI.UnLookVideos))||void 0===l?void 0:null===(t=l[null==p?void 0:p.awemeId])||void 0===t?void 0:t.status)===v.Pl.UnLook,true)&&u);if((0,r.useEffect)(()=>{var e,t;if(!C)return;O((null===(t=x.Le.getConfig(x.gI.UnLookVideos))||void 0===t?void 0:null===(e=t[null==p?void 0:p.awemeId])||void 0===e?void 0:e.status)===v.Pl.UnLook);let l=P.a.addCb(e=>{let{action:t,awemeId:l}=e;"lookVideo"===t&&l===p.awemeId&&U&&O(!1)});return()=>{l()}},[p,C]),U&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Yd,{})},"unLookTag")),!U){if(L&&g&&E&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Vp,{className:a()(I.default.historyProgressRate,I.default.bg),children:E})},"watchlater")),g&&"user"===b&&(null==p?void 0:p.historyProgressRate)){let e=(0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Vp,{className:a()(I.default.historyProgressRate,I.default.bg),children:null==p?void 0:p.historyProgressRate})},"historyProgressRate");"record"===h&&B.push(e)}V.forEach((e,t)=>{let l=null==p?void 0:p.tag[e.key];if(l){var n,r,i,s,d,u;switch(e.key){case"reviewStatus":if(0===B.length){let l=(0,w.As)(null==p?void 0:null===(r=p.status)||void 0===r?void 0:null===(n=r.reviewResult)||void 0===n?void 0:n.extra)||{};B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Vp,{className:a()(I.default.historyProgressRate,I.default.bg),children:null==l?void 0:l.status_desc_label})},`${e.key}_${t}`))}break;case"isTop":0===B.length&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(e.El,{})},`${e.key}_${t}`));break;case"labelFriend":case"labelPartSee":0===B.length&&g&&(null==p?void 0:null===(i=p.authorInfo)||void 0===i?void 0:i.secUid)===_&&((null==p?void 0:null===(s=p.status)||void 0===s?void 0:s.privateStatus)===2||(null==p?void 0:null===(d=p.status)||void 0===d?void 0:d.partSee)===m.mI.On)&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Vp,{className:a()(I.default.historyProgressRate,I.default.bg),children:"朋友可见"})},`${e.key}_${t}`));break;case"hotList":(null===(u=JSON.parse((null==l?void 0:l.extra)||"{}"))||void 0===u?void 0:u.entrance_relativity)==="100"&&(null==l?void 0:l.rank)&&0===B.length&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(e.El,{name:null==l?void 0:l.header,top:(null==l?void 0:l.header)==="热榜"&&(null==l?void 0:l.rank)<=10?null==l?void 0:l.rank:0})},`${e.key}_${t}`));break;default:0===B.length&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(e.El,{})},`${e.key}_${t}`))}}})}0===B.length&&(null===(i=p.cooperationInfo)||void 0===i?void 0:null===(n=i.cooperationCreators)||void 0===n?void 0:n.length)>1&&y&&B.push((0,o.jsx)("div",{className:a()(I.default.tag,"user-video-tag"),children:(0,o.jsx)(M.Vp,{className:a()(I.default.historyProgressRate,I.default.bg),children:"共创"})},"cooperationIcon"));let z=(0,A.$m)(p,(null==p?void 0:null===(s=p.authorInfo)||void 0===s?void 0:s.uid)===(null==N?void 0:null===(d=N.info)||void 0===d?void 0:d.uid));return 0===B.length&&z&&B.push((0,o.jsx)(A.zx,{className:I.default.paidTag,type:z})),(null==p?void 0:p.awemeType)===f.e.Note&&!(null==p?void 0:p.isSlides)&&H.push((0,o.jsx)("div",{className:a()(I.default.tag,I.default.rightTag,"user-video-tag"),children:(0,o.jsx)(R.e,{className:a()({[I.default.bg]:!D})})},"pictureWordIcon")),(0,o.jsxs)(o.Fragment,{children:[!!B.length&&(0,o.jsx)("div",{className:a()(I.default.tags,"user-video-stats-tag",I.default.topLeft),children:B}),!!H.length&&(0,o.jsx)("div",{className:a()(I.default.tags,I.default.topRight),children:H})]})};function z(e){var t,l,i,s,u,v;let{videoHref:m,className:x,src:b,awemeInfo:j,likeCount:S,playCount:M,isSpider:T=!1,showTag:R=!0,iconWidth:P=80,isSelf:A,onClick:z,onShow:W,iconColor:Z="rgba(169, 170, 183, 1)",skeletonClass:$,skeletonIconStyle:K,uid:G,showTitle:q=!1,showHasLook:X=!1,canShowUnLook:Y=!1,canShowCooperationTag:Q=!0,onVideoStopped:J,onVideoEnded:ee,onVideoPlaying:et,scene:el,logParams:en,children:eo,hoverNoOverFlow:er=!0,tab:ei,onLoad:ea,from:es,userTabKey:ed,onNicknameClick:eu}=e,ec=(0,r.useMemo)(()=>{var e,t;return null==j?void 0:null===(t=j.video)||void 0===t?void 0:null===(e=t.playAddr)||void 0===e?void 0:e.map(e=>e.src||"")},[j]),{setIsHovered:ev,isPlay:em,onEnded:ef,onPlaying:eh,isReady:ep,previewImageRef:eg,onMouseEnter:e_,onMouseLeave:ex}=(0,L._)({previewUrlList:ec,onVideoStopped:J,onVideoEnded:ee,onVideoPlaying:et}),[ew,eC]=(0,r.useState)(!1),[ey,eb]=(0,r.useState)(null),{isiPad:ej}=(0,h.X)(),ek=j.awemeType!==f.e.Note&&![c.cardScene.authorCard].includes(el)&&ei!==p.L.CollectFolder,eN=em&&ek&&(!(0,C.vU)()||j),eI=(0,g.x)(W),eE=(0,r.useRef)(S),eS=(0,r.useMemo)(()=>{var e,t;let l=null==j?void 0:null===(e=j.video)||void 0===e?void 0:e.width;return(null==j?void 0:null===(t=j.video)||void 0===t?void 0:t.height)/l},[j]),eL=(0,r.useCallback)(e=>{if(null==z||z(e),(null==ec?void 0:ec.length)!==0)ev(!1)},[ev,z,ec]);(0,r.useEffect)(()=>{!eN&&eC(!1)},[eN]),(0,r.useEffect)(()=>{eE.current=S},[S]),(0,r.useEffect)(()=>{let e=eI.current;if(e&&!ej){let t=y.R(e,e_),l=y.d(e,ex);return()=>{t(),l()}}},[e_,ex,ej]);let eM=(0,r.useContext)(V.C),{userInfo:eT}=(0,r.useContext)(B.Context)||{},eR=(null==j?void 0:null===(t=j.video)||void 0===t?void 0:t.width)>=(null==j?void 0:null===(l=j.video)||void 0===l?void 0:l.height),eF="user"===es&&eR;return(0,o.jsxs)(D.B,{onClick:eL,className:a()(I.default.userVideo,x,{[I.default.hoverNoOverflow]:er}),href:m,target:"_blank",rel:"noopener noreferrer",isNeedSeoOpt:!0,isUseALink:(null==j?void 0:j.isHighQuality)!==_.HighQualityStatus.NotHighQuality,children:[(0,o.jsxs)("div",{className:a()(I.default.wrapper,{[I.default.animationScaleOne]:50===P,[I.default.canAnimation]:!ek}),ref:e=>{eI.current=e,eb(e)},children:[!!b&&(0,o.jsx)("div",{className:I.default.imageContainer,children:(0,o.jsx)(F.Q,{className:a()(I.default.videoImg,{[I.default.isSafari]:(0,C.G6)(),[I.default.containBlur]:eF&&eN&&ew}),src:b,iconWidth:P,isSpider:T,iconColor:Z,skeletonClass:$,iconStyle:K,isPreviewing:eN&&ew&&!eF,onLoad:ea,alt:(null==j?void 0:j.desc)?`${null==j?void 0:null===(i=j.authorInfo)||void 0===i?void 0:i.nickname}：${null==j?void 0:j.desc}`:`${null==j?void 0:null===(s=j.authorInfo)||void 0===s?void 0:s.nickname}于${d().unix(1633782931).format("YYYYMMDD")}发布的作品`})}),eN&&(0,o.jsx)(U,{previewUrlList:ec,className:a()(I.default.previewContainer),isHorizontal:eR,onReady:()=>{null==eh||eh(),eC(!0)},isOperable:!0,onEnded:ef,ratio:eS,isMute:null==j?void 0:null===(v=j.status)||void 0===v?void 0:null===(u=v.videoMute)||void 0===u?void 0:u.isMute,fakeHorizontalInfo:j.fakeHorizontalInfo,ref:eg,forceContainerCover:"user"===es,forceFitContain:eF,logParams:(0,n._)({awemeInfo:j,tab_name:el},en),awemeInfo:j,container:ey,scene:el,user:eT}),(0,o.jsx)("div",{className:I.default.mask}),R&&!eN&&(0,o.jsx)(O,{scene:el,awemeInfo:j,isSelf:A,uid:G,canShowUnLook:Y,canShowCooperationTag:Q,from:es,abTestData:eM,userInfo:eT}),void 0!==S&&(0,o.jsxs)("span",{className:a()(I.default.likeCount,"author-card-user-video-like",{[I.default.invisible]:eN}),children:[!T&&(0,o.jsx)(H.z,{style:{fontSize:"20px"},svg:(0,o.jsx)(k.Z,{})}),(0,o.jsx)("span",{className:I.default.countText,children:(0,w.qe)(eE.current)})]}),void 0!==M&&(0,o.jsxs)("div",{className:a()(I.default.playCount,{[I.default.invisible]:eN}),children:[(0,o.jsx)(H.z,{style:{fontSize:"20px"},svg:(0,o.jsx)(N.Z,{})}),(0,o.jsx)("span",{className:I.default.countText,children:(0,w.qe)(M)})]}),(0,o.jsx)("p",{className:a()(I.default.hidden,{[I.default.invisible]:eN}),children:null==j?void 0:j.desc}),(null==j?void 0:j.unidate)&&(0,o.jsxs)("p",{className:a()(I.default.hidden,{[I.default.invisible]:eN}),children:["发布时间：",d()((null==j?void 0:j.unidate)*1e3).format("YYYY-MM-DD HH:mm")]}),X&&(0,o.jsxs)("div",{className:a()(I.default.look,{[I.default.invisible]:eN}),children:[(0,o.jsx)(E.Z,{}),(0,o.jsx)("span",{className:I.default.text,children:"刚刚看过"})]})]}),q&&(0,o.jsx)("p",{className:a()(I.default.title,I.default.single),children:null==j?void 0:j.desc}),eo]})}},63601:function(e,t,l){l.d(t,{B:function(){return c}});var n=l(590921),o=l(874155),r=l(250751),i=l(259202);l(611542);var a=l(825211),s=l.n(a),d=l(716484),u=l(701007);function c(e){let{isUseALink:t=!0,children:l,className:a}=e,c=(0,r._)(e,["isUseALink","children","className"]);if(!t){let{onClick:e}=c;return(0,i.jsx)("div",(0,o._)((0,n._)({className:s()(d.default.aLink,a),onClick:e},c),{children:l}))}return(0,i.jsx)(u.a,(0,o._)((0,n._)({className:a},c),{children:l}))}},314373:function(e,t,l){l.d(t,{Z:function(){return r}}),l(612222);var n=l(611542),o=l(976709);let r=()=>{let[e,t]=(0,n.useState)([]),[l,r]=(0,n.useState)(!1),[i,a]=(0,n.useState)(0);return{liveList:e,updateData:(0,n.useCallback)(async()=>{r(!0);let e=await (0,o.y)({});r(!1);let{data:l,statusCode:n,logId:i}=e;0===n&&(t(l),a(i))},[]),loading:l,requestId:i}}},633825:function(e,t,l){l.d(t,{O:function(){return i}});var n=l(259202),o=l(611542),r=l(463792);let i=o.forwardRef((e,t)=>{let{active:l,children:i,className:a}=e,s=(0,o.useMemo)(()=>l?{}:{display:"none"},[l]);return(0,n.jsx)(r.w,{isActive:l,children:(0,n.jsx)("div",{className:a,ref:t,style:s,children:i})})})},295443:function(e,t,l){l.d(t,{A_:function(){return v},_0:function(){return f},_g:function(){return m},jb:function(){return c}}),l(612222),l(347885);var n=l(611542),o=l(582867),r=l.n(o),i=l(67108),a=l.n(i),s=l(837305),d=l(528557),u=l(819769);let c=e=>{let{lastTimes:t,total:l=0,actionClose:n=!1}=(0,d.$o)(e)||{};return r()(new Date).isSame(r()(t),"day")?{total:l,actionClose:n}:{total:0,actionClose:!1}},v=e=>{let{effectiveTime:t,type:l,abtestData:n}=e;if(!(l>0)||(null==n?void 0:n.pcCommentLoadLimit)||(null==n?void 0:n.pcAwePostLoadLimit)||(null==n?void 0:n.pcAweFavLoadLimit)||(null==n?void 0:n.pcCommentRepLoadLimit))return!1;{let{time:e=0}=u.Le.getConfig(u.gI.FirstInstallTime)||{};return!!(Date.now()>(e+t)*1e3)||!1}},m=e=>{let{effectiveTime:t,type:l,abtestData:o,isLogin:r}=e,[i,u]=(0,n.useState)(0),[m,f]=(0,n.useState)(!1),h=(0,n.useRef)(!1),[p,g]=(0,n.useState)(!1),_=(0,n.useRef)(v({effectiveTime:t,type:l,abtestData:o}));(0,n.useEffect)(()=>{_.current=v({effectiveTime:t,type:l,abtestData:o})},[t,l,o]),(0,n.useEffect)(()=>{var e;if([3,4].includes(null==o?void 0:null===(e=o.authorBlock)||void 0===e?void 0:e.type)&&_.current&&!r){let{total:e,actionClose:t}=c(s.LocalStorageKeys.AuthorBlock);e&&u(e),f(t)}},[o,r]),(0,n.useEffect)(()=>{var e;[3,4].includes(null==o?void 0:null===(e=o.authorBlock)||void 0===e?void 0:e.type)&&_.current&&!r&&m&&(h.current=!1)},[o,r,m]);let x=a()(()=>{g(!0)},200);return{blockNum:i,setBlockNum:u,actionCloseBlock:m,setActionCloseBlock:f,refBlockShowMore:h,handleJumpBlock:()=>{var e;[3,4].includes(null==o?void 0:null===(e=o.authorBlock)||void 0===e?void 0:e.type)&&_.current&&h.current&&(f(!0),setTimeout(()=>{(0,d.qQ)(s.LocalStorageKeys.AuthorBlock,{lastTimes:Date.now(),actionClose:!0})},200))},refLoginBlock:_,getBlockNum:c,transition:p,isShowDebounce:x,isHideDebounce:a()(()=>{g(!1)},200)}},f=e=>{let{effectiveTime:t,type:l,abtestData:o,isLogin:r,defaultCommentList:i}=e,[u,m]=(0,n.useState)(0),[f,h]=(0,n.useState)(!1),p=(0,n.useRef)(!1),[g,_]=(0,n.useState)(!1),x=(0,n.useRef)(v({effectiveTime:t,type:l,abtestData:o}));(0,n.useEffect)(()=>{x.current=v({effectiveTime:t,type:l,abtestData:o})},[t,l,o]),(0,n.useEffect)(()=>{var e;if(!(null==o?void 0:null===(e=o.commentBlock)||void 0===e?void 0:e.is_force)&&x.current&&!r){let{total:e,actionClose:t}=c(s.LocalStorageKeys.CommentBlock);e&&m(e),h(t)}},[o,r]),(0,n.useEffect)(()=>{var e,t,l;!(null==o?void 0:null===(e=o.commentBlock)||void 0===e?void 0:e.is_force)&&x.current&&!r&&f&&(p.current=!1),(null==i?void 0:i.length)>(null==o?void 0:null===(t=o.commentBlock)||void 0===t?void 0:t.comment_total)&&(null==o?void 0:null===(l=o.commentBlock)||void 0===l?void 0:l.type)&&!r&&x.current&&!f&&(p.current=!0)},[o,r,f,i]);let w=a()(()=>{_(!0)},200);return{blockNum:u,setBlockNum:m,actionCloseBlock:f,setActionCloseBlock:h,refBlockShowMore:p,handleJumpBlock:()=>{var e;!(null==o?void 0:null===(e=o.commentBlock)||void 0===e?void 0:e.is_force)&&x.current&&p.current&&(h(!0),setTimeout(()=>{(0,d.qQ)(s.LocalStorageKeys.CommentBlock,{lastTimes:Date.now(),actionClose:!0})},200))},refLoginBlock:x,getBlockNum:c,transition:g,isShowDebounce:w,isHideDebounce:a()(()=>{_(!1)},200)}}},449142:function(e,t,l){l.d(t,{I:function(){return r}});var n=l(135524),o=l(721778);let r=e=>e===n.e.XgVideo?o.qG.Xigua:o.qG.Normal},232548:function(e,t,l){l.d(t,{R:function(){return d},d:function(){return u}}),l(101060),l(347885),l(930798);var n=l(713017);let o=[],r=[],i={x:-1,y:-1},a=e=>{let t={x:e.clientX,y:e.clientY};if((0,n.G6)()&&JSON.stringify(i)===JSON.stringify(t))return;i=t;let l=e.path||e.composedPath&&e.composedPath();r.forEach((t,n)=>{if(!l.includes(t[0])&&t[0].hasEnter){var o;null===(o=t[1])||void 0===o||o.call(t,e),t[0].hasEnter=!1}}),o.forEach(t=>{if(l.includes(t[0])&&!t[0].hasEnter){var n;null===(n=t[1])||void 0===n||n.call(t,e),t[0].hasEnter=!0}})},s=e=>{let t=e.path||e.composedPath&&e.composedPath();r.forEach((l,n)=>{if(t.includes(l[0])&&l[0].hasEnter){var o;null===(o=l[1])||void 0===o||o.call(l,e),l[0].hasEnter=!1}})},d=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return 0===o.length&&0===r.length&&document.addEventListener("mousemove",a),!o.some(l=>l[0]===e&&l[1]===t)&&(o.push([e,t]),l||e.addEventListener("mouseenter",a)),()=>{let n=o.findIndex(l=>l[0]===e&&l[1]===t);-1!==n&&(l||e.removeEventListener("mouseenter",a),o.splice(n,1),0===o.length&&0===r.length&&document.removeEventListener("mousemove",a))}},u=(e,t)=>(0===o.length&&0===r.length&&document.addEventListener("mousemove",a),!r.some(l=>l[0]===e&&l[1]===t)&&(r.push([e,t]),e.addEventListener("mouseleave",s)),()=>{let l=r.findIndex(l=>l[0]===e&&l[1]===t);-1!==l&&(e.removeEventListener("mouseleave",s),r.splice(l,1),0===o.length&&0===r.length&&document.removeEventListener("mousemove",a))})},35319:function(e,t,l){l.d(t,{s:function(){return n}});let n={fastLiveHeadHover:{eventName:"fast_live_head_hover",params:{entrance_type:"",hover_show_cnt:0}},fastLiveHeadShow:{eventName:"fast_live_head_show",params:{entrance_type:"",anchor_id:"",room_id:"",show_type:""}}}},231424:function(e,t,l){l.d(t,{h:function(){return _},n:function(){return g}});var n=l(884590),o=l(307505),r=l(688095),i=l(7979);l(895858),l(612222),l(632852),l(930798),l(526789);var a=l(424515),s=l.n(a),d=l(552432),u=l.n(d),c=l(528694),v=l.n(c),m=l(886268),f=l.n(m),h=new WeakMap,p=new WeakMap;class g{add(e){return new Promise((t,l)=>{this.runList.push({param:e,resolve:t,reject:l}),(0,n._)(this,h).call(this)})}constructor({max:e,timeWait:t,runOperation:l}){(0,i._)(this,"max",0),(0,i._)(this,"runList",[]),(0,i._)(this,"runOperation",e=>{}),(0,o._)(this,h,{writable:!0,value:()=>{(0,n._)(this,p).call(this)}}),(0,o._)(this,p,{writable:!0,value:()=>{let e=this.runList;this.runList=[];let t=(null==e?void 0:e.length)||0,{max:l}=this;if(l<=0||t<=l){this.runOperation(e);return}for(let n=0;n<t;n+=l){let t=v()(e,n,n+l);if(null==t?void 0:t.length)this.runOperation(t);else break}}}),this.max=e||0;if(!l)throw Error("MultiRun runOperation 执行函数必须设置");if(!s()(l))throw Error("MultiRun runOperation 执行函数必须为函数形式");this.runOperation=l,(0,r._)(this,h,u()(()=>{(0,n._)(this,p).call(this)},t||300,{leading:!1,trailing:!0}))}}let _=(e,t)=>{f()(e,e=>{var l;null==e||null===(l=e.reject)||void 0===l||l.call(e,t||"error")})}},725925:function(e,t,l){let n;l.d(t,{NE:function(){return N},Ol:function(){return y},Ox:function(){return I},P_:function(){return b},RK:function(){return C},bF:function(){return k},et:function(){return E},v5:function(){return j}});var o=l(590921),r=l(874155);l(101060),l(632852),l(930798);var i=l(158077),a=l(425793),s=l(36003),d=l(877435),u=l(231424),c=l(886268),v=l.n(c),m=l(441413),f=l.n(m);let{COMMON_SEARCH_PARAMS:h,DISABLE_SECRET_VIDEO_PARAMS:p,CHANNEL_PC_WEB:g}=i||{},{ERROR_CODE:_}=a||{};async function x(e){let{sec_user_ids:t}=e;return(arguments.length>1&&void 0!==arguments[1]&&arguments[1],t&&0!==t.length)?await (0,d.v_)("/aweme/v1/web/im/user/info/",(0,o._)({},h),{sec_user_ids:JSON.stringify(t)}):{statusCode:_.ERROR_INVALID_PARAM}}s.HOME_DOMAIN;let w=new u.n({max:40,timeWait:100,runOperation:e=>{let t=[];v()(e,e=>{let{param:l}=e;t.push(l)}),x({sec_user_ids:f()(t)}).then(t=>{let l=null==t?void 0:t.data;if((null==t?void 0:t.status_code)===0&&(null==l?void 0:l.length)){let t={};v()(l,(e,l)=>{let n=null==e?void 0:e.sec_uid;n&&(t[n]=e)}),v()(e,e=>{var l,n;let o=null==e?void 0:e.param;o&&t[o]?null==e||null===(l=e.resolve)||void 0===l||l.call(e,t[o]):null==e||null===(n=e.reject)||void 0===n||n.call(e,"error")})}else(0,u.h)(e,"")}).catch(t=>{(0,u.h)(e,t)})}});async function C(e){return w.add(e)}var y={follow:1,1:"follow",unfollow:0,0:"unfollow"};async function b(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return await (0,d.v_)("/aweme/v1/web/commit/follow/user/",(0,o._)({},h),{user_id:e,type:t})}async function j(e){let{count:t=50,max_time:l=Date.now(),min_time:i=0,with_fstatus:a=1,source:s="coldup"}=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1];let u=n||i,c=await (0,d.U2)("/aweme/v1/web/im/spotlight/relation/",(0,r._)((0,o._)({},h),{count:t,source:s,max_time:l,min_time:u,need_remove_share_panel:!0,need_sorted_info:!0,with_fstatus:a}));return n=null==c?void 0:c.min_time,c}var k={block:1,1:"block",unblock:0,0:"unblock"},N={block:0,0:"block",allowOtherSee:1,1:"allowOtherSee",unSeeOther:2,2:"unSeeOther"};async function I(e,t,l,n){return await (0,d.v_)("/aweme/v1/web/user/block/",(0,o._)({},h),{user_id:e,sec_user_id:t,block_type:l,source:n})}async function E(e){return await (0,d.U2)("/aweme/v1/web/user/profile/other/",(0,r._)((0,o._)({},h),{source:g,sec_user_id:e}),{},void 0)}},976709:function(e,t,l){l.d(t,{y:function(){return s}});var n=l(590921),o=l(874155);l(101060),l(632852);var r=l(158077),i=l(877435);let{COMMON_SEARCH_PARAMS:a}=r||{};async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{scene:l="aweme_pc_follow_top"}=e||{};return function(e){let{data:t,status_code:l=0,logId:r}=e,{data:i=[]}=t||{};return{data:i.map(e=>{var t,l,r,i,a,s,d,u,c,v,m,f,h,p,g,_,x,w,C,y,b,j,k,N,I,E,S,L,M,T,R;let F=(null==e?void 0:null===(t=e.room)||void 0===t?void 0:t.additional_stream_url)||(null==e?void 0:e.additional_stream_url),P={authorInfo:{roomData:(0,o._)((0,n._)({},(null==e?void 0:e.room)||{}),{owner:{web_rid:null==e?void 0:e.web_rid},user_count:null==e?void 0:null===(l=e.room)||void 0===l?void 0:l.user_count_str,others:null==e?void 0:null===(r=e.room)||void 0===r?void 0:r.others,additional_stream_url:F}),roomId:null==e?void 0:null===(i=e.room)||void 0===i?void 0:i.id_str,nickname:null==e?void 0:null===(s=e.room)||void 0===s?void 0:null===(a=s.owner)||void 0===a?void 0:a.nickname,title:null==e?void 0:null===(d=e.room)||void 0===d?void 0:d.title,secUid:null==e?void 0:null===(c=e.room)||void 0===c?void 0:null===(u=c.owner)||void 0===u?void 0:u.sec_uid,desc:null==e?void 0:null===(v=e.room)||void 0===v?void 0:v.title,uid:null==e?void 0:null===(f=e.room)||void 0===f?void 0:null===(m=f.owner)||void 0===m?void 0:m.id_str},desc:null==e?void 0:null===(h=e.room)||void 0===h?void 0:h.title};return{webRid:null==e?void 0:e.web_rid,userName:null==e?void 0:null===(g=e.room)||void 0===g?void 0:null===(p=g.owner)||void 0===p?void 0:p.nickname,anchorId:null==e?void 0:null===(x=e.room)||void 0===x?void 0:null===(_=x.owner)||void 0===_?void 0:_.id_str,roomId:null==e?void 0:null===(w=e.room)||void 0===w?void 0:w.id_str,coverSrc:null==e?void 0:null===(j=e.room)||void 0===j?void 0:null===(b=j.owner)||void 0===b?void 0:null===(y=b.avatar_thumb)||void 0===y?void 0:null===(C=y.url_list)||void 0===C?void 0:C[0],gameName:null==e?void 0:e.tag_name,episodeExtra:null==e?void 0:null===(k=e.room)||void 0===k?void 0:k.episode_extra,streamType:null==e?void 0:null===(I=e.room)||void 0===I?void 0:null===(N=I.stream_url)||void 0===N?void 0:N.stream_orientation,paidLiveData:null==e?void 0:null===(E=e.room)||void 0===E?void 0:E.paid_live_data,isEcomLive:(null==e?void 0:null===(M=e.room)||void 0===M?void 0:null===(L=M.ecom_data)||void 0===L?void 0:null===(S=L.room_cart_v2)||void 0===S?void 0:S.show_cart)===1,isCarnival:(null==e?void 0:null===(R=e.room)||void 0===R?void 0:null===(T=R.assist_label)||void 0===T?void 0:T.label_type)===82,__fakeAwemeInfo:P}}),statusCode:l,logId:r}}(await (0,i.U2)("/webcast/web/feed/follow/",(0,o._)((0,n._)({},a),{scene:l}),{},void 0,t,{}))}},333886:function(e,t,l){l.d(t,{F8:function(){return v},Ts:function(){return f},Ws:function(){return c},d0:function(){return h},hl:function(){return p}});var n=l(590921),o=l(874155);l(930798),l(101060),l(632852);var r=l(158077),i=l(877435),a=l(877910);l(13351);var s=l(16866);let{COMMON_SEARCH_PARAMS:d}=r;function u(e){let{status_code:t,link_data:l=[],show_pos:n=0}=e;return{statusCode:t,data:l.map(e=>{let{link_type:t=0,count:l=0,link_list:n=[]}=e;return{type:t,count:l,links:n}}),showPos:null!=n?n:0}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,l=arguments.length>2?arguments[2]:void 0,r=await (0,i.U2)("/aweme/v1/web/seo/inner/link/",(0,o._)((0,n._)({},d),{entity_id:t,entity_type:l}),{},void 0,e,{});return(0,a.RL)(r,u)}async function v(){let{count:e=2}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments.length>1&&void 0!==arguments[1]&&arguments[1],{statusCode:-1,data:[]}}function m(e){var t;let{status_code:l,status_msg:n,data:o,log_pb:r}=e;return{statusCode:l,statusMsg:n,data:null==o?void 0:o.map(e=>({targetId:e.target_id,hitStatus:e.hit_status})),logPb:null!==(t=null==r?void 0:r.impr_id)&&void 0!==t?t:""}}async function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=await (0,i.U2)("/aweme/v1/web/seo/judge/whitelist/",(0,o._)((0,n._)({},d),{target_ids:e}),{},void 0,t,{});return(0,a.RL)(l,m)}async function h(e){let{awemeId:t,url:l}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=await (0,i.U2)("/aweme/v1/web/seo/keyword/related/",(0,o._)((0,n._)({},d),{itemIds:t,url:l}),{},void 0,r,{});return(0,a.RL)(s,e=>(0,a.Fo)(e,t))}async function p(e){let{awemeId:t="",secUid:l="",entityType:r=s.EntityType.Video,cusotmConfig:u={},entityId:c=""}=e,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,m=await (0,i.U2)("/aweme/v1/web/seo/detail/links/",(0,o._)((0,n._)({},d),{aweme_id:t,entity_type:r,sec_uid:l,entity_id:c}),{},void 0,v,{});return(0,a.RL)(m,e=>(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{links_list:l,status_code:n,log_pb:o}=e,r=[];return(l||[]).forEach(e=>{r.push({moduleSource:e.module_source,moduleTitle:e.module_title,isShowUserUrl:e.is_show_user_url,list:(0,a.TN)({awemeList:null==e?void 0:e.aweme_list,logPb:o,config:t}),linkList:(0,a.uJ)({linkList:null==e?void 0:e.link_list})})}),{statusCode:0===n?0:-1,detail:r,logPb:o&&JSON.stringify(o)}})(e,u))}},935443:function(e,t,l){l.d(t,{$:function(){return c},U:function(){return v}});var n=l(590921),o=l(874155);l(632852);var r=l(158077),i=l(877910),a=l(877435);let{COMMON_SEARCH_PARAMS:s}=r||{};function d(e){let{access_key_id:t,secret_access_key:l,status_code:n,session_token:o,expired_time:r,current_time:i}=e;return{stsToken:{AccessKeyId:t,SecretAccessKey:l,SessionToken:o,ExpiredTime:r,CurrentTime:i},statusCode:n}}function u(e){let{access_key:t,secret_key:l,status_code:n,session_token:o,expired_time:r,current_time:i,service_id:a}=e;return{serviceId:a,stsToken:{AccessKeyId:t,SecretAccessKey:l,SessionToken:o,ExpiredTime:new Date(1e3*r).toISOString(),CurrentTime:new Date(1e3*i).toISOString()},statusCode:n}}async function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=await (0,a.U2)("/aweme/v1/web/image/upload/token",(0,n._)({},s),{},void 0,e);return(0,i.RL)(t,d)}async function v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=await (0,a.U2)("/aweme/v1/web/comment/upload/auth/",(0,o._)((0,n._)({},s),{content_type:0}),{},void 0,e);return(0,i.RL)(t,u)}},268176:function(e,t,l){var n=l(590921),o=l(874155),r=l(259202),i=l(611542);let a=(0,i.forwardRef)((e,t)=>(0,r.jsx)("svg",(0,o._)((0,n._)({width:32,height:32,fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),{children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 0C7.163 0 0 7.163 0 16c0 8.836 7.163 16 16 16 8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16zm-1.944 9.594c-1.062-.725-2.502.036-2.502 1.322v10.168c0 1.286 1.44 2.046 2.502 1.321l7.06-4.82a1.92 1.92 0 0 0 0-3.171l-7.06-4.82z",fill:"#fff"})})));t.Z=a}}]);